!function(t, e) {
    function i(t) {
        var e = fe[t] = {};
        return J.each(t.split(ee), function(t, i) {
            e[i] = !0
        }
        ),
        e
    }
    function n(t, i, n) {
        if (n === e && 1 === t.nodeType) {
            var s = "data-" + i.replace(ge, "-$1").toLowerCase();
            if (n = t.getAttribute(s),
            "string" == typeof n) {
                try {
                    n = "true" === n ? !0 : "false" === n ? !1 : "null" === n ? null  : +n + "" === n ? +n : me.test(n) ? J.parseJSON(n) : n
                } catch (a) {}
                J.data(t, i, n)
            } else
                n = e
        }
        return n
    }
    function s(t) {
        var e;
        for (e in t)
            if (("data" !== e || !J.isEmptyObject(t[e])) && "toJSON" !== e)
                return !1;
        return !0
    }
    function a() {
        return !1
    }
    function r() {
        return !0
    }
    function o(t) {
        return !t || !t.parentNode || 11 === t.parentNode.nodeType
    }
    function l(t, e) {
        do
            t = t[e];
        while (t && 1 !== t.nodeType);return t
    }
    function c(t, e, i) {
        if (e = e || 0,
        J.isFunction(e))
            return J.grep(t, function(t, n) {
                var s = !!e.call(t, n, t);
                return s === i
            }
            );
        if (e.nodeType)
            return J.grep(t, function(t) {
                return t === e === i
            }
            );
        if ("string" == typeof e) {
            var n = J.grep(t, function(t) {
                return 1 === t.nodeType
            }
            );
            if (Ne.test(e))
                return J.filter(e, n, !i);
            e = J.filter(e, n)
        }
        return J.grep(t, function(t) {
            return J.inArray(t, e) >= 0 === i
        }
        )
    }
    function d(t) {
        var e = Re.split("|")
          , i = t.createDocumentFragment();
        if (i.createElement)
            for (; e.length; )
                i.createElement(e.pop());
        return i
    }
    function h(t, e) {
        return t.getElementsByTagName(e)[0] || t.appendChild(t.ownerDocument.createElement(e))
    }
    function u(t, e) {
        if (1 === e.nodeType && J.hasData(t)) {
            var i, n, s, a = J._data(t), r = J._data(e, a), o = a.events;
            if (o) {
                delete r.handle,
                r.events = {};
                for (i in o)
                    for (n = 0,
                    s = o[i].length; s > n; n++)
                        J.event.add(e, i, o[i][n])
            }
            r.data && (r.data = J.extend({}, r.data))
        }
    }
    function p(t, e) {
        var i;
        1 === e.nodeType && (e.clearAttributes && e.clearAttributes(),
        e.mergeAttributes && e.mergeAttributes(t),
        i = e.nodeName.toLowerCase(),
        "object" === i ? (e.parentNode && (e.outerHTML = t.outerHTML),
        J.support.html5Clone && t.innerHTML && !J.trim(e.innerHTML) && (e.innerHTML = t.innerHTML)) : "input" === i && Xe.test(t.type) ? (e.defaultChecked = e.checked = t.checked,
        e.value !== t.value && (e.value = t.value)) : "option" === i ? e.selected = t.defaultSelected : "input" === i || "textarea" === i ? e.defaultValue = t.defaultValue : "script" === i && e.text !== t.text && (e.text = t.text),
        e.removeAttribute(J.expando))
    }
    function f(t) {
        return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName("*") : "undefined" != typeof t.querySelectorAll ? t.querySelectorAll("*") : []
    }
    function m(t) {
        Xe.test(t.type) && (t.defaultChecked = t.checked)
    }
    function g(t, e) {
        if (e in t)
            return e;
        for (var i = e.charAt(0).toUpperCase() + e.slice(1), n = e, s = vi.length; s--; )
            if (e = vi[s] + i,
            e in t)
                return e;
        return n
    }
    function v(t, e) {
        return t = e || t,
        "none" === J.css(t, "display") || !J.contains(t.ownerDocument, t)
    }
    function b(t, e) {
        for (var i, n, s = [], a = 0, r = t.length; r > a; a++)
            i = t[a],
            i.style && (s[a] = J._data(i, "olddisplay"),
            e ? (!s[a] && "none" === i.style.display && (i.style.display = ""),
            "" === i.style.display && v(i) && (s[a] = J._data(i, "olddisplay", w(i.nodeName)))) : (n = ii(i, "display"),
            !s[a] && "none" !== n && J._data(i, "olddisplay", n)));
        for (a = 0; r > a; a++)
            i = t[a],
            i.style && (e && "none" !== i.style.display && "" !== i.style.display || (i.style.display = e ? s[a] || "" : "none"));
        return t
    }
    function _(t, e, i) {
        var n = di.exec(e);
        return n ? Math.max(0, n[1] - (i || 0)) + (n[2] || "px") : e
    }
    function y(t, e, i, n) {
        for (var s = i === (n ? "border" : "content") ? 4 : "width" === e ? 1 : 0, a = 0; 4 > s; s += 2)
            "margin" === i && (a += J.css(t, i + gi[s], !0)),
            n ? ("content" === i && (a -= parseFloat(ii(t, "padding" + gi[s])) || 0),
            "margin" !== i && (a -= parseFloat(ii(t, "border" + gi[s] + "Width")) || 0)) : (a += parseFloat(ii(t, "padding" + gi[s])) || 0,
            "padding" !== i && (a += parseFloat(ii(t, "border" + gi[s] + "Width")) || 0));
        return a
    }
    function x(t, e, i) {
        var n = "width" === e ? t.offsetWidth : t.offsetHeight
          , s = !0
          , a = J.support.boxSizing && "border-box" === J.css(t, "boxSizing");
        if (0 >= n || null  == n) {
            if (n = ii(t, e),
            (0 > n || null  == n) && (n = t.style[e]),
            hi.test(n))
                return n;
            s = a && (J.support.boxSizingReliable || n === t.style[e]),
            n = parseFloat(n) || 0
        }
        return n + y(t, e, i || (a ? "border" : "content"), s) + "px"
    }
    function w(t) {
        if (pi[t])
            return pi[t];
        var e = J("<" + t + ">").appendTo(j.body)
          , i = e.css("display");
        return e.remove(),
        ("none" === i || "" === i) && (ni = j.body.appendChild(ni || J.extend(j.createElement("iframe"), {
            frameBorder: 0,
            width: 0,
            height: 0
        })),
        si && ni.createElement || (si = (ni.contentWindow || ni.contentDocument).document,
        si.write("<!doctype html><html><body>"),
        si.close()),
        e = si.body.appendChild(si.createElement(t)),
        i = ii(e, "display"),
        j.body.removeChild(ni)),
        pi[t] = i,
        i
    }
    function k(t, e, i, n) {
        var s;
        if (J.isArray(e))
            J.each(e, function(e, s) {
                i || yi.test(t) ? n(t, s) : k(t + "[" + ("object" == typeof s ? e : "") + "]", s, i, n)
            }
            );
        else if (i || "object" !== J.type(e))
            n(t, e);
        else
            for (s in e)
                k(t + "[" + s + "]", e[s], i, n)
    }
    function C(t) {
        return function(e, i) {
            "string" != typeof e && (i = e,
            e = "*");
            var n, s, a, r = e.toLowerCase().split(ee), o = 0, l = r.length;
            if (J.isFunction(i))
                for (; l > o; o++)
                    n = r[o],
                    a = /^\+/.test(n),
                    a && (n = n.substr(1) || "*"),
                    s = t[n] = t[n] || [],
                    s[a ? "unshift" : "push"](i)
        }
    }
    function T(t, i, n, s, a, r) {
        a = a || i.dataTypes[0],
        r = r || {},
        r[a] = !0;
        for (var o, l = t[a], c = 0, d = l ? l.length : 0, h = t === Ni; d > c && (h || !o); c++)
            o = l[c](i, n, s),
            "string" == typeof o && (!h || r[o] ? o = e : (i.dataTypes.unshift(o),
            o = T(t, i, n, s, o, r)));
        return (h || !o) && !r["*"] && (o = T(t, i, n, s, "*", r)),
        o
    }
    function S(t, i) {
        var n, s, a = J.ajaxSettings.flatOptions || {};
        for (n in i)
            i[n] !== e && ((a[n] ? t : s || (s = {}))[n] = i[n]);
        s && J.extend(!0, t, s)
    }
    function D(t, i, n) {
        var s, a, r, o, l = t.contents, c = t.dataTypes, d = t.responseFields;
        for (a in d)
            a in n && (i[d[a]] = n[a]);
        for (; "*" === c[0]; )
            c.shift(),
            s === e && (s = t.mimeType || i.getResponseHeader("content-type"));
        if (s)
            for (a in l)
                if (l[a] && l[a].test(s)) {
                    c.unshift(a);
                    break
                }
        if (c[0] in n)
            r = c[0];
        else {
            for (a in n) {
                if (!c[0] || t.converters[a + " " + c[0]]) {
                    r = a;
                    break
                }
                o || (o = a)
            }
            r = r || o
        }
        return r ? (r !== c[0] && c.unshift(r),
        n[r]) : void 0
    }
    function $(t, e) {
        var i, n, s, a, r = t.dataTypes.slice(), o = r[0], l = {}, c = 0;
        if (t.dataFilter && (e = t.dataFilter(e, t.dataType)),
        r[1])
            for (i in t.converters)
                l[i.toLowerCase()] = t.converters[i];
        for (; s = r[++c]; )
            if ("*" !== s) {
                if ("*" !== o && o !== s) {
                    if (i = l[o + " " + s] || l["* " + s],
                    !i)
                        for (n in l)
                            if (a = n.split(" "),
                            a[1] === s && (i = l[o + " " + a[0]] || l["* " + a[0]])) {
                                i === !0 ? i = l[n] : l[n] !== !0 && (s = a[0],
                                r.splice(c--, 0, s));
                                break
                            }
                    if (i !== !0)
                        if (i && t["throws"])
                            e = i(e);
                        else
                            try {
                                e = i(e)
                            } catch (d) {
                                return {
                                    state: "parsererror",
                                    error: i ? d : "No conversion from " + o + " to " + s
                                }
                            }
                }
                o = s
            }
        return {
            state: "success",
            data: e
        }
    }
    function E() {
        try {
            return new t.XMLHttpRequest
        } catch (e) {}
    }
    function q() {
        try {
            return new t.ActiveXObject("Microsoft.XMLHTTP")
        } catch (e) {}
    }
    function F() {
        return setTimeout(function() {
            Vi = e
        }
        , 0),
        Vi = J.now()
    }
    function I(t, e) {
        J.each(e, function(e, i) {
            for (var n = (Zi[e] || []).concat(Zi["*"]), s = 0, a = n.length; a > s; s++)
                if (n[s].call(t, e, i))
                    return
        }
        )
    }
    function M(t, e, i) {
        var n, s = 0, a = Ji.length, r = J.Deferred().always(function() {
            delete o.elem
        }
        ), o = function() {
            for (var e = Vi || F(), i = Math.max(0, l.startTime + l.duration - e), n = 1 - (i / l.duration || 0), s = 0, a = l.tweens.length; a > s; s++)
                l.tweens[s].run(n);
            return r.notifyWith(t, [l, n, i]),
            1 > n && a ? i : (r.resolveWith(t, [l]),
            !1)
        }
        , l = r.promise({
            elem: t,
            props: J.extend({}, e),
            opts: J.extend(!0, {
                specialEasing: {}
            }, i),
            originalProperties: e,
            originalOptions: i,
            startTime: Vi || F(),
            duration: i.duration,
            tweens: [],
            createTween: function(e, i) {
                var n = J.Tween(t, l.opts, e, i, l.opts.specialEasing[e] || l.opts.easing);
                return l.tweens.push(n),
                n
            },
            stop: function(e) {
                for (var i = 0, n = e ? l.tweens.length : 0; n > i; i++)
                    l.tweens[i].run(1);
                return e ? r.resolveWith(t, [l, e]) : r.rejectWith(t, [l, e]),
                this
            }
        }), c = l.props;
        for (A(c, l.opts.specialEasing); a > s; s++)
            if (n = Ji[s].call(l, t, c, l.opts))
                return n;
        return I(l, c),
        J.isFunction(l.opts.start) && l.opts.start.call(t, l),
        J.fx.timer(J.extend(o, {
            anim: l,
            queue: l.opts.queue,
            elem: t
        })),
        l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always)
    }
    function A(t, e) {
        var i, n, s, a, r;
        for (i in t)
            if (n = J.camelCase(i),
            s = e[n],
            a = t[i],
            J.isArray(a) && (s = a[1],
            a = t[i] = a[0]),
            i !== n && (t[n] = a,
            delete t[i]),
            r = J.cssHooks[n],
            r && "expand" in r) {
                a = r.expand(a),
                delete t[n];
                for (i in a)
                    i in t || (t[i] = a[i],
                    e[i] = s)
            } else
                e[n] = s
    }
    function P(t, e, i) {
        var n, s, a, r, o, l, c, d, h = this, u = t.style, p = {}, f = [], m = t.nodeType && v(t);
        i.queue || (c = J._queueHooks(t, "fx"),
        null  == c.unqueued && (c.unqueued = 0,
        d = c.empty.fire,
        c.empty.fire = function() {
            c.unqueued || d()
        }
        ),
        c.unqueued++,
        h.always(function() {
            h.always(function() {
                c.unqueued--,
                J.queue(t, "fx").length || c.empty.fire()
            }
            )
        }
        )),
        1 === t.nodeType && ("height" in e || "width" in e) && (i.overflow = [u.overflow, u.overflowX, u.overflowY],
        "inline" === J.css(t, "display") && "none" === J.css(t, "float") && (J.support.inlineBlockNeedsLayout && "inline" !== w(t.nodeName) ? u.zoom = 1 : u.display = "inline-block")),
        i.overflow && (u.overflow = "hidden",
        J.support.shrinkWrapBlocks || h.done(function() {
            u.overflow = i.overflow[0],
            u.overflowX = i.overflow[1],
            u.overflowY = i.overflow[2]
        }
        ));
        for (n in e)
            if (a = e[n],
            Xi.exec(a)) {
                if (delete e[n],
                a === (m ? "hide" : "show"))
                    continue;f.push(n)
            }
        if (r = f.length)
            for (o = J._data(t, "fxshow") || J._data(t, "fxshow", {}),
            m ? J(t).show() : h.done(function() {
                J(t).hide()
            }
            ),
            h.done(function() {
                var e;
                J.removeData(t, "fxshow", !0);
                for (e in p)
                    J.style(t, e, p[e])
            }
            ),
            n = 0; r > n; n++)
                s = f[n],
                l = h.createTween(s, m ? o[s] : 0),
                p[s] = o[s] || J.style(t, s),
                s in o || (o[s] = l.start,
                m && (l.end = l.start,
                l.start = "width" === s || "height" === s ? 1 : 0))
    }
    function N(t, e, i, n, s) {
        return new N.prototype.init(t,e,i,n,s)
    }
    function O(t, e) {
        var i, n = {
            height: t
        }, s = 0;
        for (e = e ? 1 : 0; 4 > s; s += 2 - e)
            i = gi[s],
            n["margin" + i] = n["padding" + i] = t;
        return e && (n.opacity = n.width = t),
        n
    }
    function z(t) {
        return J.isWindow(t) ? t : 9 === t.nodeType ? t.defaultView || t.parentWindow : !1
    }
    var R, L, j = t.document, H = t.location, B = t.navigator, W = t.jQuery, U = t.$, Y = Array.prototype.push, V = Array.prototype.slice, K = Array.prototype.indexOf, X = Object.prototype.toString, G = Object.prototype.hasOwnProperty, Q = String.prototype.trim, J = function(t, e) {
        return new J.fn.init(t,e,R)
    }
    , Z = /[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source, te = /\S/, ee = /\s+/, ie = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, ne = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/, se = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, ae = /^[\],:{}\s]*$/, re = /(?:^|:|,)(?:\s*\[)+/g, oe = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g, le = /"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g, ce = /^-ms-/, de = /-([\da-z])/gi, he = function(t, e) {
        return (e + "").toUpperCase()
    }
    , ue = function() {
        j.addEventListener ? (j.removeEventListener("DOMContentLoaded", ue, !1),
        J.ready()) : "complete" === j.readyState && (j.detachEvent("onreadystatechange", ue),
        J.ready())
    }
    , pe = {};
    J.fn = J.prototype = {
        constructor: J,
        init: function(t, i, n) {
            var s, a, r;
            if (!t)
                return this;
            if (t.nodeType)
                return this.context = this[0] = t,
                this.length = 1,
                this;
            if ("string" == typeof t) {
                if (s = "<" === t.charAt(0) && ">" === t.charAt(t.length - 1) && t.length >= 3 ? [null , t, null ] : ne.exec(t),
                s && (s[1] || !i)) {
                    if (s[1])
                        return i = i instanceof J ? i[0] : i,
                        r = i && i.nodeType ? i.ownerDocument || i : j,
                        t = J.parseHTML(s[1], r, !0),
                        se.test(s[1]) && J.isPlainObject(i) && this.attr.call(t, i, !0),
                        J.merge(this, t);
                    if (a = j.getElementById(s[2]),
                    a && a.parentNode) {
                        if (a.id !== s[2])
                            return n.find(t);
                        this.length = 1,
                        this[0] = a
                    }
                    return this.context = j,
                    this.selector = t,
                    this
                }
                return !i || i.jquery ? (i || n).find(t) : this.constructor(i).find(t)
            }
            return J.isFunction(t) ? n.ready(t) : (t.selector !== e && (this.selector = t.selector,
            this.context = t.context),
            J.makeArray(t, this))
        },
        selector: "",
        jquery: "1.8.2",
        length: 0,
        size: function() {
            return this.length
        },
        toArray: function() {
            return V.call(this)
        },
        get: function(t) {
            return null  == t ? this.toArray() : 0 > t ? this[this.length + t] : this[t]
        },
        pushStack: function(t, e, i) {
            var n = J.merge(this.constructor(), t);
            return n.prevObject = this,
            n.context = this.context,
            "find" === e ? n.selector = this.selector + (this.selector ? " " : "") + i : e && (n.selector = this.selector + "." + e + "(" + i + ")"),
            n
        },
        each: function(t, e) {
            return J.each(this, t, e)
        },
        ready: function(t) {
            return J.ready.promise().done(t),
            this
        },
        eq: function(t) {
            return t = +t,
            -1 === t ? this.slice(t) : this.slice(t, t + 1)
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq(-1)
        },
        slice: function() {
            return this.pushStack(V.apply(this, arguments), "slice", V.call(arguments).join(","))
        },
        map: function(t) {
            return this.pushStack(J.map(this, function(e, i) {
                return t.call(e, i, e)
            }
            ))
        },
        end: function() {
            return this.prevObject || this.constructor(null )
        },
        push: Y,
        sort: [].sort,
        splice: [].splice
    },
    J.fn.init.prototype = J.fn,
    J.extend = J.fn.extend = function() {
        var t, i, n, s, a, r, o = arguments[0] || {}, l = 1, c = arguments.length, d = !1;
        for ("boolean" == typeof o && (d = o,
        o = arguments[1] || {},
        l = 2),
        "object" != typeof o && !J.isFunction(o) && (o = {}),
        c === l && (o = this,
        --l); c > l; l++)
            if (null  != (t = arguments[l]))
                for (i in t)
                    n = o[i],
                    s = t[i],
                    o !== s && (d && s && (J.isPlainObject(s) || (a = J.isArray(s))) ? (a ? (a = !1,
                    r = n && J.isArray(n) ? n : []) : r = n && J.isPlainObject(n) ? n : {},
                    o[i] = J.extend(d, r, s)) : s !== e && (o[i] = s));
        return o
    }
    ,
    J.extend({
        noConflict: function(e) {
            return t.$ === J && (t.$ = U),
            e && t.jQuery === J && (t.jQuery = W),
            J
        },
        isReady: !1,
        readyWait: 1,
        holdReady: function(t) {
            t ? J.readyWait++ : J.ready(!0)
        },
        ready: function(t) {
            if (t === !0 ? !--J.readyWait : !J.isReady) {
                if (!j.body)
                    return setTimeout(J.ready, 1);
                J.isReady = !0,
                t !== !0 && --J.readyWait > 0 || (L.resolveWith(j, [J]),
                J.fn.trigger && J(j).trigger("ready").off("ready"))
            }
        },
        isFunction: function(t) {
            return "function" === J.type(t)
        },
        isArray: Array.isArray || function(t) {
            return "array" === J.type(t)
        }
        ,
        isWindow: function(t) {
            return null  != t && t == t.window
        },
        isNumeric: function(t) {
            return !isNaN(parseFloat(t)) && isFinite(t)
        },
        type: function(t) {
            return null  == t ? String(t) : pe[X.call(t)] || "object"
        },
        isPlainObject: function(t) {
            if (!t || "object" !== J.type(t) || t.nodeType || J.isWindow(t))
                return !1;
            try {
                if (t.constructor && !G.call(t, "constructor") && !G.call(t.constructor.prototype, "isPrototypeOf"))
                    return !1
            } catch (i) {
                return !1
            }
            var n;
            for (n in t)
                ;
            return n === e || G.call(t, n)
        },
        isEmptyObject: function(t) {
            var e;
            for (e in t)
                return !1;
            return !0
        },
        error: function(t) {
            throw new Error(t)
        },
        parseHTML: function(t, e, i) {
            var n;
            return t && "string" == typeof t ? ("boolean" == typeof e && (i = e,
            e = 0),
            e = e || j,
            (n = se.exec(t)) ? [e.createElement(n[1])] : (n = J.buildFragment([t], e, i ? null  : []),
            J.merge([], (n.cacheable ? J.clone(n.fragment) : n.fragment).childNodes))) : null 
        },
        parseJSON: function(e) {
            return e && "string" == typeof e ? (e = J.trim(e),
            t.JSON && t.JSON.parse ? t.JSON.parse(e) : ae.test(e.replace(oe, "@").replace(le, "]").replace(re, "")) ? new Function("return " + e)() : void J.error("Invalid JSON: " + e)) : null 
        },
        parseXML: function(i) {
            var n, s;
            if (!i || "string" != typeof i)
                return null ;
            try {
                t.DOMParser ? (s = new DOMParser,
                n = s.parseFromString(i, "text/xml")) : (n = new ActiveXObject("Microsoft.XMLDOM"),
                n.async = "false",
                n.loadXML(i))
            } catch (a) {
                n = e
            }
            return (!n || !n.documentElement || n.getElementsByTagName("parsererror").length) && J.error("Invalid XML: " + i),
            n
        },
        noop: function() {},
        globalEval: function(e) {
            e && te.test(e) && (t.execScript || function(e) {
                t.eval.call(t, e)
            }
            )(e)
        },
        camelCase: function(t) {
            return t.replace(ce, "ms-").replace(de, he)
        },
        nodeName: function(t, e) {
            return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase()
        },
        each: function(t, i, n) {
            var s, a = 0, r = t.length, o = r === e || J.isFunction(t);
            if (n)
                if (o) {
                    for (s in t)
                        if (i.apply(t[s], n) === !1)
                            break
                } else
                    for (; r > a && i.apply(t[a++], n) !== !1; )
                        ;
            else if (o) {
                for (s in t)
                    if (i.call(t[s], s, t[s]) === !1)
                        break
            } else
                for (; r > a && i.call(t[a], a, t[a++]) !== !1; )
                    ;
            return t
        },
        trim: Q && !Q.call(" ") ? function(t) {
            return null  == t ? "" : Q.call(t)
        }
         : function(t) {
            return null  == t ? "" : (t + "").replace(ie, "")
        }
        ,
        makeArray: function(t, e) {
            var i, n = e || [];
            return null  != t && (i = J.type(t),
            null  == t.length || "string" === i || "function" === i || "regexp" === i || J.isWindow(t) ? Y.call(n, t) : J.merge(n, t)),
            n
        },
        inArray: function(t, e, i) {
            var n;
            if (e) {
                if (K)
                    return K.call(e, t, i);
                for (n = e.length,
                i = i ? 0 > i ? Math.max(0, n + i) : i : 0; n > i; i++)
                    if (i in e && e[i] === t)
                        return i
            }
            return -1
        },
        merge: function(t, i) {
            var n = i.length
              , s = t.length
              , a = 0;
            if ("number" == typeof n)
                for (; n > a; a++)
                    t[s++] = i[a];
            else
                for (; i[a] !== e; )
                    t[s++] = i[a++];
            return t.length = s,
            t
        },
        grep: function(t, e, i) {
            var n, s = [], a = 0, r = t.length;
            for (i = !!i; r > a; a++)
                n = !!e(t[a], a),
                i !== n && s.push(t[a]);
            return s
        },
        map: function(t, i, n) {
            var s, a, r = [], o = 0, l = t.length, c = t instanceof J || l !== e && "number" == typeof l && (l > 0 && t[0] && t[l - 1] || 0 === l || J.isArray(t));
            if (c)
                for (; l > o; o++)
                    s = i(t[o], o, n),
                    null  != s && (r[r.length] = s);
            else
                for (a in t)
                    s = i(t[a], a, n),
                    null  != s && (r[r.length] = s);
            return r.concat.apply([], r)
        },
        guid: 1,
        proxy: function(t, i) {
            var n, s, a;
            return "string" == typeof i && (n = t[i],
            i = t,
            t = n),
            J.isFunction(t) ? (s = V.call(arguments, 2),
            a = function() {
                return t.apply(i, s.concat(V.call(arguments)))
            }
            ,
            a.guid = t.guid = t.guid || J.guid++,
            a) : e
        },
        access: function(t, i, n, s, a, r, o) {
            var l, c = null  == n, d = 0, h = t.length;
            if (n && "object" == typeof n) {
                for (d in n)
                    J.access(t, i, d, n[d], 1, r, s);
                a = 1
            } else if (s !== e) {
                if (l = o === e && J.isFunction(s),
                c && (l ? (l = i,
                i = function(t, e, i) {
                    return l.call(J(t), i)
                }
                ) : (i.call(t, s),
                i = null )),
                i)
                    for (; h > d; d++)
                        i(t[d], n, l ? s.call(t[d], d, i(t[d], n)) : s, o);
                a = 1
            }
            return a ? t : c ? i.call(t) : h ? i(t[0], n) : r
        },
        now: function() {
            return (new Date).getTime()
        }
    }),
    J.ready.promise = function(e) {
        if (!L)
            if (L = J.Deferred(),
            "complete" === j.readyState)
                setTimeout(J.ready, 1);
            else if (j.addEventListener)
                j.addEventListener("DOMContentLoaded", ue, !1),
                t.addEventListener("load", J.ready, !1);
            else {
                j.attachEvent("onreadystatechange", ue),
                t.attachEvent("onload", J.ready);
                var i = !1;
                try {
                    i = null  == t.frameElement && j.documentElement
                } catch (n) {}
                i && i.doScroll && function s() {
                    if (!J.isReady) {
                        try {
                            i.doScroll("left")
                        } catch (t) {
                            return setTimeout(s, 50)
                        }
                        J.ready()
                    }
                }
                ()
            }
        return L.promise(e)
    }
    ,
    J.each("Boolean Number String Function Array Date RegExp Object".split(" "), function(t, e) {
        pe["[object " + e + "]"] = e.toLowerCase()
    }
    ),
    R = J(j);
    var fe = {};
    J.Callbacks = function(t) {
        t = "string" == typeof t ? fe[t] || i(t) : J.extend({}, t);
        var n, s, a, r, o, l, c = [], d = !t.once && [], h = function(e) {
            for (n = t.memory && e,
            s = !0,
            l = r || 0,
            r = 0,
            o = c.length,
            a = !0; c && o > l; l++)
                if (c[l].apply(e[0], e[1]) === !1 && t.stopOnFalse) {
                    n = !1;
                    break
                }
            a = !1,
            c && (d ? d.length && h(d.shift()) : n ? c = [] : u.disable())
        }
        , u = {
            add: function() {
                if (c) {
                    var e = c.length;
                    !function i(e) {
                        J.each(e, function(e, n) {
                            var s = J.type(n);
                            "function" !== s || t.unique && u.has(n) ? n && n.length && "string" !== s && i(n) : c.push(n)
                        }
                        )
                    }
                    (arguments),
                    a ? o = c.length : n && (r = e,
                    h(n))
                }
                return this
            },
            remove: function() {
                return c && J.each(arguments, function(t, e) {
                    for (var i; (i = J.inArray(e, c, i)) > -1; )
                        c.splice(i, 1),
                        a && (o >= i && o--,
                        l >= i && l--)
                }
                ),
                this
            },
            has: function(t) {
                return J.inArray(t, c) > -1
            },
            empty: function() {
                return c = [],
                this
            },
            disable: function() {
                return c = d = n = e,
                this
            },
            disabled: function() {
                return !c
            },
            lock: function() {
                return d = e,
                n || u.disable(),
                this
            },
            locked: function() {
                return !d
            },
            fireWith: function(t, e) {
                return e = e || [],
                e = [t, e.slice ? e.slice() : e],
                c && (!s || d) && (a ? d.push(e) : h(e)),
                this
            },
            fire: function() {
                return u.fireWith(this, arguments),
                this
            },
            fired: function() {
                return !!s
            }
        };
        return u
    }
    ,
    J.extend({
        Deferred: function(t) {
            var e = [["resolve", "done", J.Callbacks("once memory"), "resolved"], ["reject", "fail", J.Callbacks("once memory"), "rejected"], ["notify", "progress", J.Callbacks("memory")]]
              , i = "pending"
              , n = {
                state: function() {
                    return i
                },
                always: function() {
                    return s.done(arguments).fail(arguments),
                    this
                },
                then: function() {
                    var t = arguments;
                    return J.Deferred(function(i) {
                        J.each(e, function(e, n) {
                            var a = n[0]
                              , r = t[e];
                            s[n[1]](J.isFunction(r) ? function() {
                                var t = r.apply(this, arguments);
                                t && J.isFunction(t.promise) ? t.promise().done(i.resolve).fail(i.reject).progress(i.notify) : i[a + "With"](this === s ? i : this, [t])
                            }
                             : i[a])
                        }
                        ),
                        t = null 
                    }
                    ).promise()
                },
                promise: function(t) {
                    return null  != t ? J.extend(t, n) : n
                }
            }
              , s = {};
            return n.pipe = n.then,
            J.each(e, function(t, a) {
                var r = a[2]
                  , o = a[3];
                n[a[1]] = r.add,
                o && r.add(function() {
                    i = o
                }
                , e[1 ^ t][2].disable, e[2][2].lock),
                s[a[0]] = r.fire,
                s[a[0] + "With"] = r.fireWith
            }
            ),
            n.promise(s),
            t && t.call(s, s),
            s
        },
        when: function(t) {
            var e, i, n, s = 0, a = V.call(arguments), r = a.length, o = 1 !== r || t && J.isFunction(t.promise) ? r : 0, l = 1 === o ? t : J.Deferred(), c = function(t, i, n) {
                return function(s) {
                    i[t] = this,
                    n[t] = arguments.length > 1 ? V.call(arguments) : s,
                    n === e ? l.notifyWith(i, n) : --o || l.resolveWith(i, n)
                }
            }
            ;
            if (r > 1)
                for (e = new Array(r),
                i = new Array(r),
                n = new Array(r); r > s; s++)
                    a[s] && J.isFunction(a[s].promise) ? a[s].promise().done(c(s, n, a)).fail(l.reject).progress(c(s, i, e)) : --o;
            return o || l.resolveWith(n, a),
            l.promise()
        }
    }),
    J.support = function() {
        var e, i, n, s, a, r, o, l, c, d, h, u = j.createElement("div");
        if (u.setAttribute("className", "t"),
        u.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",
        i = u.getElementsByTagName("*"),
        n = u.getElementsByTagName("a")[0],
        n.style.cssText = "top:1px;float:left;opacity:.5",
        !i || !i.length)
            return {};
        s = j.createElement("select"),
        a = s.appendChild(j.createElement("option")),
        r = u.getElementsByTagName("input")[0],
        e = {
            leadingWhitespace: 3 === u.firstChild.nodeType,
            tbody: !u.getElementsByTagName("tbody").length,
            htmlSerialize: !!u.getElementsByTagName("link").length,
            style: /top/.test(n.getAttribute("style")),
            hrefNormalized: "/a" === n.getAttribute("href"),
            opacity: /^0.5/.test(n.style.opacity),
            cssFloat: !!n.style.cssFloat,
            checkOn: "on" === r.value,
            optSelected: a.selected,
            getSetAttribute: "t" !== u.className,
            enctype: !!j.createElement("form").enctype,
            html5Clone: "<:nav></:nav>" !== j.createElement("nav").cloneNode(!0).outerHTML,
            boxModel: "CSS1Compat" === j.compatMode,
            submitBubbles: !0,
            changeBubbles: !0,
            focusinBubbles: !1,
            deleteExpando: !0,
            noCloneEvent: !0,
            inlineBlockNeedsLayout: !1,
            shrinkWrapBlocks: !1,
            reliableMarginRight: !0,
            boxSizingReliable: !0,
            pixelPosition: !1
        },
        r.checked = !0,
        e.noCloneChecked = r.cloneNode(!0).checked,
        s.disabled = !0,
        e.optDisabled = !a.disabled;
        try {
            delete u.test
        } catch (p) {
            e.deleteExpando = !1
        }
        if (!u.addEventListener && u.attachEvent && u.fireEvent && (u.attachEvent("onclick", h = function() {
            e.noCloneEvent = !1
        }
        ),
        u.cloneNode(!0).fireEvent("onclick"),
        u.detachEvent("onclick", h)),
        r = j.createElement("input"),
        r.value = "t",
        r.setAttribute("type", "radio"),
        e.radioValue = "t" === r.value,
        r.setAttribute("checked", "checked"),
        r.setAttribute("name", "t"),
        u.appendChild(r),
        o = j.createDocumentFragment(),
        o.appendChild(u.lastChild),
        e.checkClone = o.cloneNode(!0).cloneNode(!0).lastChild.checked,
        e.appendChecked = r.checked,
        o.removeChild(r),
        o.appendChild(u),
        u.attachEvent)
            for (c in {
                submit: !0,
                change: !0,
                focusin: !0
            })
                l = "on" + c,
                d = l in u,
                d || (u.setAttribute(l, "return;"),
                d = "function" == typeof u[l]),
                e[c + "Bubbles"] = d;
        return J(function() {
            var i, n, s, a, r = "padding:0;margin:0;border:0;display:block;overflow:hidden;", o = j.getElementsByTagName("body")[0];
            o && (i = j.createElement("div"),
            i.style.cssText = "visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",
            o.insertBefore(i, o.firstChild),
            n = j.createElement("div"),
            i.appendChild(n),
            n.innerHTML = "<table><tr><td></td><td>t</td></tr></table>",
            s = n.getElementsByTagName("td"),
            s[0].style.cssText = "padding:0;margin:0;border:0;display:none",
            d = 0 === s[0].offsetHeight,
            s[0].style.display = "",
            s[1].style.display = "none",
            e.reliableHiddenOffsets = d && 0 === s[0].offsetHeight,
            n.innerHTML = "",
            n.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
            e.boxSizing = 4 === n.offsetWidth,
            e.doesNotIncludeMarginInBodyOffset = 1 !== o.offsetTop,
            t.getComputedStyle && (e.pixelPosition = "1%" !== (t.getComputedStyle(n, null ) || {}).top,
            e.boxSizingReliable = "4px" === (t.getComputedStyle(n, null ) || {
                width: "4px"
            }).width,
            a = j.createElement("div"),
            a.style.cssText = n.style.cssText = r,
            a.style.marginRight = a.style.width = "0",
            n.style.width = "1px",
            n.appendChild(a),
            e.reliableMarginRight = !parseFloat((t.getComputedStyle(a, null ) || {}).marginRight)),
            "undefined" != typeof n.style.zoom && (n.innerHTML = "",
            n.style.cssText = r + "width:1px;padding:1px;display:inline;zoom:1",
            e.inlineBlockNeedsLayout = 3 === n.offsetWidth,
            n.style.display = "block",
            n.style.overflow = "visible",
            n.innerHTML = "<div></div>",
            n.firstChild.style.width = "5px",
            e.shrinkWrapBlocks = 3 !== n.offsetWidth,
            i.style.zoom = 1),
            o.removeChild(i),
            i = n = s = a = null )
        }
        ),
        o.removeChild(u),
        i = n = s = a = r = o = u = null ,
        e
    }
    ();
    var me = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/
      , ge = /([A-Z])/g;
    J.extend({
        cache: {},
        deletedIds: [],
        uuid: 0,
        expando: "jQuery" + (J.fn.jquery + Math.random()).replace(/\D/g, ""),
        noData: {
            embed: !0,
            object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
            applet: !0
        },
        hasData: function(t) {
            return t = t.nodeType ? J.cache[t[J.expando]] : t[J.expando],
            !!t && !s(t)
        },
        data: function(t, i, n, s) {
            if (J.acceptData(t)) {
                var a, r, o = J.expando, l = "string" == typeof i, c = t.nodeType, d = c ? J.cache : t, h = c ? t[o] : t[o] && o;
                if (h && d[h] && (s || d[h].data) || !l || n !== e)
                    return h || (c ? t[o] = h = J.deletedIds.pop() || J.guid++ : h = o),
                    d[h] || (d[h] = {},
                    c || (d[h].toJSON = J.noop)),
                    ("object" == typeof i || "function" == typeof i) && (s ? d[h] = J.extend(d[h], i) : d[h].data = J.extend(d[h].data, i)),
                    a = d[h],
                    s || (a.data || (a.data = {}),
                    a = a.data),
                    n !== e && (a[J.camelCase(i)] = n),
                    l ? (r = a[i],
                    null  == r && (r = a[J.camelCase(i)])) : r = a,
                    r
            }
        },
        removeData: function(t, e, i) {
            if (J.acceptData(t)) {
                var n, a, r, o = t.nodeType, l = o ? J.cache : t, c = o ? t[J.expando] : J.expando;
                if (l[c]) {
                    if (e && (n = i ? l[c] : l[c].data)) {
                        J.isArray(e) || (e in n ? e = [e] : (e = J.camelCase(e),
                        e = e in n ? [e] : e.split(" ")));
                        for (a = 0,
                        r = e.length; r > a; a++)
                            delete n[e[a]];
                        if (!(i ? s : J.isEmptyObject)(n))
                            return
                    }
                    (i || (delete l[c].data,
                    s(l[c]))) && (o ? J.cleanData([t], !0) : J.support.deleteExpando || l != l.window ? delete l[c] : l[c] = null )
                }
            }
        },
        _data: function(t, e, i) {
            return J.data(t, e, i, !0)
        },
        acceptData: function(t) {
            var e = t.nodeName && J.noData[t.nodeName.toLowerCase()];
            return !e || e !== !0 && t.getAttribute("classid") === e
        }
    }),
    J.fn.extend({
        data: function(t, i) {
            var s, a, r, o, l, c = this[0], d = 0, h = null ;
            if (t === e) {
                if (this.length && (h = J.data(c),
                1 === c.nodeType && !J._data(c, "parsedAttrs"))) {
                    for (r = c.attributes,
                    l = r.length; l > d; d++)
                        o = r[d].name,
                        o.indexOf("data-") || (o = J.camelCase(o.substring(5)),
                        n(c, o, h[o]));
                    J._data(c, "parsedAttrs", !0)
                }
                return h
            }
            return "object" == typeof t ? this.each(function() {
                J.data(this, t)
            }
            ) : (s = t.split(".", 2),
            s[1] = s[1] ? "." + s[1] : "",
            a = s[1] + "!",
            J.access(this, function(i) {
                return i === e ? (h = this.triggerHandler("getData" + a, [s[0]]),
                h === e && c && (h = J.data(c, t),
                h = n(c, t, h)),
                h === e && s[1] ? this.data(s[0]) : h) : (s[1] = i,
                void this.each(function() {
                    var e = J(this);
                    e.triggerHandler("setData" + a, s),
                    J.data(this, t, i),
                    e.triggerHandler("changeData" + a, s)
                }
                ))
            }
            , null , i, arguments.length > 1, null , !1))
        },
        removeData: function(t) {
            return this.each(function() {
                J.removeData(this, t)
            }
            )
        }
    }),
    J.extend({
        queue: function(t, e, i) {
            var n;
            return t ? (e = (e || "fx") + "queue",
            n = J._data(t, e),
            i && (!n || J.isArray(i) ? n = J._data(t, e, J.makeArray(i)) : n.push(i)),
            n || []) : void 0
        },
        dequeue: function(t, e) {
            e = e || "fx";
            var i = J.queue(t, e)
              , n = i.length
              , s = i.shift()
              , a = J._queueHooks(t, e)
              , r = function() {
                J.dequeue(t, e)
            }
            ;
            "inprogress" === s && (s = i.shift(),
            n--),
            s && ("fx" === e && i.unshift("inprogress"),
            delete a.stop,
            s.call(t, r, a)),
            !n && a && a.empty.fire()
        },
        _queueHooks: function(t, e) {
            var i = e + "queueHooks";
            return J._data(t, i) || J._data(t, i, {
                empty: J.Callbacks("once memory").add(function() {
                    J.removeData(t, e + "queue", !0),
                    J.removeData(t, i, !0)
                }
                )
            })
        }
    }),
    J.fn.extend({
        queue: function(t, i) {
            var n = 2;
            return "string" != typeof t && (i = t,
            t = "fx",
            n--),
            arguments.length < n ? J.queue(this[0], t) : i === e ? this : this.each(function() {
                var e = J.queue(this, t, i);
                J._queueHooks(this, t),
                "fx" === t && "inprogress" !== e[0] && J.dequeue(this, t)
            }
            )
        },
        dequeue: function(t) {
            return this.each(function() {
                J.dequeue(this, t)
            }
            )
        },
        delay: function(t, e) {
            return t = J.fx ? J.fx.speeds[t] || t : t,
            e = e || "fx",
            this.queue(e, function(e, i) {
                var n = setTimeout(e, t);
                i.stop = function() {
                    clearTimeout(n)
                }
            }
            )
        },
        clearQueue: function(t) {
            return this.queue(t || "fx", [])
        },
        promise: function(t, i) {
            var n, s = 1, a = J.Deferred(), r = this, o = this.length, l = function() {
                --s || a.resolveWith(r, [r])
            }
            ;
            for ("string" != typeof t && (i = t,
            t = e),
            t = t || "fx"; o--; )
                n = J._data(r[o], t + "queueHooks"),
                n && n.empty && (s++,
                n.empty.add(l));
            return l(),
            a.promise(i)
        }
    });
    var ve, be, _e, ye = /[\t\r\n]/g, xe = /\r/g, we = /^(?:button|input)$/i, ke = /^(?:button|input|object|select|textarea)$/i, Ce = /^a(?:rea|)$/i, Te = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i, Se = J.support.getSetAttribute;
    J.fn.extend({
        attr: function(t, e) {
            return J.access(this, J.attr, t, e, arguments.length > 1)
        },
        removeAttr: function(t) {
            return this.each(function() {
                J.removeAttr(this, t)
            }
            )
        },
        prop: function(t, e) {
            return J.access(this, J.prop, t, e, arguments.length > 1)
        },
        removeProp: function(t) {
            return t = J.propFix[t] || t,
            this.each(function() {
                try {
                    this[t] = e,
                    delete this[t]
                } catch (i) {}
            }
            )
        },
        addClass: function(t) {
            var e, i, n, s, a, r, o;
            if (J.isFunction(t))
                return this.each(function(e) {
                    J(this).addClass(t.call(this, e, this.className))
                }
                );
            if (t && "string" == typeof t)
                for (e = t.split(ee),
                i = 0,
                n = this.length; n > i; i++)
                    if (s = this[i],
                    1 === s.nodeType)
                        if (s.className || 1 !== e.length) {
                            for (a = " " + s.className + " ",
                            r = 0,
                            o = e.length; o > r; r++)
                                a.indexOf(" " + e[r] + " ") < 0 && (a += e[r] + " ");
                            s.className = J.trim(a)
                        } else
                            s.className = t;
            return this
        },
        removeClass: function(t) {
            var i, n, s, a, r, o, l;
            if (J.isFunction(t))
                return this.each(function(e) {
                    J(this).removeClass(t.call(this, e, this.className))
                }
                );
            if (t && "string" == typeof t || t === e)
                for (i = (t || "").split(ee),
                o = 0,
                l = this.length; l > o; o++)
                    if (s = this[o],
                    1 === s.nodeType && s.className) {
                        for (n = (" " + s.className + " ").replace(ye, " "),
                        a = 0,
                        r = i.length; r > a; a++)
                            for (; n.indexOf(" " + i[a] + " ") >= 0; )
                                n = n.replace(" " + i[a] + " ", " ");
                        s.className = t ? J.trim(n) : ""
                    }
            return this
        },
        toggleClass: function(t, e) {
            var i = typeof t
              , n = "boolean" == typeof e;
            return this.each(J.isFunction(t) ? function(i) {
                J(this).toggleClass(t.call(this, i, this.className, e), e)
            }
             : function() {
                if ("string" === i)
                    for (var s, a = 0, r = J(this), o = e, l = t.split(ee); s = l[a++]; )
                        o = n ? o : !r.hasClass(s),
                        r[o ? "addClass" : "removeClass"](s);
                else
                    ("undefined" === i || "boolean" === i) && (this.className && J._data(this, "__className__", this.className),
                    this.className = this.className || t === !1 ? "" : J._data(this, "__className__") || "")
            }
            )
        },
        hasClass: function(t) {
            for (var e = " " + t + " ", i = 0, n = this.length; n > i; i++)
                if (1 === this[i].nodeType && (" " + this[i].className + " ").replace(ye, " ").indexOf(e) >= 0)
                    return !0;
            return !1
        },
        val: function(t) {
            var i, n, s, a = this[0];
            {
                if (arguments.length)
                    return s = J.isFunction(t),
                    this.each(function(n) {
                        var a, r = J(this);
                        1 === this.nodeType && (a = s ? t.call(this, n, r.val()) : t,
                        null  == a ? a = "" : "number" == typeof a ? a += "" : J.isArray(a) && (a = J.map(a, function(t) {
                            return null  == t ? "" : t + ""
                        }
                        )),
                        i = J.valHooks[this.type] || J.valHooks[this.nodeName.toLowerCase()],
                        i && "set" in i && i.set(this, a, "value") !== e || (this.value = a))
                    }
                    );
                if (a)
                    return i = J.valHooks[a.type] || J.valHooks[a.nodeName.toLowerCase()],
                    i && "get" in i && (n = i.get(a, "value")) !== e ? n : (n = a.value,
                    "string" == typeof n ? n.replace(xe, "") : null  == n ? "" : n)
            }
        }
    }),
    J.extend({
        valHooks: {
            option: {
                get: function(t) {
                    var e = t.attributes.value;
                    return !e || e.specified ? t.value : t.text
                }
            },
            select: {
                get: function(t) {
                    var e, i, n, s, a = t.selectedIndex, r = [], o = t.options, l = "select-one" === t.type;
                    if (0 > a)
                        return null ;
                    for (i = l ? a : 0,
                    n = l ? a + 1 : o.length; n > i; i++)
                        if (s = o[i],
                        !(!s.selected || (J.support.optDisabled ? s.disabled : null  !== s.getAttribute("disabled")) || s.parentNode.disabled && J.nodeName(s.parentNode, "optgroup"))) {
                            if (e = J(s).val(),
                            l)
                                return e;
                            r.push(e)
                        }
                    return l && !r.length && o.length ? J(o[a]).val() : r
                },
                set: function(t, e) {
                    var i = J.makeArray(e);
                    return J(t).find("option").each(function() {
                        this.selected = J.inArray(J(this).val(), i) >= 0
                    }
                    ),
                    i.length || (t.selectedIndex = -1),
                    i
                }
            }
        },
        attrFn: {},
        attr: function(t, i, n, s) {
            var a, r, o, l = t.nodeType;
            if (t && 3 !== l && 8 !== l && 2 !== l)
                return s && J.isFunction(J.fn[i]) ? J(t)[i](n) : "undefined" == typeof t.getAttribute ? J.prop(t, i, n) : (o = 1 !== l || !J.isXMLDoc(t),
                o && (i = i.toLowerCase(),
                r = J.attrHooks[i] || (Te.test(i) ? be : ve)),
                n !== e ? null  === n ? void J.removeAttr(t, i) : r && "set" in r && o && (a = r.set(t, n, i)) !== e ? a : (t.setAttribute(i, n + ""),
                n) : r && "get" in r && o && null  !== (a = r.get(t, i)) ? a : (a = t.getAttribute(i),
                null  === a ? e : a))
        },
        removeAttr: function(t, e) {
            var i, n, s, a, r = 0;
            if (e && 1 === t.nodeType)
                for (n = e.split(ee); r < n.length; r++)
                    s = n[r],
                    s && (i = J.propFix[s] || s,
                    a = Te.test(s),
                    a || J.attr(t, s, ""),
                    t.removeAttribute(Se ? s : i),
                    a && i in t && (t[i] = !1))
        },
        attrHooks: {
            type: {
                set: function(t, e) {
                    if (we.test(t.nodeName) && t.parentNode)
                        J.error("type property can't be changed");
                    else if (!J.support.radioValue && "radio" === e && J.nodeName(t, "input")) {
                        var i = t.value;
                        return t.setAttribute("type", e),
                        i && (t.value = i),
                        e
                    }
                }
            },
            value: {
                get: function(t, e) {
                    return ve && J.nodeName(t, "button") ? ve.get(t, e) : e in t ? t.value : null 
                },
                set: function(t, e, i) {
                    return ve && J.nodeName(t, "button") ? ve.set(t, e, i) : void (t.value = e)
                }
            }
        },
        propFix: {
            tabindex: "tabIndex",
            readonly: "readOnly",
            "for": "htmlFor",
            "class": "className",
            maxlength: "maxLength",
            cellspacing: "cellSpacing",
            cellpadding: "cellPadding",
            rowspan: "rowSpan",
            colspan: "colSpan",
            usemap: "useMap",
            frameborder: "frameBorder",
            contenteditable: "contentEditable"
        },
        prop: function(t, i, n) {
            var s, a, r, o = t.nodeType;
            if (t && 3 !== o && 8 !== o && 2 !== o)
                return r = 1 !== o || !J.isXMLDoc(t),
                r && (i = J.propFix[i] || i,
                a = J.propHooks[i]),
                n !== e ? a && "set" in a && (s = a.set(t, n, i)) !== e ? s : t[i] = n : a && "get" in a && null  !== (s = a.get(t, i)) ? s : t[i]
        },
        propHooks: {
            tabIndex: {
                get: function(t) {
                    var i = t.getAttributeNode("tabindex");
                    return i && i.specified ? parseInt(i.value, 10) : ke.test(t.nodeName) || Ce.test(t.nodeName) && t.href ? 0 : e
                }
            }
        }
    }),
    be = {
        get: function(t, i) {
            var n, s = J.prop(t, i);
            return s === !0 || "boolean" != typeof s && (n = t.getAttributeNode(i)) && n.nodeValue !== !1 ? i.toLowerCase() : e
        },
        set: function(t, e, i) {
            var n;
            return e === !1 ? J.removeAttr(t, i) : (n = J.propFix[i] || i,
            n in t && (t[n] = !0),
            t.setAttribute(i, i.toLowerCase())),
            i
        }
    },
    Se || (_e = {
        name: !0,
        id: !0,
        coords: !0
    },
    ve = J.valHooks.button = {
        get: function(t, i) {
            var n;
            return n = t.getAttributeNode(i),
            n && (_e[i] ? "" !== n.value : n.specified) ? n.value : e
        },
        set: function(t, e, i) {
            var n = t.getAttributeNode(i);
            return n || (n = j.createAttribute(i),
            t.setAttributeNode(n)),
            n.value = e + ""
        }
    },
    J.each(["width", "height"], function(t, e) {
        J.attrHooks[e] = J.extend(J.attrHooks[e], {
            set: function(t, i) {
                return "" === i ? (t.setAttribute(e, "auto"),
                i) : void 0
            }
        })
    }
    ),
    J.attrHooks.contenteditable = {
        get: ve.get,
        set: function(t, e, i) {
            "" === e && (e = "false"),
            ve.set(t, e, i)
        }
    }),
    J.support.hrefNormalized || J.each(["href", "src", "width", "height"], function(t, i) {
        J.attrHooks[i] = J.extend(J.attrHooks[i], {
            get: function(t) {
                var n = t.getAttribute(i, 2);
                return null  === n ? e : n
            }
        })
    }
    ),
    J.support.style || (J.attrHooks.style = {
        get: function(t) {
            return t.style.cssText.toLowerCase() || e
        },
        set: function(t, e) {
            return t.style.cssText = e + ""
        }
    }),
    J.support.optSelected || (J.propHooks.selected = J.extend(J.propHooks.selected, {
        get: function(t) {
            var e = t.parentNode;
            return e && (e.selectedIndex,
            e.parentNode && e.parentNode.selectedIndex),
            null 
        }
    })),
    J.support.enctype || (J.propFix.enctype = "encoding"),
    J.support.checkOn || J.each(["radio", "checkbox"], function() {
        J.valHooks[this] = {
            get: function(t) {
                return null  === t.getAttribute("value") ? "on" : t.value
            }
        }
    }
    ),
    J.each(["radio", "checkbox"], function() {
        J.valHooks[this] = J.extend(J.valHooks[this], {
            set: function(t, e) {
                return J.isArray(e) ? t.checked = J.inArray(J(t).val(), e) >= 0 : void 0
            }
        })
    }
    );
    var De = /^(?:textarea|input|select)$/i
      , $e = /^([^\.]*|)(?:\.(.+)|)$/
      , Ee = /(?:^|\s)hover(\.\S+|)\b/
      , qe = /^key/
      , Fe = /^(?:mouse|contextmenu)|click/
      , Ie = /^(?:focusinfocus|focusoutblur)$/
      , Me = function(t) {
        return J.event.special.hover ? t : t.replace(Ee, "mouseenter$1 mouseleave$1")
    }
    ;
    J.event = {
        add: function(t, i, n, s, a) {
            var r, o, l, c, d, h, u, p, f, m, g;
            if (3 !== t.nodeType && 8 !== t.nodeType && i && n && (r = J._data(t))) {
                for (n.handler && (f = n,
                n = f.handler,
                a = f.selector),
                n.guid || (n.guid = J.guid++),
                l = r.events,
                l || (r.events = l = {}),
                o = r.handle,
                o || (r.handle = o = function(t) {
                    return "undefined" == typeof J || t && J.event.triggered === t.type ? e : J.event.dispatch.apply(o.elem, arguments)
                }
                ,
                o.elem = t),
                i = J.trim(Me(i)).split(" "),
                c = 0; c < i.length; c++)
                    d = $e.exec(i[c]) || [],
                    h = d[1],
                    u = (d[2] || "").split(".").sort(),
                    g = J.event.special[h] || {},
                    h = (a ? g.delegateType : g.bindType) || h,
                    g = J.event.special[h] || {},
                    p = J.extend({
                        type: h,
                        origType: d[1],
                        data: s,
                        handler: n,
                        guid: n.guid,
                        selector: a,
                        needsContext: a && J.expr.match.needsContext.test(a),
                        namespace: u.join(".")
                    }, f),
                    m = l[h],
                    m || (m = l[h] = [],
                    m.delegateCount = 0,
                    g.setup && g.setup.call(t, s, u, o) !== !1 || (t.addEventListener ? t.addEventListener(h, o, !1) : t.attachEvent && t.attachEvent("on" + h, o))),
                    g.add && (g.add.call(t, p),
                    p.handler.guid || (p.handler.guid = n.guid)),
                    a ? m.splice(m.delegateCount++, 0, p) : m.push(p),
                    J.event.global[h] = !0;
                t = null 
            }
        },
        global: {},
        remove: function(t, e, i, n, s) {
            var a, r, o, l, c, d, h, u, p, f, m, g = J.hasData(t) && J._data(t);
            if (g && (u = g.events)) {
                for (e = J.trim(Me(e || "")).split(" "),
                a = 0; a < e.length; a++)
                    if (r = $e.exec(e[a]) || [],
                    o = l = r[1],
                    c = r[2],
                    o) {
                        for (p = J.event.special[o] || {},
                        o = (n ? p.delegateType : p.bindType) || o,
                        f = u[o] || [],
                        d = f.length,
                        c = c ? new RegExp("(^|\\.)" + c.split(".").sort().join("\\.(?:.*\\.|)") + "(\\.|$)") : null ,
                        h = 0; h < f.length; h++)
                            m = f[h],
                            !(!s && l !== m.origType || i && i.guid !== m.guid || c && !c.test(m.namespace) || n && n !== m.selector && ("**" !== n || !m.selector) || (f.splice(h--, 1),
                            m.selector && f.delegateCount--,
                            !p.remove || !p.remove.call(t, m)));
                        0 === f.length && d !== f.length && ((!p.teardown || p.teardown.call(t, c, g.handle) === !1) && J.removeEvent(t, o, g.handle),
                        delete u[o])
                    } else
                        for (o in u)
                            J.event.remove(t, o + e[a], i, n, !0);
                J.isEmptyObject(u) && (delete g.handle,
                J.removeData(t, "events", !0))
            }
        },
        customEvent: {
            getData: !0,
            setData: !0,
            changeData: !0
        },
        trigger: function(i, n, s, a) {
            if (!s || 3 !== s.nodeType && 8 !== s.nodeType) {
                var r, o, l, c, d, h, u, p, f, m, g = i.type || i, v = [];
                if (Ie.test(g + J.event.triggered))
                    return;
                if (g.indexOf("!") >= 0 && (g = g.slice(0, -1),
                o = !0),
                g.indexOf(".") >= 0 && (v = g.split("."),
                g = v.shift(),
                v.sort()),
                (!s || J.event.customEvent[g]) && !J.event.global[g])
                    return;
                if (i = "object" == typeof i ? i[J.expando] ? i : new J.Event(g,i) : new J.Event(g),
                i.type = g,
                i.isTrigger = !0,
                i.exclusive = o,
                i.namespace = v.join("."),
                i.namespace_re = i.namespace ? new RegExp("(^|\\.)" + v.join("\\.(?:.*\\.|)") + "(\\.|$)") : null ,
                h = g.indexOf(":") < 0 ? "on" + g : "",
                !s) {
                    r = J.cache;
                    for (l in r)
                        r[l].events && r[l].events[g] && J.event.trigger(i, n, r[l].handle.elem, !0);
                    return
                }
                if (i.result = e,
                i.target || (i.target = s),
                n = null  != n ? J.makeArray(n) : [],
                n.unshift(i),
                u = J.event.special[g] || {},
                u.trigger && u.trigger.apply(s, n) === !1)
                    return;
                if (f = [[s, u.bindType || g]],
                !a && !u.noBubble && !J.isWindow(s)) {
                    for (m = u.delegateType || g,
                    c = Ie.test(m + g) ? s : s.parentNode,
                    d = s; c; c = c.parentNode)
                        f.push([c, m]),
                        d = c;
                    d === (s.ownerDocument || j) && f.push([d.defaultView || d.parentWindow || t, m])
                }
                for (l = 0; l < f.length && !i.isPropagationStopped(); l++)
                    c = f[l][0],
                    i.type = f[l][1],
                    p = (J._data(c, "events") || {})[i.type] && J._data(c, "handle"),
                    p && p.apply(c, n),
                    p = h && c[h],
                    p && J.acceptData(c) && p.apply && p.apply(c, n) === !1 && i.preventDefault();
                return i.type = g,
                !(a || i.isDefaultPrevented() || u._default && u._default.apply(s.ownerDocument, n) !== !1 || "click" === g && J.nodeName(s, "a") || !J.acceptData(s) || !h || !s[g] || ("focus" === g || "blur" === g) && 0 === i.target.offsetWidth || J.isWindow(s) || (d = s[h],
                d && (s[h] = null ),
                J.event.triggered = g,
                s[g](),
                J.event.triggered = e,
                !d || !(s[h] = d))),
                i.result
            }
        },
        dispatch: function(i) {
            i = J.event.fix(i || t.event);
            var n, s, a, r, o, l, c, d, h, u = (J._data(this, "events") || {})[i.type] || [], p = u.delegateCount, f = V.call(arguments), m = !i.exclusive && !i.namespace, g = J.event.special[i.type] || {}, v = [];
            if (f[0] = i,
            i.delegateTarget = this,
            !g.preDispatch || g.preDispatch.call(this, i) !== !1) {
                if (p && (!i.button || "click" !== i.type))
                    for (a = i.target; a != this; a = a.parentNode || this)
                        if (a.disabled !== !0 || "click" !== i.type) {
                            for (o = {},
                            c = [],
                            n = 0; p > n; n++)
                                d = u[n],
                                h = d.selector,
                                o[h] === e && (o[h] = d.needsContext ? J(h, this).index(a) >= 0 : J.find(h, this, null , [a]).length),
                                o[h] && c.push(d);
                            c.length && v.push({
                                elem: a,
                                matches: c
                            })
                        }
                for (u.length > p && v.push({
                    elem: this,
                    matches: u.slice(p)
                }),
                n = 0; n < v.length && !i.isPropagationStopped(); n++)
                    for (l = v[n],
                    i.currentTarget = l.elem,
                    s = 0; s < l.matches.length && !i.isImmediatePropagationStopped(); s++)
                        d = l.matches[s],
                        (m || !i.namespace && !d.namespace || i.namespace_re && i.namespace_re.test(d.namespace)) && (i.data = d.data,
                        i.handleObj = d,
                        r = ((J.event.special[d.origType] || {}).handle || d.handler).apply(l.elem, f),
                        r !== e && (i.result = r,
                        r === !1 && (i.preventDefault(),
                        i.stopPropagation())));
                return g.postDispatch && g.postDispatch.call(this, i),
                i.result
            }
        },
        props: "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(t, e) {
                return null  == t.which && (t.which = null  != e.charCode ? e.charCode : e.keyCode),
                t
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(t, i) {
                var n, s, a, r = i.button, o = i.fromElement;
                return null  == t.pageX && null  != i.clientX && (n = t.target.ownerDocument || j,
                s = n.documentElement,
                a = n.body,
                t.pageX = i.clientX + (s && s.scrollLeft || a && a.scrollLeft || 0) - (s && s.clientLeft || a && a.clientLeft || 0),
                t.pageY = i.clientY + (s && s.scrollTop || a && a.scrollTop || 0) - (s && s.clientTop || a && a.clientTop || 0)),
                !t.relatedTarget && o && (t.relatedTarget = o === t.target ? i.toElement : o),
                !t.which && r !== e && (t.which = 1 & r ? 1 : 2 & r ? 3 : 4 & r ? 2 : 0),
                t
            }
        },
        fix: function(t) {
            if (t[J.expando])
                return t;
            var e, i, n = t, s = J.event.fixHooks[t.type] || {}, a = s.props ? this.props.concat(s.props) : this.props;
            for (t = J.Event(n),
            e = a.length; e; )
                i = a[--e],
                t[i] = n[i];
            return t.target || (t.target = n.srcElement || j),
            3 === t.target.nodeType && (t.target = t.target.parentNode),
            t.metaKey = !!t.metaKey,
            s.filter ? s.filter(t, n) : t
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                delegateType: "focusin"
            },
            blur: {
                delegateType: "focusout"
            },
            beforeunload: {
                setup: function(t, e, i) {
                    J.isWindow(this) && (this.onbeforeunload = i)
                },
                teardown: function(t, e) {
                    this.onbeforeunload === e && (this.onbeforeunload = null )
                }
            }
        },
        simulate: function(t, e, i, n) {
            var s = J.extend(new J.Event, i, {
                type: t,
                isSimulated: !0,
                originalEvent: {}
            });
            n ? J.event.trigger(s, null , e) : J.event.dispatch.call(e, s),
            s.isDefaultPrevented() && i.preventDefault()
        }
    },
    J.event.handle = J.event.dispatch,
    J.removeEvent = j.removeEventListener ? function(t, e, i) {
        t.removeEventListener && t.removeEventListener(e, i, !1)
    }
     : function(t, e, i) {
        var n = "on" + e;
        t.detachEvent && ("undefined" == typeof t[n] && (t[n] = null ),
        t.detachEvent(n, i))
    }
    ,
    J.Event = function(t, e) {
        return this instanceof J.Event ? (t && t.type ? (this.originalEvent = t,
        this.type = t.type,
        this.isDefaultPrevented = t.defaultPrevented || t.returnValue === !1 || t.getPreventDefault && t.getPreventDefault() ? r : a) : this.type = t,
        e && J.extend(this, e),
        this.timeStamp = t && t.timeStamp || J.now(),
        this[J.expando] = !0,
        void 0) : new J.Event(t,e)
    }
    ,
    J.Event.prototype = {
        preventDefault: function() {
            this.isDefaultPrevented = r;
            var t = this.originalEvent;
            t && (t.preventDefault ? t.preventDefault() : t.returnValue = !1)
        },
        stopPropagation: function() {
            this.isPropagationStopped = r;
            var t = this.originalEvent;
            t && (t.stopPropagation && t.stopPropagation(),
            t.cancelBubble = !0)
        },
        stopImmediatePropagation: function() {
            this.isImmediatePropagationStopped = r,
            this.stopPropagation()
        },
        isDefaultPrevented: a,
        isPropagationStopped: a,
        isImmediatePropagationStopped: a
    },
    J.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout"
    }, function(t, e) {
        J.event.special[t] = {
            delegateType: e,
            bindType: e,
            handle: function(t) {
                {
                    var i, n = this, s = t.relatedTarget, a = t.handleObj;
                    a.selector
                }
                return (!s || s !== n && !J.contains(n, s)) && (t.type = a.origType,
                i = a.handler.apply(this, arguments),
                t.type = e),
                i
            }
        }
    }
    ),
    J.support.submitBubbles || (J.event.special.submit = {
        setup: function() {
            return J.nodeName(this, "form") ? !1 : void J.event.add(this, "click._submit keypress._submit", function(t) {
                var i = t.target
                  , n = J.nodeName(i, "input") || J.nodeName(i, "button") ? i.form : e;
                n && !J._data(n, "_submit_attached") && (J.event.add(n, "submit._submit", function(t) {
                    t._submit_bubble = !0
                }
                ),
                J._data(n, "_submit_attached", !0))
            }
            )
        },
        postDispatch: function(t) {
            t._submit_bubble && (delete t._submit_bubble,
            this.parentNode && !t.isTrigger && J.event.simulate("submit", this.parentNode, t, !0))
        },
        teardown: function() {
            return J.nodeName(this, "form") ? !1 : void J.event.remove(this, "._submit")
        }
    }),
    J.support.changeBubbles || (J.event.special.change = {
        setup: function() {
            return De.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (J.event.add(this, "propertychange._change", function(t) {
                "checked" === t.originalEvent.propertyName && (this._just_changed = !0)
            }
            ),
            J.event.add(this, "click._change", function(t) {
                this._just_changed && !t.isTrigger && (this._just_changed = !1),
                J.event.simulate("change", this, t, !0)
            }
            )),
            !1) : void J.event.add(this, "beforeactivate._change", function(t) {
                var e = t.target;
                De.test(e.nodeName) && !J._data(e, "_change_attached") && (J.event.add(e, "change._change", function(t) {
                    this.parentNode && !t.isSimulated && !t.isTrigger && J.event.simulate("change", this.parentNode, t, !0)
                }
                ),
                J._data(e, "_change_attached", !0))
            }
            )
        },
        handle: function(t) {
            var e = t.target;
            return this !== e || t.isSimulated || t.isTrigger || "radio" !== e.type && "checkbox" !== e.type ? t.handleObj.handler.apply(this, arguments) : void 0
        },
        teardown: function() {
            return J.event.remove(this, "._change"),
            !De.test(this.nodeName)
        }
    }),
    J.support.focusinBubbles || J.each({
        focus: "focusin",
        blur: "focusout"
    }, function(t, e) {
        var i = 0
          , n = function(t) {
            J.event.simulate(e, t.target, J.event.fix(t), !0)
        }
        ;
        J.event.special[e] = {
            setup: function() {
                0 === i++ && j.addEventListener(t, n, !0)
            },
            teardown: function() {
                0 === --i && j.removeEventListener(t, n, !0)
            }
        }
    }
    ),
    J.fn.extend({
        on: function(t, i, n, s, r) {
            var o, l;
            if ("object" == typeof t) {
                "string" != typeof i && (n = n || i,
                i = e);
                for (l in t)
                    this.on(l, i, n, t[l], r);
                return this
            }
            if (null  == n && null  == s ? (s = i,
            n = i = e) : null  == s && ("string" == typeof i ? (s = n,
            n = e) : (s = n,
            n = i,
            i = e)),
            s === !1)
                s = a;
            else if (!s)
                return this;
            return 1 === r && (o = s,
            s = function(t) {
                return J().off(t),
                o.apply(this, arguments)
            }
            ,
            s.guid = o.guid || (o.guid = J.guid++)),
            this.each(function() {
                J.event.add(this, t, s, n, i)
            }
            )
        },
        one: function(t, e, i, n) {
            return this.on(t, e, i, n, 1)
        },
        off: function(t, i, n) {
            var s, r;
            if (t && t.preventDefault && t.handleObj)
                return s = t.handleObj,
                J(t.delegateTarget).off(s.namespace ? s.origType + "." + s.namespace : s.origType, s.selector, s.handler),
                this;
            if ("object" == typeof t) {
                for (r in t)
                    this.off(r, i, t[r]);
                return this
            }
            return (i === !1 || "function" == typeof i) && (n = i,
            i = e),
            n === !1 && (n = a),
            this.each(function() {
                J.event.remove(this, t, n, i)
            }
            )
        },
        bind: function(t, e, i) {
            return this.on(t, null , e, i)
        },
        unbind: function(t, e) {
            return this.off(t, null , e)
        },
        live: function(t, e, i) {
            return J(this.context).on(t, this.selector, e, i),
            this
        },
        die: function(t, e) {
            return J(this.context).off(t, this.selector || "**", e),
            this
        },
        delegate: function(t, e, i, n) {
            return this.on(e, t, i, n)
        },
        undelegate: function(t, e, i) {
            return 1 === arguments.length ? this.off(t, "**") : this.off(e, t || "**", i)
        },
        trigger: function(t, e) {
            return this.each(function() {
                J.event.trigger(t, e, this)
            }
            )
        },
        triggerHandler: function(t, e) {
            return this[0] ? J.event.trigger(t, e, this[0], !0) : void 0
        },
        toggle: function(t) {
            var e = arguments
              , i = t.guid || J.guid++
              , n = 0
              , s = function(i) {
                var s = (J._data(this, "lastToggle" + t.guid) || 0) % n;
                return J._data(this, "lastToggle" + t.guid, s + 1),
                i.preventDefault(),
                e[s].apply(this, arguments) || !1
            }
            ;
            for (s.guid = i; n < e.length; )
                e[n++].guid = i;
            return this.click(s)
        },
        hover: function(t, e) {
            return this.mouseenter(t).mouseleave(e || t)
        }
    }),
    J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(t, e) {
        J.fn[e] = function(t, i) {
            return null  == i && (i = t,
            t = null ),
            arguments.length > 0 ? this.on(e, null , t, i) : this.trigger(e)
        }
        ,
        qe.test(e) && (J.event.fixHooks[e] = J.event.keyHooks),
        Fe.test(e) && (J.event.fixHooks[e] = J.event.mouseHooks)
    }
    ),
    function(t, e) {
        function i(t, e, i, n) {
            i = i || [],
            e = e || F;
            var s, a, r, o, l = e.nodeType;
            if (!t || "string" != typeof t)
                return i;
            if (1 !== l && 9 !== l)
                return [];
            if (r = x(e),
            !r && !n && (s = ie.exec(t)))
                if (o = s[1]) {
                    if (9 === l) {
                        if (a = e.getElementById(o),
                        !a || !a.parentNode)
                            return i;
                        if (a.id === o)
                            return i.push(a),
                            i
                    } else if (e.ownerDocument && (a = e.ownerDocument.getElementById(o)) && w(e, a) && a.id === o)
                        return i.push(a),
                        i
                } else {
                    if (s[2])
                        return N.apply(i, O.call(e.getElementsByTagName(t), 0)),
                        i;
                    if ((o = s[3]) && ue && e.getElementsByClassName)
                        return N.apply(i, O.call(e.getElementsByClassName(o), 0)),
                        i
                }
            return m(t.replace(Q, "$1"), e, i, n, r)
        }
        function n(t) {
            return function(e) {
                var i = e.nodeName.toLowerCase();
                return "input" === i && e.type === t
            }
        }
        function s(t) {
            return function(e) {
                var i = e.nodeName.toLowerCase();
                return ("input" === i || "button" === i) && e.type === t
            }
        }
        function a(t) {
            return R(function(e) {
                return e = +e,
                R(function(i, n) {
                    for (var s, a = t([], i.length, e), r = a.length; r--; )
                        i[s = a[r]] && (i[s] = !(n[s] = i[s]))
                }
                )
            }
            )
        }
        function r(t, e, i) {
            if (t === e)
                return i;
            for (var n = t.nextSibling; n; ) {
                if (n === e)
                    return -1;
                n = n.nextSibling
            }
            return 1
        }
        function o(t, e) {
            var n, s, a, r, o, l, c, d = H[E][t];
            if (d)
                return e ? 0 : d.slice(0);
            for (o = t,
            l = [],
            c = _.preFilter; o; ) {
                (!n || (s = Z.exec(o))) && (s && (o = o.slice(s[0].length)),
                l.push(a = [])),
                n = !1,
                (s = te.exec(o)) && (a.push(n = new q(s.shift())),
                o = o.slice(n.length),
                n.type = s[0].replace(Q, " "));
                for (r in _.filter)
                    (s = oe[r].exec(o)) && (!c[r] || (s = c[r](s, F, !0))) && (a.push(n = new q(s.shift())),
                    o = o.slice(n.length),
                    n.type = r,
                    n.matches = s);
                if (!n)
                    break
            }
            return e ? o.length : o ? i.error(t) : H(t, l).slice(0)
        }
        function l(t, e, i) {
            var n = e.dir
              , s = i && "parentNode" === e.dir
              , a = A++;
            return e.first ? function(e, i, a) {
                for (; e = e[n]; )
                    if (s || 1 === e.nodeType)
                        return t(e, i, a)
            }
             : function(e, i, r) {
                if (r) {
                    for (; e = e[n]; )
                        if ((s || 1 === e.nodeType) && t(e, i, r))
                            return e
                } else
                    for (var o, l = M + " " + a + " ", c = l + v; e = e[n]; )
                        if (s || 1 === e.nodeType) {
                            if ((o = e[E]) === c)
                                return e.sizset;
                            if ("string" == typeof o && 0 === o.indexOf(l)) {
                                if (e.sizset)
                                    return e
                            } else {
                                if (e[E] = c,
                                t(e, i, r))
                                    return e.sizset = !0,
                                    e;
                                e.sizset = !1
                            }
                        }
            }
        }
        function c(t) {
            return t.length > 1 ? function(e, i, n) {
                for (var s = t.length; s--; )
                    if (!t[s](e, i, n))
                        return !1;
                return !0
            }
             : t[0]
        }
        function d(t, e, i, n, s) {
            for (var a, r = [], o = 0, l = t.length, c = null  != e; l > o; o++)
                (a = t[o]) && (!i || i(a, n, s)) && (r.push(a),
                c && e.push(o));
            return r
        }
        function h(t, e, i, n, s, a) {
            return n && !n[E] && (n = h(n)),
            s && !s[E] && (s = h(s, a)),
            R(function(a, r, o, l) {
                if (!a || !s) {
                    var c, h, u, p = [], m = [], g = r.length, v = a || f(e || "*", o.nodeType ? [o] : o, [], a), b = !t || !a && e ? v : d(v, p, t, o, l), _ = i ? s || (a ? t : g || n) ? [] : r : b;
                    if (i && i(b, _, o, l),
                    n)
                        for (u = d(_, m),
                        n(u, [], o, l),
                        c = u.length; c--; )
                            (h = u[c]) && (_[m[c]] = !(b[m[c]] = h));
                    if (a)
                        for (c = t && _.length; c--; )
                            (h = _[c]) && (a[p[c]] = !(r[p[c]] = h));
                    else
                        _ = d(_ === r ? _.splice(g, _.length) : _),
                        s ? s(null , r, _, l) : N.apply(r, _)
                }
            }
            )
        }
        function u(t) {
            for (var e, i, n, s = t.length, a = _.relative[t[0].type], r = a || _.relative[" "], o = a ? 1 : 0, d = l(function(t) {
                return t === e
            }
            , r, !0), p = l(function(t) {
                return z.call(e, t) > -1
            }
            , r, !0), f = [function(t, i, n) {
                return !a && (n || i !== S) || ((e = i).nodeType ? d(t, i, n) : p(t, i, n))
            }
            ]; s > o; o++)
                if (i = _.relative[t[o].type])
                    f = [l(c(f), i)];
                else {
                    if (i = _.filter[t[o].type].apply(null , t[o].matches),
                    i[E]) {
                        for (n = ++o; s > n && !_.relative[t[n].type]; n++)
                            ;
                        return h(o > 1 && c(f), o > 1 && t.slice(0, o - 1).join("").replace(Q, "$1"), i, n > o && u(t.slice(o, n)), s > n && u(t = t.slice(n)), s > n && t.join(""))
                    }
                    f.push(i)
                }
            return c(f)
        }
        function p(t, e) {
            var n = e.length > 0
              , s = t.length > 0
              , a = function(r, o, l, c, h) {
                var u, p, f, m = [], g = 0, b = "0", y = r && [], x = null  != h, w = S, k = r || s && _.find.TAG("*", h && o.parentNode || o), C = M += null  == w ? 1 : Math.E;
                for (x && (S = o !== F && o,
                v = a.el); null  != (u = k[b]); b++) {
                    if (s && u) {
                        for (p = 0; f = t[p]; p++)
                            if (f(u, o, l)) {
                                c.push(u);
                                break
                            }
                        x && (M = C,
                        v = ++a.el)
                    }
                    n && ((u = !f && u) && g--,
                    r && y.push(u))
                }
                if (g += b,
                n && b !== g) {
                    for (p = 0; f = e[p]; p++)
                        f(y, m, o, l);
                    if (r) {
                        if (g > 0)
                            for (; b--; )
                                !y[b] && !m[b] && (m[b] = P.call(c));
                        m = d(m)
                    }
                    N.apply(c, m),
                    x && !r && m.length > 0 && g + e.length > 1 && i.uniqueSort(c)
                }
                return x && (M = C,
                S = w),
                y
            }
            ;
            return a.el = 0,
            n ? R(a) : a
        }
        function f(t, e, n, s) {
            for (var a = 0, r = e.length; r > a; a++)
                i(t, e[a], n, s);
            return n
        }
        function m(t, e, i, n, s) {
            {
                var a, r, l, c, d, h = o(t);
                h.length
            }
            if (!n && 1 === h.length) {
                if (r = h[0] = h[0].slice(0),
                r.length > 2 && "ID" === (l = r[0]).type && 9 === e.nodeType && !s && _.relative[r[1].type]) {
                    if (e = _.find.ID(l.matches[0].replace(re, ""), e, s)[0],
                    !e)
                        return i;
                    t = t.slice(r.shift().length)
                }
                for (a = oe.POS.test(t) ? -1 : r.length - 1; a >= 0 && (l = r[a],
                !_.relative[c = l.type]); a--)
                    if ((d = _.find[c]) && (n = d(l.matches[0].replace(re, ""), ne.test(r[0].type) && e.parentNode || e, s))) {
                        if (r.splice(a, 1),
                        t = n.length && r.join(""),
                        !t)
                            return N.apply(i, O.call(n, 0)),
                            i;
                        break
                    }
            }
            return k(t, h)(n, e, s, i, ne.test(t)),
            i
        }
        function g() {}
        var v, b, _, y, x, w, k, C, T, S, D = !0, $ = "undefined", E = ("sizcache" + Math.random()).replace(".", ""), q = String, F = t.document, I = F.documentElement, M = 0, A = 0, P = [].pop, N = [].push, O = [].slice, z = [].indexOf || function(t) {
            for (var e = 0, i = this.length; i > e; e++)
                if (this[e] === t)
                    return e;
            return -1
        }
        , R = function(t, e) {
            return t[E] = null  == e || e,
            t
        }
        , L = function() {
            var t = {}
              , e = [];
            return R(function(i, n) {
                return e.push(i) > _.cacheLength && delete t[e.shift()],
                t[i] = n
            }
            , t)
        }
        , j = L(), H = L(), B = L(), W = "[\\x20\\t\\r\\n\\f]", U = "(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+", Y = U.replace("w", "w#"), V = "([*^$|!~]?=)", K = "\\[" + W + "*(" + U + ")" + W + "*(?:" + V + W + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + Y + ")|)|)" + W + "*\\]", X = ":(" + U + ")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:" + K + ")|[^:]|\\\\.)*|.*))\\)|)", G = ":(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + W + "*((?:-\\d)?\\d*)" + W + "*\\)|)(?=[^-]|$)", Q = new RegExp("^" + W + "+|((?:^|[^\\\\])(?:\\\\.)*)" + W + "+$","g"), Z = new RegExp("^" + W + "*," + W + "*"), te = new RegExp("^" + W + "*([\\x20\\t\\r\\n\\f>+~])" + W + "*"), ee = new RegExp(X), ie = /^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/, ne = /[\x20\t\r\n\f]*[+~]/, se = /h\d/i, ae = /input|select|textarea|button/i, re = /\\(?!\\)/g, oe = {
            ID: new RegExp("^#(" + U + ")"),
            CLASS: new RegExp("^\\.(" + U + ")"),
            NAME: new RegExp("^\\[name=['\"]?(" + U + ")['\"]?\\]"),
            TAG: new RegExp("^(" + U.replace("w", "w*") + ")"),
            ATTR: new RegExp("^" + K),
            PSEUDO: new RegExp("^" + X),
            POS: new RegExp(G,"i"),
            CHILD: new RegExp("^:(only|nth|first|last)-child(?:\\(" + W + "*(even|odd|(([+-]|)(\\d*)n|)" + W + "*(?:([+-]|)" + W + "*(\\d+)|))" + W + "*\\)|)","i"),
            needsContext: new RegExp("^" + W + "*[>+~]|" + G,"i")
        }, le = function(t) {
            var e = F.createElement("div");
            try {
                return t(e)
            } catch (i) {
                return !1
            } finally {
                e = null 
            }
        }
        , ce = le(function(t) {
            return t.appendChild(F.createComment("")),
            !t.getElementsByTagName("*").length
        }
        ), de = le(function(t) {
            return t.innerHTML = "<a href='#'></a>",
            t.firstChild && typeof t.firstChild.getAttribute !== $ && "#" === t.firstChild.getAttribute("href")
        }
        ), he = le(function(t) {
            t.innerHTML = "<select></select>";
            var e = typeof t.lastChild.getAttribute("multiple");
            return "boolean" !== e && "string" !== e
        }
        ), ue = le(function(t) {
            return t.innerHTML = "<div class='hidden e'></div><div class='hidden'></div>",
            t.getElementsByClassName && t.getElementsByClassName("e").length ? (t.lastChild.className = "e",
            2 === t.getElementsByClassName("e").length) : !1
        }
        ), pe = le(function(t) {
            t.id = E + 0,
            t.innerHTML = "<a name='" + E + "'></a><div name='" + E + "'></div>",
            I.insertBefore(t, I.firstChild);
            var e = F.getElementsByName && F.getElementsByName(E).length === 2 + F.getElementsByName(E + 0).length;
            return b = !F.getElementById(E),
            I.removeChild(t),
            e
        }
        );
        try {
            O.call(I.childNodes, 0)[0].nodeType
        } catch (fe) {
            O = function(t) {
                for (var e, i = []; e = this[t]; t++)
                    i.push(e);
                return i
            }
        }
        i.matches = function(t, e) {
            return i(t, null , null , e)
        }
        ,
        i.matchesSelector = function(t, e) {
            return i(e, null , null , [t]).length > 0
        }
        ,
        y = i.getText = function(t) {
            var e, i = "", n = 0, s = t.nodeType;
            if (s) {
                if (1 === s || 9 === s || 11 === s) {
                    if ("string" == typeof t.textContent)
                        return t.textContent;
                    for (t = t.firstChild; t; t = t.nextSibling)
                        i += y(t)
                } else if (3 === s || 4 === s)
                    return t.nodeValue
            } else
                for (; e = t[n]; n++)
                    i += y(e);
            return i
        }
        ,
        x = i.isXML = function(t) {
            var e = t && (t.ownerDocument || t).documentElement;
            return e ? "HTML" !== e.nodeName : !1
        }
        ,
        w = i.contains = I.contains ? function(t, e) {
            var i = 9 === t.nodeType ? t.documentElement : t
              , n = e && e.parentNode;
            return t === n || !!(n && 1 === n.nodeType && i.contains && i.contains(n))
        }
         : I.compareDocumentPosition ? function(t, e) {
            return e && !!(16 & t.compareDocumentPosition(e))
        }
         : function(t, e) {
            for (; e = e.parentNode; )
                if (e === t)
                    return !0;
            return !1
        }
        ,
        i.attr = function(t, e) {
            var i, n = x(t);
            return n || (e = e.toLowerCase()),
            (i = _.attrHandle[e]) ? i(t) : n || he ? t.getAttribute(e) : (i = t.getAttributeNode(e),
            i ? "boolean" == typeof t[e] ? t[e] ? e : null  : i.specified ? i.value : null  : null )
        }
        ,
        _ = i.selectors = {
            cacheLength: 50,
            createPseudo: R,
            match: oe,
            attrHandle: de ? {} : {
                href: function(t) {
                    return t.getAttribute("href", 2)
                },
                type: function(t) {
                    return t.getAttribute("type")
                }
            },
            find: {
                ID: b ? function(t, e, i) {
                    if (typeof e.getElementById !== $ && !i) {
                        var n = e.getElementById(t);
                        return n && n.parentNode ? [n] : []
                    }
                }
                 : function(t, i, n) {
                    if (typeof i.getElementById !== $ && !n) {
                        var s = i.getElementById(t);
                        return s ? s.id === t || typeof s.getAttributeNode !== $ && s.getAttributeNode("id").value === t ? [s] : e : []
                    }
                }
                ,
                TAG: ce ? function(t, e) {
                    return typeof e.getElementsByTagName !== $ ? e.getElementsByTagName(t) : void 0
                }
                 : function(t, e) {
                    var i = e.getElementsByTagName(t);
                    if ("*" === t) {
                        for (var n, s = [], a = 0; n = i[a]; a++)
                            1 === n.nodeType && s.push(n);
                        return s
                    }
                    return i
                }
                ,
                NAME: pe && function(t, e) {
                    return typeof e.getElementsByName !== $ ? e.getElementsByName(name) : void 0
                }
                ,
                CLASS: ue && function(t, e, i) {
                    return typeof e.getElementsByClassName === $ || i ? void 0 : e.getElementsByClassName(t)
                }
            },
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(t) {
                    return t[1] = t[1].replace(re, ""),
                    t[3] = (t[4] || t[5] || "").replace(re, ""),
                    "~=" === t[2] && (t[3] = " " + t[3] + " "),
                    t.slice(0, 4)
                },
                CHILD: function(t) {
                    return t[1] = t[1].toLowerCase(),
                    "nth" === t[1] ? (t[2] || i.error(t[0]),
                    t[3] = +(t[3] ? t[4] + (t[5] || 1) : 2 * ("even" === t[2] || "odd" === t[2])),
                    t[4] = +(t[6] + t[7] || "odd" === t[2])) : t[2] && i.error(t[0]),
                    t
                },
                PSEUDO: function(t) {
                    var e, i;
                    return oe.CHILD.test(t[0]) ? null  : (t[3] ? t[2] = t[3] : (e = t[4]) && (ee.test(e) && (i = o(e, !0)) && (i = e.indexOf(")", e.length - i) - e.length) && (e = e.slice(0, i),
                    t[0] = t[0].slice(0, i)),
                    t[2] = e),
                    t.slice(0, 3))
                }
            },
            filter: {
                ID: b ? function(t) {
                    return t = t.replace(re, ""),
                    function(e) {
                        return e.getAttribute("id") === t
                    }
                }
                 : function(t) {
                    return t = t.replace(re, ""),
                    function(e) {
                        var i = typeof e.getAttributeNode !== $ && e.getAttributeNode("id");
                        return i && i.value === t
                    }
                }
                ,
                TAG: function(t) {
                    return "*" === t ? function() {
                        return !0
                    }
                     : (t = t.replace(re, "").toLowerCase(),
                    function(e) {
                        return e.nodeName && e.nodeName.toLowerCase() === t
                    }
                    )
                },
                CLASS: function(t) {
                    var e = j[E][t];
                    return e || (e = j(t, new RegExp("(^|" + W + ")" + t + "(" + W + "|$)"))),
                    function(t) {
                        return e.test(t.className || typeof t.getAttribute !== $ && t.getAttribute("class") || "")
                    }
                },
                ATTR: function(t, e, n) {
                    return function(s) {
                        var a = i.attr(s, t);
                        return null  == a ? "!=" === e : e ? (a += "",
                        "=" === e ? a === n : "!=" === e ? a !== n : "^=" === e ? n && 0 === a.indexOf(n) : "*=" === e ? n && a.indexOf(n) > -1 : "$=" === e ? n && a.substr(a.length - n.length) === n : "~=" === e ? (" " + a + " ").indexOf(n) > -1 : "|=" === e ? a === n || a.substr(0, n.length + 1) === n + "-" : !1) : !0
                    }
                },
                CHILD: function(t, e, i, n) {
                    return "nth" === t ? function(t) {
                        var e, s, a = t.parentNode;
                        if (1 === i && 0 === n)
                            return !0;
                        if (a)
                            for (s = 0,
                            e = a.firstChild; e && (1 !== e.nodeType || (s++,
                            t !== e)); e = e.nextSibling)
                                ;
                        return s -= n,
                        s === i || s % i === 0 && s / i >= 0
                    }
                     : function(e) {
                        var i = e;
                        switch (t) {
                        case "only":
                        case "first":
                            for (; i = i.previousSibling; )
                                if (1 === i.nodeType)
                                    return !1;
                            if ("first" === t)
                                return !0;
                            i = e;
                        case "last":
                            for (; i = i.nextSibling; )
                                if (1 === i.nodeType)
                                    return !1;
                            return !0
                        }
                    }
                },
                PSEUDO: function(t, e) {
                    var n, s = _.pseudos[t] || _.setFilters[t.toLowerCase()] || i.error("unsupported pseudo: " + t);
                    return s[E] ? s(e) : s.length > 1 ? (n = [t, t, "", e],
                    _.setFilters.hasOwnProperty(t.toLowerCase()) ? R(function(t, i) {
                        for (var n, a = s(t, e), r = a.length; r--; )
                            n = z.call(t, a[r]),
                            t[n] = !(i[n] = a[r])
                    }
                    ) : function(t) {
                        return s(t, 0, n)
                    }
                    ) : s
                }
            },
            pseudos: {
                not: R(function(t) {
                    var e = []
                      , i = []
                      , n = k(t.replace(Q, "$1"));
                    return n[E] ? R(function(t, e, i, s) {
                        for (var a, r = n(t, null , s, []), o = t.length; o--; )
                            (a = r[o]) && (t[o] = !(e[o] = a))
                    }
                    ) : function(t, s, a) {
                        return e[0] = t,
                        n(e, null , a, i),
                        !i.pop()
                    }
                }
                ),
                has: R(function(t) {
                    return function(e) {
                        return i(t, e).length > 0
                    }
                }
                ),
                contains: R(function(t) {
                    return function(e) {
                        return (e.textContent || e.innerText || y(e)).indexOf(t) > -1
                    }
                }
                ),
                enabled: function(t) {
                    return t.disabled === !1
                },
                disabled: function(t) {
                    return t.disabled === !0
                },
                checked: function(t) {
                    var e = t.nodeName.toLowerCase();
                    return "input" === e && !!t.checked || "option" === e && !!t.selected
                },
                selected: function(t) {
                    return t.parentNode && t.parentNode.selectedIndex,
                    t.selected === !0
                },
                parent: function(t) {
                    return !_.pseudos.empty(t)
                },
                empty: function(t) {
                    var e;
                    for (t = t.firstChild; t; ) {
                        if (t.nodeName > "@" || 3 === (e = t.nodeType) || 4 === e)
                            return !1;
                        t = t.nextSibling
                    }
                    return !0
                },
                header: function(t) {
                    return se.test(t.nodeName)
                },
                text: function(t) {
                    var e, i;
                    return "input" === t.nodeName.toLowerCase() && "text" === (e = t.type) && (null  == (i = t.getAttribute("type")) || i.toLowerCase() === e)
                },
                radio: n("radio"),
                checkbox: n("checkbox"),
                file: n("file"),
                password: n("password"),
                image: n("image"),
                submit: s("submit"),
                reset: s("reset"),
                button: function(t) {
                    var e = t.nodeName.toLowerCase();
                    return "input" === e && "button" === t.type || "button" === e
                },
                input: function(t) {
                    return ae.test(t.nodeName)
                },
                focus: function(t) {
                    var e = t.ownerDocument;
                    return !(t !== e.activeElement || e.hasFocus && !e.hasFocus() || !t.type && !t.href)
                },
                active: function(t) {
                    return t === t.ownerDocument.activeElement
                },
                first: a(function() {
                    return [0]
                }
                ),
                last: a(function(t, e) {
                    return [e - 1]
                }
                ),
                eq: a(function(t, e, i) {
                    return [0 > i ? i + e : i]
                }
                ),
                even: a(function(t, e) {
                    for (var i = 0; e > i; i += 2)
                        t.push(i);
                    return t
                }
                ),
                odd: a(function(t, e) {
                    for (var i = 1; e > i; i += 2)
                        t.push(i);
                    return t
                }
                ),
                lt: a(function(t, e, i) {
                    for (var n = 0 > i ? i + e : i; --n >= 0; )
                        t.push(n);
                    return t
                }
                ),
                gt: a(function(t, e, i) {
                    for (var n = 0 > i ? i + e : i; ++n < e; )
                        t.push(n);
                    return t
                }
                )
            }
        },
        C = I.compareDocumentPosition ? function(t, e) {
            return t === e ? (T = !0,
            0) : (t.compareDocumentPosition && e.compareDocumentPosition ? 4 & t.compareDocumentPosition(e) : t.compareDocumentPosition) ? -1 : 1
        }
         : function(t, e) {
            if (t === e)
                return T = !0,
                0;
            if (t.sourceIndex && e.sourceIndex)
                return t.sourceIndex - e.sourceIndex;
            var i, n, s = [], a = [], o = t.parentNode, l = e.parentNode, c = o;
            if (o === l)
                return r(t, e);
            if (!o)
                return -1;
            if (!l)
                return 1;
            for (; c; )
                s.unshift(c),
                c = c.parentNode;
            for (c = l; c; )
                a.unshift(c),
                c = c.parentNode;
            i = s.length,
            n = a.length;
            for (var d = 0; i > d && n > d; d++)
                if (s[d] !== a[d])
                    return r(s[d], a[d]);
            return d === i ? r(t, a[d], -1) : r(s[d], e, 1)
        }
        ,
        [0, 0].sort(C),
        D = !T,
        i.uniqueSort = function(t) {
            var e, i = 1;
            if (T = D,
            t.sort(C),
            T)
                for (; e = t[i]; i++)
                    e === t[i - 1] && t.splice(i--, 1);
            return t
        }
        ,
        i.error = function(t) {
            throw new Error("Syntax error, unrecognized expression: " + t)
        }
        ,
        k = i.compile = function(t, e) {
            var i, n = [], s = [], a = B[E][t];
            if (!a) {
                for (e || (e = o(t)),
                i = e.length; i--; )
                    a = u(e[i]),
                    a[E] ? n.push(a) : s.push(a);
                a = B(t, p(s, n))
            }
            return a
        }
        ,
        F.querySelectorAll && function() {
            var t, e = m, n = /'|\\/g, s = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g, a = [":focus"], r = [":active", ":focus"], l = I.matchesSelector || I.mozMatchesSelector || I.webkitMatchesSelector || I.oMatchesSelector || I.msMatchesSelector;
            le(function(t) {
                t.innerHTML = "<select><option selected=''></option></select>",
                t.querySelectorAll("[selected]").length || a.push("\\[" + W + "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),
                t.querySelectorAll(":checked").length || a.push(":checked")
            }
            ),
            le(function(t) {
                t.innerHTML = "<p test=''></p>",
                t.querySelectorAll("[test^='']").length && a.push("[*^$]=" + W + "*(?:\"\"|'')"),
                t.innerHTML = "<input type='hidden'/>",
                t.querySelectorAll(":enabled").length || a.push(":enabled", ":disabled")
            }
            ),
            a = new RegExp(a.join("|")),
            m = function(t, i, s, r, l) {
                if (!(r || l || a && a.test(t))) {
                    var c, d, h = !0, u = E, p = i, f = 9 === i.nodeType && t;
                    if (1 === i.nodeType && "object" !== i.nodeName.toLowerCase()) {
                        for (c = o(t),
                        (h = i.getAttribute("id")) ? u = h.replace(n, "\\$&") : i.setAttribute("id", u),
                        u = "[id='" + u + "'] ",
                        d = c.length; d--; )
                            c[d] = u + c[d].join("");
                        p = ne.test(t) && i.parentNode || i,
                        f = c.join(",")
                    }
                    if (f)
                        try {
                            return N.apply(s, O.call(p.querySelectorAll(f), 0)),
                            s
                        } catch (m) {} finally {
                            h || i.removeAttribute("id")
                        }
                }
                return e(t, i, s, r, l)
            }
            ,
            l && (le(function(e) {
                t = l.call(e, "div");
                try {
                    l.call(e, "[test!='']:sizzle"),
                    r.push("!=", X)
                } catch (i) {}
            }
            ),
            r = new RegExp(r.join("|")),
            i.matchesSelector = function(e, n) {
                if (n = n.replace(s, "='$1']"),
                !(x(e) || r.test(n) || a && a.test(n)))
                    try {
                        var o = l.call(e, n);
                        if (o || t || e.document && 11 !== e.document.nodeType)
                            return o
                    } catch (c) {}
                return i(n, null , null , [e]).length > 0
            }
            )
        }
        (),
        _.pseudos.nth = _.pseudos.eq,
        _.filters = g.prototype = _.pseudos,
        _.setFilters = new g,
        i.attr = J.attr,
        J.find = i,
        J.expr = i.selectors,
        J.expr[":"] = J.expr.pseudos,
        J.unique = i.uniqueSort,
        J.text = i.getText,
        J.isXMLDoc = i.isXML,
        J.contains = i.contains
    }
    (t);
    var Ae = /Until$/
      , Pe = /^(?:parents|prev(?:Until|All))/
      , Ne = /^.[^:#\[\.,]*$/
      , Oe = J.expr.match.needsContext
      , ze = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    J.fn.extend({
        find: function(t) {
            var e, i, n, s, a, r, o = this;
            if ("string" != typeof t)
                return J(t).filter(function() {
                    for (e = 0,
                    i = o.length; i > e; e++)
                        if (J.contains(o[e], this))
                            return !0
                }
                );
            for (r = this.pushStack("", "find", t),
            e = 0,
            i = this.length; i > e; e++)
                if (n = r.length,
                J.find(t, this[e], r),
                e > 0)
                    for (s = n; s < r.length; s++)
                        for (a = 0; n > a; a++)
                            if (r[a] === r[s]) {
                                r.splice(s--, 1);
                                break
                            }
            return r
        },
        has: function(t) {
            var e, i = J(t, this), n = i.length;
            return this.filter(function() {
                for (e = 0; n > e; e++)
                    if (J.contains(this, i[e]))
                        return !0
            }
            )
        },
        not: function(t) {
            return this.pushStack(c(this, t, !1), "not", t)
        },
        filter: function(t) {
            return this.pushStack(c(this, t, !0), "filter", t)
        },
        is: function(t) {
            return !!t && ("string" == typeof t ? Oe.test(t) ? J(t, this.context).index(this[0]) >= 0 : J.filter(t, this).length > 0 : this.filter(t).length > 0)
        },
        closest: function(t, e) {
            for (var i, n = 0, s = this.length, a = [], r = Oe.test(t) || "string" != typeof t ? J(t, e || this.context) : 0; s > n; n++)
                for (i = this[n]; i && i.ownerDocument && i !== e && 11 !== i.nodeType; ) {
                    if (r ? r.index(i) > -1 : J.find.matchesSelector(i, t)) {
                        a.push(i);
                        break
                    }
                    i = i.parentNode
                }
            return a = a.length > 1 ? J.unique(a) : a,
            this.pushStack(a, "closest", t)
        },
        index: function(t) {
            return t ? "string" == typeof t ? J.inArray(this[0], J(t)) : J.inArray(t.jquery ? t[0] : t, this) : this[0] && this[0].parentNode ? this.prevAll().length : -1
        },
        add: function(t, e) {
            var i = "string" == typeof t ? J(t, e) : J.makeArray(t && t.nodeType ? [t] : t)
              , n = J.merge(this.get(), i);
            return this.pushStack(o(i[0]) || o(n[0]) ? n : J.unique(n))
        },
        addBack: function(t) {
            return this.add(null  == t ? this.prevObject : this.prevObject.filter(t))
        }
    }),
    J.fn.andSelf = J.fn.addBack,
    J.each({
        parent: function(t) {
            var e = t.parentNode;
            return e && 11 !== e.nodeType ? e : null 
        },
        parents: function(t) {
            return J.dir(t, "parentNode")
        },
        parentsUntil: function(t, e, i) {
            return J.dir(t, "parentNode", i)
        },
        next: function(t) {
            return l(t, "nextSibling")
        },
        prev: function(t) {
            return l(t, "previousSibling")
        },
        nextAll: function(t) {
            return J.dir(t, "nextSibling")
        },
        prevAll: function(t) {
            return J.dir(t, "previousSibling")
        },
        nextUntil: function(t, e, i) {
            return J.dir(t, "nextSibling", i)
        },
        prevUntil: function(t, e, i) {
            return J.dir(t, "previousSibling", i)
        },
        siblings: function(t) {
            return J.sibling((t.parentNode || {}).firstChild, t)
        },
        children: function(t) {
            return J.sibling(t.firstChild)
        },
        contents: function(t) {
            return J.nodeName(t, "iframe") ? t.contentDocument || t.contentWindow.document : J.merge([], t.childNodes)
        }
    }, function(t, e) {
        J.fn[t] = function(i, n) {
            var s = J.map(this, e, i);
            return Ae.test(t) || (n = i),
            n && "string" == typeof n && (s = J.filter(n, s)),
            s = this.length > 1 && !ze[t] ? J.unique(s) : s,
            this.length > 1 && Pe.test(t) && (s = s.reverse()),
            this.pushStack(s, t, V.call(arguments).join(","))
        }
    }
    ),
    J.extend({
        filter: function(t, e, i) {
            return i && (t = ":not(" + t + ")"),
            1 === e.length ? J.find.matchesSelector(e[0], t) ? [e[0]] : [] : J.find.matches(t, e)
        },
        dir: function(t, i, n) {
            for (var s = [], a = t[i]; a && 9 !== a.nodeType && (n === e || 1 !== a.nodeType || !J(a).is(n)); )
                1 === a.nodeType && s.push(a),
                a = a[i];
            return s
        },
        sibling: function(t, e) {
            for (var i = []; t; t = t.nextSibling)
                1 === t.nodeType && t !== e && i.push(t);
            return i
        }
    });
    var Re = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video"
      , Le = / jQuery\d+="(?:null|\d+)"/g
      , je = /^\s+/
      , He = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi
      , Be = /<([\w:]+)/
      , We = /<tbody/i
      , Ue = /<|&#?\w+;/
      , Ye = /<(?:script|style|link)/i
      , Ve = /<(?:script|object|embed|option|style)/i
      , Ke = new RegExp("<(?:" + Re + ")[\\s/>]","i")
      , Xe = /^(?:checkbox|radio)$/
      , Ge = /checked\s*(?:[^=]|=\s*.checked.)/i
      , Qe = /\/(java|ecma)script/i
      , Je = /^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g
      , Ze = {
        option: [1, "<select multiple='multiple'>", "</select>"],
        legend: [1, "<fieldset>", "</fieldset>"],
        thead: [1, "<table>", "</table>"],
        tr: [2, "<table><tbody>", "</tbody></table>"],
        td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
        col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
        area: [1, "<map>", "</map>"],
        _default: [0, "", ""]
    }
      , ti = d(j)
      , ei = ti.appendChild(j.createElement("div"));
    Ze.optgroup = Ze.option,
    Ze.tbody = Ze.tfoot = Ze.colgroup = Ze.caption = Ze.thead,
    Ze.th = Ze.td,
    J.support.htmlSerialize || (Ze._default = [1, "X<div>", "</div>"]),
    J.fn.extend({
        text: function(t) {
            return J.access(this, function(t) {
                return t === e ? J.text(this) : this.empty().append((this[0] && this[0].ownerDocument || j).createTextNode(t))
            }
            , null , t, arguments.length)
        },
        wrapAll: function(t) {
            if (J.isFunction(t))
                return this.each(function(e) {
                    J(this).wrapAll(t.call(this, e))
                }
                );
            if (this[0]) {
                var e = J(t, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && e.insertBefore(this[0]),
                e.map(function() {
                    for (var t = this; t.firstChild && 1 === t.firstChild.nodeType; )
                        t = t.firstChild;
                    return t
                }
                ).append(this)
            }
            return this
        },
        wrapInner: function(t) {
            return this.each(J.isFunction(t) ? function(e) {
                J(this).wrapInner(t.call(this, e))
            }
             : function() {
                var e = J(this)
                  , i = e.contents();
                i.length ? i.wrapAll(t) : e.append(t)
            }
            )
        },
        wrap: function(t) {
            var e = J.isFunction(t);
            return this.each(function(i) {
                J(this).wrapAll(e ? t.call(this, i) : t)
            }
            )
        },
        unwrap: function() {
            return this.parent().each(function() {
                J.nodeName(this, "body") || J(this).replaceWith(this.childNodes)
            }
            ).end()
        },
        append: function() {
            return this.domManip(arguments, !0, function(t) {
                (1 === this.nodeType || 11 === this.nodeType) && this.appendChild(t)
            }
            )
        },
        prepend: function() {
            return this.domManip(arguments, !0, function(t) {
                (1 === this.nodeType || 11 === this.nodeType) && this.insertBefore(t, this.firstChild)
            }
            )
        },
        before: function() {
            if (!o(this[0]))
                return this.domManip(arguments, !1, function(t) {
                    this.parentNode.insertBefore(t, this)
                }
                );
            if (arguments.length) {
                var t = J.clean(arguments);
                return this.pushStack(J.merge(t, this), "before", this.selector)
            }
        },
        after: function() {
            if (!o(this[0]))
                return this.domManip(arguments, !1, function(t) {
                    this.parentNode.insertBefore(t, this.nextSibling)
                }
                );
            if (arguments.length) {
                var t = J.clean(arguments);
                return this.pushStack(J.merge(this, t), "after", this.selector)
            }
        },
        remove: function(t, e) {
            for (var i, n = 0; null  != (i = this[n]); n++)
                (!t || J.filter(t, [i]).length) && (!e && 1 === i.nodeType && (J.cleanData(i.getElementsByTagName("*")),
                J.cleanData([i])),
                i.parentNode && i.parentNode.removeChild(i));
            return this
        },
        empty: function() {
            for (var t, e = 0; null  != (t = this[e]); e++)
                for (1 === t.nodeType && J.cleanData(t.getElementsByTagName("*")); t.firstChild; )
                    t.removeChild(t.firstChild);
            return this
        },
        clone: function(t, e) {
            return t = null  == t ? !1 : t,
            e = null  == e ? t : e,
            this.map(function() {
                return J.clone(this, t, e)
            }
            )
        },
        html: function(t) {
            return J.access(this, function(t) {
                var i = this[0] || {}
                  , n = 0
                  , s = this.length;
                if (t === e)
                    return 1 === i.nodeType ? i.innerHTML.replace(Le, "") : e;
                if (!("string" != typeof t || Ye.test(t) || !J.support.htmlSerialize && Ke.test(t) || !J.support.leadingWhitespace && je.test(t) || Ze[(Be.exec(t) || ["", ""])[1].toLowerCase()])) {
                    t = t.replace(He, "<$1></$2>");
                    try {
                        for (; s > n; n++)
                            i = this[n] || {},
                            1 === i.nodeType && (J.cleanData(i.getElementsByTagName("*")),
                            i.innerHTML = t);
                        i = 0
                    } catch (a) {}
                }
                i && this.empty().append(t)
            }
            , null , t, arguments.length)
        },
        replaceWith: function(t) {
            return o(this[0]) ? this.length ? this.pushStack(J(J.isFunction(t) ? t() : t), "replaceWith", t) : this : J.isFunction(t) ? this.each(function(e) {
                var i = J(this)
                  , n = i.html();
                i.replaceWith(t.call(this, e, n))
            }
            ) : ("string" != typeof t && (t = J(t).detach()),
            this.each(function() {
                var e = this.nextSibling
                  , i = this.parentNode;
                J(this).remove(),
                e ? J(e).before(t) : J(i).append(t)
            }
            ))
        },
        detach: function(t) {
            return this.remove(t, !0)
        },
        domManip: function(t, i, n) {
            t = [].concat.apply([], t);
            var s, a, r, o, l = 0, c = t[0], d = [], u = this.length;
            if (!J.support.checkClone && u > 1 && "string" == typeof c && Ge.test(c))
                return this.each(function() {
                    J(this).domManip(t, i, n)
                }
                );
            if (J.isFunction(c))
                return this.each(function(s) {
                    var a = J(this);
                    t[0] = c.call(this, s, i ? a.html() : e),
                    a.domManip(t, i, n)
                }
                );
            if (this[0]) {
                if (s = J.buildFragment(t, this, d),
                r = s.fragment,
                a = r.firstChild,
                1 === r.childNodes.length && (r = a),
                a)
                    for (i = i && J.nodeName(a, "tr"),
                    o = s.cacheable || u - 1; u > l; l++)
                        n.call(i && J.nodeName(this[l], "table") ? h(this[l], "tbody") : this[l], l === o ? r : J.clone(r, !0, !0));
                r = a = null ,
                d.length && J.each(d, function(t, e) {
                    e.src ? J.ajax ? J.ajax({
                        url: e.src,
                        type: "GET",
                        dataType: "script",
                        async: !1,
                        global: !1,
                        "throws": !0
                    }) : J.error("no ajax") : J.globalEval((e.text || e.textContent || e.innerHTML || "").replace(Je, "")),
                    e.parentNode && e.parentNode.removeChild(e)
                }
                )
            }
            return this
        }
    }),
    J.buildFragment = function(t, i, n) {
        var s, a, r, o = t[0];
        return i = i || j,
        i = !i.nodeType && i[0] || i,
        i = i.ownerDocument || i,
        1 === t.length && "string" == typeof o && o.length < 512 && i === j && "<" === o.charAt(0) && !Ve.test(o) && (J.support.checkClone || !Ge.test(o)) && (J.support.html5Clone || !Ke.test(o)) && (a = !0,
        s = J.fragments[o],
        r = s !== e),
        s || (s = i.createDocumentFragment(),
        J.clean(t, i, s, n),
        a && (J.fragments[o] = r && s)),
        {
            fragment: s,
            cacheable: a
        }
    }
    ,
    J.fragments = {},
    J.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(t, e) {
        J.fn[t] = function(i) {
            var n, s = 0, a = [], r = J(i), o = r.length, l = 1 === this.length && this[0].parentNode;
            if ((null  == l || l && 11 === l.nodeType && 1 === l.childNodes.length) && 1 === o)
                return r[e](this[0]),
                this;
            for (; o > s; s++)
                n = (s > 0 ? this.clone(!0) : this).get(),
                J(r[s])[e](n),
                a = a.concat(n);
            return this.pushStack(a, t, r.selector)
        }
    }
    ),
    J.extend({
        clone: function(t, e, i) {
            var n, s, a, r;
            if (J.support.html5Clone || J.isXMLDoc(t) || !Ke.test("<" + t.nodeName + ">") ? r = t.cloneNode(!0) : (ei.innerHTML = t.outerHTML,
            ei.removeChild(r = ei.firstChild)),
            !(J.support.noCloneEvent && J.support.noCloneChecked || 1 !== t.nodeType && 11 !== t.nodeType || J.isXMLDoc(t)))
                for (p(t, r),
                n = f(t),
                s = f(r),
                a = 0; n[a]; ++a)
                    s[a] && p(n[a], s[a]);
            if (e && (u(t, r),
            i))
                for (n = f(t),
                s = f(r),
                a = 0; n[a]; ++a)
                    u(n[a], s[a]);
            return n = s = null ,
            r
        },
        clean: function(t, e, i, n) {
            var s, a, r, o, l, c, h, u, p, f, g, v = e === j && ti, b = [];
            for (e && "undefined" != typeof e.createDocumentFragment || (e = j),
            s = 0; null  != (r = t[s]); s++)
                if ("number" == typeof r && (r += ""),
                r) {
                    if ("string" == typeof r)
                        if (Ue.test(r)) {
                            for (v = v || d(e),
                            h = e.createElement("div"),
                            v.appendChild(h),
                            r = r.replace(He, "<$1></$2>"),
                            o = (Be.exec(r) || ["", ""])[1].toLowerCase(),
                            l = Ze[o] || Ze._default,
                            c = l[0],
                            h.innerHTML = l[1] + r + l[2]; c--; )
                                h = h.lastChild;
                            if (!J.support.tbody)
                                for (u = We.test(r),
                                p = "table" !== o || u ? "<table>" !== l[1] || u ? [] : h.childNodes : h.firstChild && h.firstChild.childNodes,
                                a = p.length - 1; a >= 0; --a)
                                    J.nodeName(p[a], "tbody") && !p[a].childNodes.length && p[a].parentNode.removeChild(p[a]);
                            !J.support.leadingWhitespace && je.test(r) && h.insertBefore(e.createTextNode(je.exec(r)[0]), h.firstChild),
                            r = h.childNodes,
                            h.parentNode.removeChild(h)
                        } else
                            r = e.createTextNode(r);
                    r.nodeType ? b.push(r) : J.merge(b, r)
                }
            if (h && (r = h = v = null ),
            !J.support.appendChecked)
                for (s = 0; null  != (r = b[s]); s++)
                    J.nodeName(r, "input") ? m(r) : "undefined" != typeof r.getElementsByTagName && J.grep(r.getElementsByTagName("input"), m);
            if (i)
                for (f = function(t) {
                    return !t.type || Qe.test(t.type) ? n ? n.push(t.parentNode ? t.parentNode.removeChild(t) : t) : i.appendChild(t) : void 0
                }
                ,
                s = 0; null  != (r = b[s]); s++)
                    J.nodeName(r, "script") && f(r) || (i.appendChild(r),
                    "undefined" != typeof r.getElementsByTagName && (g = J.grep(J.merge([], r.getElementsByTagName("script")), f),
                    b.splice.apply(b, [s + 1, 0].concat(g)),
                    s += g.length));
            return b
        },
        cleanData: function(t, e) {
            for (var i, n, s, a, r = 0, o = J.expando, l = J.cache, c = J.support.deleteExpando, d = J.event.special; null  != (s = t[r]); r++)
                if ((e || J.acceptData(s)) && (n = s[o],
                i = n && l[n])) {
                    if (i.events)
                        for (a in i.events)
                            d[a] ? J.event.remove(s, a) : J.removeEvent(s, a, i.handle);
                    l[n] && (delete l[n],
                    c ? delete s[o] : s.removeAttribute ? s.removeAttribute(o) : s[o] = null ,
                    J.deletedIds.push(n))
                }
        }
    }),
    function() {
        var t, e;
        J.uaMatch = function(t) {
            t = t.toLowerCase();
            var e = /(chrome)[ \/]([\w.]+)/.exec(t) || /(webkit)[ \/]([\w.]+)/.exec(t) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t) || /(msie) ([\w.]+)/.exec(t) || t.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t) || [];
            return {
                browser: e[1] || "",
                version: e[2] || "0"
            }
        }
        ,
        t = J.uaMatch(B.userAgent),
        e = {},
        t.browser && (e[t.browser] = !0,
        e.version = t.version),
        e.chrome ? e.webkit = !0 : e.webkit && (e.safari = !0),
        J.browser = e,
        J.sub = function() {
            function t(e, i) {
                return new t.fn.init(e,i)
            }
            J.extend(!0, t, this),
            t.superclass = this,
            t.fn = t.prototype = this(),
            t.fn.constructor = t,
            t.sub = this.sub,
            t.fn.init = function i(i, n) {
                return n && n instanceof J && !(n instanceof t) && (n = t(n)),
                J.fn.init.call(this, i, n, e)
            }
            ,
            t.fn.init.prototype = t.fn;
            var e = t(j);
            return t
        }
    }
    ();
    var ii, ni, si, ai = /alpha\([^)]*\)/i, ri = /opacity=([^)]*)/, oi = /^(top|right|bottom|left)$/, li = /^(none|table(?!-c[ea]).+)/, ci = /^margin/, di = new RegExp("^(" + Z + ")(.*)$","i"), hi = new RegExp("^(" + Z + ")(?!px)[a-z%]+$","i"), ui = new RegExp("^([-+])=(" + Z + ")","i"), pi = {}, fi = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }, mi = {
        letterSpacing: 0,
        fontWeight: 400
    }, gi = ["Top", "Right", "Bottom", "Left"], vi = ["Webkit", "O", "Moz", "ms"], bi = J.fn.toggle;
    J.fn.extend({
        css: function(t, i) {
            return J.access(this, function(t, i, n) {
                return n !== e ? J.style(t, i, n) : J.css(t, i)
            }
            , t, i, arguments.length > 1)
        },
        show: function() {
            return b(this, !0)
        },
        hide: function() {
            return b(this)
        },
        toggle: function(t, e) {
            var i = "boolean" == typeof t;
            return J.isFunction(t) && J.isFunction(e) ? bi.apply(this, arguments) : this.each(function() {
                (i ? t : v(this)) ? J(this).show() : J(this).hide()
            }
            )
        }
    }),
    J.extend({
        cssHooks: {
            opacity: {
                get: function(t, e) {
                    if (e) {
                        var i = ii(t, "opacity");
                        return "" === i ? "1" : i
                    }
                }
            }
        },
        cssNumber: {
            fillOpacity: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": J.support.cssFloat ? "cssFloat" : "styleFloat"
        },
        style: function(t, i, n, s) {
            if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
                var a, r, o, l = J.camelCase(i), c = t.style;
                if (i = J.cssProps[l] || (J.cssProps[l] = g(c, l)),
                o = J.cssHooks[i] || J.cssHooks[l],
                n === e)
                    return o && "get" in o && (a = o.get(t, !1, s)) !== e ? a : c[i];
                if (r = typeof n,
                "string" === r && (a = ui.exec(n)) && (n = (a[1] + 1) * a[2] + parseFloat(J.css(t, i)),
                r = "number"),
                !(null  == n || "number" === r && isNaN(n) || ("number" === r && !J.cssNumber[l] && (n += "px"),
                o && "set" in o && (n = o.set(t, n, s)) === e)))
                    try {
                        c[i] = n
                    } catch (d) {}
            }
        },
        css: function(t, i, n, s) {
            var a, r, o, l = J.camelCase(i);
            return i = J.cssProps[l] || (J.cssProps[l] = g(t.style, l)),
            o = J.cssHooks[i] || J.cssHooks[l],
            o && "get" in o && (a = o.get(t, !0, s)),
            a === e && (a = ii(t, i)),
            "normal" === a && i in mi && (a = mi[i]),
            n || s !== e ? (r = parseFloat(a),
            n || J.isNumeric(r) ? r || 0 : a) : a
        },
        swap: function(t, e, i) {
            var n, s, a = {};
            for (s in e)
                a[s] = t.style[s],
                t.style[s] = e[s];
            n = i.call(t);
            for (s in e)
                t.style[s] = a[s];
            return n
        }
    }),
    t.getComputedStyle ? ii = function(e, i) {
        var n, s, a, r, o = t.getComputedStyle(e, null ), l = e.style;
        return o && (n = o[i],
        "" === n && !J.contains(e.ownerDocument, e) && (n = J.style(e, i)),
        hi.test(n) && ci.test(i) && (s = l.width,
        a = l.minWidth,
        r = l.maxWidth,
        l.minWidth = l.maxWidth = l.width = n,
        n = o.width,
        l.width = s,
        l.minWidth = a,
        l.maxWidth = r)),
        n
    }
     : j.documentElement.currentStyle && (ii = function(t, e) {
        var i, n, s = t.currentStyle && t.currentStyle[e], a = t.style;
        return null  == s && a && a[e] && (s = a[e]),
        hi.test(s) && !oi.test(e) && (i = a.left,
        n = t.runtimeStyle && t.runtimeStyle.left,
        n && (t.runtimeStyle.left = t.currentStyle.left),
        a.left = "fontSize" === e ? "1em" : s,
        s = a.pixelLeft + "px",
        a.left = i,
        n && (t.runtimeStyle.left = n)),
        "" === s ? "auto" : s
    }
    ),
    J.each(["height", "width"], function(t, e) {
        J.cssHooks[e] = {
            get: function(t, i, n) {
                return i ? 0 === t.offsetWidth && li.test(ii(t, "display")) ? J.swap(t, fi, function() {
                    return x(t, e, n)
                }
                ) : x(t, e, n) : void 0
            },
            set: function(t, i, n) {
                return _(t, i, n ? y(t, e, n, J.support.boxSizing && "border-box" === J.css(t, "boxSizing")) : 0)
            }
        }
    }
    ),
    J.support.opacity || (J.cssHooks.opacity = {
        get: function(t, e) {
            return ri.test((e && t.currentStyle ? t.currentStyle.filter : t.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : e ? "1" : ""
        },
        set: function(t, e) {
            var i = t.style
              , n = t.currentStyle
              , s = J.isNumeric(e) ? "alpha(opacity=" + 100 * e + ")" : ""
              , a = n && n.filter || i.filter || "";
            i.zoom = 1,
            e >= 1 && "" === J.trim(a.replace(ai, "")) && i.removeAttribute && (i.removeAttribute("filter"),
            n && !n.filter) || (i.filter = ai.test(a) ? a.replace(ai, s) : a + " " + s)
        }
    }),
    J(function() {
        J.support.reliableMarginRight || (J.cssHooks.marginRight = {
            get: function(t, e) {
                return J.swap(t, {
                    display: "inline-block"
                }, function() {
                    return e ? ii(t, "marginRight") : void 0
                }
                )
            }
        }),
        !J.support.pixelPosition && J.fn.position && J.each(["top", "left"], function(t, e) {
            J.cssHooks[e] = {
                get: function(t, i) {
                    if (i) {
                        var n = ii(t, e);
                        return hi.test(n) ? J(t).position()[e] + "px" : n
                    }
                }
            }
        }
        )
    }
    ),
    J.expr && J.expr.filters && (J.expr.filters.hidden = function(t) {
        return 0 === t.offsetWidth && 0 === t.offsetHeight || !J.support.reliableHiddenOffsets && "none" === (t.style && t.style.display || ii(t, "display"))
    }
    ,
    J.expr.filters.visible = function(t) {
        return !J.expr.filters.hidden(t)
    }
    ),
    J.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(t, e) {
        J.cssHooks[t + e] = {
            expand: function(i) {
                var n, s = "string" == typeof i ? i.split(" ") : [i], a = {};
                for (n = 0; 4 > n; n++)
                    a[t + gi[n] + e] = s[n] || s[n - 2] || s[0];
                return a
            }
        },
        ci.test(t) || (J.cssHooks[t + e].set = _)
    }
    );
    var _i = /%20/g
      , yi = /\[\]$/
      , xi = /\r?\n/g
      , wi = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i
      , ki = /^(?:select|textarea)/i;
    J.fn.extend({
        serialize: function() {
            return J.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                return this.elements ? J.makeArray(this.elements) : this
            }
            ).filter(function() {
                return this.name && !this.disabled && (this.checked || ki.test(this.nodeName) || wi.test(this.type))
            }
            ).map(function(t, e) {
                var i = J(this).val();
                return null  == i ? null  : J.isArray(i) ? J.map(i, function(t) {
                    return {
                        name: e.name,
                        value: t.replace(xi, "\r\n")
                    }
                }
                ) : {
                    name: e.name,
                    value: i.replace(xi, "\r\n")
                }
            }
            ).get()
        }
    }),
    J.param = function(t, i) {
        var n, s = [], a = function(t, e) {
            e = J.isFunction(e) ? e() : null  == e ? "" : e,
            s[s.length] = encodeURIComponent(t) + "=" + encodeURIComponent(e)
        }
        ;
        if (i === e && (i = J.ajaxSettings && J.ajaxSettings.traditional),
        J.isArray(t) || t.jquery && !J.isPlainObject(t))
            J.each(t, function() {
                a(this.name, this.value)
            }
            );
        else
            for (n in t)
                k(n, t[n], i, a);
        return s.join("&").replace(_i, "+")
    }
    ;
    var Ci, Ti, Si = /#.*$/, Di = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, $i = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/, Ei = /^(?:GET|HEAD)$/, qi = /^\/\//, Fi = /\?/, Ii = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, Mi = /([?&])_=[^&]*/, Ai = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/, Pi = J.fn.load, Ni = {}, Oi = {}, zi = ["*/"] + ["*"];
    try {
        Ti = H.href
    } catch (Ri) {
        Ti = j.createElement("a"),
        Ti.href = "",
        Ti = Ti.href
    }
    Ci = Ai.exec(Ti.toLowerCase()) || [],
    J.fn.load = function(t, i, n) {
        if ("string" != typeof t && Pi)
            return Pi.apply(this, arguments);
        if (!this.length)
            return this;
        var s, a, r, o = this, l = t.indexOf(" ");
        return l >= 0 && (s = t.slice(l, t.length),
        t = t.slice(0, l)),
        J.isFunction(i) ? (n = i,
        i = e) : i && "object" == typeof i && (a = "POST"),
        J.ajax({
            url: t,
            type: a,
            dataType: "html",
            data: i,
            complete: function(t, e) {
                n && o.each(n, r || [t.responseText, e, t])
            }
        }).done(function(t) {
            r = arguments,
            o.html(s ? J("<div>").append(t.replace(Ii, "")).find(s) : t)
        }
        ),
        this
    }
    ,
    J.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function(t, e) {
        J.fn[e] = function(t) {
            return this.on(e, t)
        }
    }
    ),
    J.each(["get", "post"], function(t, i) {
        J[i] = function(t, n, s, a) {
            return J.isFunction(n) && (a = a || s,
            s = n,
            n = e),
            J.ajax({
                type: i,
                url: t,
                data: n,
                success: s,
                dataType: a
            })
        }
    }
    ),
    J.extend({
        getScript: function(t, i) {
            return J.get(t, e, i, "script")
        },
        getJSON: function(t, e, i) {
            return J.get(t, e, i, "json")
        },
        ajaxSetup: function(t, e) {
            return e ? S(t, J.ajaxSettings) : (e = t,
            t = J.ajaxSettings),
            S(t, e),
            t
        },
        ajaxSettings: {
            url: Ti,
            isLocal: $i.test(Ci[1]),
            global: !0,
            type: "GET",
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            processData: !0,
            async: !0,
            accepts: {
                xml: "application/xml, text/xml",
                html: "text/html",
                text: "text/plain",
                json: "application/json, text/javascript",
                "*": zi
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText"
            },
            converters: {
                "* text": t.String,
                "text html": !0,
                "text json": J.parseJSON,
                "text xml": J.parseXML
            },
            flatOptions: {
                context: !0,
                url: !0
            }
        },
        ajaxPrefilter: C(Ni),
        ajaxTransport: C(Oi),
        ajax: function(t, i) {
            function n(t, i, n, r) {
                var c, h, b, _, x, k = i;
                2 !== y && (y = 2,
                l && clearTimeout(l),
                o = e,
                a = r || "",
                w.readyState = t > 0 ? 4 : 0,
                n && (_ = D(u, w, n)),
                t >= 200 && 300 > t || 304 === t ? (u.ifModified && (x = w.getResponseHeader("Last-Modified"),
                x && (J.lastModified[s] = x),
                x = w.getResponseHeader("Etag"),
                x && (J.etag[s] = x)),
                304 === t ? (k = "notmodified",
                c = !0) : (c = $(u, _),
                k = c.state,
                h = c.data,
                b = c.error,
                c = !b)) : (b = k,
                (!k || t) && (k = "error",
                0 > t && (t = 0))),
                w.status = t,
                w.statusText = (i || k) + "",
                c ? m.resolveWith(p, [h, k, w]) : m.rejectWith(p, [w, k, b]),
                w.statusCode(v),
                v = e,
                d && f.trigger("ajax" + (c ? "Success" : "Error"), [w, u, c ? h : b]),
                g.fireWith(p, [w, k]),
                d && (f.trigger("ajaxComplete", [w, u]),
                --J.active || J.event.trigger("ajaxStop")))
            }
            "object" == typeof t && (i = t,
            t = e),
            i = i || {};
            var s, a, r, o, l, c, d, h, u = J.ajaxSetup({}, i), p = u.context || u, f = p !== u && (p.nodeType || p instanceof J) ? J(p) : J.event, m = J.Deferred(), g = J.Callbacks("once memory"), v = u.statusCode || {}, b = {}, _ = {}, y = 0, x = "canceled", w = {
                readyState: 0,
                setRequestHeader: function(t, e) {
                    if (!y) {
                        var i = t.toLowerCase();
                        t = _[i] = _[i] || t,
                        b[t] = e
                    }
                    return this
                },
                getAllResponseHeaders: function() {
                    return 2 === y ? a : null 
                },
                getResponseHeader: function(t) {
                    var i;
                    if (2 === y) {
                        if (!r)
                            for (r = {}; i = Di.exec(a); )
                                r[i[1].toLowerCase()] = i[2];
                        i = r[t.toLowerCase()]
                    }
                    return i === e ? null  : i
                },
                overrideMimeType: function(t) {
                    return y || (u.mimeType = t),
                    this
                },
                abort: function(t) {
                    return t = t || x,
                    o && o.abort(t),
                    n(0, t),
                    this
                }
            };
            if (m.promise(w),
            w.success = w.done,
            w.error = w.fail,
            w.complete = g.add,
            w.statusCode = function(t) {
                if (t) {
                    var e;
                    if (2 > y)
                        for (e in t)
                            v[e] = [v[e], t[e]];
                    else
                        e = t[w.status],
                        w.always(e)
                }
                return this
            }
            ,
            u.url = ((t || u.url) + "").replace(Si, "").replace(qi, Ci[1] + "//"),
            u.dataTypes = J.trim(u.dataType || "*").toLowerCase().split(ee),
            null  == u.crossDomain && (c = Ai.exec(u.url.toLowerCase()) || !1,
            u.crossDomain = c && c.join(":") + (c[3] ? "" : "http:" === c[1] ? 80 : 443) !== Ci.join(":") + (Ci[3] ? "" : "http:" === Ci[1] ? 80 : 443)),
            u.data && u.processData && "string" != typeof u.data && (u.data = J.param(u.data, u.traditional)),
            T(Ni, u, i, w),
            2 === y)
                return w;
            if (d = u.global,
            u.type = u.type.toUpperCase(),
            u.hasContent = !Ei.test(u.type),
            d && 0 === J.active++ && J.event.trigger("ajaxStart"),
            !u.hasContent && (u.data && (u.url += (Fi.test(u.url) ? "&" : "?") + u.data,
            delete u.data),
            s = u.url,
            u.cache === !1)) {
                var k = J.now()
                  , C = u.url.replace(Mi, "$1_=" + k);
                u.url = C + (C === u.url ? (Fi.test(u.url) ? "&" : "?") + "_=" + k : "")
            }
            (u.data && u.hasContent && u.contentType !== !1 || i.contentType) && w.setRequestHeader("Content-Type", u.contentType),
            u.ifModified && (s = s || u.url,
            J.lastModified[s] && w.setRequestHeader("If-Modified-Since", J.lastModified[s]),
            J.etag[s] && w.setRequestHeader("If-None-Match", J.etag[s])),
            w.setRequestHeader("Accept", u.dataTypes[0] && u.accepts[u.dataTypes[0]] ? u.accepts[u.dataTypes[0]] + ("*" !== u.dataTypes[0] ? ", " + zi + "; q=0.01" : "") : u.accepts["*"]);
            for (h in u.headers)
                w.setRequestHeader(h, u.headers[h]);
            if (!u.beforeSend || u.beforeSend.call(p, w, u) !== !1 && 2 !== y) {
                x = "abort";
                for (h in {
                    success: 1,
                    error: 1,
                    complete: 1
                })
                    w[h](u[h]);
                if (o = T(Oi, u, i, w)) {
                    w.readyState = 1,
                    d && f.trigger("ajaxSend", [w, u]),
                    u.async && u.timeout > 0 && (l = setTimeout(function() {
                        w.abort("timeout")
                    }
                    , u.timeout));
                    try {
                        y = 1,
                        o.send(b, n)
                    } catch (S) {
                        if (!(2 > y))
                            throw S;
                        n(-1, S)
                    }
                } else
                    n(-1, "No Transport");
                return w
            }
            return w.abort()
        },
        active: 0,
        lastModified: {},
        etag: {}
    });
    var Li = []
      , ji = /\?/
      , Hi = /(=)\?(?=&|$)|\?\?/
      , Bi = J.now();
    J.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var t = Li.pop() || J.expando + "_" + Bi++;
            return this[t] = !0,
            t
        }
    }),
    J.ajaxPrefilter("json jsonp", function(i, n, s) {
        var a, r, o, l = i.data, c = i.url, d = i.jsonp !== !1, h = d && Hi.test(c), u = d && !h && "string" == typeof l && !(i.contentType || "").indexOf("application/x-www-form-urlencoded") && Hi.test(l);
        return "jsonp" === i.dataTypes[0] || h || u ? (a = i.jsonpCallback = J.isFunction(i.jsonpCallback) ? i.jsonpCallback() : i.jsonpCallback,
        r = t[a],
        h ? i.url = c.replace(Hi, "$1" + a) : u ? i.data = l.replace(Hi, "$1" + a) : d && (i.url += (ji.test(c) ? "&" : "?") + i.jsonp + "=" + a),
        i.converters["script json"] = function() {
            return o || J.error(a + " was not called"),
            o[0]
        }
        ,
        i.dataTypes[0] = "json",
        t[a] = function() {
            o = arguments
        }
        ,
        s.always(function() {
            t[a] = r,
            i[a] && (i.jsonpCallback = n.jsonpCallback,
            Li.push(a)),
            o && J.isFunction(r) && r(o[0]),
            o = r = e
        }
        ),
        "script") : void 0
    }
    ),
    J.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /javascript|ecmascript/
        },
        converters: {
            "text script": function(t) {
                return J.globalEval(t),
                t
            }
        }
    }),
    J.ajaxPrefilter("script", function(t) {
        t.cache === e && (t.cache = !1),
        t.crossDomain && (t.type = "GET",
        t.global = !1)
    }
    ),
    J.ajaxTransport("script", function(t) {
        if (t.crossDomain) {
            var i, n = j.head || j.getElementsByTagName("head")[0] || j.documentElement;
            return {
                send: function(s, a) {
                    i = j.createElement("script"),
                    i.async = "async",
                    t.scriptCharset && (i.charset = t.scriptCharset),
                    i.src = t.url,
                    i.onload = i.onreadystatechange = function(t, s) {
                        (s || !i.readyState || /loaded|complete/.test(i.readyState)) && (i.onload = i.onreadystatechange = null ,
                        n && i.parentNode && n.removeChild(i),
                        i = e,
                        s || a(200, "success"))
                    }
                    ,
                    n.insertBefore(i, n.firstChild)
                },
                abort: function() {
                    i && i.onload(0, 1)
                }
            }
        }
    }
    );
    var Wi, Ui = t.ActiveXObject ? function() {
        for (var t in Wi)
            Wi[t](0, 1)
    }
     : !1, Yi = 0;
    J.ajaxSettings.xhr = t.ActiveXObject ? function() {
        return !this.isLocal && E() || q()
    }
     : E,
    function(t) {
        J.extend(J.support, {
            ajax: !!t,
            cors: !!t && "withCredentials" in t
        })
    }
    (J.ajaxSettings.xhr()),
    J.support.ajax && J.ajaxTransport(function(i) {
        if (!i.crossDomain || J.support.cors) {
            var n;
            return {
                send: function(s, a) {
                    var r, o, l = i.xhr();
                    if (i.username ? l.open(i.type, i.url, i.async, i.username, i.password) : l.open(i.type, i.url, i.async),
                    i.xhrFields)
                        for (o in i.xhrFields)
                            l[o] = i.xhrFields[o];
                    i.mimeType && l.overrideMimeType && l.overrideMimeType(i.mimeType),
                    !i.crossDomain && !s["X-Requested-With"] && (s["X-Requested-With"] = "XMLHttpRequest");
                    try {
                        for (o in s)
                            l.setRequestHeader(o, s[o])
                    } catch (c) {}
                    l.send(i.hasContent && i.data || null ),
                    n = function(t, s) {
                        var o, c, d, h, u;
                        try {
                            if (n && (s || 4 === l.readyState))
                                if (n = e,
                                r && (l.onreadystatechange = J.noop,
                                Ui && delete Wi[r]),
                                s)
                                    4 !== l.readyState && l.abort();
                                else {
                                    o = l.status,
                                    d = l.getAllResponseHeaders(),
                                    h = {},
                                    u = l.responseXML,
                                    u && u.documentElement && (h.xml = u);
                                    try {
                                        h.text = l.responseText
                                    } catch (t) {}
                                    try {
                                        c = l.statusText
                                    } catch (p) {
                                        c = ""
                                    }
                                    o || !i.isLocal || i.crossDomain ? 1223 === o && (o = 204) : o = h.text ? 200 : 404
                                }
                        } catch (f) {
                            s || a(-1, f)
                        }
                        h && a(o, c, h, d)
                    }
                    ,
                    i.async ? 4 === l.readyState ? setTimeout(n, 0) : (r = ++Yi,
                    Ui && (Wi || (Wi = {},
                    J(t).unload(Ui)),
                    Wi[r] = n),
                    l.onreadystatechange = n) : n()
                },
                abort: function() {
                    n && n(0, 1)
                }
            }
        }
    }
    );
    var Vi, Ki, Xi = /^(?:toggle|show|hide)$/, Gi = new RegExp("^(?:([-+])=|)(" + Z + ")([a-z%]*)$","i"), Qi = /queueHooks$/, Ji = [P], Zi = {
        "*": [function(t, e) {
            var i, n, s = this.createTween(t, e), a = Gi.exec(e), r = s.cur(), o = +r || 0, l = 1, c = 20;
            if (a) {
                if (i = +a[2],
                n = a[3] || (J.cssNumber[t] ? "" : "px"),
                "px" !== n && o) {
                    o = J.css(s.elem, t, !0) || i || 1;
                    do
                        l = l || ".5",
                        o /= l,
                        J.style(s.elem, t, o + n);
                    while (l !== (l = s.cur() / r) && 1 !== l && --c)
                }
                s.unit = n,
                s.start = o,
                s.end = a[1] ? o + (a[1] + 1) * i : i
            }
            return s
        }
        ]
    };
    J.Animation = J.extend(M, {
        tweener: function(t, e) {
            J.isFunction(t) ? (e = t,
            t = ["*"]) : t = t.split(" ");
            for (var i, n = 0, s = t.length; s > n; n++)
                i = t[n],
                Zi[i] = Zi[i] || [],
                Zi[i].unshift(e)
        },
        prefilter: function(t, e) {
            e ? Ji.unshift(t) : Ji.push(t)
        }
    }),
    J.Tween = N,
    N.prototype = {
        constructor: N,
        init: function(t, e, i, n, s, a) {
            this.elem = t,
            this.prop = i,
            this.easing = s || "swing",
            this.options = e,
            this.start = this.now = this.cur(),
            this.end = n,
            this.unit = a || (J.cssNumber[i] ? "" : "px")
        },
        cur: function() {
            var t = N.propHooks[this.prop];
            return t && t.get ? t.get(this) : N.propHooks._default.get(this)
        },
        run: function(t) {
            var e, i = N.propHooks[this.prop];
            return this.pos = e = this.options.duration ? J.easing[this.easing](t, this.options.duration * t, 0, 1, this.options.duration) : t,
            this.now = (this.end - this.start) * e + this.start,
            this.options.step && this.options.step.call(this.elem, this.now, this),
            i && i.set ? i.set(this) : N.propHooks._default.set(this),
            this
        }
    },
    N.prototype.init.prototype = N.prototype,
    N.propHooks = {
        _default: {
            get: function(t) {
                var e;
                return null  == t.elem[t.prop] || t.elem.style && null  != t.elem.style[t.prop] ? (e = J.css(t.elem, t.prop, !1, ""),
                e && "auto" !== e ? e : 0) : t.elem[t.prop]
            },
            set: function(t) {
                J.fx.step[t.prop] ? J.fx.step[t.prop](t) : t.elem.style && (null  != t.elem.style[J.cssProps[t.prop]] || J.cssHooks[t.prop]) ? J.style(t.elem, t.prop, t.now + t.unit) : t.elem[t.prop] = t.now
            }
        }
    },
    N.propHooks.scrollTop = N.propHooks.scrollLeft = {
        set: function(t) {
            t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now)
        }
    },
    J.each(["toggle", "show", "hide"], function(t, e) {
        var i = J.fn[e];
        J.fn[e] = function(n, s, a) {
            return null  == n || "boolean" == typeof n || !t && J.isFunction(n) && J.isFunction(s) ? i.apply(this, arguments) : this.animate(O(e, !0), n, s, a)
        }
    }
    ),
    J.fn.extend({
        fadeTo: function(t, e, i, n) {
            return this.filter(v).css("opacity", 0).show().end().animate({
                opacity: e
            }, t, i, n)
        },
        animate: function(t, e, i, n) {
            var s = J.isEmptyObject(t)
              , a = J.speed(e, i, n)
              , r = function() {
                var e = M(this, J.extend({}, t), a);
                s && e.stop(!0)
            }
            ;
            return s || a.queue === !1 ? this.each(r) : this.queue(a.queue, r)
        },
        stop: function(t, i, n) {
            var s = function(t) {
                var e = t.stop;
                delete t.stop,
                e(n)
            }
            ;
            return "string" != typeof t && (n = i,
            i = t,
            t = e),
            i && t !== !1 && this.queue(t || "fx", []),
            this.each(function() {
                var e = !0
                  , i = null  != t && t + "queueHooks"
                  , a = J.timers
                  , r = J._data(this);
                if (i)
                    r[i] && r[i].stop && s(r[i]);
                else
                    for (i in r)
                        r[i] && r[i].stop && Qi.test(i) && s(r[i]);
                for (i = a.length; i--; )
                    a[i].elem === this && (null  == t || a[i].queue === t) && (a[i].anim.stop(n),
                    e = !1,
                    a.splice(i, 1));
                (e || !n) && J.dequeue(this, t)
            }
            )
        }
    }),
    J.each({
        slideDown: O("show"),
        slideUp: O("hide"),
        slideToggle: O("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(t, e) {
        J.fn[t] = function(t, i, n) {
            return this.animate(e, t, i, n)
        }
    }
    ),
    J.speed = function(t, e, i) {
        var n = t && "object" == typeof t ? J.extend({}, t) : {
            complete: i || !i && e || J.isFunction(t) && t,
            duration: t,
            easing: i && e || e && !J.isFunction(e) && e
        };
        return n.duration = J.fx.off ? 0 : "number" == typeof n.duration ? n.duration : n.duration in J.fx.speeds ? J.fx.speeds[n.duration] : J.fx.speeds._default,
        (null  == n.queue || n.queue === !0) && (n.queue = "fx"),
        n.old = n.complete,
        n.complete = function() {
            J.isFunction(n.old) && n.old.call(this),
            n.queue && J.dequeue(this, n.queue)
        }
        ,
        n
    }
    ,
    J.easing = {
        linear: function(t) {
            return t
        },
        swing: function(t) {
            return .5 - Math.cos(t * Math.PI) / 2
        }
    },
    J.timers = [],
    J.fx = N.prototype.init,
    J.fx.tick = function() {
        for (var t, e = J.timers, i = 0; i < e.length; i++)
            t = e[i],
            !t() && e[i] === t && e.splice(i--, 1);
        e.length || J.fx.stop()
    }
    ,
    J.fx.timer = function(t) {
        t() && J.timers.push(t) && !Ki && (Ki = setInterval(J.fx.tick, J.fx.interval))
    }
    ,
    J.fx.interval = 13,
    J.fx.stop = function() {
        clearInterval(Ki),
        Ki = null 
    }
    ,
    J.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    },
    J.fx.step = {},
    J.expr && J.expr.filters && (J.expr.filters.animated = function(t) {
        return J.grep(J.timers, function(e) {
            return t === e.elem
        }
        ).length
    }
    );
    var tn = /^(?:body|html)$/i;
    J.fn.offset = function(t) {
        if (arguments.length)
            return t === e ? this : this.each(function(e) {
                J.offset.setOffset(this, t, e)
            }
            );
        var i, n, s, a, r, o, l, c = {
            top: 0,
            left: 0
        }, d = this[0], h = d && d.ownerDocument;
        if (h)
            return (n = h.body) === d ? J.offset.bodyOffset(d) : (i = h.documentElement,
            J.contains(i, d) ? ("undefined" != typeof d.getBoundingClientRect && (c = d.getBoundingClientRect()),
            s = z(h),
            a = i.clientTop || n.clientTop || 0,
            r = i.clientLeft || n.clientLeft || 0,
            o = s.pageYOffset || i.scrollTop,
            l = s.pageXOffset || i.scrollLeft,
            {
                top: c.top + o - a,
                left: c.left + l - r
            }) : c)
    }
    ,
    J.offset = {
        bodyOffset: function(t) {
            var e = t.offsetTop
              , i = t.offsetLeft;
            return J.support.doesNotIncludeMarginInBodyOffset && (e += parseFloat(J.css(t, "marginTop")) || 0,
            i += parseFloat(J.css(t, "marginLeft")) || 0),
            {
                top: e,
                left: i
            }
        },
        setOffset: function(t, e, i) {
            var n = J.css(t, "position");
            "static" === n && (t.style.position = "relative");
            var s, a, r = J(t), o = r.offset(), l = J.css(t, "top"), c = J.css(t, "left"), d = ("absolute" === n || "fixed" === n) && J.inArray("auto", [l, c]) > -1, h = {}, u = {};
            d ? (u = r.position(),
            s = u.top,
            a = u.left) : (s = parseFloat(l) || 0,
            a = parseFloat(c) || 0),
            J.isFunction(e) && (e = e.call(t, i, o)),
            null  != e.top && (h.top = e.top - o.top + s),
            null  != e.left && (h.left = e.left - o.left + a),
            "using" in e ? e.using.call(t, h) : r.css(h)
        }
    },
    J.fn.extend({
        position: function() {
            if (this[0]) {
                var t = this[0]
                  , e = this.offsetParent()
                  , i = this.offset()
                  , n = tn.test(e[0].nodeName) ? {
                    top: 0,
                    left: 0
                } : e.offset();
                return i.top -= parseFloat(J.css(t, "marginTop")) || 0,
                i.left -= parseFloat(J.css(t, "marginLeft")) || 0,
                n.top += parseFloat(J.css(e[0], "borderTopWidth")) || 0,
                n.left += parseFloat(J.css(e[0], "borderLeftWidth")) || 0,
                {
                    top: i.top - n.top,
                    left: i.left - n.left
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var t = this.offsetParent || j.body; t && !tn.test(t.nodeName) && "static" === J.css(t, "position"); )
                    t = t.offsetParent;
                return t || j.body
            }
            )
        }
    }),
    J.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(t, i) {
        var n = /Y/.test(i);
        J.fn[t] = function(s) {
            return J.access(this, function(t, s, a) {
                var r = z(t);
                return a === e ? r ? i in r ? r[i] : r.document.documentElement[s] : t[s] : void (r ? r.scrollTo(n ? J(r).scrollLeft() : a, n ? a : J(r).scrollTop()) : t[s] = a)
            }
            , t, s, arguments.length, null )
        }
    }
    ),
    J.each({
        Height: "height",
        Width: "width"
    }, function(t, i) {
        J.each({
            padding: "inner" + t,
            content: i,
            "": "outer" + t
        }, function(n, s) {
            J.fn[s] = function(s, a) {
                var r = arguments.length && (n || "boolean" != typeof s)
                  , o = n || (s === !0 || a === !0 ? "margin" : "border");
                return J.access(this, function(i, n, s) {
                    var a;
                    return J.isWindow(i) ? i.document.documentElement["client" + t] : 9 === i.nodeType ? (a = i.documentElement,
                    Math.max(i.body["scroll" + t], a["scroll" + t], i.body["offset" + t], a["offset" + t], a["client" + t])) : s === e ? J.css(i, n, s, o) : J.style(i, n, s, o)
                }
                , i, r ? s : e, r, null )
            }
        }
        )
    }
    ),
    t.jQuery = t.$ = J,
    "function" == typeof define && define.amd && define.amd.jQuery && define("jquery", [], function() {
        return J
    }
    )
}
(window),
function(t, e) {
    function i(e, i) {
        var s, a, r, o = e.nodeName.toLowerCase();
        return "area" === o ? (s = e.parentNode,
        a = s.name,
        e.href && a && "map" === s.nodeName.toLowerCase() ? (r = t("img[usemap=#" + a + "]")[0],
        !!r && n(r)) : !1) : (/input|select|textarea|button|object/.test(o) ? !e.disabled : "a" === o ? e.href || i : i) && n(e)
    }
    function n(e) {
        return t.expr.filters.visible(e) && !t(e).parents().addBack().filter(function() {
            return "hidden" === t.css(this, "visibility")
        }
        ).length
    }
    var s = 0
      , a = /^ui-id-\d+$/;
    t.ui = t.ui || {},
    t.extend(t.ui, {
        version: "1.10.2",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            NUMPAD_ADD: 107,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            NUMPAD_ENTER: 108,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_SUBTRACT: 109,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }),
    t.fn.extend({
        focus: function(e) {
            return function(i, n) {
                return "number" == typeof i ? this.each(function() {
                    var e = this;
                    setTimeout(function() {
                        t(e).focus(),
                        n && n.call(e)
                    }
                    , i)
                }
                ) : e.apply(this, arguments)
            }
        }
        (t.fn.focus),
        scrollParent: function() {
            var e;
            return e = t.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function() {
                return /(relative|absolute|fixed)/.test(t.css(this, "position")) && /(auto|scroll)/.test(t.css(this, "overflow") + t.css(this, "overflow-y") + t.css(this, "overflow-x"))
            }
            ).eq(0) : this.parents().filter(function() {
                return /(auto|scroll)/.test(t.css(this, "overflow") + t.css(this, "overflow-y") + t.css(this, "overflow-x"))
            }
            ).eq(0),
            /fixed/.test(this.css("position")) || !e.length ? t(document) : e
        },
        zIndex: function(i) {
            if (i !== e)
                return this.css("zIndex", i);
            if (this.length)
                for (var n, s, a = t(this[0]); a.length && a[0] !== document; ) {
                    if (n = a.css("position"),
                    ("absolute" === n || "relative" === n || "fixed" === n) && (s = parseInt(a.css("zIndex"), 10),
                    !isNaN(s) && 0 !== s))
                        return s;
                    a = a.parent()
                }
            return 0
        },
        uniqueId: function() {
            return this.each(function() {
                this.id || (this.id = "ui-id-" + ++s)
            }
            )
        },
        removeUniqueId: function() {
            return this.each(function() {
                a.test(this.id) && t(this).removeAttr("id")
            }
            )
        }
    }),
    t.extend(t.expr[":"], {
        data: t.expr.createPseudo ? t.expr.createPseudo(function(e) {
            return function(i) {
                return !!t.data(i, e)
            }
        }
        ) : function(e, i, n) {
            return !!t.data(e, n[3])
        }
        ,
        focusable: function(e) {
            return i(e, !isNaN(t.attr(e, "tabindex")))
        },
        tabbable: function(e) {
            var n = t.attr(e, "tabindex")
              , s = isNaN(n);
            return (s || n >= 0) && i(e, !s)
        }
    }),
    t("<a>").outerWidth(1).jquery || t.each(["Width", "Height"], function(i, n) {
        function s(e, i, n, s) {
            return t.each(a, function() {
                i -= parseFloat(t.css(e, "padding" + this)) || 0,
                n && (i -= parseFloat(t.css(e, "border" + this + "Width")) || 0),
                s && (i -= parseFloat(t.css(e, "margin" + this)) || 0)
            }
            ),
            i
        }
        var a = "Width" === n ? ["Left", "Right"] : ["Top", "Bottom"]
          , r = n.toLowerCase()
          , o = {
            innerWidth: t.fn.innerWidth,
            innerHeight: t.fn.innerHeight,
            outerWidth: t.fn.outerWidth,
            outerHeight: t.fn.outerHeight
        };
        t.fn["inner" + n] = function(i) {
            return i === e ? o["inner" + n].call(this) : this.each(function() {
                t(this).css(r, s(this, i) + "px")
            }
            )
        }
        ,
        t.fn["outer" + n] = function(e, i) {
            return "number" != typeof e ? o["outer" + n].call(this, e) : this.each(function() {
                t(this).css(r, s(this, e, !0, i) + "px")
            }
            )
        }
    }
    ),
    t.fn.addBack || (t.fn.addBack = function(t) {
        return this.add(null  == t ? this.prevObject : this.prevObject.filter(t))
    }
    ),
    t("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (t.fn.removeData = function(e) {
        return function(i) {
            return arguments.length ? e.call(this, t.camelCase(i)) : e.call(this)
        }
    }
    (t.fn.removeData)),
    t.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),
    t.support.selectstart = "onselectstart" in document.createElement("div"),
    t.fn.extend({
        disableSelection: function() {
            return this.bind((t.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(t) {
                t.preventDefault()
            }
            )
        },
        enableSelection: function() {
            return this.unbind(".ui-disableSelection")
        }
    }),
    t.extend(t.ui, {
        plugin: {
            add: function(e, i, n) {
                var s, a = t.ui[e].prototype;
                for (s in n)
                    a.plugins[s] = a.plugins[s] || [],
                    a.plugins[s].push([i, n[s]])
            },
            call: function(t, e, i) {
                var n, s = t.plugins[e];
                if (s && t.element[0].parentNode && 11 !== t.element[0].parentNode.nodeType)
                    for (n = 0; s.length > n; n++)
                        t.options[s[n][0]] && s[n][1].apply(t.element, i)
            }
        },
        hasScroll: function(e, i) {
            if ("hidden" === t(e).css("overflow"))
                return !1;
            var n = i && "left" === i ? "scrollLeft" : "scrollTop"
              , s = !1;
            return e[n] > 0 ? !0 : (e[n] = 1,
            s = e[n] > 0,
            e[n] = 0,
            s)
        }
    })
}
(jQuery),
function(t, e) {
    var i = 0
      , n = Array.prototype.slice
      , s = t.cleanData;
    t.cleanData = function(e) {
        for (var i, n = 0; null  != (i = e[n]); n++)
            try {
                t(i).triggerHandler("remove")
            } catch (a) {}
        s(e)
    }
    ,
    t.widget = function(i, n, s) {
        var a, r, o, l, c = {}, d = i.split(".")[0];
        i = i.split(".")[1],
        a = d + "-" + i,
        s || (s = n,
        n = t.Widget),
        t.expr[":"][a.toLowerCase()] = function(e) {
            return !!t.data(e, a)
        }
        ,
        t[d] = t[d] || {},
        r = t[d][i],
        o = t[d][i] = function(t, i) {
            return this._createWidget ? (arguments.length && this._createWidget(t, i),
            e) : new o(t,i)
        }
        ,
        t.extend(o, r, {
            version: s.version,
            _proto: t.extend({}, s),
            _childConstructors: []
        }),
        l = new n,
        l.options = t.widget.extend({}, l.options),
        t.each(s, function(i, s) {
            return t.isFunction(s) ? (c[i] = function() {
                var t = function() {
                    return n.prototype[i].apply(this, arguments)
                }
                  , e = function(t) {
                    return n.prototype[i].apply(this, t)
                }
                ;
                return function() {
                    var i, n = this._super, a = this._superApply;
                    return this._super = t,
                    this._superApply = e,
                    i = s.apply(this, arguments),
                    this._super = n,
                    this._superApply = a,
                    i
                }
            }
            (),
            e) : (c[i] = s,
            e)
        }
        ),
        o.prototype = t.widget.extend(l, {
            widgetEventPrefix: r ? l.widgetEventPrefix : i
        }, c, {
            constructor: o,
            namespace: d,
            widgetName: i,
            widgetFullName: a
        }),
        r ? (t.each(r._childConstructors, function(e, i) {
            var n = i.prototype;
            t.widget(n.namespace + "." + n.widgetName, o, i._proto)
        }
        ),
        delete r._childConstructors) : n._childConstructors.push(o),
        t.widget.bridge(i, o)
    }
    ,
    t.widget.extend = function(i) {
        for (var s, a, r = n.call(arguments, 1), o = 0, l = r.length; l > o; o++)
            for (s in r[o])
                a = r[o][s],
                r[o].hasOwnProperty(s) && a !== e && (i[s] = t.isPlainObject(a) ? t.isPlainObject(i[s]) ? t.widget.extend({}, i[s], a) : t.widget.extend({}, a) : a);
        return i
    }
    ,
    t.widget.bridge = function(i, s) {
        var a = s.prototype.widgetFullName || i;
        t.fn[i] = function(r) {
            var o = "string" == typeof r
              , l = n.call(arguments, 1)
              , c = this;
            return r = !o && l.length ? t.widget.extend.apply(null , [r].concat(l)) : r,
            this.each(o ? function() {
                var n, s = t.data(this, a);
                return s ? t.isFunction(s[r]) && "_" !== r.charAt(0) ? (n = s[r].apply(s, l),
                n !== s && n !== e ? (c = n && n.jquery ? c.pushStack(n.get()) : n,
                !1) : e) : t.error("no such method '" + r + "' for " + i + " widget instance") : t.error("cannot call methods on " + i + " prior to initialization; attempted to call method '" + r + "'")
            }
             : function() {
                var e = t.data(this, a);
                e ? e.option(r || {})._init() : t.data(this, a, new s(r,this))
            }
            ),
            c
        }
    }
    ,
    t.Widget = function() {}
    ,
    t.Widget._childConstructors = [],
    t.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            disabled: !1,
            create: null 
        },
        _createWidget: function(e, n) {
            n = t(n || this.defaultElement || this)[0],
            this.element = t(n),
            this.uuid = i++,
            this.eventNamespace = "." + this.widgetName + this.uuid,
            this.options = t.widget.extend({}, this.options, this._getCreateOptions(), e),
            this.bindings = t(),
            this.hoverable = t(),
            this.focusable = t(),
            n !== this && (t.data(n, this.widgetFullName, this),
            this._on(!0, this.element, {
                remove: function(t) {
                    t.target === n && this.destroy()
                }
            }),
            this.document = t(n.style ? n.ownerDocument : n.document || n),
            this.window = t(this.document[0].defaultView || this.document[0].parentWindow)),
            this._create(),
            this._trigger("create", null , this._getCreateEventData()),
            this._init()
        },
        _getCreateOptions: t.noop,
        _getCreateEventData: t.noop,
        _create: t.noop,
        _init: t.noop,
        destroy: function() {
            this._destroy(),
            this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),
            this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"),
            this.bindings.unbind(this.eventNamespace),
            this.hoverable.removeClass("ui-state-hover"),
            this.focusable.removeClass("ui-state-focus")
        },
        _destroy: t.noop,
        widget: function() {
            return this.element
        },
        option: function(i, n) {
            var s, a, r, o = i;
            if (0 === arguments.length)
                return t.widget.extend({}, this.options);
            if ("string" == typeof i)
                if (o = {},
                s = i.split("."),
                i = s.shift(),
                s.length) {
                    for (a = o[i] = t.widget.extend({}, this.options[i]),
                    r = 0; s.length - 1 > r; r++)
                        a[s[r]] = a[s[r]] || {},
                        a = a[s[r]];
                    if (i = s.pop(),
                    n === e)
                        return a[i] === e ? null  : a[i];
                    a[i] = n
                } else {
                    if (n === e)
                        return this.options[i] === e ? null  : this.options[i];
                    o[i] = n
                }
            return this._setOptions(o),
            this
        },
        _setOptions: function(t) {
            var e;
            for (e in t)
                this._setOption(e, t[e]);
            return this
        },
        _setOption: function(t, e) {
            return this.options[t] = e,
            "disabled" === t && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!e).attr("aria-disabled", e),
            this.hoverable.removeClass("ui-state-hover"),
            this.focusable.removeClass("ui-state-focus")),
            this
        },
        enable: function() {
            return this._setOption("disabled", !1)
        },
        disable: function() {
            return this._setOption("disabled", !0)
        },
        _on: function(i, n, s) {
            var a, r = this;
            "boolean" != typeof i && (s = n,
            n = i,
            i = !1),
            s ? (n = a = t(n),
            this.bindings = this.bindings.add(n)) : (s = n,
            n = this.element,
            a = this.widget()),
            t.each(s, function(s, o) {
                function l() {
                    return i || r.options.disabled !== !0 && !t(this).hasClass("ui-state-disabled") ? ("string" == typeof o ? r[o] : o).apply(r, arguments) : e
                }
                "string" != typeof o && (l.guid = o.guid = o.guid || l.guid || t.guid++);
                var c = s.match(/^(\w+)\s*(.*)$/)
                  , d = c[1] + r.eventNamespace
                  , h = c[2];
                h ? a.delegate(h, d, l) : n.bind(d, l)
            }
            )
        },
        _off: function(t, e) {
            e = (e || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace,
            t.unbind(e).undelegate(e)
        },
        _delay: function(t, e) {
            function i() {
                return ("string" == typeof t ? n[t] : t).apply(n, arguments)
            }
            var n = this;
            return setTimeout(i, e || 0)
        },
        _hoverable: function(e) {
            this.hoverable = this.hoverable.add(e),
            this._on(e, {
                mouseenter: function(e) {
                    t(e.currentTarget).addClass("ui-state-hover")
                },
                mouseleave: function(e) {
                    t(e.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function(e) {
            this.focusable = this.focusable.add(e),
            this._on(e, {
                focusin: function(e) {
                    t(e.currentTarget).addClass("ui-state-focus")
                },
                focusout: function(e) {
                    t(e.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function(e, i, n) {
            var s, a, r = this.options[e];
            if (n = n || {},
            i = t.Event(i),
            i.type = (e === this.widgetEventPrefix ? e : this.widgetEventPrefix + e).toLowerCase(),
            i.target = this.element[0],
            a = i.originalEvent)
                for (s in a)
                    s in i || (i[s] = a[s]);
            return this.element.trigger(i, n),
            !(t.isFunction(r) && r.apply(this.element[0], [i].concat(n)) === !1 || i.isDefaultPrevented())
        }
    },
    t.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function(e, i) {
        t.Widget.prototype["_" + e] = function(n, s, a) {
            "string" == typeof s && (s = {
                effect: s
            });
            var r, o = s ? s === !0 || "number" == typeof s ? i : s.effect || i : e;
            s = s || {},
            "number" == typeof s && (s = {
                duration: s
            }),
            r = !t.isEmptyObject(s),
            s.complete = a,
            s.delay && n.delay(s.delay),
            r && t.effects && t.effects.effect[o] ? n[e](s) : o !== e && n[o] ? n[o](s.duration, s.easing, a) : n.queue(function(i) {
                t(this)[e](),
                a && a.call(n[0]),
                i()
            }
            )
        }
    }
    )
}
(jQuery),
function(t) {
    var e = !1;
    t(document).mouseup(function() {
        e = !1
    }
    ),
    t.widget("ui.mouse", {
        version: "1.10.2",
        options: {
            cancel: "input,textarea,button,select,option",
            distance: 1,
            delay: 0
        },
        _mouseInit: function() {
            var e = this;
            this.element.bind("mousedown." + this.widgetName, function(t) {
                return e._mouseDown(t)
            }
            ).bind("click." + this.widgetName, function(i) {
                return !0 === t.data(i.target, e.widgetName + ".preventClickEvent") ? (t.removeData(i.target, e.widgetName + ".preventClickEvent"),
                i.stopImmediatePropagation(),
                !1) : void 0
            }
            ),
            this.started = !1
        },
        _mouseDestroy: function() {
            this.element.unbind("." + this.widgetName),
            this._mouseMoveDelegate && t(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
        },
        _mouseDown: function(i) {
            if (!e) {
                this._mouseStarted && this._mouseUp(i),
                this._mouseDownEvent = i;
                var n = this
                  , s = 1 === i.which
                  , a = "string" == typeof this.options.cancel && i.target.nodeName ? t(i.target).closest(this.options.cancel).length : !1;
                return s && !a && this._mouseCapture(i) ? (this.mouseDelayMet = !this.options.delay,
                this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    n.mouseDelayMet = !0
                }
                , this.options.delay)),
                this._mouseDistanceMet(i) && this._mouseDelayMet(i) && (this._mouseStarted = this._mouseStart(i) !== !1,
                !this._mouseStarted) ? (i.preventDefault(),
                !0) : (!0 === t.data(i.target, this.widgetName + ".preventClickEvent") && t.removeData(i.target, this.widgetName + ".preventClickEvent"),
                this._mouseMoveDelegate = function(t) {
                    return n._mouseMove(t)
                }
                ,
                this._mouseUpDelegate = function(t) {
                    return n._mouseUp(t)
                }
                ,
                t(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate),
                i.preventDefault(),
                e = !0,
                !0)) : !0
            }
        },
        _mouseMove: function(e) {
            return t.ui.ie && (!document.documentMode || 9 > document.documentMode) && !e.button ? this._mouseUp(e) : this._mouseStarted ? (this._mouseDrag(e),
            e.preventDefault()) : (this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, e) !== !1,
            this._mouseStarted ? this._mouseDrag(e) : this._mouseUp(e)),
            !this._mouseStarted)
        },
        _mouseUp: function(e) {
            return t(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate),
            this._mouseStarted && (this._mouseStarted = !1,
            e.target === this._mouseDownEvent.target && t.data(e.target, this.widgetName + ".preventClickEvent", !0),
            this._mouseStop(e)),
            !1
        },
        _mouseDistanceMet: function(t) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - t.pageX), Math.abs(this._mouseDownEvent.pageY - t.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function() {
            return this.mouseDelayMet
        },
        _mouseStart: function() {},
        _mouseDrag: function() {},
        _mouseStop: function() {},
        _mouseCapture: function() {
            return !0
        }
    })
}
(jQuery),
function(t, e) {
    function i(t, e, i) {
        return [parseFloat(t[0]) * (p.test(t[0]) ? e / 100 : 1), parseFloat(t[1]) * (p.test(t[1]) ? i / 100 : 1)]
    }
    function n(e, i) {
        return parseInt(t.css(e, i), 10) || 0
    }
    function s(e) {
        var i = e[0];
        return 9 === i.nodeType ? {
            width: e.width(),
            height: e.height(),
            offset: {
                top: 0,
                left: 0
            }
        } : t.isWindow(i) ? {
            width: e.width(),
            height: e.height(),
            offset: {
                top: e.scrollTop(),
                left: e.scrollLeft()
            }
        } : i.preventDefault ? {
            width: 0,
            height: 0,
            offset: {
                top: i.pageY,
                left: i.pageX
            }
        } : {
            width: e.outerWidth(),
            height: e.outerHeight(),
            offset: e.offset()
        }
    }
    t.ui = t.ui || {};
    var a, r = Math.max, o = Math.abs, l = Math.round, c = /left|center|right/, d = /top|center|bottom/, h = /[\+\-]\d+(\.[\d]+)?%?/, u = /^\w+/, p = /%$/, f = t.fn.position;
    t.position = {
        scrollbarWidth: function() {
            if (a !== e)
                return a;
            var i, n, s = t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), r = s.children()[0];
            return t("body").append(s),
            i = r.offsetWidth,
            s.css("overflow", "scroll"),
            n = r.offsetWidth,
            i === n && (n = s[0].clientWidth),
            s.remove(),
            a = i - n
        },
        getScrollInfo: function(e) {
            var i = e.isWindow ? "" : e.element.css("overflow-x")
              , n = e.isWindow ? "" : e.element.css("overflow-y")
              , s = "scroll" === i || "auto" === i && e.width < e.element[0].scrollWidth
              , a = "scroll" === n || "auto" === n && e.height < e.element[0].scrollHeight;
            return {
                width: a ? t.position.scrollbarWidth() : 0,
                height: s ? t.position.scrollbarWidth() : 0
            }
        },
        getWithinInfo: function(e) {
            var i = t(e || window)
              , n = t.isWindow(i[0]);
            return {
                element: i,
                isWindow: n,
                offset: i.offset() || {
                    left: 0,
                    top: 0
                },
                scrollLeft: i.scrollLeft(),
                scrollTop: i.scrollTop(),
                width: n ? i.width() : i.outerWidth(),
                height: n ? i.height() : i.outerHeight()
            }
        }
    },
    t.fn.position = function(e) {
        if (!e || !e.of)
            return f.apply(this, arguments);
        e = t.extend({}, e);
        var a, p, m, g, v, b, _ = t(e.of), y = t.position.getWithinInfo(e.within), x = t.position.getScrollInfo(y), w = (e.collision || "flip").split(" "), k = {};
        return b = s(_),
        _[0].preventDefault && (e.at = "left top"),
        p = b.width,
        m = b.height,
        g = b.offset,
        v = t.extend({}, g),
        t.each(["my", "at"], function() {
            var t, i, n = (e[this] || "").split(" ");
            1 === n.length && (n = c.test(n[0]) ? n.concat(["center"]) : d.test(n[0]) ? ["center"].concat(n) : ["center", "center"]),
            n[0] = c.test(n[0]) ? n[0] : "center",
            n[1] = d.test(n[1]) ? n[1] : "center",
            t = h.exec(n[0]),
            i = h.exec(n[1]),
            k[this] = [t ? t[0] : 0, i ? i[0] : 0],
            e[this] = [u.exec(n[0])[0], u.exec(n[1])[0]]
        }
        ),
        1 === w.length && (w[1] = w[0]),
        "right" === e.at[0] ? v.left += p : "center" === e.at[0] && (v.left += p / 2),
        "bottom" === e.at[1] ? v.top += m : "center" === e.at[1] && (v.top += m / 2),
        a = i(k.at, p, m),
        v.left += a[0],
        v.top += a[1],
        this.each(function() {
            var s, c, d = t(this), h = d.outerWidth(), u = d.outerHeight(), f = n(this, "marginLeft"), b = n(this, "marginTop"), C = h + f + n(this, "marginRight") + x.width, T = u + b + n(this, "marginBottom") + x.height, S = t.extend({}, v), D = i(k.my, d.outerWidth(), d.outerHeight());
            "right" === e.my[0] ? S.left -= h : "center" === e.my[0] && (S.left -= h / 2),
            "bottom" === e.my[1] ? S.top -= u : "center" === e.my[1] && (S.top -= u / 2),
            S.left += D[0],
            S.top += D[1],
            t.support.offsetFractions || (S.left = l(S.left),
            S.top = l(S.top)),
            s = {
                marginLeft: f,
                marginTop: b
            },
            t.each(["left", "top"], function(i, n) {
                t.ui.position[w[i]] && t.ui.position[w[i]][n](S, {
                    targetWidth: p,
                    targetHeight: m,
                    elemWidth: h,
                    elemHeight: u,
                    collisionPosition: s,
                    collisionWidth: C,
                    collisionHeight: T,
                    offset: [a[0] + D[0], a[1] + D[1]],
                    my: e.my,
                    at: e.at,
                    within: y,
                    elem: d
                })
            }
            ),
            e.using && (c = function(t) {
                var i = g.left - S.left
                  , n = i + p - h
                  , s = g.top - S.top
                  , a = s + m - u
                  , l = {
                    target: {
                        element: _,
                        left: g.left,
                        top: g.top,
                        width: p,
                        height: m
                    },
                    element: {
                        element: d,
                        left: S.left,
                        top: S.top,
                        width: h,
                        height: u
                    },
                    horizontal: 0 > n ? "left" : i > 0 ? "right" : "center",
                    vertical: 0 > a ? "top" : s > 0 ? "bottom" : "middle"
                };
                h > p && p > o(i + n) && (l.horizontal = "center"),
                u > m && m > o(s + a) && (l.vertical = "middle"),
                l.important = r(o(i), o(n)) > r(o(s), o(a)) ? "horizontal" : "vertical",
                e.using.call(this, t, l)
            }
            ),
            d.offset(t.extend(S, {
                using: c
            }))
        }
        )
    }
    ,
    t.ui.position = {
        fit: {
            left: function(t, e) {
                var i, n = e.within, s = n.isWindow ? n.scrollLeft : n.offset.left, a = n.width, o = t.left - e.collisionPosition.marginLeft, l = s - o, c = o + e.collisionWidth - a - s;
                e.collisionWidth > a ? l > 0 && 0 >= c ? (i = t.left + l + e.collisionWidth - a - s,
                t.left += l - i) : t.left = c > 0 && 0 >= l ? s : l > c ? s + a - e.collisionWidth : s : l > 0 ? t.left += l : c > 0 ? t.left -= c : t.left = r(t.left - o, t.left)
            },
            top: function(t, e) {
                var i, n = e.within, s = n.isWindow ? n.scrollTop : n.offset.top, a = e.within.height, o = t.top - e.collisionPosition.marginTop, l = s - o, c = o + e.collisionHeight - a - s;
                e.collisionHeight > a ? l > 0 && 0 >= c ? (i = t.top + l + e.collisionHeight - a - s,
                t.top += l - i) : t.top = c > 0 && 0 >= l ? s : l > c ? s + a - e.collisionHeight : s : l > 0 ? t.top += l : c > 0 ? t.top -= c : t.top = r(t.top - o, t.top)
            }
        },
        flip: {
            left: function(t, e) {
                var i, n, s = e.within, a = s.offset.left + s.scrollLeft, r = s.width, l = s.isWindow ? s.scrollLeft : s.offset.left, c = t.left - e.collisionPosition.marginLeft, d = c - l, h = c + e.collisionWidth - r - l, u = "left" === e.my[0] ? -e.elemWidth : "right" === e.my[0] ? e.elemWidth : 0, p = "left" === e.at[0] ? e.targetWidth : "right" === e.at[0] ? -e.targetWidth : 0, f = -2 * e.offset[0];
                0 > d ? (i = t.left + u + p + f + e.collisionWidth - r - a,
                (0 > i || o(d) > i) && (t.left += u + p + f)) : h > 0 && (n = t.left - e.collisionPosition.marginLeft + u + p + f - l,
                (n > 0 || h > o(n)) && (t.left += u + p + f))
            },
            top: function(t, e) {
                var i, n, s = e.within, a = s.offset.top + s.scrollTop, r = s.height, l = s.isWindow ? s.scrollTop : s.offset.top, c = t.top - e.collisionPosition.marginTop, d = c - l, h = c + e.collisionHeight - r - l, u = "top" === e.my[1], p = u ? -e.elemHeight : "bottom" === e.my[1] ? e.elemHeight : 0, f = "top" === e.at[1] ? e.targetHeight : "bottom" === e.at[1] ? -e.targetHeight : 0, m = -2 * e.offset[1];
                0 > d ? (n = t.top + p + f + m + e.collisionHeight - r - a,
                t.top + p + f + m > d && (0 > n || o(d) > n) && (t.top += p + f + m)) : h > 0 && (i = t.top - e.collisionPosition.marginTop + p + f + m - l,
                t.top + p + f + m > h && (i > 0 || h > o(i)) && (t.top += p + f + m))
            }
        },
        flipfit: {
            left: function() {
                t.ui.position.flip.left.apply(this, arguments),
                t.ui.position.fit.left.apply(this, arguments)
            },
            top: function() {
                t.ui.position.flip.top.apply(this, arguments),
                t.ui.position.fit.top.apply(this, arguments)
            }
        }
    },
    function() {
        var e, i, n, s, a, r = document.getElementsByTagName("body")[0], o = document.createElement("div");
        e = document.createElement(r ? "div" : "body"),
        n = {
            visibility: "hidden",
            width: 0,
            height: 0,
            border: 0,
            margin: 0,
            background: "none"
        },
        r && t.extend(n, {
            position: "absolute",
            left: "-1000px",
            top: "-1000px"
        });
        for (a in n)
            e.style[a] = n[a];
        e.appendChild(o),
        i = r || document.documentElement,
        i.insertBefore(e, i.firstChild),
        o.style.cssText = "position: absolute; left: 10.7432222px;",
        s = t(o).offset().left,
        t.support.offsetFractions = s > 10 && 11 > s,
        e.innerHTML = "",
        i.removeChild(e)
    }
    ()
}
(jQuery),
function(t) {
    t.widget("ui.draggable", t.ui.mouse, {
        version: "1.10.2",
        widgetEventPrefix: "drag",
        options: {
            addClasses: !0,
            appendTo: "parent",
            axis: !1,
            connectToSortable: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            iframeFix: !1,
            opacity: !1,
            refreshPositions: !1,
            revert: !1,
            revertDuration: 500,
            scope: "default",
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            snap: !1,
            snapMode: "both",
            snapTolerance: 20,
            stack: !1,
            zIndex: !1,
            drag: null ,
            start: null ,
            stop: null 
        },
        _create: function() {
            "original" !== this.options.helper || /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative"),
            this.options.addClasses && this.element.addClass("ui-draggable"),
            this.options.disabled && this.element.addClass("ui-draggable-disabled"),
            this._mouseInit()
        },
        _destroy: function() {
            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),
            this._mouseDestroy()
        },
        _mouseCapture: function(e) {
            var i = this.options;
            return this.helper || i.disabled || t(e.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(e),
            this.handle ? (t(i.iframeFix === !0 ? "iframe" : i.iframeFix).each(function() {
                t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({
                    width: this.offsetWidth + "px",
                    height: this.offsetHeight + "px",
                    position: "absolute",
                    opacity: "0.001",
                    zIndex: 1e3
                }).css(t(this).offset()).appendTo("body")
            }
            ),
            !0) : !1)
        },
        _mouseStart: function(e) {
            var i = this.options;
            return this.helper = this._createHelper(e),
            this.helper.addClass("ui-draggable-dragging"),
            this._cacheHelperProportions(),
            t.ui.ddmanager && (t.ui.ddmanager.current = this),
            this._cacheMargins(),
            this.cssPosition = this.helper.css("position"),
            this.scrollParent = this.helper.scrollParent(),
            this.offset = this.positionAbs = this.element.offset(),
            this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            },
            t.extend(this.offset, {
                click: {
                    left: e.pageX - this.offset.left,
                    top: e.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }),
            this.originalPosition = this.position = this._generatePosition(e),
            this.originalPageX = e.pageX,
            this.originalPageY = e.pageY,
            i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt),
            i.containment && this._setContainment(),
            this._trigger("start", e) === !1 ? (this._clear(),
            !1) : (this._cacheHelperProportions(),
            t.ui.ddmanager && !i.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e),
            this._mouseDrag(e, !0),
            t.ui.ddmanager && t.ui.ddmanager.dragStart(this, e),
            !0)
        },
        _mouseDrag: function(e, i) {
            if (this.position = this._generatePosition(e),
            this.positionAbs = this._convertPositionTo("absolute"),
            !i) {
                var n = this._uiHash();
                if (this._trigger("drag", e, n) === !1)
                    return this._mouseUp({}),
                    !1;
                this.position = n.position
            }
            return this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"),
            this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"),
            t.ui.ddmanager && t.ui.ddmanager.drag(this, e),
            !1
        },
        _mouseStop: function(e) {
            var i, n = this, s = !1, a = !1;
            for (t.ui.ddmanager && !this.options.dropBehaviour && (a = t.ui.ddmanager.drop(this, e)),
            this.dropped && (a = this.dropped,
            this.dropped = !1),
            i = this.element[0]; i && (i = i.parentNode); )
                i === document && (s = !0);
            return s || "original" !== this.options.helper ? ("invalid" === this.options.revert && !a || "valid" === this.options.revert && a || this.options.revert === !0 || t.isFunction(this.options.revert) && this.options.revert.call(this.element, a) ? t(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                n._trigger("stop", e) !== !1 && n._clear()
            }
            ) : this._trigger("stop", e) !== !1 && this._clear(),
            !1) : !1
        },
        _mouseUp: function(e) {
            return t("div.ui-draggable-iframeFix").each(function() {
                this.parentNode.removeChild(this)
            }
            ),
            t.ui.ddmanager && t.ui.ddmanager.dragStop(this, e),
            t.ui.mouse.prototype._mouseUp.call(this, e)
        },
        cancel: function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(),
            this
        },
        _getHandle: function(e) {
            return this.options.handle ? !!t(e.target).closest(this.element.find(this.options.handle)).length : !0
        },
        _createHelper: function(e) {
            var i = this.options
              , n = t.isFunction(i.helper) ? t(i.helper.apply(this.element[0], [e])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element;
            return n.parents("body").length || n.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo),
            n[0] === this.element[0] || /(fixed|absolute)/.test(n.css("position")) || n.css("position", "absolute"),
            n
        },
        _adjustOffsetFromHelper: function(e) {
            "string" == typeof e && (e = e.split(" ")),
            t.isArray(e) && (e = {
                left: +e[0],
                top: +e[1] || 0
            }),
            "left" in e && (this.offset.click.left = e.left + this.margins.left),
            "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left),
            "top" in e && (this.offset.click.top = e.top + this.margins.top),
            "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top)
        },
        _getParentOffset: function() {
            this.offsetParent = this.helper.offsetParent();
            var e = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(),
            e.top += this.scrollParent.scrollTop()),
            (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && t.ui.ie) && (e = {
                top: 0,
                left: 0
            }),
            {
                top: e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function() {
            if ("relative" === this.cssPosition) {
                var t = this.element.position();
                return {
                    top: t.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: t.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            return {
                top: 0,
                left: 0
            }
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                top: parseInt(this.element.css("marginTop"), 10) || 0,
                right: parseInt(this.element.css("marginRight"), 10) || 0,
                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
            }
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function() {
            var e, i, n, s = this.options;
            if ("parent" === s.containment && (s.containment = this.helper[0].parentNode),
            ("document" === s.containment || "window" === s.containment) && (this.containment = ["document" === s.containment ? 0 : t(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, "document" === s.containment ? 0 : t(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, ("document" === s.containment ? 0 : t(window).scrollLeft()) + t("document" === s.containment ? document : window).width() - this.helperProportions.width - this.margins.left, ("document" === s.containment ? 0 : t(window).scrollTop()) + (t("document" === s.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]),
            /^(document|window|parent)$/.test(s.containment) || s.containment.constructor === Array)
                s.containment.constructor === Array && (this.containment = s.containment);
            else {
                if (i = t(s.containment),
                n = i[0],
                !n)
                    return;
                e = "hidden" !== t(n).css("overflow"),
                this.containment = [(parseInt(t(n).css("borderLeftWidth"), 10) || 0) + (parseInt(t(n).css("paddingLeft"), 10) || 0), (parseInt(t(n).css("borderTopWidth"), 10) || 0) + (parseInt(t(n).css("paddingTop"), 10) || 0), (e ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(t(n).css("borderRightWidth"), 10) || 0) - (parseInt(t(n).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (e ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(t(n).css("borderBottomWidth"), 10) || 0) - (parseInt(t(n).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom],
                this.relative_container = i
            }
        },
        _convertPositionTo: function(e, i) {
            i || (i = this.position);
            var n = "absolute" === e ? 1 : -1
              , s = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent
              , a = /(html|body)/i.test(s[0].tagName);
            return {
                top: i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : a ? 0 : s.scrollTop()) * n,
                left: i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : a ? 0 : s.scrollLeft()) * n
            }
        },
        _generatePosition: function(e) {
            var i, n, s, a, r = this.options, o = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, l = /(html|body)/i.test(o[0].tagName), c = e.pageX, d = e.pageY;
            return this.originalPosition && (this.containment && (this.relative_container ? (n = this.relative_container.offset(),
            i = [this.containment[0] + n.left, this.containment[1] + n.top, this.containment[2] + n.left, this.containment[3] + n.top]) : i = this.containment,
            e.pageX - this.offset.click.left < i[0] && (c = i[0] + this.offset.click.left),
            e.pageY - this.offset.click.top < i[1] && (d = i[1] + this.offset.click.top),
            e.pageX - this.offset.click.left > i[2] && (c = i[2] + this.offset.click.left),
            e.pageY - this.offset.click.top > i[3] && (d = i[3] + this.offset.click.top)),
            r.grid && (s = r.grid[1] ? this.originalPageY + Math.round((d - this.originalPageY) / r.grid[1]) * r.grid[1] : this.originalPageY,
            d = i ? s - this.offset.click.top >= i[1] || s - this.offset.click.top > i[3] ? s : s - this.offset.click.top >= i[1] ? s - r.grid[1] : s + r.grid[1] : s,
            a = r.grid[0] ? this.originalPageX + Math.round((c - this.originalPageX) / r.grid[0]) * r.grid[0] : this.originalPageX,
            c = i ? a - this.offset.click.left >= i[0] || a - this.offset.click.left > i[2] ? a : a - this.offset.click.left >= i[0] ? a - r.grid[0] : a + r.grid[0] : a)),
            {
                top: d - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : l ? 0 : o.scrollTop()),
                left: c - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : l ? 0 : o.scrollLeft())
            }
        },
        _clear: function() {
            this.helper.removeClass("ui-draggable-dragging"),
            this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(),
            this.helper = null ,
            this.cancelHelperRemoval = !1
        },
        _trigger: function(e, i, n) {
            return n = n || this._uiHash(),
            t.ui.plugin.call(this, e, [i, n]),
            "drag" === e && (this.positionAbs = this._convertPositionTo("absolute")),
            t.Widget.prototype._trigger.call(this, e, i, n)
        },
        plugins: {},
        _uiHash: function() {
            return {
                helper: this.helper,
                position: this.position,
                originalPosition: this.originalPosition,
                offset: this.positionAbs
            }
        }
    }),
    t.ui.plugin.add("draggable", "connectToSortable", {
        start: function(e, i) {
            var n = t(this).data("ui-draggable")
              , s = n.options
              , a = t.extend({}, i, {
                item: n.element
            });
            n.sortables = [],
            t(s.connectToSortable).each(function() {
                var i = t.data(this, "ui-sortable");
                i && !i.options.disabled && (n.sortables.push({
                    instance: i,
                    shouldRevert: i.options.revert
                }),
                i.refreshPositions(),
                i._trigger("activate", e, a))
            }
            )
        },
        stop: function(e, i) {
            var n = t(this).data("ui-draggable")
              , s = t.extend({}, i, {
                item: n.element
            });
            t.each(n.sortables, function() {
                this.instance.isOver ? (this.instance.isOver = 0,
                n.cancelHelperRemoval = !0,
                this.instance.cancelHelperRemoval = !1,
                this.shouldRevert && (this.instance.options.revert = this.shouldRevert),
                this.instance._mouseStop(e),
                this.instance.options.helper = this.instance.options._helper,
                "original" === n.options.helper && this.instance.currentItem.css({
                    top: "auto",
                    left: "auto"
                })) : (this.instance.cancelHelperRemoval = !1,
                this.instance._trigger("deactivate", e, s))
            }
            )
        },
        drag: function(e, i) {
            var n = t(this).data("ui-draggable")
              , s = this;
            t.each(n.sortables, function() {
                var a = !1
                  , r = this;
                this.instance.positionAbs = n.positionAbs,
                this.instance.helperProportions = n.helperProportions,
                this.instance.offset.click = n.offset.click,
                this.instance._intersectsWith(this.instance.containerCache) && (a = !0,
                t.each(n.sortables, function() {
                    return this.instance.positionAbs = n.positionAbs,
                    this.instance.helperProportions = n.helperProportions,
                    this.instance.offset.click = n.offset.click,
                    this !== r && this.instance._intersectsWith(this.instance.containerCache) && t.contains(r.instance.element[0], this.instance.element[0]) && (a = !1),
                    a
                }
                )),
                a ? (this.instance.isOver || (this.instance.isOver = 1,
                this.instance.currentItem = t(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", !0),
                this.instance.options._helper = this.instance.options.helper,
                this.instance.options.helper = function() {
                    return i.helper[0]
                }
                ,
                e.target = this.instance.currentItem[0],
                this.instance._mouseCapture(e, !0),
                this.instance._mouseStart(e, !0, !0),
                this.instance.offset.click.top = n.offset.click.top,
                this.instance.offset.click.left = n.offset.click.left,
                this.instance.offset.parent.left -= n.offset.parent.left - this.instance.offset.parent.left,
                this.instance.offset.parent.top -= n.offset.parent.top - this.instance.offset.parent.top,
                n._trigger("toSortable", e),
                n.dropped = this.instance.element,
                n.currentItem = n.element,
                this.instance.fromOutside = n),
                this.instance.currentItem && this.instance._mouseDrag(e)) : this.instance.isOver && (this.instance.isOver = 0,
                this.instance.cancelHelperRemoval = !0,
                this.instance.options.revert = !1,
                this.instance._trigger("out", e, this.instance._uiHash(this.instance)),
                this.instance._mouseStop(e, !0),
                this.instance.options.helper = this.instance.options._helper,
                this.instance.currentItem.remove(),
                this.instance.placeholder && this.instance.placeholder.remove(),
                n._trigger("fromSortable", e),
                n.dropped = !1)
            }
            )
        }
    }),
    t.ui.plugin.add("draggable", "cursor", {
        start: function() {
            var e = t("body")
              , i = t(this).data("ui-draggable").options;
            e.css("cursor") && (i._cursor = e.css("cursor")),
            e.css("cursor", i.cursor)
        },
        stop: function() {
            var e = t(this).data("ui-draggable").options;
            e._cursor && t("body").css("cursor", e._cursor)
        }
    }),
    t.ui.plugin.add("draggable", "opacity", {
        start: function(e, i) {
            var n = t(i.helper)
              , s = t(this).data("ui-draggable").options;
            n.css("opacity") && (s._opacity = n.css("opacity")),
            n.css("opacity", s.opacity)
        },
        stop: function(e, i) {
            var n = t(this).data("ui-draggable").options;
            n._opacity && t(i.helper).css("opacity", n._opacity)
        }
    }),
    t.ui.plugin.add("draggable", "scroll", {
        start: function() {
            var e = t(this).data("ui-draggable");
            e.scrollParent[0] !== document && "HTML" !== e.scrollParent[0].tagName && (e.overflowOffset = e.scrollParent.offset())
        },
        drag: function(e) {
            var i = t(this).data("ui-draggable")
              , n = i.options
              , s = !1;
            i.scrollParent[0] !== document && "HTML" !== i.scrollParent[0].tagName ? (n.axis && "x" === n.axis || (i.overflowOffset.top + i.scrollParent[0].offsetHeight - e.pageY < n.scrollSensitivity ? i.scrollParent[0].scrollTop = s = i.scrollParent[0].scrollTop + n.scrollSpeed : e.pageY - i.overflowOffset.top < n.scrollSensitivity && (i.scrollParent[0].scrollTop = s = i.scrollParent[0].scrollTop - n.scrollSpeed)),
            n.axis && "y" === n.axis || (i.overflowOffset.left + i.scrollParent[0].offsetWidth - e.pageX < n.scrollSensitivity ? i.scrollParent[0].scrollLeft = s = i.scrollParent[0].scrollLeft + n.scrollSpeed : e.pageX - i.overflowOffset.left < n.scrollSensitivity && (i.scrollParent[0].scrollLeft = s = i.scrollParent[0].scrollLeft - n.scrollSpeed))) : (n.axis && "x" === n.axis || (e.pageY - t(document).scrollTop() < n.scrollSensitivity ? s = t(document).scrollTop(t(document).scrollTop() - n.scrollSpeed) : t(window).height() - (e.pageY - t(document).scrollTop()) < n.scrollSensitivity && (s = t(document).scrollTop(t(document).scrollTop() + n.scrollSpeed))),
            n.axis && "y" === n.axis || (e.pageX - t(document).scrollLeft() < n.scrollSensitivity ? s = t(document).scrollLeft(t(document).scrollLeft() - n.scrollSpeed) : t(window).width() - (e.pageX - t(document).scrollLeft()) < n.scrollSensitivity && (s = t(document).scrollLeft(t(document).scrollLeft() + n.scrollSpeed)))),
            s !== !1 && t.ui.ddmanager && !n.dropBehaviour && t.ui.ddmanager.prepareOffsets(i, e)
        }
    }),
    t.ui.plugin.add("draggable", "snap", {
        start: function() {
            var e = t(this).data("ui-draggable")
              , i = e.options;
            e.snapElements = [],
            t(i.snap.constructor !== String ? i.snap.items || ":data(ui-draggable)" : i.snap).each(function() {
                var i = t(this)
                  , n = i.offset();
                this !== e.element[0] && e.snapElements.push({
                    item: this,
                    width: i.outerWidth(),
                    height: i.outerHeight(),
                    top: n.top,
                    left: n.left
                })
            }
            )
        },
        drag: function(e, i) {
            var n, s, a, r, o, l, c, d, h, u, p = t(this).data("ui-draggable"), f = p.options, m = f.snapTolerance, g = i.offset.left, v = g + p.helperProportions.width, b = i.offset.top, _ = b + p.helperProportions.height;
            for (h = p.snapElements.length - 1; h >= 0; h--)
                o = p.snapElements[h].left,
                l = o + p.snapElements[h].width,
                c = p.snapElements[h].top,
                d = c + p.snapElements[h].height,
                g > o - m && l + m > g && b > c - m && d + m > b || g > o - m && l + m > g && _ > c - m && d + m > _ || v > o - m && l + m > v && b > c - m && d + m > b || v > o - m && l + m > v && _ > c - m && d + m > _ ? ("inner" !== f.snapMode && (n = m >= Math.abs(c - _),
                s = m >= Math.abs(d - b),
                a = m >= Math.abs(o - v),
                r = m >= Math.abs(l - g),
                n && (i.position.top = p._convertPositionTo("relative", {
                    top: c - p.helperProportions.height,
                    left: 0
                }).top - p.margins.top),
                s && (i.position.top = p._convertPositionTo("relative", {
                    top: d,
                    left: 0
                }).top - p.margins.top),
                a && (i.position.left = p._convertPositionTo("relative", {
                    top: 0,
                    left: o - p.helperProportions.width
                }).left - p.margins.left),
                r && (i.position.left = p._convertPositionTo("relative", {
                    top: 0,
                    left: l
                }).left - p.margins.left)),
                u = n || s || a || r,
                "outer" !== f.snapMode && (n = m >= Math.abs(c - b),
                s = m >= Math.abs(d - _),
                a = m >= Math.abs(o - g),
                r = m >= Math.abs(l - v),
                n && (i.position.top = p._convertPositionTo("relative", {
                    top: c,
                    left: 0
                }).top - p.margins.top),
                s && (i.position.top = p._convertPositionTo("relative", {
                    top: d - p.helperProportions.height,
                    left: 0
                }).top - p.margins.top),
                a && (i.position.left = p._convertPositionTo("relative", {
                    top: 0,
                    left: o
                }).left - p.margins.left),
                r && (i.position.left = p._convertPositionTo("relative", {
                    top: 0,
                    left: l - p.helperProportions.width
                }).left - p.margins.left)),
                !p.snapElements[h].snapping && (n || s || a || r || u) && p.options.snap.snap && p.options.snap.snap.call(p.element, e, t.extend(p._uiHash(), {
                    snapItem: p.snapElements[h].item
                })),
                p.snapElements[h].snapping = n || s || a || r || u) : (p.snapElements[h].snapping && p.options.snap.release && p.options.snap.release.call(p.element, e, t.extend(p._uiHash(), {
                    snapItem: p.snapElements[h].item
                })),
                p.snapElements[h].snapping = !1)
        }
    }),
    t.ui.plugin.add("draggable", "stack", {
        start: function() {
            var e, i = this.data("ui-draggable").options, n = t.makeArray(t(i.stack)).sort(function(e, i) {
                return (parseInt(t(e).css("zIndex"), 10) || 0) - (parseInt(t(i).css("zIndex"), 10) || 0)
            }
            );
            n.length && (e = parseInt(t(n[0]).css("zIndex"), 10) || 0,
            t(n).each(function(i) {
                t(this).css("zIndex", e + i)
            }
            ),
            this.css("zIndex", e + n.length))
        }
    }),
    t.ui.plugin.add("draggable", "zIndex", {
        start: function(e, i) {
            var n = t(i.helper)
              , s = t(this).data("ui-draggable").options;
            n.css("zIndex") && (s._zIndex = n.css("zIndex")),
            n.css("zIndex", s.zIndex)
        },
        stop: function(e, i) {
            var n = t(this).data("ui-draggable").options;
            n._zIndex && t(i.helper).css("zIndex", n._zIndex)
        }
    })
}
(jQuery),
function(t) {
    function e(t, e, i) {
        return t > e && e + i > t
    }
    t.widget("ui.droppable", {
        version: "1.10.2",
        widgetEventPrefix: "drop",
        options: {
            accept: "*",
            activeClass: !1,
            addClasses: !0,
            greedy: !1,
            hoverClass: !1,
            scope: "default",
            tolerance: "intersect",
            activate: null ,
            deactivate: null ,
            drop: null ,
            out: null ,
            over: null 
        },
        _create: function() {
            var e = this.options
              , i = e.accept;
            this.isover = !1,
            this.isout = !0,
            this.accept = t.isFunction(i) ? i : function(t) {
                return t.is(i)
            }
            ,
            this.proportions = {
                width: this.element[0].offsetWidth,
                height: this.element[0].offsetHeight
            },
            t.ui.ddmanager.droppables[e.scope] = t.ui.ddmanager.droppables[e.scope] || [],
            t.ui.ddmanager.droppables[e.scope].push(this),
            e.addClasses && this.element.addClass("ui-droppable")
        },
        _destroy: function() {
            for (var e = 0, i = t.ui.ddmanager.droppables[this.options.scope]; i.length > e; e++)
                i[e] === this && i.splice(e, 1);
            this.element.removeClass("ui-droppable ui-droppable-disabled")
        },
        _setOption: function(e, i) {
            "accept" === e && (this.accept = t.isFunction(i) ? i : function(t) {
                return t.is(i)
            }
            ),
            t.Widget.prototype._setOption.apply(this, arguments)
        },
        _activate: function(e) {
            var i = t.ui.ddmanager.current;
            this.options.activeClass && this.element.addClass(this.options.activeClass),
            i && this._trigger("activate", e, this.ui(i))
        },
        _deactivate: function(e) {
            var i = t.ui.ddmanager.current;
            this.options.activeClass && this.element.removeClass(this.options.activeClass),
            i && this._trigger("deactivate", e, this.ui(i))
        },
        _over: function(e) {
            var i = t.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass),
            this._trigger("over", e, this.ui(i)))
        },
        _out: function(e) {
            var i = t.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass),
            this._trigger("out", e, this.ui(i)))
        },
        _drop: function(e, i) {
            var n = i || t.ui.ddmanager.current
              , s = !1;
            return n && (n.currentItem || n.element)[0] !== this.element[0] ? (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                var e = t.data(this, "ui-droppable");
                return e.options.greedy && !e.options.disabled && e.options.scope === n.options.scope && e.accept.call(e.element[0], n.currentItem || n.element) && t.ui.intersect(n, t.extend(e, {
                    offset: e.element.offset()
                }), e.options.tolerance) ? (s = !0,
                !1) : void 0
            }
            ),
            s ? !1 : this.accept.call(this.element[0], n.currentItem || n.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass),
            this.options.hoverClass && this.element.removeClass(this.options.hoverClass),
            this._trigger("drop", e, this.ui(n)),
            this.element) : !1) : !1
        },
        ui: function(t) {
            return {
                draggable: t.currentItem || t.element,
                helper: t.helper,
                position: t.position,
                offset: t.positionAbs
            }
        }
    }),
    t.ui.intersect = function(t, i, n) {
        if (!i.offset)
            return !1;
        var s, a, r = (t.positionAbs || t.position.absolute).left, o = r + t.helperProportions.width, l = (t.positionAbs || t.position.absolute).top, c = l + t.helperProportions.height, d = i.offset.left, h = d + i.proportions.width, u = i.offset.top, p = u + i.proportions.height;
        switch (n) {
        case "fit":
            return r >= d && h >= o && l >= u && p >= c;
        case "intersect":
            return r + t.helperProportions.width / 2 > d && h > o - t.helperProportions.width / 2 && l + t.helperProportions.height / 2 > u && p > c - t.helperProportions.height / 2;
        case "pointer":
            return s = (t.positionAbs || t.position.absolute).left + (t.clickOffset || t.offset.click).left,
            a = (t.positionAbs || t.position.absolute).top + (t.clickOffset || t.offset.click).top,
            e(a, u, i.proportions.height) && e(s, d, i.proportions.width);
        case "touch":
            return (l >= u && p >= l || c >= u && p >= c || u > l && c > p) && (r >= d && h >= r || o >= d && h >= o || d > r && o > h);
        default:
            return !1
        }
    }
    ,
    t.ui.ddmanager = {
        current: null ,
        droppables: {
            "default": []
        },
        prepareOffsets: function(e, i) {
            var n, s, a = t.ui.ddmanager.droppables[e.options.scope] || [], r = i ? i.type : null , o = (e.currentItem || e.element).find(":data(ui-droppable)").addBack();
            t: for (n = 0; a.length > n; n++)
                if (!(a[n].options.disabled || e && !a[n].accept.call(a[n].element[0], e.currentItem || e.element))) {
                    for (s = 0; o.length > s; s++)
                        if (o[s] === a[n].element[0]) {
                            a[n].proportions.height = 0;
                            continue t
                        }
                    a[n].visible = "none" !== a[n].element.css("display"),
                    a[n].visible && ("mousedown" === r && a[n]._activate.call(a[n], i),
                    a[n].offset = a[n].element.offset(),
                    a[n].proportions = {
                        width: a[n].element[0].offsetWidth,
                        height: a[n].element[0].offsetHeight
                    })
                }
        },
        drop: function(e, i) {
            var n = !1;
            return t.each((t.ui.ddmanager.droppables[e.options.scope] || []).slice(), function() {
                this.options && (!this.options.disabled && this.visible && t.ui.intersect(e, this, this.options.tolerance) && (n = this._drop.call(this, i) || n),
                !this.options.disabled && this.visible && this.accept.call(this.element[0], e.currentItem || e.element) && (this.isout = !0,
                this.isover = !1,
                this._deactivate.call(this, i)))
            }
            ),
            n
        },
        dragStart: function(e, i) {
            e.element.parentsUntil("body").bind("scroll.droppable", function() {
                e.options.refreshPositions || t.ui.ddmanager.prepareOffsets(e, i)
            }
            )
        },
        drag: function(e, i) {
            e.options.refreshPositions && t.ui.ddmanager.prepareOffsets(e, i),
            t.each(t.ui.ddmanager.droppables[e.options.scope] || [], function() {
                if (!this.options.disabled && !this.greedyChild && this.visible) {
                    var n, s, a, r = t.ui.intersect(e, this, this.options.tolerance), o = !r && this.isover ? "isout" : r && !this.isover ? "isover" : null ;
                    o && (this.options.greedy && (s = this.options.scope,
                    a = this.element.parents(":data(ui-droppable)").filter(function() {
                        return t.data(this, "ui-droppable").options.scope === s
                    }
                    ),
                    a.length && (n = t.data(a[0], "ui-droppable"),
                    n.greedyChild = "isover" === o)),
                    n && "isover" === o && (n.isover = !1,
                    n.isout = !0,
                    n._out.call(n, i)),
                    this[o] = !0,
                    this["isout" === o ? "isover" : "isout"] = !1,
                    this["isover" === o ? "_over" : "_out"].call(this, i),
                    n && "isout" === o && (n.isout = !1,
                    n.isover = !0,
                    n._over.call(n, i)))
                }
            }
            )
        },
        dragStop: function(e, i) {
            e.element.parentsUntil("body").unbind("scroll.droppable"),
            e.options.refreshPositions || t.ui.ddmanager.prepareOffsets(e, i)
        }
    }
}
(jQuery),
function(t) {
    function e(t) {
        return parseInt(t, 10) || 0
    }
    function i(t) {
        return !isNaN(parseInt(t, 10))
    }
    t.widget("ui.resizable", t.ui.mouse, {
        version: "1.10.2",
        widgetEventPrefix: "resize",
        options: {
            alsoResize: !1,
            animate: !1,
            animateDuration: "slow",
            animateEasing: "swing",
            aspectRatio: !1,
            autoHide: !1,
            containment: !1,
            ghost: !1,
            grid: !1,
            handles: "e,s,se",
            helper: !1,
            maxHeight: null ,
            maxWidth: null ,
            minHeight: 10,
            minWidth: 10,
            zIndex: 90,
            resize: null ,
            start: null ,
            stop: null 
        },
        _create: function() {
            var e, i, n, s, a, r = this, o = this.options;
            if (this.element.addClass("ui-resizable"),
            t.extend(this, {
                _aspectRatio: !!o.aspectRatio,
                aspectRatio: o.aspectRatio,
                originalElement: this.element,
                _proportionallyResizeElements: [],
                _helper: o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null 
            }),
            this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                position: this.element.css("position"),
                width: this.element.outerWidth(),
                height: this.element.outerHeight(),
                top: this.element.css("top"),
                left: this.element.css("left")
            })),
            this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable")),
            this.elementIsWrapper = !0,
            this.element.css({
                marginLeft: this.originalElement.css("marginLeft"),
                marginTop: this.originalElement.css("marginTop"),
                marginRight: this.originalElement.css("marginRight"),
                marginBottom: this.originalElement.css("marginBottom")
            }),
            this.originalElement.css({
                marginLeft: 0,
                marginTop: 0,
                marginRight: 0,
                marginBottom: 0
            }),
            this.originalResizeStyle = this.originalElement.css("resize"),
            this.originalElement.css("resize", "none"),
            this._proportionallyResizeElements.push(this.originalElement.css({
                position: "static",
                zoom: 1,
                display: "block"
            })),
            this.originalElement.css({
                margin: this.originalElement.css("margin")
            }),
            this._proportionallyResize()),
            this.handles = o.handles || (t(".ui-resizable-handle", this.element).length ? {
                n: ".ui-resizable-n",
                e: ".ui-resizable-e",
                s: ".ui-resizable-s",
                w: ".ui-resizable-w",
                se: ".ui-resizable-se",
                sw: ".ui-resizable-sw",
                ne: ".ui-resizable-ne",
                nw: ".ui-resizable-nw"
            } : "e,s,se"),
            this.handles.constructor === String)
                for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"),
                e = this.handles.split(","),
                this.handles = {},
                i = 0; e.length > i; i++)
                    n = t.trim(e[i]),
                    a = "ui-resizable-" + n,
                    s = t("<div class='ui-resizable-handle " + a + "'></div>"),
                    s.css({
                        zIndex: o.zIndex
                    }),
                    "se" === n && s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),
                    this.handles[n] = ".ui-resizable-" + n,
                    this.element.append(s);
            this._renderAxis = function(e) {
                var i, n, s, a;
                e = e || this.element;
                for (i in this.handles)
                    this.handles[i].constructor === String && (this.handles[i] = t(this.handles[i], this.element).show()),
                    this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (n = t(this.handles[i], this.element),
                    a = /sw|ne|nw|se|n|s/.test(i) ? n.outerHeight() : n.outerWidth(),
                    s = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""),
                    e.css(s, a),
                    this._proportionallyResize()),
                    t(this.handles[i]).length
            }
            ,
            this._renderAxis(this.element),
            this._handles = t(".ui-resizable-handle", this.element).disableSelection(),
            this._handles.mouseover(function() {
                r.resizing || (this.className && (s = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),
                r.axis = s && s[1] ? s[1] : "se")
            }
            ),
            o.autoHide && (this._handles.hide(),
            t(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                o.disabled || (t(this).removeClass("ui-resizable-autohide"),
                r._handles.show())
            }
            ).mouseleave(function() {
                o.disabled || r.resizing || (t(this).addClass("ui-resizable-autohide"),
                r._handles.hide())
            }
            )),
            this._mouseInit()
        },
        _destroy: function() {
            this._mouseDestroy();
            var e, i = function(e) {
                t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
            }
            ;
            return this.elementIsWrapper && (i(this.element),
            e = this.element,
            this.originalElement.css({
                position: e.css("position"),
                width: e.outerWidth(),
                height: e.outerHeight(),
                top: e.css("top"),
                left: e.css("left")
            }).insertAfter(e),
            e.remove()),
            this.originalElement.css("resize", this.originalResizeStyle),
            i(this.originalElement),
            this
        },
        _mouseCapture: function(e) {
            var i, n, s = !1;
            for (i in this.handles)
                n = t(this.handles[i])[0],
                (n === e.target || t.contains(n, e.target)) && (s = !0);
            return !this.options.disabled && s
        },
        _mouseStart: function(i) {
            var n, s, a, r = this.options, o = this.element.position(), l = this.element;
            return this.resizing = !0,
            /absolute/.test(l.css("position")) ? l.css({
                position: "absolute",
                top: l.css("top"),
                left: l.css("left")
            }) : l.is(".ui-draggable") && l.css({
                position: "absolute",
                top: o.top,
                left: o.left
            }),
            this._renderProxy(),
            n = e(this.helper.css("left")),
            s = e(this.helper.css("top")),
            r.containment && (n += t(r.containment).scrollLeft() || 0,
            s += t(r.containment).scrollTop() || 0),
            this.offset = this.helper.offset(),
            this.position = {
                left: n,
                top: s
            },
            this.size = this._helper ? {
                width: l.outerWidth(),
                height: l.outerHeight()
            } : {
                width: l.width(),
                height: l.height()
            },
            this.originalSize = this._helper ? {
                width: l.outerWidth(),
                height: l.outerHeight()
            } : {
                width: l.width(),
                height: l.height()
            },
            this.originalPosition = {
                left: n,
                top: s
            },
            this.sizeDiff = {
                width: l.outerWidth() - l.width(),
                height: l.outerHeight() - l.height()
            },
            this.originalMousePosition = {
                left: i.pageX,
                top: i.pageY
            },
            this.aspectRatio = "number" == typeof r.aspectRatio ? r.aspectRatio : this.originalSize.width / this.originalSize.height || 1,
            a = t(".ui-resizable-" + this.axis).css("cursor"),
            t("body").css("cursor", "auto" === a ? this.axis + "-resize" : a),
            l.addClass("ui-resizable-resizing"),
            this._propagate("start", i),
            !0
        },
        _mouseDrag: function(e) {
            var i, n = this.helper, s = {}, a = this.originalMousePosition, r = this.axis, o = this.position.top, l = this.position.left, c = this.size.width, d = this.size.height, h = e.pageX - a.left || 0, u = e.pageY - a.top || 0, p = this._change[r];
            return p ? (i = p.apply(this, [e, h, u]),
            this._updateVirtualBoundaries(e.shiftKey),
            (this._aspectRatio || e.shiftKey) && (i = this._updateRatio(i, e)),
            i = this._respectSize(i, e),
            this._updateCache(i),
            this._propagate("resize", e),
            this.position.top !== o && (s.top = this.position.top + "px"),
            this.position.left !== l && (s.left = this.position.left + "px"),
            this.size.width !== c && (s.width = this.size.width + "px"),
            this.size.height !== d && (s.height = this.size.height + "px"),
            n.css(s),
            !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(),
            t.isEmptyObject(s) || this._trigger("resize", e, this.ui()),
            !1) : !1
        },
        _mouseStop: function(e) {
            this.resizing = !1;
            var i, n, s, a, r, o, l, c = this.options, d = this;
            return this._helper && (i = this._proportionallyResizeElements,
            n = i.length && /textarea/i.test(i[0].nodeName),
            s = n && t.ui.hasScroll(i[0], "left") ? 0 : d.sizeDiff.height,
            a = n ? 0 : d.sizeDiff.width,
            r = {
                width: d.helper.width() - a,
                height: d.helper.height() - s
            },
            o = parseInt(d.element.css("left"), 10) + (d.position.left - d.originalPosition.left) || null ,
            l = parseInt(d.element.css("top"), 10) + (d.position.top - d.originalPosition.top) || null ,
            c.animate || this.element.css(t.extend(r, {
                top: l,
                left: o
            })),
            d.helper.height(d.size.height),
            d.helper.width(d.size.width),
            this._helper && !c.animate && this._proportionallyResize()),
            t("body").css("cursor", "auto"),
            this.element.removeClass("ui-resizable-resizing"),
            this._propagate("stop", e),
            this._helper && this.helper.remove(),
            !1
        },
        _updateVirtualBoundaries: function(t) {
            var e, n, s, a, r, o = this.options;
            r = {
                minWidth: i(o.minWidth) ? o.minWidth : 0,
                maxWidth: i(o.maxWidth) ? o.maxWidth : 1 / 0,
                minHeight: i(o.minHeight) ? o.minHeight : 0,
                maxHeight: i(o.maxHeight) ? o.maxHeight : 1 / 0
            },
            (this._aspectRatio || t) && (e = r.minHeight * this.aspectRatio,
            s = r.minWidth / this.aspectRatio,
            n = r.maxHeight * this.aspectRatio,
            a = r.maxWidth / this.aspectRatio,
            e > r.minWidth && (r.minWidth = e),
            s > r.minHeight && (r.minHeight = s),
            r.maxWidth > n && (r.maxWidth = n),
            r.maxHeight > a && (r.maxHeight = a)),
            this._vBoundaries = r
        },
        _updateCache: function(t) {
            this.offset = this.helper.offset(),
            i(t.left) && (this.position.left = t.left),
            i(t.top) && (this.position.top = t.top),
            i(t.height) && (this.size.height = t.height),
            i(t.width) && (this.size.width = t.width)
        },
        _updateRatio: function(t) {
            var e = this.position
              , n = this.size
              , s = this.axis;
            return i(t.height) ? t.width = t.height * this.aspectRatio : i(t.width) && (t.height = t.width / this.aspectRatio),
            "sw" === s && (t.left = e.left + (n.width - t.width),
            t.top = null ),
            "nw" === s && (t.top = e.top + (n.height - t.height),
            t.left = e.left + (n.width - t.width)),
            t
        },
        _respectSize: function(t) {
            var e = this._vBoundaries
              , n = this.axis
              , s = i(t.width) && e.maxWidth && e.maxWidth < t.width
              , a = i(t.height) && e.maxHeight && e.maxHeight < t.height
              , r = i(t.width) && e.minWidth && e.minWidth > t.width
              , o = i(t.height) && e.minHeight && e.minHeight > t.height
              , l = this.originalPosition.left + this.originalSize.width
              , c = this.position.top + this.size.height
              , d = /sw|nw|w/.test(n)
              , h = /nw|ne|n/.test(n);
            return r && (t.width = e.minWidth),
            o && (t.height = e.minHeight),
            s && (t.width = e.maxWidth),
            a && (t.height = e.maxHeight),
            r && d && (t.left = l - e.minWidth),
            s && d && (t.left = l - e.maxWidth),
            o && h && (t.top = c - e.minHeight),
            a && h && (t.top = c - e.maxHeight),
            t.width || t.height || t.left || !t.top ? t.width || t.height || t.top || !t.left || (t.left = null ) : t.top = null ,
            t
        },
        _proportionallyResize: function() {
            if (this._proportionallyResizeElements.length) {
                var t, e, i, n, s, a = this.helper || this.element;
                for (t = 0; this._proportionallyResizeElements.length > t; t++) {
                    if (s = this._proportionallyResizeElements[t],
                    !this.borderDif)
                        for (this.borderDif = [],
                        i = [s.css("borderTopWidth"), s.css("borderRightWidth"), s.css("borderBottomWidth"), s.css("borderLeftWidth")],
                        n = [s.css("paddingTop"), s.css("paddingRight"), s.css("paddingBottom"), s.css("paddingLeft")],
                        e = 0; i.length > e; e++)
                            this.borderDif[e] = (parseInt(i[e], 10) || 0) + (parseInt(n[e], 10) || 0);
                    s.css({
                        height: a.height() - this.borderDif[0] - this.borderDif[2] || 0,
                        width: a.width() - this.borderDif[1] - this.borderDif[3] || 0
                    })
                }
            }
        },
        _renderProxy: function() {
            var e = this.element
              , i = this.options;
            this.elementOffset = e.offset(),
            this._helper ? (this.helper = this.helper || t("<div style='overflow:hidden;'></div>"),
            this.helper.addClass(this._helper).css({
                width: this.element.outerWidth() - 1,
                height: this.element.outerHeight() - 1,
                position: "absolute",
                left: this.elementOffset.left + "px",
                top: this.elementOffset.top + "px",
                zIndex: ++i.zIndex
            }),
            this.helper.appendTo("body").disableSelection()) : this.helper = this.element
        },
        _change: {
            e: function(t, e) {
                return {
                    width: this.originalSize.width + e
                }
            },
            w: function(t, e) {
                var i = this.originalSize
                  , n = this.originalPosition;
                return {
                    left: n.left + e,
                    width: i.width - e
                }
            },
            n: function(t, e, i) {
                var n = this.originalSize
                  , s = this.originalPosition;
                return {
                    top: s.top + i,
                    height: n.height - i
                }
            },
            s: function(t, e, i) {
                return {
                    height: this.originalSize.height + i
                }
            },
            se: function(e, i, n) {
                return t.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [e, i, n]))
            },
            sw: function(e, i, n) {
                return t.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [e, i, n]))
            },
            ne: function(e, i, n) {
                return t.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [e, i, n]))
            },
            nw: function(e, i, n) {
                return t.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [e, i, n]))
            }
        },
        _propagate: function(e, i) {
            t.ui.plugin.call(this, e, [i, this.ui()]),
            "resize" !== e && this._trigger(e, i, this.ui())
        },
        plugins: {},
        ui: function() {
            return {
                originalElement: this.originalElement,
                element: this.element,
                helper: this.helper,
                position: this.position,
                size: this.size,
                originalSize: this.originalSize,
                originalPosition: this.originalPosition
            }
        }
    }),
    t.ui.plugin.add("resizable", "animate", {
        stop: function(e) {
            var i = t(this).data("ui-resizable")
              , n = i.options
              , s = i._proportionallyResizeElements
              , a = s.length && /textarea/i.test(s[0].nodeName)
              , r = a && t.ui.hasScroll(s[0], "left") ? 0 : i.sizeDiff.height
              , o = a ? 0 : i.sizeDiff.width
              , l = {
                width: i.size.width - o,
                height: i.size.height - r
            }
              , c = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null 
              , d = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null ;
            i.element.animate(t.extend(l, d && c ? {
                top: d,
                left: c
            } : {}), {
                duration: n.animateDuration,
                easing: n.animateEasing,
                step: function() {
                    var n = {
                        width: parseInt(i.element.css("width"), 10),
                        height: parseInt(i.element.css("height"), 10),
                        top: parseInt(i.element.css("top"), 10),
                        left: parseInt(i.element.css("left"), 10)
                    };
                    s && s.length && t(s[0]).css({
                        width: n.width,
                        height: n.height
                    }),
                    i._updateCache(n),
                    i._propagate("resize", e)
                }
            })
        }
    }),
    t.ui.plugin.add("resizable", "containment", {
        start: function() {
            var i, n, s, a, r, o, l, c = t(this).data("ui-resizable"), d = c.options, h = c.element, u = d.containment, p = u instanceof t ? u.get(0) : /parent/.test(u) ? h.parent().get(0) : u;
            p && (c.containerElement = t(p),
            /document/.test(u) || u === document ? (c.containerOffset = {
                left: 0,
                top: 0
            },
            c.containerPosition = {
                left: 0,
                top: 0
            },
            c.parentData = {
                element: t(document),
                left: 0,
                top: 0,
                width: t(document).width(),
                height: t(document).height() || document.body.parentNode.scrollHeight
            }) : (i = t(p),
            n = [],
            t(["Top", "Right", "Left", "Bottom"]).each(function(t, s) {
                n[t] = e(i.css("padding" + s))
            }
            ),
            c.containerOffset = i.offset(),
            c.containerPosition = i.position(),
            c.containerSize = {
                height: i.innerHeight() - n[3],
                width: i.innerWidth() - n[1]
            },
            s = c.containerOffset,
            a = c.containerSize.height,
            r = c.containerSize.width,
            o = t.ui.hasScroll(p, "left") ? p.scrollWidth : r,
            l = t.ui.hasScroll(p) ? p.scrollHeight : a,
            c.parentData = {
                element: p,
                left: s.left,
                top: s.top,
                width: o,
                height: l
            }))
        },
        resize: function(e) {
            var i, n, s, a, r = t(this).data("ui-resizable"), o = r.options, l = r.containerOffset, c = r.position, d = r._aspectRatio || e.shiftKey, h = {
                top: 0,
                left: 0
            }, u = r.containerElement;
            u[0] !== document && /static/.test(u.css("position")) && (h = l),
            c.left < (r._helper ? l.left : 0) && (r.size.width = r.size.width + (r._helper ? r.position.left - l.left : r.position.left - h.left),
            d && (r.size.height = r.size.width / r.aspectRatio),
            r.position.left = o.helper ? l.left : 0),
            c.top < (r._helper ? l.top : 0) && (r.size.height = r.size.height + (r._helper ? r.position.top - l.top : r.position.top),
            d && (r.size.width = r.size.height * r.aspectRatio),
            r.position.top = r._helper ? l.top : 0),
            r.offset.left = r.parentData.left + r.position.left,
            r.offset.top = r.parentData.top + r.position.top,
            i = Math.abs((r._helper ? r.offset.left - h.left : r.offset.left - h.left) + r.sizeDiff.width),
            n = Math.abs((r._helper ? r.offset.top - h.top : r.offset.top - l.top) + r.sizeDiff.height),
            s = r.containerElement.get(0) === r.element.parent().get(0),
            a = /relative|absolute/.test(r.containerElement.css("position")),
            s && a && (i -= r.parentData.left),
            i + r.size.width >= r.parentData.width && (r.size.width = r.parentData.width - i,
            d && (r.size.height = r.size.width / r.aspectRatio)),
            n + r.size.height >= r.parentData.height && (r.size.height = r.parentData.height - n,
            d && (r.size.width = r.size.height * r.aspectRatio))
        },
        stop: function() {
            var e = t(this).data("ui-resizable")
              , i = e.options
              , n = e.containerOffset
              , s = e.containerPosition
              , a = e.containerElement
              , r = t(e.helper)
              , o = r.offset()
              , l = r.outerWidth() - e.sizeDiff.width
              , c = r.outerHeight() - e.sizeDiff.height;
            e._helper && !i.animate && /relative/.test(a.css("position")) && t(this).css({
                left: o.left - s.left - n.left,
                width: l,
                height: c
            }),
            e._helper && !i.animate && /static/.test(a.css("position")) && t(this).css({
                left: o.left - s.left - n.left,
                width: l,
                height: c
            })
        }
    }),
    t.ui.plugin.add("resizable", "alsoResize", {
        start: function() {
            var e = t(this).data("ui-resizable")
              , i = e.options
              , n = function(e) {
                t(e).each(function() {
                    var e = t(this);
                    e.data("ui-resizable-alsoresize", {
                        width: parseInt(e.width(), 10),
                        height: parseInt(e.height(), 10),
                        left: parseInt(e.css("left"), 10),
                        top: parseInt(e.css("top"), 10)
                    })
                }
                )
            }
            ;
            "object" != typeof i.alsoResize || i.alsoResize.parentNode ? n(i.alsoResize) : i.alsoResize.length ? (i.alsoResize = i.alsoResize[0],
            n(i.alsoResize)) : t.each(i.alsoResize, function(t) {
                n(t)
            }
            )
        },
        resize: function(e, i) {
            var n = t(this).data("ui-resizable")
              , s = n.options
              , a = n.originalSize
              , r = n.originalPosition
              , o = {
                height: n.size.height - a.height || 0,
                width: n.size.width - a.width || 0,
                top: n.position.top - r.top || 0,
                left: n.position.left - r.left || 0
            }
              , l = function(e, n) {
                t(e).each(function() {
                    var e = t(this)
                      , s = t(this).data("ui-resizable-alsoresize")
                      , a = {}
                      , r = n && n.length ? n : e.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                    t.each(r, function(t, e) {
                        var i = (s[e] || 0) + (o[e] || 0);
                        i && i >= 0 && (a[e] = i || null )
                    }
                    ),
                    e.css(a)
                }
                )
            }
            ;
            "object" != typeof s.alsoResize || s.alsoResize.nodeType ? l(s.alsoResize) : t.each(s.alsoResize, function(t, e) {
                l(t, e)
            }
            )
        },
        stop: function() {
            t(this).removeData("resizable-alsoresize")
        }
    }),
    t.ui.plugin.add("resizable", "ghost", {
        start: function() {
            var e = t(this).data("ui-resizable")
              , i = e.options
              , n = e.size;
            e.ghost = e.originalElement.clone(),
            e.ghost.css({
                opacity: .25,
                display: "block",
                position: "relative",
                height: n.height,
                width: n.width,
                margin: 0,
                left: 0,
                top: 0
            }).addClass("ui-resizable-ghost").addClass("string" == typeof i.ghost ? i.ghost : ""),
            e.ghost.appendTo(e.helper)
        },
        resize: function() {
            var e = t(this).data("ui-resizable");
            e.ghost && e.ghost.css({
                position: "relative",
                height: e.size.height,
                width: e.size.width
            })
        },
        stop: function() {
            var e = t(this).data("ui-resizable");
            e.ghost && e.helper && e.helper.get(0).removeChild(e.ghost.get(0))
        }
    }),
    t.ui.plugin.add("resizable", "grid", {
        resize: function() {
            var e = t(this).data("ui-resizable")
              , i = e.options
              , n = e.size
              , s = e.originalSize
              , a = e.originalPosition
              , r = e.axis
              , o = "number" == typeof i.grid ? [i.grid, i.grid] : i.grid
              , l = o[0] || 1
              , c = o[1] || 1
              , d = Math.round((n.width - s.width) / l) * l
              , h = Math.round((n.height - s.height) / c) * c
              , u = s.width + d
              , p = s.height + h
              , f = i.maxWidth && u > i.maxWidth
              , m = i.maxHeight && p > i.maxHeight
              , g = i.minWidth && i.minWidth > u
              , v = i.minHeight && i.minHeight > p;
            i.grid = o,
            g && (u += l),
            v && (p += c),
            f && (u -= l),
            m && (p -= c),
            /^(se|s|e)$/.test(r) ? (e.size.width = u,
            e.size.height = p) : /^(ne)$/.test(r) ? (e.size.width = u,
            e.size.height = p,
            e.position.top = a.top - h) : /^(sw)$/.test(r) ? (e.size.width = u,
            e.size.height = p,
            e.position.left = a.left - d) : (e.size.width = u,
            e.size.height = p,
            e.position.top = a.top - h,
            e.position.left = a.left - d)
        }
    })
}
(jQuery),
function(t) {
    t.widget("ui.selectable", t.ui.mouse, {
        version: "1.10.2",
        options: {
            appendTo: "body",
            autoRefresh: !0,
            distance: 0,
            filter: "*",
            tolerance: "touch",
            selected: null ,
            selecting: null ,
            start: null ,
            stop: null ,
            unselected: null ,
            unselecting: null 
        },
        _create: function() {
            var e, i = this;
            this.element.addClass("ui-selectable"),
            this.dragged = !1,
            this.refresh = function() {
                e = t(i.options.filter, i.element[0]),
                e.addClass("ui-selectee"),
                e.each(function() {
                    var e = t(this)
                      , i = e.offset();
                    t.data(this, "selectable-item", {
                        element: this,
                        $element: e,
                        left: i.left,
                        top: i.top,
                        right: i.left + e.outerWidth(),
                        bottom: i.top + e.outerHeight(),
                        startselected: !1,
                        selected: e.hasClass("ui-selected"),
                        selecting: e.hasClass("ui-selecting"),
                        unselecting: e.hasClass("ui-unselecting")
                    })
                }
                )
            }
            ,
            this.refresh(),
            this.selectees = e.addClass("ui-selectee"),
            this._mouseInit(),
            this.helper = t("<div class='ui-selectable-helper'></div>")
        },
        _destroy: function() {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item"),
            this.element.removeClass("ui-selectable ui-selectable-disabled"),
            this._mouseDestroy()
        },
        _mouseStart: function(e) {
            var i = this
              , n = this.options;
            this.opos = [e.pageX, e.pageY],
            this.options.disabled || (this.selectees = t(n.filter, this.element[0]),
            this._trigger("start", e),
            t(n.appendTo).append(this.helper),
            this.helper.css({
                left: e.pageX,
                top: e.pageY,
                width: 0,
                height: 0
            }),
            n.autoRefresh && this.refresh(),
            this.selectees.filter(".ui-selected").each(function() {
                var n = t.data(this, "selectable-item");
                n.startselected = !0,
                e.metaKey || e.ctrlKey || (n.$element.removeClass("ui-selected"),
                n.selected = !1,
                n.$element.addClass("ui-unselecting"),
                n.unselecting = !0,
                i._trigger("unselecting", e, {
                    unselecting: n.element
                }))
            }
            ),
            t(e.target).parents().addBack().each(function() {
                var n, s = t.data(this, "selectable-item");
                return s ? (n = !e.metaKey && !e.ctrlKey || !s.$element.hasClass("ui-selected"),
                s.$element.removeClass(n ? "ui-unselecting" : "ui-selected").addClass(n ? "ui-selecting" : "ui-unselecting"),
                s.unselecting = !n,
                s.selecting = n,
                s.selected = n,
                n ? i._trigger("selecting", e, {
                    selecting: s.element
                }) : i._trigger("unselecting", e, {
                    unselecting: s.element
                }),
                !1) : void 0
            }
            ))
        },
        _mouseDrag: function(e) {
            if (this.dragged = !0,
            !this.options.disabled) {
                var i, n = this, s = this.options, a = this.opos[0], r = this.opos[1], o = e.pageX, l = e.pageY;
                return a > o && (i = o,
                o = a,
                a = i),
                r > l && (i = l,
                l = r,
                r = i),
                this.helper.css({
                    left: a,
                    top: r,
                    width: o - a,
                    height: l - r
                }),
                this.selectees.each(function() {
                    var i = t.data(this, "selectable-item")
                      , c = !1;
                    i && i.element !== n.element[0] && ("touch" === s.tolerance ? c = !(i.left > o || a > i.right || i.top > l || r > i.bottom) : "fit" === s.tolerance && (c = i.left > a && o > i.right && i.top > r && l > i.bottom),
                    c ? (i.selected && (i.$element.removeClass("ui-selected"),
                    i.selected = !1),
                    i.unselecting && (i.$element.removeClass("ui-unselecting"),
                    i.unselecting = !1),
                    i.selecting || (i.$element.addClass("ui-selecting"),
                    i.selecting = !0,
                    n._trigger("selecting", e, {
                        selecting: i.element
                    }))) : (i.selecting && ((e.metaKey || e.ctrlKey) && i.startselected ? (i.$element.removeClass("ui-selecting"),
                    i.selecting = !1,
                    i.$element.addClass("ui-selected"),
                    i.selected = !0) : (i.$element.removeClass("ui-selecting"),
                    i.selecting = !1,
                    i.startselected && (i.$element.addClass("ui-unselecting"),
                    i.unselecting = !0),
                    n._trigger("unselecting", e, {
                        unselecting: i.element
                    }))),
                    i.selected && (e.metaKey || e.ctrlKey || i.startselected || (i.$element.removeClass("ui-selected"),
                    i.selected = !1,
                    i.$element.addClass("ui-unselecting"),
                    i.unselecting = !0,
                    n._trigger("unselecting", e, {
                        unselecting: i.element
                    })))))
                }
                ),
                !1
            }
        },
        _mouseStop: function(e) {
            var i = this;
            return this.dragged = !1,
            t(".ui-unselecting", this.element[0]).each(function() {
                var n = t.data(this, "selectable-item");
                n.$element.removeClass("ui-unselecting"),
                n.unselecting = !1,
                n.startselected = !1,
                i._trigger("unselected", e, {
                    unselected: n.element
                })
            }
            ),
            t(".ui-selecting", this.element[0]).each(function() {
                var n = t.data(this, "selectable-item");
                n.$element.removeClass("ui-selecting").addClass("ui-selected"),
                n.selecting = !1,
                n.selected = !0,
                n.startselected = !0,
                i._trigger("selected", e, {
                    selected: n.element
                })
            }
            ),
            this._trigger("stop", e),
            this.helper.remove(),
            !1
        }
    })
}
(jQuery),
function(t) {
    function e(t, e, i) {
        return t > e && e + i > t
    }
    function i(t) {
        return /left|right/.test(t.css("float")) || /inline|table-cell/.test(t.css("display"))
    }
    t.widget("ui.sortable", t.ui.mouse, {
        version: "1.10.2",
        widgetEventPrefix: "sort",
        ready: !1,
        options: {
            appendTo: "parent",
            axis: !1,
            connectWith: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            dropOnEmpty: !0,
            forcePlaceholderSize: !1,
            forceHelperSize: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            items: "> *",
            opacity: !1,
            placeholder: !1,
            revert: !1,
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            scope: "default",
            tolerance: "intersect",
            zIndex: 1e3,
            activate: null ,
            beforeStop: null ,
            change: null ,
            deactivate: null ,
            out: null ,
            over: null ,
            receive: null ,
            remove: null ,
            sort: null ,
            start: null ,
            stop: null ,
            update: null 
        },
        _create: function() {
            var t = this.options;
            this.containerCache = {},
            this.element.addClass("ui-sortable"),
            this.refresh(),
            this.floating = this.items.length ? "x" === t.axis || i(this.items[0].item) : !1,
            this.offset = this.element.offset(),
            this._mouseInit(),
            this.ready = !0
        },
        _destroy: function() {
            this.element.removeClass("ui-sortable ui-sortable-disabled"),
            this._mouseDestroy();
            for (var t = this.items.length - 1; t >= 0; t--)
                this.items[t].item.removeData(this.widgetName + "-item");
            return this
        },
        _setOption: function(e, i) {
            "disabled" === e ? (this.options[e] = i,
            this.widget().toggleClass("ui-sortable-disabled", !!i)) : t.Widget.prototype._setOption.apply(this, arguments)
        },
        _mouseCapture: function(e, i) {
            var n = null 
              , s = !1
              , a = this;
            return this.reverting ? !1 : this.options.disabled || "static" === this.options.type ? !1 : (this._refreshItems(e),
            t(e.target).parents().each(function() {
                return t.data(this, a.widgetName + "-item") === a ? (n = t(this),
                !1) : void 0
            }
            ),
            t.data(e.target, a.widgetName + "-item") === a && (n = t(e.target)),
            n && (!this.options.handle || i || (t(this.options.handle, n).find("*").addBack().each(function() {
                this === e.target && (s = !0)
            }
            ),
            s)) ? (this.currentItem = n,
            this._removeCurrentsFromItems(),
            !0) : !1)
        },
        _mouseStart: function(e, i, n) {
            var s, a, r = this.options;
            if (this.currentContainer = this,
            this.refreshPositions(),
            this.helper = this._createHelper(e),
            this._cacheHelperProportions(),
            this._cacheMargins(),
            this.scrollParent = this.helper.scrollParent(),
            this.offset = this.currentItem.offset(),
            this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            },
            t.extend(this.offset, {
                click: {
                    left: e.pageX - this.offset.left,
                    top: e.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }),
            this.helper.css("position", "absolute"),
            this.cssPosition = this.helper.css("position"),
            this.originalPosition = this._generatePosition(e),
            this.originalPageX = e.pageX,
            this.originalPageY = e.pageY,
            r.cursorAt && this._adjustOffsetFromHelper(r.cursorAt),
            this.domPosition = {
                prev: this.currentItem.prev()[0],
                parent: this.currentItem.parent()[0]
            },
            this.helper[0] !== this.currentItem[0] && this.currentItem.hide(),
            this._createPlaceholder(),
            r.containment && this._setContainment(),
            r.cursor && "auto" !== r.cursor && (a = this.document.find("body"),
            this.storedCursor = a.css("cursor"),
            a.css("cursor", r.cursor),
            this.storedStylesheet = t("<style>*{ cursor: " + r.cursor + " !important; }</style>").appendTo(a)),
            r.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")),
            this.helper.css("opacity", r.opacity)),
            r.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")),
            this.helper.css("zIndex", r.zIndex)),
            this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()),
            this._trigger("start", e, this._uiHash()),
            this._preserveHelperProportions || this._cacheHelperProportions(),
            !n)
                for (s = this.containers.length - 1; s >= 0; s--)
                    this.containers[s]._trigger("activate", e, this._uiHash(this));
            return t.ui.ddmanager && (t.ui.ddmanager.current = this),
            t.ui.ddmanager && !r.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e),
            this.dragging = !0,
            this.helper.addClass("ui-sortable-helper"),
            this._mouseDrag(e),
            !0
        },
        _mouseDrag: function(e) {
            var i, n, s, a, r = this.options, o = !1;
            for (this.position = this._generatePosition(e),
            this.positionAbs = this._convertPositionTo("absolute"),
            this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs),
            this.options.scroll && (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - e.pageY < r.scrollSensitivity ? this.scrollParent[0].scrollTop = o = this.scrollParent[0].scrollTop + r.scrollSpeed : e.pageY - this.overflowOffset.top < r.scrollSensitivity && (this.scrollParent[0].scrollTop = o = this.scrollParent[0].scrollTop - r.scrollSpeed),
            this.overflowOffset.left + this.scrollParent[0].offsetWidth - e.pageX < r.scrollSensitivity ? this.scrollParent[0].scrollLeft = o = this.scrollParent[0].scrollLeft + r.scrollSpeed : e.pageX - this.overflowOffset.left < r.scrollSensitivity && (this.scrollParent[0].scrollLeft = o = this.scrollParent[0].scrollLeft - r.scrollSpeed)) : (e.pageY - t(document).scrollTop() < r.scrollSensitivity ? o = t(document).scrollTop(t(document).scrollTop() - r.scrollSpeed) : t(window).height() - (e.pageY - t(document).scrollTop()) < r.scrollSensitivity && (o = t(document).scrollTop(t(document).scrollTop() + r.scrollSpeed)),
            e.pageX - t(document).scrollLeft() < r.scrollSensitivity ? o = t(document).scrollLeft(t(document).scrollLeft() - r.scrollSpeed) : t(window).width() - (e.pageX - t(document).scrollLeft()) < r.scrollSensitivity && (o = t(document).scrollLeft(t(document).scrollLeft() + r.scrollSpeed))),
            o !== !1 && t.ui.ddmanager && !r.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e)),
            this.positionAbs = this._convertPositionTo("absolute"),
            this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"),
            this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"),
            i = this.items.length - 1; i >= 0; i--)
                if (n = this.items[i],
                s = n.item[0],
                a = this._intersectsWithPointer(n),
                a && n.instance === this.currentContainer && s !== this.currentItem[0] && this.placeholder[1 === a ? "next" : "prev"]()[0] !== s && !t.contains(this.placeholder[0], s) && ("semi-dynamic" === this.options.type ? !t.contains(this.element[0], s) : !0)) {
                    if (this.direction = 1 === a ? "down" : "up",
                    "pointer" !== this.options.tolerance && !this._intersectsWithSides(n))
                        break;
                    this._rearrange(e, n),
                    this._trigger("change", e, this._uiHash());
                    break
                }
            return this._contactContainers(e),
            t.ui.ddmanager && t.ui.ddmanager.drag(this, e),
            this._trigger("sort", e, this._uiHash()),
            this.lastPositionAbs = this.positionAbs,
            !1
        },
        _mouseStop: function(e, i) {
            if (e) {
                if (t.ui.ddmanager && !this.options.dropBehaviour && t.ui.ddmanager.drop(this, e),
                this.options.revert) {
                    var n = this
                      , s = this.placeholder.offset()
                      , a = this.options.axis
                      , r = {};
                    a && "x" !== a || (r.left = s.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft)),
                    a && "y" !== a || (r.top = s.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)),
                    this.reverting = !0,
                    t(this.helper).animate(r, parseInt(this.options.revert, 10) || 500, function() {
                        n._clear(e)
                    }
                    )
                } else
                    this._clear(e, i);
                return !1
            }
        },
        cancel: function() {
            if (this.dragging) {
                this._mouseUp({
                    target: null 
                }),
                "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                for (var e = this.containers.length - 1; e >= 0; e--)
                    this.containers[e]._trigger("deactivate", null , this._uiHash(this)),
                    this.containers[e].containerCache.over && (this.containers[e]._trigger("out", null , this._uiHash(this)),
                    this.containers[e].containerCache.over = 0)
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
            "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(),
            t.extend(this, {
                helper: null ,
                dragging: !1,
                reverting: !1,
                _noFinalSort: null 
            }),
            this.domPosition.prev ? t(this.domPosition.prev).after(this.currentItem) : t(this.domPosition.parent).prepend(this.currentItem)),
            this
        },
        serialize: function(e) {
            var i = this._getItemsAsjQuery(e && e.connected)
              , n = [];
            return e = e || {},
            t(i).each(function() {
                var i = (t(e.item || this).attr(e.attribute || "id") || "").match(e.expression || /(.+)[\-=_](.+)/);
                i && n.push((e.key || i[1] + "[]") + "=" + (e.key && e.expression ? i[1] : i[2]))
            }
            ),
            !n.length && e.key && n.push(e.key + "="),
            n.join("&")
        },
        toArray: function(e) {
            var i = this._getItemsAsjQuery(e && e.connected)
              , n = [];
            return e = e || {},
            i.each(function() {
                n.push(t(e.item || this).attr(e.attribute || "id") || "")
            }
            ),
            n
        },
        _intersectsWith: function(t) {
            var e = this.positionAbs.left
              , i = e + this.helperProportions.width
              , n = this.positionAbs.top
              , s = n + this.helperProportions.height
              , a = t.left
              , r = a + t.width
              , o = t.top
              , l = o + t.height
              , c = this.offset.click.top
              , d = this.offset.click.left
              , h = n + c > o && l > n + c && e + d > a && r > e + d;
            return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > t[this.floating ? "width" : "height"] ? h : e + this.helperProportions.width / 2 > a && r > i - this.helperProportions.width / 2 && n + this.helperProportions.height / 2 > o && l > s - this.helperProportions.height / 2
        },
        _intersectsWithPointer: function(t) {
            var i = "x" === this.options.axis || e(this.positionAbs.top + this.offset.click.top, t.top, t.height)
              , n = "y" === this.options.axis || e(this.positionAbs.left + this.offset.click.left, t.left, t.width)
              , s = i && n
              , a = this._getDragVerticalDirection()
              , r = this._getDragHorizontalDirection();
            return s ? this.floating ? r && "right" === r || "down" === a ? 2 : 1 : a && ("down" === a ? 2 : 1) : !1
        },
        _intersectsWithSides: function(t) {
            var i = e(this.positionAbs.top + this.offset.click.top, t.top + t.height / 2, t.height)
              , n = e(this.positionAbs.left + this.offset.click.left, t.left + t.width / 2, t.width)
              , s = this._getDragVerticalDirection()
              , a = this._getDragHorizontalDirection();
            return this.floating && a ? "right" === a && n || "left" === a && !n : s && ("down" === s && i || "up" === s && !i)
        },
        _getDragVerticalDirection: function() {
            var t = this.positionAbs.top - this.lastPositionAbs.top;
            return 0 !== t && (t > 0 ? "down" : "up")
        },
        _getDragHorizontalDirection: function() {
            var t = this.positionAbs.left - this.lastPositionAbs.left;
            return 0 !== t && (t > 0 ? "right" : "left")
        },
        refresh: function(t) {
            return this._refreshItems(t),
            this.refreshPositions(),
            this
        },
        _connectWith: function() {
            var t = this.options;
            return t.connectWith.constructor === String ? [t.connectWith] : t.connectWith
        },
        _getItemsAsjQuery: function(e) {
            var i, n, s, a, r = [], o = [], l = this._connectWith();
            if (l && e)
                for (i = l.length - 1; i >= 0; i--)
                    for (s = t(l[i]),
                    n = s.length - 1; n >= 0; n--)
                        a = t.data(s[n], this.widgetFullName),
                        a && a !== this && !a.options.disabled && o.push([t.isFunction(a.options.items) ? a.options.items.call(a.element) : t(a.options.items, a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), a]);
            for (o.push([t.isFunction(this.options.items) ? this.options.items.call(this.element, null , {
                options: this.options,
                item: this.currentItem
            }) : t(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]),
            i = o.length - 1; i >= 0; i--)
                o[i][0].each(function() {
                    r.push(this)
                }
                );
            return t(r)
        },
        _removeCurrentsFromItems: function() {
            var e = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = t.grep(this.items, function(t) {
                for (var i = 0; e.length > i; i++)
                    if (e[i] === t.item[0])
                        return !1;
                return !0
            }
            )
        },
        _refreshItems: function(e) {
            this.items = [],
            this.containers = [this];
            var i, n, s, a, r, o, l, c, d = this.items, h = [[t.isFunction(this.options.items) ? this.options.items.call(this.element[0], e, {
                item: this.currentItem
            }) : t(this.options.items, this.element), this]], u = this._connectWith();
            if (u && this.ready)
                for (i = u.length - 1; i >= 0; i--)
                    for (s = t(u[i]),
                    n = s.length - 1; n >= 0; n--)
                        a = t.data(s[n], this.widgetFullName),
                        a && a !== this && !a.options.disabled && (h.push([t.isFunction(a.options.items) ? a.options.items.call(a.element[0], e, {
                            item: this.currentItem
                        }) : t(a.options.items, a.element), a]),
                        this.containers.push(a));
            for (i = h.length - 1; i >= 0; i--)
                for (r = h[i][1],
                o = h[i][0],
                n = 0,
                c = o.length; c > n; n++)
                    l = t(o[n]),
                    l.data(this.widgetName + "-item", r),
                    d.push({
                        item: l,
                        instance: r,
                        width: 0,
                        height: 0,
                        left: 0,
                        top: 0
                    })
        },
        refreshPositions: function(e) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            var i, n, s, a;
            for (i = this.items.length - 1; i >= 0; i--)
                n = this.items[i],
                n.instance !== this.currentContainer && this.currentContainer && n.item[0] !== this.currentItem[0] || (s = this.options.toleranceElement ? t(this.options.toleranceElement, n.item) : n.item,
                e || (n.width = s.outerWidth(),
                n.height = s.outerHeight()),
                a = s.offset(),
                n.left = a.left,
                n.top = a.top);
            if (this.options.custom && this.options.custom.refreshContainers)
                this.options.custom.refreshContainers.call(this);
            else
                for (i = this.containers.length - 1; i >= 0; i--)
                    a = this.containers[i].element.offset(),
                    this.containers[i].containerCache.left = a.left,
                    this.containers[i].containerCache.top = a.top,
                    this.containers[i].containerCache.width = this.containers[i].element.outerWidth(),
                    this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
            return this
        },
        _createPlaceholder: function(e) {
            e = e || this;
            var i, n = e.options;
            n.placeholder && n.placeholder.constructor !== String || (i = n.placeholder,
            n.placeholder = {
                element: function() {
                    var n = e.currentItem[0].nodeName.toLowerCase()
                      , s = t(e.document[0].createElement(n)).addClass(i || e.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                    return "tr" === n ? s.append("<td colspan='99'>&#160;</td>") : "img" === n && s.attr("src", e.currentItem.attr("src")),
                    i || s.css("visibility", "hidden"),
                    s
                },
                update: function(t, s) {
                    (!i || n.forcePlaceholderSize) && (s.height() || s.height(e.currentItem.innerHeight() - parseInt(e.currentItem.css("paddingTop") || 0, 10) - parseInt(e.currentItem.css("paddingBottom") || 0, 10)),
                    s.width() || s.width(e.currentItem.innerWidth() - parseInt(e.currentItem.css("paddingLeft") || 0, 10) - parseInt(e.currentItem.css("paddingRight") || 0, 10)))
                }
            }),
            e.placeholder = t(n.placeholder.element.call(e.element, e.currentItem)),
            e.currentItem.after(e.placeholder),
            n.placeholder.update(e, e.placeholder)
        },
        _contactContainers: function(n) {
            var s, a, r, o, l, c, d, h, u, p, f = null , m = null ;
            for (s = this.containers.length - 1; s >= 0; s--)
                if (!t.contains(this.currentItem[0], this.containers[s].element[0]))
                    if (this._intersectsWith(this.containers[s].containerCache)) {
                        if (f && t.contains(this.containers[s].element[0], f.element[0]))
                            continue;f = this.containers[s],
                        m = s
                    } else
                        this.containers[s].containerCache.over && (this.containers[s]._trigger("out", n, this._uiHash(this)),
                        this.containers[s].containerCache.over = 0);
            if (f)
                if (1 === this.containers.length)
                    this.containers[m].containerCache.over || (this.containers[m]._trigger("over", n, this._uiHash(this)),
                    this.containers[m].containerCache.over = 1);
                else {
                    for (r = 1e4,
                    o = null ,
                    p = f.floating || i(this.currentItem),
                    l = p ? "left" : "top",
                    c = p ? "width" : "height",
                    d = this.positionAbs[l] + this.offset.click[l],
                    a = this.items.length - 1; a >= 0; a--)
                        t.contains(this.containers[m].element[0], this.items[a].item[0]) && this.items[a].item[0] !== this.currentItem[0] && (!p || e(this.positionAbs.top + this.offset.click.top, this.items[a].top, this.items[a].height)) && (h = this.items[a].item.offset()[l],
                        u = !1,
                        Math.abs(h - d) > Math.abs(h + this.items[a][c] - d) && (u = !0,
                        h += this.items[a][c]),
                        r > Math.abs(h - d) && (r = Math.abs(h - d),
                        o = this.items[a],
                        this.direction = u ? "up" : "down"));
                    if (!o && !this.options.dropOnEmpty)
                        return;
                    if (this.currentContainer === this.containers[m])
                        return;
                    o ? this._rearrange(n, o, null , !0) : this._rearrange(n, null , this.containers[m].element, !0),
                    this._trigger("change", n, this._uiHash()),
                    this.containers[m]._trigger("change", n, this._uiHash(this)),
                    this.currentContainer = this.containers[m],
                    this.options.placeholder.update(this.currentContainer, this.placeholder),
                    this.containers[m]._trigger("over", n, this._uiHash(this)),
                    this.containers[m].containerCache.over = 1
                }
        },
        _createHelper: function(e) {
            var i = this.options
              , n = t.isFunction(i.helper) ? t(i.helper.apply(this.element[0], [e, this.currentItem])) : "clone" === i.helper ? this.currentItem.clone() : this.currentItem;
            return n.parents("body").length || t("parent" !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(n[0]),
            n[0] === this.currentItem[0] && (this._storedCSS = {
                width: this.currentItem[0].style.width,
                height: this.currentItem[0].style.height,
                position: this.currentItem.css("position"),
                top: this.currentItem.css("top"),
                left: this.currentItem.css("left")
            }),
            (!n[0].style.width || i.forceHelperSize) && n.width(this.currentItem.width()),
            (!n[0].style.height || i.forceHelperSize) && n.height(this.currentItem.height()),
            n
        },
        _adjustOffsetFromHelper: function(e) {
            "string" == typeof e && (e = e.split(" ")),
            t.isArray(e) && (e = {
                left: +e[0],
                top: +e[1] || 0
            }),
            "left" in e && (this.offset.click.left = e.left + this.margins.left),
            "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left),
            "top" in e && (this.offset.click.top = e.top + this.margins.top),
            "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top)
        },
        _getParentOffset: function() {
            this.offsetParent = this.helper.offsetParent();
            var e = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(),
            e.top += this.scrollParent.scrollTop()),
            (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && t.ui.ie) && (e = {
                top: 0,
                left: 0
            }),
            {
                top: e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function() {
            if ("relative" === this.cssPosition) {
                var t = this.currentItem.position();
                return {
                    top: t.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: t.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            return {
                top: 0,
                left: 0
            }
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                top: parseInt(this.currentItem.css("marginTop"), 10) || 0
            }
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function() {
            var e, i, n, s = this.options;
            "parent" === s.containment && (s.containment = this.helper[0].parentNode),
            ("document" === s.containment || "window" === s.containment) && (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, t("document" === s.containment ? document : window).width() - this.helperProportions.width - this.margins.left, (t("document" === s.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]),
            /^(document|window|parent)$/.test(s.containment) || (e = t(s.containment)[0],
            i = t(s.containment).offset(),
            n = "hidden" !== t(e).css("overflow"),
            this.containment = [i.left + (parseInt(t(e).css("borderLeftWidth"), 10) || 0) + (parseInt(t(e).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(t(e).css("borderTopWidth"), 10) || 0) + (parseInt(t(e).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (n ? Math.max(e.scrollWidth, e.offsetWidth) : e.offsetWidth) - (parseInt(t(e).css("borderLeftWidth"), 10) || 0) - (parseInt(t(e).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (n ? Math.max(e.scrollHeight, e.offsetHeight) : e.offsetHeight) - (parseInt(t(e).css("borderTopWidth"), 10) || 0) - (parseInt(t(e).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top])
        },
        _convertPositionTo: function(e, i) {
            i || (i = this.position);
            var n = "absolute" === e ? 1 : -1
              , s = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent
              , a = /(html|body)/i.test(s[0].tagName);
            return {
                top: i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : a ? 0 : s.scrollTop()) * n,
                left: i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : a ? 0 : s.scrollLeft()) * n
            }
        },
        _generatePosition: function(e) {
            var i, n, s = this.options, a = e.pageX, r = e.pageY, o = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, l = /(html|body)/i.test(o[0].tagName);
            return "relative" !== this.cssPosition || this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()),
            this.originalPosition && (this.containment && (e.pageX - this.offset.click.left < this.containment[0] && (a = this.containment[0] + this.offset.click.left),
            e.pageY - this.offset.click.top < this.containment[1] && (r = this.containment[1] + this.offset.click.top),
            e.pageX - this.offset.click.left > this.containment[2] && (a = this.containment[2] + this.offset.click.left),
            e.pageY - this.offset.click.top > this.containment[3] && (r = this.containment[3] + this.offset.click.top)),
            s.grid && (i = this.originalPageY + Math.round((r - this.originalPageY) / s.grid[1]) * s.grid[1],
            r = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - s.grid[1] : i + s.grid[1] : i,
            n = this.originalPageX + Math.round((a - this.originalPageX) / s.grid[0]) * s.grid[0],
            a = this.containment ? n - this.offset.click.left >= this.containment[0] && n - this.offset.click.left <= this.containment[2] ? n : n - this.offset.click.left >= this.containment[0] ? n - s.grid[0] : n + s.grid[0] : n)),
            {
                top: r - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : l ? 0 : o.scrollTop()),
                left: a - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : l ? 0 : o.scrollLeft())
            }
        },
        _rearrange: function(t, e, i, n) {
            i ? i[0].appendChild(this.placeholder[0]) : e.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? e.item[0] : e.item[0].nextSibling),
            this.counter = this.counter ? ++this.counter : 1;
            var s = this.counter;
            this._delay(function() {
                s === this.counter && this.refreshPositions(!n)
            }
            )
        },
        _clear: function(t, e) {
            this.reverting = !1;
            var i, n = [];
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem),
            this._noFinalSort = null ,
            this.helper[0] === this.currentItem[0]) {
                for (i in this._storedCSS)
                    ("auto" === this._storedCSS[i] || "static" === this._storedCSS[i]) && (this._storedCSS[i] = "");
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
            } else
                this.currentItem.show();
            for (this.fromOutside && !e && n.push(function(t) {
                this._trigger("receive", t, this._uiHash(this.fromOutside))
            }
            ),
            !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || e || n.push(function(t) {
                this._trigger("update", t, this._uiHash())
            }
            ),
            this !== this.currentContainer && (e || (n.push(function(t) {
                this._trigger("remove", t, this._uiHash())
            }
            ),
            n.push(function(t) {
                return function(e) {
                    t._trigger("receive", e, this._uiHash(this))
                }
            }
            .call(this, this.currentContainer)),
            n.push(function(t) {
                return function(e) {
                    t._trigger("update", e, this._uiHash(this))
                }
            }
            .call(this, this.currentContainer)))),
            i = this.containers.length - 1; i >= 0; i--)
                e || n.push(function(t) {
                    return function(e) {
                        t._trigger("deactivate", e, this._uiHash(this))
                    }
                }
                .call(this, this.containers[i])),
                this.containers[i].containerCache.over && (n.push(function(t) {
                    return function(e) {
                        t._trigger("out", e, this._uiHash(this))
                    }
                }
                .call(this, this.containers[i])),
                this.containers[i].containerCache.over = 0);
            if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor),
            this.storedStylesheet.remove()),
            this._storedOpacity && this.helper.css("opacity", this._storedOpacity),
            this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex),
            this.dragging = !1,
            this.cancelHelperRemoval) {
                if (!e) {
                    for (this._trigger("beforeStop", t, this._uiHash()),
                    i = 0; n.length > i; i++)
                        n[i].call(this, t);
                    this._trigger("stop", t, this._uiHash())
                }
                return this.fromOutside = !1,
                !1
            }
            if (e || this._trigger("beforeStop", t, this._uiHash()),
            this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
            this.helper[0] !== this.currentItem[0] && this.helper.remove(),
            this.helper = null ,
            !e) {
                for (i = 0; n.length > i; i++)
                    n[i].call(this, t);
                this._trigger("stop", t, this._uiHash())
            }
            return this.fromOutside = !1,
            !0
        },
        _trigger: function() {
            t.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
        },
        _uiHash: function(e) {
            var i = e || this;
            return {
                helper: i.helper,
                placeholder: i.placeholder || t([]),
                position: i.position,
                originalPosition: i.originalPosition,
                offset: i.positionAbs,
                item: i.currentItem,
                sender: e ? e.element : null 
            }
        }
    })
}
(jQuery),
function(t) {
    var e, i, n, s, a = "ui-button ui-widget ui-state-default ui-corner-all", r = "ui-state-hover ui-state-active ", o = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", l = function() {
        var e = t(this).find(":ui-button");
        setTimeout(function() {
            e.button("refresh")
        }
        , 1)
    }
    , c = function(e) {
        var i = e.name
          , n = e.form
          , s = t([]);
        return i && (i = i.replace(/'/g, "\\'"),
        s = n ? t(n).find("[name='" + i + "']") : t("[name='" + i + "']", e.ownerDocument).filter(function() {
            return !this.form
        }
        )),
        s
    }
    ;
    t.widget("ui.button", {
        version: "1.10.2",
        defaultElement: "<button>",
        options: {
            disabled: null ,
            text: !0,
            label: null ,
            icons: {
                primary: null ,
                secondary: null 
            }
        },
        _create: function() {
            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, l),
            "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled),
            this._determineButtonType(),
            this.hasTitle = !!this.buttonElement.attr("title");
            var r = this
              , o = this.options
              , d = "checkbox" === this.type || "radio" === this.type
              , h = d ? "" : "ui-state-active"
              , u = "ui-state-focus";
            null  === o.label && (o.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html()),
            this._hoverable(this.buttonElement),
            this.buttonElement.addClass(a).attr("role", "button").bind("mouseenter" + this.eventNamespace, function() {
                o.disabled || this === e && t(this).addClass("ui-state-active")
            }
            ).bind("mouseleave" + this.eventNamespace, function() {
                o.disabled || t(this).removeClass(h)
            }
            ).bind("click" + this.eventNamespace, function(t) {
                o.disabled && (t.preventDefault(),
                t.stopImmediatePropagation())
            }
            ),
            this.element.bind("focus" + this.eventNamespace, function() {
                r.buttonElement.addClass(u)
            }
            ).bind("blur" + this.eventNamespace, function() {
                r.buttonElement.removeClass(u)
            }
            ),
            d && (this.element.bind("change" + this.eventNamespace, function() {
                s || r.refresh()
            }
            ),
            this.buttonElement.bind("mousedown" + this.eventNamespace, function(t) {
                o.disabled || (s = !1,
                i = t.pageX,
                n = t.pageY)
            }
            ).bind("mouseup" + this.eventNamespace, function(t) {
                o.disabled || (i !== t.pageX || n !== t.pageY) && (s = !0)
            }
            )),
            "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                return o.disabled || s ? !1 : void 0
            }
            ) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                if (o.disabled || s)
                    return !1;
                t(this).addClass("ui-state-active"),
                r.buttonElement.attr("aria-pressed", "true");
                var e = r.element[0];
                c(e).not(e).map(function() {
                    return t(this).button("widget")[0]
                }
                ).removeClass("ui-state-active").attr("aria-pressed", "false")
            }
            ) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function() {
                return o.disabled ? !1 : (t(this).addClass("ui-state-active"),
                e = this,
                void r.document.one("mouseup", function() {
                    e = null 
                }
                ))
            }
            ).bind("mouseup" + this.eventNamespace, function() {
                return o.disabled ? !1 : void t(this).removeClass("ui-state-active")
            }
            ).bind("keydown" + this.eventNamespace, function(e) {
                return o.disabled ? !1 : void ((e.keyCode === t.ui.keyCode.SPACE || e.keyCode === t.ui.keyCode.ENTER) && t(this).addClass("ui-state-active"))
            }
            ).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
                t(this).removeClass("ui-state-active")
            }
            ),
            this.buttonElement.is("a") && this.buttonElement.keyup(function(e) {
                e.keyCode === t.ui.keyCode.SPACE && t(this).click()
            }
            )),
            this._setOption("disabled", o.disabled),
            this._resetButton()
        },
        _determineButtonType: function() {
            var t, e, i;
            this.type = this.element.is("[type=checkbox]") ? "checkbox" : this.element.is("[type=radio]") ? "radio" : this.element.is("input") ? "input" : "button",
            "checkbox" === this.type || "radio" === this.type ? (t = this.element.parents().last(),
            e = "label[for='" + this.element.attr("id") + "']",
            this.buttonElement = t.find(e),
            this.buttonElement.length || (t = t.length ? t.siblings() : this.element.siblings(),
            this.buttonElement = t.filter(e),
            this.buttonElement.length || (this.buttonElement = t.find(e))),
            this.element.addClass("ui-helper-hidden-accessible"),
            i = this.element.is(":checked"),
            i && this.buttonElement.addClass("ui-state-active"),
            this.buttonElement.prop("aria-pressed", i)) : this.buttonElement = this.element
        },
        widget: function() {
            return this.buttonElement
        },
        _destroy: function() {
            this.element.removeClass("ui-helper-hidden-accessible"),
            this.buttonElement.removeClass(a + " " + r + " " + o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),
            this.hasTitle || this.buttonElement.removeAttr("title")
        },
        _setOption: function(t, e) {
            return this._super(t, e),
            "disabled" === t ? void (e ? this.element.prop("disabled", !0) : this.element.prop("disabled", !1)) : void this._resetButton()
        },
        refresh: function() {
            var e = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
            e !== this.options.disabled && this._setOption("disabled", e),
            "radio" === this.type ? c(this.element[0]).each(function() {
                t(this).is(":checked") ? t(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false")
            }
            ) : "checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"))
        },
        _resetButton: function() {
            if ("input" === this.type)
                return void (this.options.label && this.element.val(this.options.label));
            var e = this.buttonElement.removeClass(o)
              , i = t("<span></span>", this.document[0]).addClass("ui-button-text").html("").appendTo(e.empty()).text()
              , n = this.options.icons
              , s = n.primary && n.secondary
              , a = [];
            n.primary || n.secondary ? (this.options.text && a.push("ui-button-text-icon" + (s ? "s" : n.primary ? "-primary" : "-secondary")),
            n.primary && e.prepend("<span class='ui-button-icon-primary ui-icon " + n.primary + "'></span>"),
            n.secondary && e.append("<span class='ui-button-icon-secondary ui-icon " + n.secondary + "'></span>"),
            this.options.text || (a.push(s ? "ui-button-icons-only" : "ui-button-icon-only"),
            this.hasTitle || e.attr("title", t.trim(i)))) : a.push("ui-button-text-only"),
            e.addClass(a.join(" "))
        }
    }),
    t.widget("ui.buttonset", {
        version: "1.10.2",
        options: {
            items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
        },
        _create: function() {
            this.element.addClass("ui-buttonset")
        },
        _init: function() {
            this.refresh()
        },
        _setOption: function(t, e) {
            "disabled" === t && this.buttons.button("option", t, e),
            this._super(t, e)
        },
        refresh: function() {
            var e = "rtl" === this.element.css("direction");
            this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function() {
                return t(this).button("widget")[0]
            }
            ).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(e ? "ui-corner-left" : "ui-corner-right").end().end()
        },
        _destroy: function() {
            this.element.removeClass("ui-buttonset"),
            this.buttons.map(function() {
                return t(this).button("widget")[0]
            }
            ).removeClass("ui-corner-left ui-corner-right").end().button("destroy")
        }
    })
}
(jQuery),
function(t, e) {
    function i() {
        this._curInst = null ,
        this._keyEvent = !1,
        this._disabledInputs = [],
        this._datepickerShowing = !1,
        this._inDialog = !1,
        this._mainDivId = "ui-datepicker-div",
        this._inlineClass = "ui-datepicker-inline",
        this._appendClass = "ui-datepicker-append",
        this._triggerClass = "ui-datepicker-trigger",
        this._dialogClass = "ui-datepicker-dialog",
        this._disableClass = "ui-datepicker-disabled",
        this._unselectableClass = "ui-datepicker-unselectable",
        this._currentClass = "ui-datepicker-current-day",
        this._dayOverClass = "ui-datepicker-days-cell-over",
        this.regional = [],
        this.regional[""] = {
            closeText: "Done",
            prevText: "Prev",
            nextText: "Next",
            currentText: "Today",
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            weekHeader: "Wk",
            dateFormat: "mm/dd/yy",
            firstDay: 0,
            isRTL: !1,
            showMonthAfterYear: !1,
            yearSuffix: ""
        },
        this._defaults = {
            showOn: "focus",
            showAnim: "fadeIn",
            showOptions: {},
            defaultDate: null ,
            appendText: "",
            buttonText: "...",
            buttonImage: "",
            buttonImageOnly: !1,
            hideIfNoPrevNext: !1,
            navigationAsDateFormat: !1,
            gotoCurrent: !1,
            changeMonth: !1,
            changeYear: !1,
            yearRange: "c-10:c+10",
            showOtherMonths: !1,
            selectOtherMonths: !1,
            showWeek: !1,
            calculateWeek: this.iso8601Week,
            shortYearCutoff: "+10",
            minDate: null ,
            maxDate: null ,
            duration: "fast",
            beforeShowDay: null ,
            beforeShow: null ,
            onSelect: null ,
            onChangeMonthYear: null ,
            onClose: null ,
            numberOfMonths: 1,
            showCurrentAtPos: 0,
            stepMonths: 1,
            stepBigMonths: 12,
            altField: "",
            altFormat: "",
            constrainInput: !0,
            showButtonPanel: !1,
            autoSize: !1,
            disabled: !1
        },
        t.extend(this._defaults, this.regional[""]),
        this.dpDiv = n(t("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
    }
    function n(e) {
        var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return e.delegate(i, "mouseout", function() {
            t(this).removeClass("ui-state-hover"),
            -1 !== this.className.indexOf("ui-datepicker-prev") && t(this).removeClass("ui-datepicker-prev-hover"),
            -1 !== this.className.indexOf("ui-datepicker-next") && t(this).removeClass("ui-datepicker-next-hover")
        }
        ).delegate(i, "mouseover", function() {
            t.datepicker._isDisabledDatepicker(a.inline ? e.parent()[0] : a.input[0]) || (t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
            t(this).addClass("ui-state-hover"),
            -1 !== this.className.indexOf("ui-datepicker-prev") && t(this).addClass("ui-datepicker-prev-hover"),
            -1 !== this.className.indexOf("ui-datepicker-next") && t(this).addClass("ui-datepicker-next-hover"))
        }
        )
    }
    function s(e, i) {
        t.extend(e, i);
        for (var n in i)
            null  == i[n] && (e[n] = i[n]);
        return e
    }
    t.extend(t.ui, {
        datepicker: {
            version: "1.10.2"
        }
    });
    var a, r = "datepicker", o = (new Date).getTime();
    t.extend(i.prototype, {
        markerClassName: "hasDatepicker",
        maxRows: 4,
        _widgetDatepicker: function() {
            return this.dpDiv
        },
        setDefaults: function(t) {
            return s(this._defaults, t || {}),
            this
        },
        _attachDatepicker: function(e, i) {
            var n, s, a;
            n = e.nodeName.toLowerCase(),
            s = "div" === n || "span" === n,
            e.id || (this.uuid += 1,
            e.id = "dp" + this.uuid),
            a = this._newInst(t(e), s),
            a.settings = t.extend({}, i || {}),
            "input" === n ? this._connectDatepicker(e, a) : s && this._inlineDatepicker(e, a)
        },
        _newInst: function(e, i) {
            var s = e[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
            return {
                id: s,
                input: e,
                selectedDay: 0,
                selectedMonth: 0,
                selectedYear: 0,
                drawMonth: 0,
                drawYear: 0,
                inline: i,
                dpDiv: i ? n(t("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv
            }
        },
        _connectDatepicker: function(e, i) {
            var n = t(e);
            i.append = t([]),
            i.trigger = t([]),
            n.hasClass(this.markerClassName) || (this._attachments(n, i),
            n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),
            this._autoSize(i),
            t.data(e, r, i),
            i.settings.disabled && this._disableDatepicker(e))
        },
        _attachments: function(e, i) {
            var n, s, a, r = this._get(i, "appendText"), o = this._get(i, "isRTL");
            i.append && i.append.remove(),
            r && (i.append = t("<span class='" + this._appendClass + "'>" + r + "</span>"),
            e[o ? "before" : "after"](i.append)),
            e.unbind("focus", this._showDatepicker),
            i.trigger && i.trigger.remove(),
            n = this._get(i, "showOn"),
            ("focus" === n || "both" === n) && e.focus(this._showDatepicker),
            ("button" === n || "both" === n) && (s = this._get(i, "buttonText"),
            a = this._get(i, "buttonImage"),
            i.trigger = t(this._get(i, "buttonImageOnly") ? t("<img/>").addClass(this._triggerClass).attr({
                src: a,
                alt: s,
                title: s
            }) : t("<button type='button'></button>").addClass(this._triggerClass).html(a ? t("<img/>").attr({
                src: a,
                alt: s,
                title: s
            }) : s)),
            e[o ? "before" : "after"](i.trigger),
            i.trigger.click(function() {
                return t.datepicker._datepickerShowing && t.datepicker._lastInput === e[0] ? t.datepicker._hideDatepicker() : t.datepicker._datepickerShowing && t.datepicker._lastInput !== e[0] ? (t.datepicker._hideDatepicker(),
                t.datepicker._showDatepicker(e[0])) : t.datepicker._showDatepicker(e[0]),
                !1
            }
            ))
        },
        _autoSize: function(t) {
            if (this._get(t, "autoSize") && !t.inline) {
                var e, i, n, s, a = new Date(2009,11,20), r = this._get(t, "dateFormat");
                r.match(/[DM]/) && (e = function(t) {
                    for (i = 0,
                    n = 0,
                    s = 0; t.length > s; s++)
                        t[s].length > i && (i = t[s].length,
                        n = s);
                    return n
                }
                ,
                a.setMonth(e(this._get(t, r.match(/MM/) ? "monthNames" : "monthNamesShort"))),
                a.setDate(e(this._get(t, r.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - a.getDay())),
                t.input.attr("size", this._formatDate(t, a).length)
            }
        },
        _inlineDatepicker: function(e, i) {
            var n = t(e);
            n.hasClass(this.markerClassName) || (n.addClass(this.markerClassName).append(i.dpDiv),
            t.data(e, r, i),
            this._setDate(i, this._getDefaultDate(i), !0),
            this._updateDatepicker(i),
            this._updateAlternate(i),
            i.settings.disabled && this._disableDatepicker(e),
            i.dpDiv.css("display", "block"))
        },
        _dialogDatepicker: function(e, i, n, a, o) {
            var l, c, d, h, u, p = this._dialogInst;
            return p || (this.uuid += 1,
            l = "dp" + this.uuid,
            this._dialogInput = t("<input type='text' id='" + l + "' style='position: absolute; top: -100px; width: 0px;'/>"),
            this._dialogInput.keydown(this._doKeyDown),
            t("body").append(this._dialogInput),
            p = this._dialogInst = this._newInst(this._dialogInput, !1),
            p.settings = {},
            t.data(this._dialogInput[0], r, p)),
            s(p.settings, a || {}),
            i = i && i.constructor === Date ? this._formatDate(p, i) : i,
            this._dialogInput.val(i),
            this._pos = o ? o.length ? o : [o.pageX, o.pageY] : null ,
            this._pos || (c = document.documentElement.clientWidth,
            d = document.documentElement.clientHeight,
            h = document.documentElement.scrollLeft || document.body.scrollLeft,
            u = document.documentElement.scrollTop || document.body.scrollTop,
            this._pos = [c / 2 - 100 + h, d / 2 - 150 + u]),
            this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"),
            p.settings.onSelect = n,
            this._inDialog = !0,
            this.dpDiv.addClass(this._dialogClass),
            this._showDatepicker(this._dialogInput[0]),
            t.blockUI && t.blockUI(this.dpDiv),
            t.data(this._dialogInput[0], r, p),
            this
        },
        _destroyDatepicker: function(e) {
            var i, n = t(e), s = t.data(e, r);
            n.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(),
            t.removeData(e, r),
            "input" === i ? (s.append.remove(),
            s.trigger.remove(),
            n.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : ("div" === i || "span" === i) && n.removeClass(this.markerClassName).empty())
        },
        _enableDatepicker: function(e) {
            var i, n, s = t(e), a = t.data(e, r);
            s.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(),
            "input" === i ? (e.disabled = !1,
            a.trigger.filter("button").each(function() {
                this.disabled = !1
            }
            ).end().filter("img").css({
                opacity: "1.0",
                cursor: ""
            })) : ("div" === i || "span" === i) && (n = s.children("." + this._inlineClass),
            n.children().removeClass("ui-state-disabled"),
            n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)),
            this._disabledInputs = t.map(this._disabledInputs, function(t) {
                return t === e ? null  : t
            }
            ))
        },
        _disableDatepicker: function(e) {
            var i, n, s = t(e), a = t.data(e, r);
            s.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(),
            "input" === i ? (e.disabled = !0,
            a.trigger.filter("button").each(function() {
                this.disabled = !0
            }
            ).end().filter("img").css({
                opacity: "0.5",
                cursor: "default"
            })) : ("div" === i || "span" === i) && (n = s.children("." + this._inlineClass),
            n.children().addClass("ui-state-disabled"),
            n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)),
            this._disabledInputs = t.map(this._disabledInputs, function(t) {
                return t === e ? null  : t
            }
            ),
            this._disabledInputs[this._disabledInputs.length] = e)
        },
        _isDisabledDatepicker: function(t) {
            if (!t)
                return !1;
            for (var e = 0; this._disabledInputs.length > e; e++)
                if (this._disabledInputs[e] === t)
                    return !0;
            return !1
        },
        _getInst: function(e) {
            try {
                return t.data(e, r)
            } catch (i) {
                throw "Missing instance data for this datepicker"
            }
        },
        _optionDatepicker: function(i, n, a) {
            var r, o, l, c, d = this._getInst(i);
            return 2 === arguments.length && "string" == typeof n ? "defaults" === n ? t.extend({}, t.datepicker._defaults) : d ? "all" === n ? t.extend({}, d.settings) : this._get(d, n) : null  : (r = n || {},
            "string" == typeof n && (r = {},
            r[n] = a),
            d && (this._curInst === d && this._hideDatepicker(),
            o = this._getDateDatepicker(i, !0),
            l = this._getMinMaxDate(d, "min"),
            c = this._getMinMaxDate(d, "max"),
            s(d.settings, r),
            null  !== l && r.dateFormat !== e && r.minDate === e && (d.settings.minDate = this._formatDate(d, l)),
            null  !== c && r.dateFormat !== e && r.maxDate === e && (d.settings.maxDate = this._formatDate(d, c)),
            "disabled" in r && (r.disabled ? this._disableDatepicker(i) : this._enableDatepicker(i)),
            this._attachments(t(i), d),
            this._autoSize(d),
            this._setDate(d, o),
            this._updateAlternate(d),
            this._updateDatepicker(d)),
            e)
        },
        _changeDatepicker: function(t, e, i) {
            this._optionDatepicker(t, e, i)
        },
        _refreshDatepicker: function(t) {
            var e = this._getInst(t);
            e && this._updateDatepicker(e)
        },
        _setDateDatepicker: function(t, e) {
            var i = this._getInst(t);
            i && (this._setDate(i, e),
            this._updateDatepicker(i),
            this._updateAlternate(i))
        },
        _getDateDatepicker: function(t, e) {
            var i = this._getInst(t);
            return i && !i.inline && this._setDateFromField(i, e),
            i ? this._getDate(i) : null 
        },
        _doKeyDown: function(e) {
            var i, n, s, a = t.datepicker._getInst(e.target), r = !0, o = a.dpDiv.is(".ui-datepicker-rtl");
            if (a._keyEvent = !0,
            t.datepicker._datepickerShowing)
                switch (e.keyCode) {
                case 9:
                    t.datepicker._hideDatepicker(),
                    r = !1;
                    break;
                case 13:
                    return s = t("td." + t.datepicker._dayOverClass + ":not(." + t.datepicker._currentClass + ")", a.dpDiv),
                    s[0] && t.datepicker._selectDay(e.target, a.selectedMonth, a.selectedYear, s[0]),
                    i = t.datepicker._get(a, "onSelect"),
                    i ? (n = t.datepicker._formatDate(a),
                    i.apply(a.input ? a.input[0] : null , [n, a])) : t.datepicker._hideDatepicker(),
                    !1;
                case 27:
                    t.datepicker._hideDatepicker();
                    break;
                case 33:
                    t.datepicker._adjustDate(e.target, e.ctrlKey ? -t.datepicker._get(a, "stepBigMonths") : -t.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 34:
                    t.datepicker._adjustDate(e.target, e.ctrlKey ? +t.datepicker._get(a, "stepBigMonths") : +t.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 35:
                    (e.ctrlKey || e.metaKey) && t.datepicker._clearDate(e.target),
                    r = e.ctrlKey || e.metaKey;
                    break;
                case 36:
                    (e.ctrlKey || e.metaKey) && t.datepicker._gotoToday(e.target),
                    r = e.ctrlKey || e.metaKey;
                    break;
                case 37:
                    (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, o ? 1 : -1, "D"),
                    r = e.ctrlKey || e.metaKey,
                    e.originalEvent.altKey && t.datepicker._adjustDate(e.target, e.ctrlKey ? -t.datepicker._get(a, "stepBigMonths") : -t.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 38:
                    (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, -7, "D"),
                    r = e.ctrlKey || e.metaKey;
                    break;
                case 39:
                    (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, o ? -1 : 1, "D"),
                    r = e.ctrlKey || e.metaKey,
                    e.originalEvent.altKey && t.datepicker._adjustDate(e.target, e.ctrlKey ? +t.datepicker._get(a, "stepBigMonths") : +t.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 40:
                    (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, 7, "D"),
                    r = e.ctrlKey || e.metaKey;
                    break;
                default:
                    r = !1
                }
            else
                36 === e.keyCode && e.ctrlKey ? t.datepicker._showDatepicker(this) : r = !1;
            r && (e.preventDefault(),
            e.stopPropagation())
        },
        _doKeyPress: function(i) {
            var n, s, a = t.datepicker._getInst(i.target);
            return t.datepicker._get(a, "constrainInput") ? (n = t.datepicker._possibleChars(t.datepicker._get(a, "dateFormat")),
            s = String.fromCharCode(null  == i.charCode ? i.keyCode : i.charCode),
            i.ctrlKey || i.metaKey || " " > s || !n || n.indexOf(s) > -1) : e
        },
        _doKeyUp: function(e) {
            var i, n = t.datepicker._getInst(e.target);
            if (n.input.val() !== n.lastVal)
                try {
                    i = t.datepicker.parseDate(t.datepicker._get(n, "dateFormat"), n.input ? n.input.val() : null , t.datepicker._getFormatConfig(n)),
                    i && (t.datepicker._setDateFromField(n),
                    t.datepicker._updateAlternate(n),
                    t.datepicker._updateDatepicker(n))
                } catch (s) {}
            return !0
        },
        _showDatepicker: function(e) {
            if (e = e.target || e,
            "input" !== e.nodeName.toLowerCase() && (e = t("input", e.parentNode)[0]),
            !t.datepicker._isDisabledDatepicker(e) && t.datepicker._lastInput !== e) {
                var i, n, a, r, o, l, c;
                i = t.datepicker._getInst(e),
                t.datepicker._curInst && t.datepicker._curInst !== i && (t.datepicker._curInst.dpDiv.stop(!0, !0),
                i && t.datepicker._datepickerShowing && t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),
                n = t.datepicker._get(i, "beforeShow"),
                a = n ? n.apply(e, [e, i]) : {},
                a !== !1 && (s(i.settings, a),
                i.lastVal = null ,
                t.datepicker._lastInput = e,
                t.datepicker._setDateFromField(i),
                t.datepicker._inDialog && (e.value = ""),
                t.datepicker._pos || (t.datepicker._pos = t.datepicker._findPos(e),
                t.datepicker._pos[1] += e.offsetHeight),
                r = !1,
                t(e).parents().each(function() {
                    return r |= "fixed" === t(this).css("position"),
                    !r
                }
                ),
                o = {
                    left: t.datepicker._pos[0],
                    top: t.datepicker._pos[1]
                },
                t.datepicker._pos = null ,
                i.dpDiv.empty(),
                i.dpDiv.css({
                    position: "absolute",
                    display: "block",
                    top: "-1000px"
                }),
                t.datepicker._updateDatepicker(i),
                o = t.datepicker._checkOffset(i, o, r),
                i.dpDiv.css({
                    position: t.datepicker._inDialog && t.blockUI ? "static" : r ? "fixed" : "absolute",
                    display: "none",
                    left: o.left + "px",
                    top: o.top + "px"
                }),
                i.inline || (l = t.datepicker._get(i, "showAnim"),
                c = t.datepicker._get(i, "duration"),
                i.dpDiv.zIndex(t(e).zIndex() + 1),
                t.datepicker._datepickerShowing = !0,
                t.effects && t.effects.effect[l] ? i.dpDiv.show(l, t.datepicker._get(i, "showOptions"), c) : i.dpDiv[l || "show"](l ? c : null ),
                i.input.is(":visible") && !i.input.is(":disabled") && i.input.focus(),
                t.datepicker._curInst = i))
            }
        },
        _updateDatepicker: function(e) {
            this.maxRows = 4,
            a = e,
            e.dpDiv.empty().append(this._generateHTML(e)),
            this._attachHandlers(e),
            e.dpDiv.find("." + this._dayOverClass + " a").mouseover();
            var i, n = this._getNumberOfMonths(e), s = n[1], r = 17;
            e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),
            s > 1 && e.dpDiv.addClass("ui-datepicker-multi-" + s).css("width", r * s + "em"),
            e.dpDiv[(1 !== n[0] || 1 !== n[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"),
            e.dpDiv[(this._get(e, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"),
            e === t.datepicker._curInst && t.datepicker._datepickerShowing && e.input && e.input.is(":visible") && !e.input.is(":disabled") && e.input[0] !== document.activeElement && e.input.focus(),
            e.yearshtml && (i = e.yearshtml,
            setTimeout(function() {
                i === e.yearshtml && e.yearshtml && e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),
                i = e.yearshtml = null 
            }
            , 0))
        },
        _getBorders: function(t) {
            var e = function(t) {
                return {
                    thin: 1,
                    medium: 2,
                    thick: 3
                }[t] || t
            }
            ;
            return [parseFloat(e(t.css("border-left-width"))), parseFloat(e(t.css("border-top-width")))]
        },
        _checkOffset: function(e, i, n) {
            var s = e.dpDiv.outerWidth()
              , a = e.dpDiv.outerHeight()
              , r = e.input ? e.input.outerWidth() : 0
              , o = e.input ? e.input.outerHeight() : 0
              , l = document.documentElement.clientWidth + (n ? 0 : t(document).scrollLeft())
              , c = document.documentElement.clientHeight + (n ? 0 : t(document).scrollTop());
            return i.left -= this._get(e, "isRTL") ? s - r : 0,
            i.left -= n && i.left === e.input.offset().left ? t(document).scrollLeft() : 0,
            i.top -= n && i.top === e.input.offset().top + o ? t(document).scrollTop() : 0,
            i.left -= Math.min(i.left, i.left + s > l && l > s ? Math.abs(i.left + s - l) : 0),
            i.top -= Math.min(i.top, i.top + a > c && c > a ? Math.abs(a + o) : 0),
            i
        },
        _findPos: function(e) {
            for (var i, n = this._getInst(e), s = this._get(n, "isRTL"); e && ("hidden" === e.type || 1 !== e.nodeType || t.expr.filters.hidden(e)); )
                e = e[s ? "previousSibling" : "nextSibling"];
            return i = t(e).offset(),
            [i.left, i.top]
        },
        _hideDatepicker: function(e) {
            var i, n, s, a, o = this._curInst;
            !o || e && o !== t.data(e, r) || this._datepickerShowing && (i = this._get(o, "showAnim"),
            n = this._get(o, "duration"),
            s = function() {
                t.datepicker._tidyDialog(o)
            }
            ,
            t.effects && (t.effects.effect[i] || t.effects[i]) ? o.dpDiv.hide(i, t.datepicker._get(o, "showOptions"), n, s) : o.dpDiv["slideDown" === i ? "slideUp" : "fadeIn" === i ? "fadeOut" : "hide"](i ? n : null , s),
            i || s(),
            this._datepickerShowing = !1,
            a = this._get(o, "onClose"),
            a && a.apply(o.input ? o.input[0] : null , [o.input ? o.input.val() : "", o]),
            this._lastInput = null ,
            this._inDialog && (this._dialogInput.css({
                position: "absolute",
                left: "0",
                top: "-100px"
            }),
            t.blockUI && (t.unblockUI(),
            t("body").append(this.dpDiv))),
            this._inDialog = !1)
        },
        _tidyDialog: function(t) {
            t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
        },
        _checkExternalClick: function(e) {
            if (t.datepicker._curInst) {
                var i = t(e.target)
                  , n = t.datepicker._getInst(i[0]);
                (i[0].id !== t.datepicker._mainDivId && 0 === i.parents("#" + t.datepicker._mainDivId).length && !i.hasClass(t.datepicker.markerClassName) && !i.closest("." + t.datepicker._triggerClass).length && t.datepicker._datepickerShowing && (!t.datepicker._inDialog || !t.blockUI) || i.hasClass(t.datepicker.markerClassName) && t.datepicker._curInst !== n) && t.datepicker._hideDatepicker()
            }
        },
        _adjustDate: function(e, i, n) {
            var s = t(e)
              , a = this._getInst(s[0]);
            this._isDisabledDatepicker(s[0]) || (this._adjustInstDate(a, i + ("M" === n ? this._get(a, "showCurrentAtPos") : 0), n),
            this._updateDatepicker(a))
        },
        _gotoToday: function(e) {
            var i, n = t(e), s = this._getInst(n[0]);
            this._get(s, "gotoCurrent") && s.currentDay ? (s.selectedDay = s.currentDay,
            s.drawMonth = s.selectedMonth = s.currentMonth,
            s.drawYear = s.selectedYear = s.currentYear) : (i = new Date,
            s.selectedDay = i.getDate(),
            s.drawMonth = s.selectedMonth = i.getMonth(),
            s.drawYear = s.selectedYear = i.getFullYear()),
            this._notifyChange(s),
            this._adjustDate(n)
        },
        _selectMonthYear: function(e, i, n) {
            var s = t(e)
              , a = this._getInst(s[0]);
            a["selected" + ("M" === n ? "Month" : "Year")] = a["draw" + ("M" === n ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10),
            this._notifyChange(a),
            this._adjustDate(s)
        },
        _selectDay: function(e, i, n, s) {
            var a, r = t(e);
            t(s).hasClass(this._unselectableClass) || this._isDisabledDatepicker(r[0]) || (a = this._getInst(r[0]),
            a.selectedDay = a.currentDay = t("a", s).html(),
            a.selectedMonth = a.currentMonth = i,
            a.selectedYear = a.currentYear = n,
            this._selectDate(e, this._formatDate(a, a.currentDay, a.currentMonth, a.currentYear)))
        },
        _clearDate: function(e) {
            var i = t(e);
            this._selectDate(i, "")
        },
        _selectDate: function(e, i) {
            var n, s = t(e), a = this._getInst(s[0]);
            i = null  != i ? i : this._formatDate(a),
            a.input && a.input.val(i),
            this._updateAlternate(a),
            n = this._get(a, "onSelect"),
            n ? n.apply(a.input ? a.input[0] : null , [i, a]) : a.input && a.input.trigger("change"),
            a.inline ? this._updateDatepicker(a) : (this._hideDatepicker(),
            this._lastInput = a.input[0],
            "object" != typeof a.input[0] && a.input.focus(),
            this._lastInput = null )
        },
        _updateAlternate: function(e) {
            var i, n, s, a = this._get(e, "altField");
            a && (i = this._get(e, "altFormat") || this._get(e, "dateFormat"),
            n = this._getDate(e),
            s = this.formatDate(i, n, this._getFormatConfig(e)),
            t(a).each(function() {
                t(this).val(s)
            }
            ))
        },
        noWeekends: function(t) {
            var e = t.getDay();
            return [e > 0 && 6 > e, ""]
        },
        iso8601Week: function(t) {
            var e, i = new Date(t.getTime());
            return i.setDate(i.getDate() + 4 - (i.getDay() || 7)),
            e = i.getTime(),
            i.setMonth(0),
            i.setDate(1),
            Math.floor(Math.round((e - i) / 864e5) / 7) + 1
        },
        parseDate: function(i, n, s) {
            if (null  == i || null  == n)
                throw "Invalid arguments";
            if (n = "object" == typeof n ? "" + n : n + "",
            "" === n)
                return null ;
            var a, r, o, l, c = 0, d = (s ? s.shortYearCutoff : null ) || this._defaults.shortYearCutoff, h = "string" != typeof d ? d : (new Date).getFullYear() % 100 + parseInt(d, 10), u = (s ? s.dayNamesShort : null ) || this._defaults.dayNamesShort, p = (s ? s.dayNames : null ) || this._defaults.dayNames, f = (s ? s.monthNamesShort : null ) || this._defaults.monthNamesShort, m = (s ? s.monthNames : null ) || this._defaults.monthNames, g = -1, v = -1, b = -1, _ = -1, y = !1, x = function(t) {
                var e = i.length > a + 1 && i.charAt(a + 1) === t;
                return e && a++,
                e
            }
            , w = function(t) {
                var e = x(t)
                  , i = "@" === t ? 14 : "!" === t ? 20 : "y" === t && e ? 4 : "o" === t ? 3 : 2
                  , s = RegExp("^\\d{1," + i + "}")
                  , a = n.substring(c).match(s);
                if (!a)
                    throw "Missing number at position " + c;
                return c += a[0].length,
                parseInt(a[0], 10)
            }
            , k = function(i, s, a) {
                var r = -1
                  , o = t.map(x(i) ? a : s, function(t, e) {
                    return [[e, t]]
                }
                ).sort(function(t, e) {
                    return -(t[1].length - e[1].length)
                }
                );
                if (t.each(o, function(t, i) {
                    var s = i[1];
                    return n.substr(c, s.length).toLowerCase() === s.toLowerCase() ? (r = i[0],
                    c += s.length,
                    !1) : e
                }
                ),
                -1 !== r)
                    return r + 1;
                throw "Unknown name at position " + c
            }
            , C = function() {
                if (n.charAt(c) !== i.charAt(a))
                    throw "Unexpected literal at position " + c;
                c++
            }
            ;
            for (a = 0; i.length > a; a++)
                if (y)
                    "'" !== i.charAt(a) || x("'") ? C() : y = !1;
                else
                    switch (i.charAt(a)) {
                    case "d":
                        b = w("d");
                        break;
                    case "D":
                        k("D", u, p);
                        break;
                    case "o":
                        _ = w("o");
                        break;
                    case "m":
                        v = w("m");
                        break;
                    case "M":
                        v = k("M", f, m);
                        break;
                    case "y":
                        g = w("y");
                        break;
                    case "@":
                        l = new Date(w("@")),
                        g = l.getFullYear(),
                        v = l.getMonth() + 1,
                        b = l.getDate();
                        break;
                    case "!":
                        l = new Date((w("!") - this._ticksTo1970) / 1e4),
                        g = l.getFullYear(),
                        v = l.getMonth() + 1,
                        b = l.getDate();
                        break;
                    case "'":
                        x("'") ? C() : y = !0;
                        break;
                    default:
                        C()
                    }
            if (n.length > c && (o = n.substr(c),
            !/^\s+/.test(o)))
                throw "Extra/unparsed characters found in date: " + o;
            if (-1 === g ? g = (new Date).getFullYear() : 100 > g && (g += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (h >= g ? 0 : -100)),
            _ > -1)
                for (v = 1,
                b = _; r = this._getDaysInMonth(g, v - 1),
                !(r >= b); )
                    v++,
                    b -= r;
            if (l = this._daylightSavingAdjust(new Date(g,v - 1,b)),
            l.getFullYear() !== g || l.getMonth() + 1 !== v || l.getDate() !== b)
                throw "Invalid date";
            return l
        },
        ATOM: "yy-mm-dd",
        COOKIE: "D, dd M yy",
        ISO_8601: "yy-mm-dd",
        RFC_822: "D, d M y",
        RFC_850: "DD, dd-M-y",
        RFC_1036: "D, d M y",
        RFC_1123: "D, d M yy",
        RFC_2822: "D, d M yy",
        RSS: "D, d M y",
        TICKS: "!",
        TIMESTAMP: "@",
        W3C: "yy-mm-dd",
        _ticksTo1970: 864e9 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)),
        formatDate: function(t, e, i) {
            if (!e)
                return "";
            var n, s = (i ? i.dayNamesShort : null ) || this._defaults.dayNamesShort, a = (i ? i.dayNames : null ) || this._defaults.dayNames, r = (i ? i.monthNamesShort : null ) || this._defaults.monthNamesShort, o = (i ? i.monthNames : null ) || this._defaults.monthNames, l = function(e) {
                var i = t.length > n + 1 && t.charAt(n + 1) === e;
                return i && n++,
                i
            }
            , c = function(t, e, i) {
                var n = "" + e;
                if (l(t))
                    for (; i > n.length; )
                        n = "0" + n;
                return n
            }
            , d = function(t, e, i, n) {
                return l(t) ? n[e] : i[e]
            }
            , h = "", u = !1;
            if (e)
                for (n = 0; t.length > n; n++)
                    if (u)
                        "'" !== t.charAt(n) || l("'") ? h += t.charAt(n) : u = !1;
                    else
                        switch (t.charAt(n)) {
                        case "d":
                            h += c("d", e.getDate(), 2);
                            break;
                        case "D":
                            h += d("D", e.getDay(), s, a);
                            break;
                        case "o":
                            h += c("o", Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime() - new Date(e.getFullYear(),0,0).getTime()) / 864e5), 3);
                            break;
                        case "m":
                            h += c("m", e.getMonth() + 1, 2);
                            break;
                        case "M":
                            h += d("M", e.getMonth(), r, o);
                            break;
                        case "y":
                            h += l("y") ? e.getFullYear() : (10 > e.getYear() % 100 ? "0" : "") + e.getYear() % 100;
                            break;
                        case "@":
                            h += e.getTime();
                            break;
                        case "!":
                            h += 1e4 * e.getTime() + this._ticksTo1970;
                            break;
                        case "'":
                            l("'") ? h += "'" : u = !0;
                            break;
                        default:
                            h += t.charAt(n)
                        }
            return h
        },
        _possibleChars: function(t) {
            var e, i = "", n = !1, s = function(i) {
                var n = t.length > e + 1 && t.charAt(e + 1) === i;
                return n && e++,
                n
            }
            ;
            for (e = 0; t.length > e; e++)
                if (n)
                    "'" !== t.charAt(e) || s("'") ? i += t.charAt(e) : n = !1;
                else
                    switch (t.charAt(e)) {
                    case "d":
                    case "m":
                    case "y":
                    case "@":
                        i += "0123456789";
                        break;
                    case "D":
                    case "M":
                        return null ;
                    case "'":
                        s("'") ? i += "'" : n = !0;
                        break;
                    default:
                        i += t.charAt(e)
                    }
            return i
        },
        _get: function(t, i) {
            return t.settings[i] !== e ? t.settings[i] : this._defaults[i]
        },
        _setDateFromField: function(t, e) {
            if (t.input.val() !== t.lastVal) {
                var i = this._get(t, "dateFormat")
                  , n = t.lastVal = t.input ? t.input.val() : null 
                  , s = this._getDefaultDate(t)
                  , a = s
                  , r = this._getFormatConfig(t);
                try {
                    a = this.parseDate(i, n, r) || s
                } catch (o) {
                    n = e ? "" : n
                }
                t.selectedDay = a.getDate(),
                t.drawMonth = t.selectedMonth = a.getMonth(),
                t.drawYear = t.selectedYear = a.getFullYear(),
                t.currentDay = n ? a.getDate() : 0,
                t.currentMonth = n ? a.getMonth() : 0,
                t.currentYear = n ? a.getFullYear() : 0,
                this._adjustInstDate(t)
            }
        },
        _getDefaultDate: function(t) {
            return this._restrictMinMax(t, this._determineDate(t, this._get(t, "defaultDate"), new Date))
        },
        _determineDate: function(e, i, n) {
            var s = function(t) {
                var e = new Date;
                return e.setDate(e.getDate() + t),
                e
            }
              , a = function(i) {
                try {
                    return t.datepicker.parseDate(t.datepicker._get(e, "dateFormat"), i, t.datepicker._getFormatConfig(e))
                } catch (n) {}
                for (var s = (i.toLowerCase().match(/^c/) ? t.datepicker._getDate(e) : null ) || new Date, a = s.getFullYear(), r = s.getMonth(), o = s.getDate(), l = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, c = l.exec(i); c; ) {
                    switch (c[2] || "d") {
                    case "d":
                    case "D":
                        o += parseInt(c[1], 10);
                        break;
                    case "w":
                    case "W":
                        o += 7 * parseInt(c[1], 10);
                        break;
                    case "m":
                    case "M":
                        r += parseInt(c[1], 10),
                        o = Math.min(o, t.datepicker._getDaysInMonth(a, r));
                        break;
                    case "y":
                    case "Y":
                        a += parseInt(c[1], 10),
                        o = Math.min(o, t.datepicker._getDaysInMonth(a, r))
                    }
                    c = l.exec(i)
                }
                return new Date(a,r,o)
            }
              , r = null  == i || "" === i ? n : "string" == typeof i ? a(i) : "number" == typeof i ? isNaN(i) ? n : s(i) : new Date(i.getTime());
            return r = r && "Invalid Date" == "" + r ? n : r,
            r && (r.setHours(0),
            r.setMinutes(0),
            r.setSeconds(0),
            r.setMilliseconds(0)),
            this._daylightSavingAdjust(r)
        },
        _daylightSavingAdjust: function(t) {
            return t ? (t.setHours(t.getHours() > 12 ? t.getHours() + 2 : 0),
            t) : null 
        },
        _setDate: function(t, e, i) {
            var n = !e
              , s = t.selectedMonth
              , a = t.selectedYear
              , r = this._restrictMinMax(t, this._determineDate(t, e, new Date));
            t.selectedDay = t.currentDay = r.getDate(),
            t.drawMonth = t.selectedMonth = t.currentMonth = r.getMonth(),
            t.drawYear = t.selectedYear = t.currentYear = r.getFullYear(),
            s === t.selectedMonth && a === t.selectedYear || i || this._notifyChange(t),
            this._adjustInstDate(t),
            t.input && t.input.val(n ? "" : this._formatDate(t))
        },
        _getDate: function(t) {
            var e = !t.currentYear || t.input && "" === t.input.val() ? null  : this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));
            return e
        },
        _attachHandlers: function(e) {
            var i = this._get(e, "stepMonths")
              , n = "#" + e.id.replace(/\\\\/g, "\\");
            e.dpDiv.find("[data-handler]").map(function() {
                var e = {
                    prev: function() {
                        window["DP_jQuery_" + o].datepicker._adjustDate(n, -i, "M")
                    },
                    next: function() {
                        window["DP_jQuery_" + o].datepicker._adjustDate(n, +i, "M")
                    },
                    hide: function() {
                        window["DP_jQuery_" + o].datepicker._hideDatepicker()
                    },
                    today: function() {
                        window["DP_jQuery_" + o].datepicker._gotoToday(n)
                    },
                    selectDay: function() {
                        return window["DP_jQuery_" + o].datepicker._selectDay(n, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this),
                        !1
                    },
                    selectMonth: function() {
                        return window["DP_jQuery_" + o].datepicker._selectMonthYear(n, this, "M"),
                        !1
                    },
                    selectYear: function() {
                        return window["DP_jQuery_" + o].datepicker._selectMonthYear(n, this, "Y"),
                        !1
                    }
                };
                t(this).bind(this.getAttribute("data-event"), e[this.getAttribute("data-handler")])
            }
            )
        },
        _generateHTML: function(t) {
            var e, i, n, s, a, r, o, l, c, d, h, u, p, f, m, g, v, b, _, y, x, w, k, C, T, S, D, $, E, q, F, I, M, A, P, N, O, z, R, L = new Date, j = this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())), H = this._get(t, "isRTL"), B = this._get(t, "showButtonPanel"), W = this._get(t, "hideIfNoPrevNext"), U = this._get(t, "navigationAsDateFormat"), Y = this._getNumberOfMonths(t), V = this._get(t, "showCurrentAtPos"), K = this._get(t, "stepMonths"), X = 1 !== Y[0] || 1 !== Y[1], G = this._daylightSavingAdjust(t.currentDay ? new Date(t.currentYear,t.currentMonth,t.currentDay) : new Date(9999,9,9)), Q = this._getMinMaxDate(t, "min"), J = this._getMinMaxDate(t, "max"), Z = t.drawMonth - V, te = t.drawYear;
            if (0 > Z && (Z += 12,
            te--),
            J)
                for (e = this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth() - Y[0] * Y[1] + 1,J.getDate())),
                e = Q && Q > e ? Q : e; this._daylightSavingAdjust(new Date(te,Z,1)) > e; )
                    Z--,
                    0 > Z && (Z = 11,
                    te--);
            for (t.drawMonth = Z,
            t.drawYear = te,
            i = this._get(t, "prevText"),
            i = U ? this.formatDate(i, this._daylightSavingAdjust(new Date(te,Z - K,1)), this._getFormatConfig(t)) : i,
            n = this._canAdjustMonth(t, -1, te, Z) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "e" : "w") + "'>" + i + "</span></a>" : W ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "e" : "w") + "'>" + i + "</span></a>",
            s = this._get(t, "nextText"),
            s = U ? this.formatDate(s, this._daylightSavingAdjust(new Date(te,Z + K,1)), this._getFormatConfig(t)) : s,
            a = this._canAdjustMonth(t, 1, te, Z) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + s + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "w" : "e") + "'>" + s + "</span></a>" : W ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + s + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "w" : "e") + "'>" + s + "</span></a>",
            r = this._get(t, "currentText"),
            o = this._get(t, "gotoCurrent") && t.currentDay ? G : j,
            r = U ? this.formatDate(r, o, this._getFormatConfig(t)) : r,
            l = t.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(t, "closeText") + "</button>",
            c = B ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (H ? l : "") + (this._isInRange(t, o) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + r + "</button>" : "") + (H ? "" : l) + "</div>" : "",
            d = parseInt(this._get(t, "firstDay"), 10),
            d = isNaN(d) ? 0 : d,
            h = this._get(t, "showWeek"),
            u = this._get(t, "dayNames"),
            p = this._get(t, "dayNamesMin"),
            f = this._get(t, "monthNames"),
            m = this._get(t, "monthNamesShort"),
            g = this._get(t, "beforeShowDay"),
            v = this._get(t, "showOtherMonths"),
            b = this._get(t, "selectOtherMonths"),
            _ = this._getDefaultDate(t),
            y = "",
            w = 0; Y[0] > w; w++) {
                for (k = "",
                this.maxRows = 4,
                C = 0; Y[1] > C; C++) {
                    if (T = this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),
                    S = " ui-corner-all",
                    D = "",
                    X) {
                        if (D += "<div class='ui-datepicker-group",
                        Y[1] > 1)
                            switch (C) {
                            case 0:
                                D += " ui-datepicker-group-first",
                                S = " ui-corner-" + (H ? "right" : "left");
                                break;
                            case Y[1] - 1:
                                D += " ui-datepicker-group-last",
                                S = " ui-corner-" + (H ? "left" : "right");
                                break;
                            default:
                                D += " ui-datepicker-group-middle",
                                S = ""
                            }
                        D += "'>"
                    }
                    for (D += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + S + "'>" + (/all|left/.test(S) && 0 === w ? H ? a : n : "") + (/all|right/.test(S) && 0 === w ? H ? n : a : "") + this._generateMonthYearHeader(t, Z, te, Q, J, w > 0 || C > 0, f, m) + "</div><table class='ui-datepicker-calendar'><thead><tr>",
                    $ = h ? "<th class='ui-datepicker-week-col'>" + this._get(t, "weekHeader") + "</th>" : "",
                    x = 0; 7 > x; x++)
                        E = (x + d) % 7,
                        $ += "<th" + ((x + d + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + u[E] + "'>" + p[E] + "</span></th>";
                    for (D += $ + "</tr></thead><tbody>",
                    q = this._getDaysInMonth(te, Z),
                    te === t.selectedYear && Z === t.selectedMonth && (t.selectedDay = Math.min(t.selectedDay, q)),
                    F = (this._getFirstDayOfMonth(te, Z) - d + 7) % 7,
                    I = Math.ceil((F + q) / 7),
                    M = X && this.maxRows > I ? this.maxRows : I,
                    this.maxRows = M,
                    A = this._daylightSavingAdjust(new Date(te,Z,1 - F)),
                    P = 0; M > P; P++) {
                        for (D += "<tr>",
                        N = h ? "<td class='ui-datepicker-week-col'>" + this._get(t, "calculateWeek")(A) + "</td>" : "",
                        x = 0; 7 > x; x++)
                            O = g ? g.apply(t.input ? t.input[0] : null , [A]) : [!0, ""],
                            z = A.getMonth() !== Z,
                            R = z && !b || !O[0] || Q && Q > A || J && A > J,
                            N += "<td class='" + ((x + d + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (z ? " ui-datepicker-other-month" : "") + (A.getTime() === T.getTime() && Z === t.selectedMonth && t._keyEvent || _.getTime() === A.getTime() && _.getTime() === T.getTime() ? " " + this._dayOverClass : "") + (R ? " " + this._unselectableClass + " ui-state-disabled" : "") + (z && !v ? "" : " " + O[1] + (A.getTime() === G.getTime() ? " " + this._currentClass : "") + (A.getTime() === j.getTime() ? " ui-datepicker-today" : "")) + "'" + (z && !v || !O[2] ? "" : " title='" + O[2].replace(/'/g, "&#39;") + "'") + (R ? "" : " data-handler='selectDay' data-event='click' data-month='" + A.getMonth() + "' data-year='" + A.getFullYear() + "'") + ">" + (z && !v ? "&#xa0;" : R ? "<span class='ui-state-default'>" + A.getDate() + "</span>" : "<a class='ui-state-default" + (A.getTime() === j.getTime() ? " ui-state-highlight" : "") + (A.getTime() === G.getTime() ? " ui-state-active" : "") + (z ? " ui-priority-secondary" : "") + "' href='#'>" + A.getDate() + "</a>") + "</td>",
                            A.setDate(A.getDate() + 1),
                            A = this._daylightSavingAdjust(A);
                        D += N + "</tr>"
                    }
                    Z++,
                    Z > 11 && (Z = 0,
                    te++),
                    D += "</tbody></table>" + (X ? "</div>" + (Y[0] > 0 && C === Y[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : ""),
                    k += D
                }
                y += k
            }
            return y += c,
            t._keyEvent = !1,
            y
        },
        _generateMonthYearHeader: function(t, e, i, n, s, a, r, o) {
            var l, c, d, h, u, p, f, m, g = this._get(t, "changeMonth"), v = this._get(t, "changeYear"), b = this._get(t, "showMonthAfterYear"), _ = "<div class='ui-datepicker-title'>", y = "";
            if (a || !g)
                y += "<span class='ui-datepicker-month'>" + r[e] + "</span>";
            else {
                for (l = n && n.getFullYear() === i,
                c = s && s.getFullYear() === i,
                y += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",
                d = 0; 12 > d; d++)
                    (!l || d >= n.getMonth()) && (!c || s.getMonth() >= d) && (y += "<option value='" + d + "'" + (d === e ? " selected='selected'" : "") + ">" + o[d] + "</option>");
                y += "</select>"
            }
            if (b || (_ += y + (!a && g && v ? "" : "&#xa0;")),
            !t.yearshtml)
                if (t.yearshtml = "",
                a || !v)
                    _ += "<span class='ui-datepicker-year'>" + i + "</span>";
                else {
                    for (h = this._get(t, "yearRange").split(":"),
                    u = (new Date).getFullYear(),
                    p = function(t) {
                        var e = t.match(/c[+\-].*/) ? i + parseInt(t.substring(1), 10) : t.match(/[+\-].*/) ? u + parseInt(t, 10) : parseInt(t, 10);
                        return isNaN(e) ? u : e
                    }
                    ,
                    f = p(h[0]),
                    m = Math.max(f, p(h[1] || "")),
                    f = n ? Math.max(f, n.getFullYear()) : f,
                    m = s ? Math.min(m, s.getFullYear()) : m,
                    t.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; m >= f; f++)
                        t.yearshtml += "<option value='" + f + "'" + (f === i ? " selected='selected'" : "") + ">" + f + "</option>";
                    t.yearshtml += "</select>",
                    _ += t.yearshtml,
                    t.yearshtml = null 
                }
            return _ += this._get(t, "yearSuffix"),
            b && (_ += (!a && g && v ? "" : "&#xa0;") + y),
            _ += "</div>"
        },
        _adjustInstDate: function(t, e, i) {
            var n = t.drawYear + ("Y" === i ? e : 0)
              , s = t.drawMonth + ("M" === i ? e : 0)
              , a = Math.min(t.selectedDay, this._getDaysInMonth(n, s)) + ("D" === i ? e : 0)
              , r = this._restrictMinMax(t, this._daylightSavingAdjust(new Date(n,s,a)));
            t.selectedDay = r.getDate(),
            t.drawMonth = t.selectedMonth = r.getMonth(),
            t.drawYear = t.selectedYear = r.getFullYear(),
            ("M" === i || "Y" === i) && this._notifyChange(t)
        },
        _restrictMinMax: function(t, e) {
            var i = this._getMinMaxDate(t, "min")
              , n = this._getMinMaxDate(t, "max")
              , s = i && i > e ? i : e;
            return n && s > n ? n : s
        },
        _notifyChange: function(t) {
            var e = this._get(t, "onChangeMonthYear");
            e && e.apply(t.input ? t.input[0] : null , [t.selectedYear, t.selectedMonth + 1, t])
        },
        _getNumberOfMonths: function(t) {
            var e = this._get(t, "numberOfMonths");
            return null  == e ? [1, 1] : "number" == typeof e ? [1, e] : e
        },
        _getMinMaxDate: function(t, e) {
            return this._determineDate(t, this._get(t, e + "Date"), null )
        },
        _getDaysInMonth: function(t, e) {
            return 32 - this._daylightSavingAdjust(new Date(t,e,32)).getDate()
        },
        _getFirstDayOfMonth: function(t, e) {
            return new Date(t,e,1).getDay()
        },
        _canAdjustMonth: function(t, e, i, n) {
            var s = this._getNumberOfMonths(t)
              , a = this._daylightSavingAdjust(new Date(i,n + (0 > e ? e : s[0] * s[1]),1));
            return 0 > e && a.setDate(this._getDaysInMonth(a.getFullYear(), a.getMonth())),
            this._isInRange(t, a)
        },
        _isInRange: function(t, e) {
            var i, n, s = this._getMinMaxDate(t, "min"), a = this._getMinMaxDate(t, "max"), r = null , o = null , l = this._get(t, "yearRange");
            return l && (i = l.split(":"),
            n = (new Date).getFullYear(),
            r = parseInt(i[0], 10),
            o = parseInt(i[1], 10),
            i[0].match(/[+\-].*/) && (r += n),
            i[1].match(/[+\-].*/) && (o += n)),
            (!s || e.getTime() >= s.getTime()) && (!a || e.getTime() <= a.getTime()) && (!r || e.getFullYear() >= r) && (!o || o >= e.getFullYear())
        },
        _getFormatConfig: function(t) {
            var e = this._get(t, "shortYearCutoff");
            return e = "string" != typeof e ? e : (new Date).getFullYear() % 100 + parseInt(e, 10),
            {
                shortYearCutoff: e,
                dayNamesShort: this._get(t, "dayNamesShort"),
                dayNames: this._get(t, "dayNames"),
                monthNamesShort: this._get(t, "monthNamesShort"),
                monthNames: this._get(t, "monthNames")
            }
        },
        _formatDate: function(t, e, i, n) {
            e || (t.currentDay = t.selectedDay,
            t.currentMonth = t.selectedMonth,
            t.currentYear = t.selectedYear);
            var s = e ? "object" == typeof e ? e : this._daylightSavingAdjust(new Date(n,i,e)) : this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));
            return this.formatDate(this._get(t, "dateFormat"), s, this._getFormatConfig(t))
        }
    }),
    t.fn.datepicker = function(e) {
        if (!this.length)
            return this;
        t.datepicker.initialized || (t(document).mousedown(t.datepicker._checkExternalClick),
        t.datepicker.initialized = !0),
        0 === t("#" + t.datepicker._mainDivId).length && t("body").append(t.datepicker.dpDiv);
        var i = Array.prototype.slice.call(arguments, 1);
        return "string" != typeof e || "isDisabled" !== e && "getDate" !== e && "widget" !== e ? "option" === e && 2 === arguments.length && "string" == typeof arguments[1] ? t.datepicker["_" + e + "Datepicker"].apply(t.datepicker, [this[0]].concat(i)) : this.each(function() {
            "string" == typeof e ? t.datepicker["_" + e + "Datepicker"].apply(t.datepicker, [this].concat(i)) : t.datepicker._attachDatepicker(this, e)
        }
        ) : t.datepicker["_" + e + "Datepicker"].apply(t.datepicker, [this[0]].concat(i))
    }
    ,
    t.datepicker = new i,
    t.datepicker.initialized = !1,
    t.datepicker.uuid = (new Date).getTime(),
    t.datepicker.version = "1.10.2",
    window["DP_jQuery_" + o] = t
}
(jQuery),
function(t) {
    var e = 5;
    t.widget("ui.slider", t.ui.mouse, {
        version: "1.10.2",
        widgetEventPrefix: "slide",
        options: {
            animate: !1,
            distance: 0,
            max: 100,
            min: 0,
            orientation: "horizontal",
            range: !1,
            step: 1,
            value: 0,
            values: null ,
            change: null ,
            slide: null ,
            start: null ,
            stop: null 
        },
        _create: function() {
            this._keySliding = !1,
            this._mouseSliding = !1,
            this._animateOff = !0,
            this._handleIndex = null ,
            this._detectOrientation(),
            this._mouseInit(),
            this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all"),
            this._refresh(),
            this._setOption("disabled", this.options.disabled),
            this._animateOff = !1
        },
        _refresh: function() {
            this._createRange(),
            this._createHandles(),
            this._setupEvents(),
            this._refreshValue()
        },
        _createHandles: function() {
            var e, i, n = this.options, s = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"), a = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>", r = [];
            for (i = n.values && n.values.length || 1,
            s.length > i && (s.slice(i).remove(),
            s = s.slice(0, i)),
            e = s.length; i > e; e++)
                r.push(a);
            this.handles = s.add(t(r.join("")).appendTo(this.element)),
            this.handle = this.handles.eq(0),
            this.handles.each(function(e) {
                t(this).data("ui-slider-handle-index", e)
            }
            )
        },
        _createRange: function() {
            var e = this.options
              , i = "";
            e.range ? (e.range === !0 && (e.values ? e.values.length && 2 !== e.values.length ? e.values = [e.values[0], e.values[0]] : t.isArray(e.values) && (e.values = e.values.slice(0)) : e.values = [this._valueMin(), this._valueMin()]),
            this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
                left: "",
                bottom: ""
            }) : (this.range = t("<div></div>").appendTo(this.element),
            i = "ui-slider-range ui-widget-header ui-corner-all"),
            this.range.addClass(i + ("min" === e.range || "max" === e.range ? " ui-slider-range-" + e.range : ""))) : this.range = t([])
        },
        _setupEvents: function() {
            var t = this.handles.add(this.range).filter("a");
            this._off(t),
            this._on(t, this._handleEvents),
            this._hoverable(t),
            this._focusable(t)
        },
        _destroy: function() {
            this.handles.remove(),
            this.range.remove(),
            this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),
            this._mouseDestroy()
        },
        _mouseCapture: function(e) {
            var i, n, s, a, r, o, l, c, d = this, h = this.options;
            return h.disabled ? !1 : (this.elementSize = {
                width: this.element.outerWidth(),
                height: this.element.outerHeight()
            },
            this.elementOffset = this.element.offset(),
            i = {
                x: e.pageX,
                y: e.pageY
            },
            n = this._normValueFromMouse(i),
            s = this._valueMax() - this._valueMin() + 1,
            this.handles.each(function(e) {
                var i = Math.abs(n - d.values(e));
                (s > i || s === i && (e === d._lastChangedValue || d.values(e) === h.min)) && (s = i,
                a = t(this),
                r = e)
            }
            ),
            o = this._start(e, r),
            o === !1 ? !1 : (this._mouseSliding = !0,
            this._handleIndex = r,
            a.addClass("ui-state-active").focus(),
            l = a.offset(),
            c = !t(e.target).parents().addBack().is(".ui-slider-handle"),
            this._clickOffset = c ? {
                left: 0,
                top: 0
            } : {
                left: e.pageX - l.left - a.width() / 2,
                top: e.pageY - l.top - a.height() / 2 - (parseInt(a.css("borderTopWidth"), 10) || 0) - (parseInt(a.css("borderBottomWidth"), 10) || 0) + (parseInt(a.css("marginTop"), 10) || 0)
            },
            this.handles.hasClass("ui-state-hover") || this._slide(e, r, n),
            this._animateOff = !0,
            !0))
        },
        _mouseStart: function() {
            return !0
        },
        _mouseDrag: function(t) {
            var e = {
                x: t.pageX,
                y: t.pageY
            }
              , i = this._normValueFromMouse(e);
            return this._slide(t, this._handleIndex, i),
            !1
        },
        _mouseStop: function(t) {
            return this.handles.removeClass("ui-state-active"),
            this._mouseSliding = !1,
            this._stop(t, this._handleIndex),
            this._change(t, this._handleIndex),
            this._handleIndex = null ,
            this._clickOffset = null ,
            this._animateOff = !1,
            !1
        },
        _detectOrientation: function() {
            this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal"
        },
        _normValueFromMouse: function(t) {
            var e, i, n, s, a;
            return "horizontal" === this.orientation ? (e = this.elementSize.width,
            i = t.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (e = this.elementSize.height,
            i = t.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)),
            n = i / e,
            n > 1 && (n = 1),
            0 > n && (n = 0),
            "vertical" === this.orientation && (n = 1 - n),
            s = this._valueMax() - this._valueMin(),
            a = this._valueMin() + n * s,
            this._trimAlignValue(a)
        },
        _start: function(t, e) {
            var i = {
                handle: this.handles[e],
                value: this.value()
            };
            return this.options.values && this.options.values.length && (i.value = this.values(e),
            i.values = this.values()),
            this._trigger("start", t, i)
        },
        _slide: function(t, e, i) {
            var n, s, a;
            this.options.values && this.options.values.length ? (n = this.values(e ? 0 : 1),
            2 === this.options.values.length && this.options.range === !0 && (0 === e && i > n || 1 === e && n > i) && (i = n),
            i !== this.values(e) && (s = this.values(),
            s[e] = i,
            a = this._trigger("slide", t, {
                handle: this.handles[e],
                value: i,
                values: s
            }),
            n = this.values(e ? 0 : 1),
            a !== !1 && this.values(e, i, !0))) : i !== this.value() && (a = this._trigger("slide", t, {
                handle: this.handles[e],
                value: i
            }),
            a !== !1 && this.value(i))
        },
        _stop: function(t, e) {
            var i = {
                handle: this.handles[e],
                value: this.value()
            };
            this.options.values && this.options.values.length && (i.value = this.values(e),
            i.values = this.values()),
            this._trigger("stop", t, i)
        },
        _change: function(t, e) {
            if (!this._keySliding && !this._mouseSliding) {
                var i = {
                    handle: this.handles[e],
                    value: this.value()
                };
                this.options.values && this.options.values.length && (i.value = this.values(e),
                i.values = this.values()),
                this._lastChangedValue = e,
                this._trigger("change", t, i)
            }
        },
        value: function(t) {
            return arguments.length ? (this.options.value = this._trimAlignValue(t),
            this._refreshValue(),
            void this._change(null , 0)) : this._value()
        },
        values: function(e, i) {
            var n, s, a;
            if (arguments.length > 1)
                return this.options.values[e] = this._trimAlignValue(i),
                this._refreshValue(),
                void this._change(null , e);
            if (!arguments.length)
                return this._values();
            if (!t.isArray(arguments[0]))
                return this.options.values && this.options.values.length ? this._values(e) : this.value();
            for (n = this.options.values,
            s = arguments[0],
            a = 0; n.length > a; a += 1)
                n[a] = this._trimAlignValue(s[a]),
                this._change(null , a);
            this._refreshValue()
        },
        _setOption: function(e, i) {
            var n, s = 0;
            switch ("range" === e && this.options.range === !0 && ("min" === i ? (this.options.value = this._values(0),
            this.options.values = null ) : "max" === i && (this.options.value = this._values(this.options.values.length - 1),
            this.options.values = null )),
            t.isArray(this.options.values) && (s = this.options.values.length),
            t.Widget.prototype._setOption.apply(this, arguments),
            e) {
            case "orientation":
                this._detectOrientation(),
                this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation),
                this._refreshValue();
                break;
            case "value":
                this._animateOff = !0,
                this._refreshValue(),
                this._change(null , 0),
                this._animateOff = !1;
                break;
            case "values":
                for (this._animateOff = !0,
                this._refreshValue(),
                n = 0; s > n; n += 1)
                    this._change(null , n);
                this._animateOff = !1;
                break;
            case "min":
            case "max":
                this._animateOff = !0,
                this._refreshValue(),
                this._animateOff = !1;
                break;
            case "range":
                this._animateOff = !0,
                this._refresh(),
                this._animateOff = !1
            }
        },
        _value: function() {
            var t = this.options.value;
            return t = this._trimAlignValue(t)
        },
        _values: function(t) {
            var e, i, n;
            if (arguments.length)
                return e = this.options.values[t],
                e = this._trimAlignValue(e);
            if (this.options.values && this.options.values.length) {
                for (i = this.options.values.slice(),
                n = 0; i.length > n; n += 1)
                    i[n] = this._trimAlignValue(i[n]);
                return i
            }
            return []
        },
        _trimAlignValue: function(t) {
            if (this._valueMin() >= t)
                return this._valueMin();
            if (t >= this._valueMax())
                return this._valueMax();
            var e = this.options.step > 0 ? this.options.step : 1
              , i = (t - this._valueMin()) % e
              , n = t - i;
            return 2 * Math.abs(i) >= e && (n += i > 0 ? e : -e),
            parseFloat(n.toFixed(5))
        },
        _valueMin: function() {
            return this.options.min
        },
        _valueMax: function() {
            return this.options.max
        },
        _refreshValue: function() {
            var e, i, n, s, a, r = this.options.range, o = this.options, l = this, c = this._animateOff ? !1 : o.animate, d = {};
            this.options.values && this.options.values.length ? this.handles.each(function(n) {
                i = 100 * ((l.values(n) - l._valueMin()) / (l._valueMax() - l._valueMin())),
                d["horizontal" === l.orientation ? "left" : "bottom"] = i + "%",
                t(this).stop(1, 1)[c ? "animate" : "css"](d, o.animate),
                l.options.range === !0 && ("horizontal" === l.orientation ? (0 === n && l.range.stop(1, 1)[c ? "animate" : "css"]({
                    left: i + "%"
                }, o.animate),
                1 === n && l.range[c ? "animate" : "css"]({
                    width: i - e + "%"
                }, {
                    queue: !1,
                    duration: o.animate
                })) : (0 === n && l.range.stop(1, 1)[c ? "animate" : "css"]({
                    bottom: i + "%"
                }, o.animate),
                1 === n && l.range[c ? "animate" : "css"]({
                    height: i - e + "%"
                }, {
                    queue: !1,
                    duration: o.animate
                }))),
                e = i
            }
            ) : (n = this.value(),
            s = this._valueMin(),
            a = this._valueMax(),
            i = a !== s ? 100 * ((n - s) / (a - s)) : 0,
            d["horizontal" === this.orientation ? "left" : "bottom"] = i + "%",
            this.handle.stop(1, 1)[c ? "animate" : "css"](d, o.animate),
            "min" === r && "horizontal" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                width: i + "%"
            }, o.animate),
            "max" === r && "horizontal" === this.orientation && this.range[c ? "animate" : "css"]({
                width: 100 - i + "%"
            }, {
                queue: !1,
                duration: o.animate
            }),
            "min" === r && "vertical" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                height: i + "%"
            }, o.animate),
            "max" === r && "vertical" === this.orientation && this.range[c ? "animate" : "css"]({
                height: 100 - i + "%"
            }, {
                queue: !1,
                duration: o.animate
            }))
        },
        _handleEvents: {
            keydown: function(i) {
                var n, s, a, r, o = t(i.target).data("ui-slider-handle-index");
                switch (i.keyCode) {
                case t.ui.keyCode.HOME:
                case t.ui.keyCode.END:
                case t.ui.keyCode.PAGE_UP:
                case t.ui.keyCode.PAGE_DOWN:
                case t.ui.keyCode.UP:
                case t.ui.keyCode.RIGHT:
                case t.ui.keyCode.DOWN:
                case t.ui.keyCode.LEFT:
                    if (i.preventDefault(),
                    !this._keySliding && (this._keySliding = !0,
                    t(i.target).addClass("ui-state-active"),
                    n = this._start(i, o),
                    n === !1))
                        return
                }
                switch (r = this.options.step,
                s = a = this.options.values && this.options.values.length ? this.values(o) : this.value(),
                i.keyCode) {
                case t.ui.keyCode.HOME:
                    a = this._valueMin();
                    break;
                case t.ui.keyCode.END:
                    a = this._valueMax();
                    break;
                case t.ui.keyCode.PAGE_UP:
                    a = this._trimAlignValue(s + (this._valueMax() - this._valueMin()) / e);
                    break;
                case t.ui.keyCode.PAGE_DOWN:
                    a = this._trimAlignValue(s - (this._valueMax() - this._valueMin()) / e);
                    break;
                case t.ui.keyCode.UP:
                case t.ui.keyCode.RIGHT:
                    if (s === this._valueMax())
                        return;
                    a = this._trimAlignValue(s + r);
                    break;
                case t.ui.keyCode.DOWN:
                case t.ui.keyCode.LEFT:
                    if (s === this._valueMin())
                        return;
                    a = this._trimAlignValue(s - r)
                }
                this._slide(i, o, a)
            },
            click: function(t) {
                t.preventDefault()
            },
            keyup: function(e) {
                var i = t(e.target).data("ui-slider-handle-index");
                this._keySliding && (this._keySliding = !1,
                this._stop(e, i),
                this._change(e, i),
                t(e.target).removeClass("ui-state-active"))
            }
        }
    })
}
(jQuery),
function(t) {
    function e(t) {
        return function() {
            var e = this.element.val();
            t.apply(this, arguments),
            this._refresh(),
            e !== this.element.val() && this._trigger("change")
        }
    }
    t.widget("ui.spinner", {
        version: "1.10.2",
        defaultElement: "<input>",
        widgetEventPrefix: "spin",
        options: {
            culture: null ,
            icons: {
                down: "ui-icon-triangle-1-s",
                up: "ui-icon-triangle-1-n"
            },
            incremental: !0,
            max: null ,
            min: null ,
            numberFormat: null ,
            page: 10,
            step: 1,
            change: null ,
            spin: null ,
            start: null ,
            stop: null 
        },
        _create: function() {
            this._setOption("max", this.options.max),
            this._setOption("min", this.options.min),
            this._setOption("step", this.options.step),
            this._value(this.element.val(), !0),
            this._draw(),
            this._on(this._events),
            this._refresh(),
            this._on(this.window, {
                beforeunload: function() {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _getCreateOptions: function() {
            var e = {}
              , i = this.element;
            return t.each(["min", "max", "step"], function(t, n) {
                var s = i.attr(n);
                void 0 !== s && s.length && (e[n] = s)
            }
            ),
            e
        },
        _events: {
            keydown: function(t) {
                this._start(t) && this._keydown(t) && t.preventDefault()
            },
            keyup: "_stop",
            focus: function() {
                this.previous = this.element.val()
            },
            blur: function(t) {
                return this.cancelBlur ? void delete this.cancelBlur : (this._stop(),
                this._refresh(),
                void (this.previous !== this.element.val() && this._trigger("change", t)))
            },
            mousewheel: function(t, e) {
                if (e) {
                    if (!this.spinning && !this._start(t))
                        return !1;
                    this._spin((e > 0 ? 1 : -1) * this.options.step, t),
                    clearTimeout(this.mousewheelTimer),
                    this.mousewheelTimer = this._delay(function() {
                        this.spinning && this._stop(t)
                    }
                    , 100),
                    t.preventDefault()
                }
            },
            "mousedown .ui-spinner-button": function(e) {
                function i() {
                    var t = this.element[0] === this.document[0].activeElement;
                    t || (this.element.focus(),
                    this.previous = n,
                    this._delay(function() {
                        this.previous = n
                    }
                    ))
                }
                var n;
                n = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val(),
                e.preventDefault(),
                i.call(this),
                this.cancelBlur = !0,
                this._delay(function() {
                    delete this.cancelBlur,
                    i.call(this)
                }
                ),
                this._start(e) !== !1 && this._repeat(null , t(e.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, e)
            },
            "mouseup .ui-spinner-button": "_stop",
            "mouseenter .ui-spinner-button": function(e) {
                return t(e.currentTarget).hasClass("ui-state-active") ? this._start(e) === !1 ? !1 : void this._repeat(null , t(e.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, e) : void 0
            },
            "mouseleave .ui-spinner-button": "_stop"
        },
        _draw: function() {
            var t = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());
            this.element.attr("role", "spinbutton"),
            this.buttons = t.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all"),
            this.buttons.height() > Math.ceil(.5 * t.height()) && t.height() > 0 && t.height(t.height()),
            this.options.disabled && this.disable()
        },
        _keydown: function(e) {
            var i = this.options
              , n = t.ui.keyCode;
            switch (e.keyCode) {
            case n.UP:
                return this._repeat(null , 1, e),
                !0;
            case n.DOWN:
                return this._repeat(null , -1, e),
                !0;
            case n.PAGE_UP:
                return this._repeat(null , i.page, e),
                !0;
            case n.PAGE_DOWN:
                return this._repeat(null , -i.page, e),
                !0
            }
            return !1
        },
        _uiSpinnerHtml: function() {
            return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"
        },
        _buttonHtml: function() {
            return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon " + this.options.icons.down + "'>&#9660;</span></a>"
        },
        _start: function(t) {
            return this.spinning || this._trigger("start", t) !== !1 ? (this.counter || (this.counter = 1),
            this.spinning = !0,
            !0) : !1
        },
        _repeat: function(t, e, i) {
            t = t || 500,
            clearTimeout(this.timer),
            this.timer = this._delay(function() {
                this._repeat(40, e, i)
            }
            , t),
            this._spin(e * this.options.step, i)
        },
        _spin: function(t, e) {
            var i = this.value() || 0;
            this.counter || (this.counter = 1),
            i = this._adjustValue(i + t * this._increment(this.counter)),
            this.spinning && this._trigger("spin", e, {
                value: i
            }) === !1 || (this._value(i),
            this.counter++)
        },
        _increment: function(e) {
            var i = this.options.incremental;
            return i ? t.isFunction(i) ? i(e) : Math.floor(e * e * e / 5e4 - e * e / 500 + 17 * e / 200 + 1) : 1
        },
        _precision: function() {
            var t = this._precisionOf(this.options.step);
            return null  !== this.options.min && (t = Math.max(t, this._precisionOf(this.options.min))),
            t
        },
        _precisionOf: function(t) {
            var e = "" + t
              , i = e.indexOf(".");
            return -1 === i ? 0 : e.length - i - 1
        },
        _adjustValue: function(t) {
            var e, i, n = this.options;
            return e = null  !== n.min ? n.min : 0,
            i = t - e,
            i = Math.round(i / n.step) * n.step,
            t = e + i,
            t = parseFloat(t.toFixed(this._precision())),
            null  !== n.max && t > n.max ? n.max : null  !== n.min && n.min > t ? n.min : t
        },
        _stop: function(t) {
            this.spinning && (clearTimeout(this.timer),
            clearTimeout(this.mousewheelTimer),
            this.counter = 0,
            this.spinning = !1,
            this._trigger("stop", t))
        },
        _setOption: function(t, e) {
            if ("culture" === t || "numberFormat" === t) {
                var i = this._parse(this.element.val());
                return this.options[t] = e,
                void this.element.val(this._format(i))
            }
            ("max" === t || "min" === t || "step" === t) && "string" == typeof e && (e = this._parse(e)),
            "icons" === t && (this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),
            this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),
            this._super(t, e),
            "disabled" === t && (e ? (this.element.prop("disabled", !0),
            this.buttons.button("disable")) : (this.element.prop("disabled", !1),
            this.buttons.button("enable")))
        },
        _setOptions: e(function(t) {
            this._super(t),
            this._value(this.element.val())
        }
        ),
        _parse: function(t) {
            return "string" == typeof t && "" !== t && (t = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(t, 10, this.options.culture) : +t),
            "" === t || isNaN(t) ? null  : t
        },
        _format: function(t) {
            return "" === t ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(t, this.options.numberFormat, this.options.culture) : t
        },
        _refresh: function() {
            this.element.attr({
                "aria-valuemin": this.options.min,
                "aria-valuemax": this.options.max,
                "aria-valuenow": this._parse(this.element.val())
            })
        },
        _value: function(t, e) {
            var i;
            "" !== t && (i = this._parse(t),
            null  !== i && (e || (i = this._adjustValue(i)),
            t = this._format(i))),
            this.element.val(t),
            this._refresh()
        },
        _destroy: function() {
            this.element.removeClass("ui-spinner-input").prop("disabled", !1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),
            this.uiSpinner.replaceWith(this.element)
        },
        stepUp: e(function(t) {
            this._stepUp(t)
        }
        ),
        _stepUp: function(t) {
            this._start() && (this._spin((t || 1) * this.options.step),
            this._stop())
        },
        stepDown: e(function(t) {
            this._stepDown(t)
        }
        ),
        _stepDown: function(t) {
            this._start() && (this._spin((t || 1) * -this.options.step),
            this._stop())
        },
        pageUp: e(function(t) {
            this._stepUp((t || 1) * this.options.page)
        }
        ),
        pageDown: e(function(t) {
            this._stepDown((t || 1) * this.options.page)
        }
        ),
        value: function(t) {
            return arguments.length ? void e(this._value).call(this, t) : this._parse(this.element.val())
        },
        widget: function() {
            return this.uiSpinner
        }
    })
}
(jQuery),
jQuery(function(t) {
    t.datepicker.regional.ru = {
        closeText: "Закрыть",
        prevText: "&#x3C;Пред",
        nextText: "След&#x3E;",
        currentText: "Сегодня",
        monthNames: ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"],
        monthNamesShort: ["Янв", "Фев", "Мар", "Апр", "Май", "Июн", "Июл", "Авг", "Сен", "Окт", "Ноя", "Дек"],
        dayNames: ["воскресенье", "понедельник", "вторник", "среда", "четверг", "пятница", "суббота"],
        dayNamesShort: ["вск", "пнд", "втр", "срд", "чтв", "птн", "сбт"],
        dayNamesMin: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб"],
        weekHeader: "Нед",
        dateFormat: "dd.mm.yy",
        firstDay: 1,
        isRTL: !1,
        showMonthAfterYear: !1,
        yearSuffix: ""
    },
    t.datepicker.setDefaults(t.datepicker.regional.ru)
}
),
function(t) {
    "use strict";
    Date.now = Date.now || function() {
        return +new Date
    }
    ,
    t.ias = function(e) {
        function i() {
            var e;
            if (y.onChangePage(function(t, e, i) {
                x && x.setPage(t, i),
                b.onPageChange.call(this, t, i, e)
            }
            ),
            b.triggerPageThreshold > 0)
                n();
            else if (t(b.next).attr("href")) {
                var i = _.getCurrentScrollOffset(b.scrollContainer);
                g(function() {
                    l(i)
                }
                )
            }
            return x && x.havePage() && (a(),
            e = x.getPage(),
            _.forceScrollTop(function() {
                var i;
                e > 1 ? (d(e),
                i = o(!0),
                t("html, body").scrollTop(i)) : n()
            }
            )),
            w
        }
        function n() {
            r(),
            b.scrollContainer.scroll(s)
        }
        function s() {
            var t, e;
            t = _.getCurrentScrollOffset(b.scrollContainer),
            e = o(),
            t >= e && (h() >= b.triggerPageThreshold ? (a(),
            g(function() {
                l(t)
            }
            )) : l(t))
        }
        function a() {
            b.scrollContainer.unbind("scroll", s)
        }
        function r() {
            t(b.pagination).hide()
        }
        function o(e) {
            var i, n;
            return i = t(b.container).find(b.item).last(),
            0 === i.size() ? 0 : (n = i.offset().top + i.height(),
            e || (n += b.thresholdMargin),
            n)
        }
        function l(e, i) {
            var s;
            return (s = t(b.next).attr("href")) ? void (b.beforePageChange && t.isFunction(b.beforePageChange) && b.beforePageChange(e, s) === !1 || (y.pushPages(e, s),
            a(),
            p(),
            c(s, function(e, o) {
                var l, c = b.onLoadItems.call(this, o);
                c !== !1 && (t(o).hide(),
                l = t(b.container).find(b.item).last(),
                l.after(o),
                t(o).fadeIn()),
                s = t(b.next, e).attr("href"),
                t(b.pagination).replaceWith(t(b.pagination, e)),
                f(),
                r(),
                s ? n() : a(),
                b.onRenderComplete.call(this, o),
                i && i.call(this)
            }
            ))) : (b.noneleft && t(b.container).find(b.item).last().after(b.noneleft),
            a())
        }
        function c(e, i, n) {
            var s, a, r, o = [], l = Date.now();
            n = n || b.loaderDelay,
            t.get(e, null , function(e) {
                s = t(b.container, e).eq(0),
                0 === s.length && (s = t(e).filter(b.container).eq(0)),
                s && s.find(b.item).each(function() {
                    o.push(this)
                }
                ),
                i && (r = this,
                a = Date.now() - l,
                n > a ? setTimeout(function() {
                    i.call(r, e, o)
                }
                , n - a) : i.call(r, e, o))
            }
            , "html")
        }
        function d(e) {
            var i = o(!0);
            i > 0 && l(i, function() {
                a(),
                y.getCurPageNum(i) + 1 < e ? (d(e),
                t("html,body").animate({
                    scrollTop: i
                }, 400, "swing")) : (t("html,body").animate({
                    scrollTop: i
                }, 1e3, "swing"),
                n())
            }
            )
        }
        function h() {
            var t = _.getCurrentScrollOffset(b.scrollContainer);
            return y.getCurPageNum(t)
        }
        function u() {
			
            var e = t(".ias_loader");
            return 0 === e.size() && (e = t('<div class="ias_loader">' + b.loader + "</div>"),
            e.hide()),
            e
        }
        function p() {
            var e, i = u();
            b.customLoaderProc !== !1 ? b.customLoaderProc(i) : (e = t(b.container).find(b.item).last(),
            e.after(i),
            i.fadeIn())
        }
        function f() {
            var t = u();
            t.remove()
        }
        function m(e) {
		    
			  t('footer').show();
			 
            var i = t(".ias_trigger");
          return 0 === i.size() && (i = t('<div class="ias_trigger">'+((t('.is_admin').length)?'<a href="#">' + b.trigger + "</a>":"")+"</div>" + Main.templates.load_more_sections()),
		  
            i.hide()),
            t("a", i).unbind("click").bind("click", function(i) {
                return "#" == t(i.currentTarget).attr("href") ? (v(),
                e.call(),
                !1) : void 0
            }
            ),
            i
        }
        function g(e) {
            var i, n = m(e);
            b.customTriggerProc !== !1 ? b.customTriggerProc(n) : (i = t(b.container).find(b.item).last(),
            i.after(n),
            n.fadeIn())
        }
        function v() {
            var e = m();
            e.remove(),
            t(".scroll-sections ,.f_t_ll").remove()
        }
        var b = t.extend({}, t.ias.defaults, e)
          , _ = new t.ias.util
          , y = new t.ias.paging(b.scrollContainer)
          , x = b.history ? new t.ias.history : !1
          , w = this;
        i()
    }
    ,
    t.ias.defaults = {
        container: "#container",
        scrollContainer: t(window),
        item: ".item",
        pagination: "#pagination",
        next: ".next",
        noneleft: !1,
        loader: '<img src="images/loader.gif"/>',
        loaderDelay: 600,
        triggerPageThreshold: 3,
        trigger: "Load more items",
        thresholdMargin: 0,
        history: !0,
        onPageChange: function() {},
        beforePageChange: function() {},
        onLoadItems: function() {},
        onRenderComplete: function() {},
        customLoaderProc: !1,
        customTriggerProc: !1
    },
    t.ias.util = function() {
        function e() {
            t(window).load(function() {
                i = !0
            }
            )
        }
        var i = !1
          , n = !1
          , s = this;
        e(),
        this.forceScrollTop = function(e) {
            t("html,body").scrollTop(0),
            n || (i ? (e.call(),
            n = !0) : setTimeout(function() {
                s.forceScrollTop(e)
            }
            , 1))
        }
        ,
        this.getCurrentScrollOffset = function(t) {
            var e, i;
            return e = t.get(0) === window ? t.scrollTop() : t.offset().top,
            i = t.height(),
            e + i
        }
    }
    ,
    t.ias.paging = function() {
        function e() {
            t(window).scroll(i)
        }
        function i() {
            var e, i, a, c, d;
            e = l.getCurrentScrollOffset(t(window)),
            i = n(e),
            a = s(e),
            o !== i && (c = a[0],
            d = a[1],
            r.call({}, i, c, d)),
            o = i
        }
        function n(t) {
            for (var e = a.length - 1; e > 0; e--)
                if (t > a[e][0])
                    return e + 1;
            return 1
        }
        function s(t) {
            for (var e = a.length - 1; e >= 0; e--)
                if (t > a[e][0])
                    return a[e];
            return null 
        }
        var a = [[0, document.location.toString()]]
          , r = function() {}
          , o = 1
          , l = new t.ias.util;
        e(),
        this.getCurPageNum = function(e) {
            return e = e || l.getCurrentScrollOffset(t(window)),
            n(e)
        }
        ,
        this.onChangePage = function(t) {
            r = t
        }
        ,
        this.pushPages = function(t, e) {
            a.push([t, e])
        }
    }
    ,
    t.ias.history = function() {
        function t() {
            i = !!(window.history && history.pushState && history.replaceState),
            i = !1
        }
        var e = !1
          , i = !1;
        t(),
        this.setPage = function(t, e) {
            this.updateState({
                page: t
            }, "", e)
        }
        ,
        this.havePage = function() {
            return this.getState() !== !1
        }
        ,
        this.getPage = function() {
            var t;
            return this.havePage() ? (t = this.getState(),
            t.page) : 1
        }
        ,
        this.getState = function() {
            var t, e, n;
            if (i) {
                if (e = history.state,
                e && e.ias)
                    return e.ias
            } else if (t = "#/page/" === window.location.hash.substring(0, 7))
                return n = parseInt(window.location.hash.replace("#/page/", ""), 10),
                {
                    page: n
                };
            return !1
        }
        ,
        this.updateState = function(t, i, n) {
            e ? this.replaceState(t, i, n) : this.pushState(t, i, n)
        }
        ,
        this.pushState = function(t, n, s) {
            var a;
            i ? history.pushState({
                ias: t
            }, n, s) : a = t.page > 0 ? "#/page/" + t.page : "",
            e = !0
        }
        ,
        this.replaceState = function(t, e, n) {
            i ? history.replaceState({
                ias: t
            }, e, n) : this.pushState(t, e, n)
        }
    }
}
(jQuery),
function(t) {
    var e = {
        init: function(e) {
            return this.each(function() {
                var i = t(this)
                  , n = i.data("monthpicker")
                  , s = e && e.year ? e.year : (new Date).getFullYear()
                  , a = t.extend({
                    pattern: "yyyy-mm",
                    selectedMonth: null ,
                    selectedMonthName: "",
                    selectedYear: s,
                    startYear: s - 60,
                    finalYear: s,
                    monthNames: ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"],
                    id: "monthpicker_" + (Math.random() * Math.random()).toString().replace(".", ""),
                    openOnFocus: !0,
                    disabledMonths: []
                }, e);
                a.dateSeparator = a.pattern.replace(/(mmm|mm|m|yyyy|yy|y)/gi, ""),
                n || (t(this).data("monthpicker", {
                    target: i,
                    settings: a
                }),
                a.openOnFocus === !0 && i.bind("focus", function() {
                    i.monthpicker("show")
                }
                ),
                i.monthpicker("mountWidget", a),
                i.bind("monthpicker-click-month", function() {
                    i.monthpicker("setValue", a),
                    i.monthpicker("hide")
                }
                ),
                i.addClass("mtz-monthpicker-widgetcontainer"),
                t(document).unbind("mousedown.mtzmonthpicker").bind("mousedown.mtzmonthpicker", function(e) {
                    (!e.target.className || e.target.className.toString().indexOf("mtz-monthpicker") < 0) && t(this).monthpicker("hideAll")
                }
                ))
            }
            )
        },
        show: function() {
            t(this).monthpicker("hideAll");
            var e = t("#" + this.data("monthpicker").settings.id);
            e.css("top", this.offset().top + this.outerHeight()),
            t(window).width() > e.width() + this.offset().left ? e.css("left", this.offset().left) : e.css("left", this.offset().left - e.width()),
            e.show(),
            e.find("select").focus(),
            this.trigger("monthpicker-show")
        },
        hide: function() {
            var e = t("#" + this.data("monthpicker").settings.id);
            e.is(":visible") && (e.hide(),
            this.trigger("monthpicker-hide"))
        },
        hideAll: function() {
            t(".mtz-monthpicker-widgetcontainer").each(function() {
                "undefined" != typeof t(this).data("monthpicker") && t(this).monthpicker("hide")
            }
            )
        },
        setValue: function(t) {
            var e = t.selectedMonth
              , i = t.selectedYear;
            t.pattern.indexOf("mmm") >= 0 ? e = t.selectedMonthName : t.pattern.indexOf("mm") >= 0 && t.selectedMonth < 10 && (e = "0" + t.selectedMonth),
            t.pattern.indexOf("yyyy") < 0 && (i = i.toString().substr(2, 2)),
            this.val(t.pattern.indexOf("y") > t.pattern.indexOf(t.dateSeparator) ? e + t.dateSeparator + i : i + t.dateSeparator + e),
            this.change()
        },
        disableMonths: function(e) {
            var i = this.data("monthpicker").settings
              , n = t("#" + i.id);
            i.disabledMonths = e,
            n.find(".mtz-monthpicker-month").each(function() {
                var i = parseInt(t(this).data("month"));
                t.inArray(i, e) >= 0 ? t(this).addClass("ui-state-disabled") : t(this).removeClass("ui-state-disabled")
            }
            )
        },
        mountWidget: function(e) {
            var i = this
              , n = t('<div id="' + e.id + '" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" />')
              , s = t('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all mtz-monthpicker" />')
              , a = t('<select class="mtz-monthpicker mtz-monthpicker-year" />')
              , r = t('<table class="mtz-monthpicker" />')
              , o = t('<tbody class="mtz-monthpicker" />')
              , l = t('<tr class="mtz-monthpicker" />')
              , c = ""
              , d = (e.selectedYear,
            null )
              , h = t(this).data("selected-year")
              , u = t(this).data("start-year")
              , p = t(this).data("final-year");
            h && (e.selectedYear = h),
            u && (e.startYear = u),
            p && (e.finalYear = p),
            n.css({
                position: "absolute",
                zIndex: 999999,
                whiteSpace: "nowrap",
                width: "250px",
                overflow: "hidden",
                textAlign: "center",
                display: "none",
                top: i.offset().top + i.outerHeight(),
                left: i.offset().left
            });
            for (var f = e.startYear; f <= e.finalYear; f++) {
                var d = t('<option class="mtz-monthpicker" />').attr("value", f).append(f);
                e.selectedYear === f && d.attr("selected", "selected"),
                a.append(d)
            }
            s.append(a).appendTo(n);
            for (var f = 1; 12 >= f; f++)
                c = t('<td class="ui-state-default mtz-monthpicker mtz-monthpicker-month" style="padding:5px;cursor:default;" />').attr("data-month", f),
                e.selectedMonth === f && c.addClass("ui-state-active"),
                c.append(e.monthNames[f - 1]),
                l.append(c).appendTo(o),
                f % 3 === 0 && (l = t('<tr class="mtz-monthpicker" />'));
            r.append(o).appendTo(n),
            n.find(".mtz-monthpicker-month").bind("click", function() {
                var n = parseInt(t(this).data("month"));
                t.inArray(n, e.disabledMonths) < 0 && (e.selectedMonth = t(this).data("month"),
                e.selectedMonthName = t(this).text(),
                i.trigger("monthpicker-click-month", t(this).data("month")),
                t(".mtz-monthpicker-month.ui-state-active").toggleClass("ui-state-active"),
                t(this).toggleClass("ui-state-active"))
            }
            ),
            n.find(".mtz-monthpicker-year").bind("change", function() {
                e.selectedYear = t(this).val(),
                i.trigger("monthpicker-change-year", t(this).val())
            }
            ),
            n.appendTo("body")
        },
        destroy: function() {
            return this.each(function() {
                t(this).removeClass("mtz-monthpicker-widgetcontainer").unbind("focus").removeData("monthpicker")
            }
            )
        },
        getDate: function() {
            var t = this.data("monthpicker").settings;
            return t.selectedMonth && t.selectedYear ? new Date(t.selectedYear,t.selectedMonth - 1) : null 
        }
    };
    t.fn.monthpicker = function(i) {
        return e[i] ? e[i].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof i && i ? void t.error("Method " + i + " does not exist on jQuery.mtz.monthpicker") : e.init.apply(this, arguments)
    }
}
(jQuery),
function($) {
    if ($.ui.timepicker = $.ui.timepicker || {},
    !$.ui.timepicker.version) {
        $.extend($.ui, {
            timepicker: {
                version: "1.2"
            }
        });
        var Timepicker = function() {
            this.regional = [],
            this.regional[""] = {
                currentText: "Now",
                closeText: "Done",
                amNames: ["AM", "A"],
                pmNames: ["PM", "P"],
                timeFormat: "HH:mm",
                timeSuffix: "",
                timeOnlyTitle: "Choose Time",
                timeText: "Time",
                hourText: "Hour",
                minuteText: "Minute",
                secondText: "Second",
                millisecText: "Millisecond",
                timezoneText: "Time Zone",
                isRTL: !1
            },
            this._defaults = {
                showButtonPanel: !0,
                timeOnly: !1,
                showHour: !0,
                showMinute: !0,
                showSecond: !1,
                showMillisec: !1,
                showTimezone: !1,
                showTime: !0,
                stepHour: 1,
                stepMinute: 1,
                stepSecond: 1,
                stepMillisec: 1,
                hour: 0,
                minute: 0,
                second: 0,
                millisec: 0,
                timezone: null ,
                useLocalTimezone: !1,
                defaultTimezone: "+0000",
                hourMin: 0,
                minuteMin: 0,
                secondMin: 0,
                millisecMin: 0,
                hourMax: 23,
                minuteMax: 59,
                secondMax: 59,
                millisecMax: 999,
                minDateTime: null ,
                maxDateTime: null ,
                onSelect: null ,
                hourGrid: 0,
                minuteGrid: 0,
                secondGrid: 0,
                millisecGrid: 0,
                alwaysSetTime: !0,
                separator: " ",
                altFieldTimeOnly: !0,
                altTimeFormat: null ,
                altSeparator: null ,
                altTimeSuffix: null ,
                pickerTimeFormat: null ,
                pickerTimeSuffix: null ,
                showTimepicker: !0,
                timezoneIso8601: !1,
                timezoneList: null ,
                addSliderAccess: !1,
                sliderAccessArgs: null ,
                controlType: "slider",
                defaultValue: null ,
                parse: "strict"
            },
            $.extend(this._defaults, this.regional[""])
        }
        ;
        $.extend(Timepicker.prototype, {
            $input: null ,
            $altInput: null ,
            $timeObj: null ,
            inst: null ,
            hour_slider: null ,
            minute_slider: null ,
            second_slider: null ,
            millisec_slider: null ,
            timezone_select: null ,
            hour: 0,
            minute: 0,
            second: 0,
            millisec: 0,
            timezone: null ,
            defaultTimezone: "+0000",
            hourMinOriginal: null ,
            minuteMinOriginal: null ,
            secondMinOriginal: null ,
            millisecMinOriginal: null ,
            hourMaxOriginal: null ,
            minuteMaxOriginal: null ,
            secondMaxOriginal: null ,
            millisecMaxOriginal: null ,
            ampm: "",
            formattedDate: "",
            formattedTime: "",
            formattedDateTime: "",
            timezoneList: null ,
            units: ["hour", "minute", "second"],
            control: null ,
            setDefaults: function(t) {
                return extendRemove(this._defaults, t || {}),
                this
            },
            _newInst: function($input, o) {
                var tp_inst = new Timepicker, inlineSettings = {}, fns = {}, overrides, i;
                for (var attrName in this._defaults)
                    if (this._defaults.hasOwnProperty(attrName)) {
                        var attrValue = $input.attr("time:" + attrName);
                        if (attrValue)
                            try {
                                inlineSettings[attrName] = eval(attrValue)
                            } catch (err) {
                                inlineSettings[attrName] = attrValue
                            }
                    }
                overrides = {
                    beforeShow: function(t, e) {
                        return $.isFunction(tp_inst._defaults.evnts.beforeShow) ? tp_inst._defaults.evnts.beforeShow.call($input[0], t, e, tp_inst) : void 0
                    },
                    onChangeMonthYear: function(t, e, i) {
                        tp_inst._updateDateTime(i),
                        $.isFunction(tp_inst._defaults.evnts.onChangeMonthYear) && tp_inst._defaults.evnts.onChangeMonthYear.call($input[0], t, e, i, tp_inst)
                    },
                    onClose: function(t, e) {
                        tp_inst.timeDefined === !0 && "" !== $input.val() && tp_inst._updateDateTime(e),
                        $.isFunction(tp_inst._defaults.evnts.onClose) && tp_inst._defaults.evnts.onClose.call($input[0], t, e, tp_inst)
                    }
                };
                for (i in overrides)
                    overrides.hasOwnProperty(i) && (fns[i] = o[i] || null );
                if (tp_inst._defaults = $.extend({}, this._defaults, inlineSettings, o, overrides, {
                    evnts: fns,
                    timepicker: tp_inst
                }),
                tp_inst.amNames = $.map(tp_inst._defaults.amNames, function(t) {
                    return t.toUpperCase()
                }
                ),
                tp_inst.pmNames = $.map(tp_inst._defaults.pmNames, function(t) {
                    return t.toUpperCase()
                }
                ),
                "string" == typeof tp_inst._defaults.controlType ? (void 0 === $.fn[tp_inst._defaults.controlType] && (tp_inst._defaults.controlType = "select"),
                tp_inst.control = tp_inst._controls[tp_inst._defaults.controlType]) : tp_inst.control = tp_inst._defaults.controlType,
                null  === tp_inst._defaults.timezoneList) {
                    var timezoneList = ["-1200", "-1100", "-1000", "-0930", "-0900", "-0800", "-0700", "-0600", "-0500", "-0430", "-0400", "-0330", "-0300", "-0200", "-0100", "+0000", "+0100", "+0200", "+0300", "+0330", "+0400", "+0430", "+0500", "+0530", "+0545", "+0600", "+0630", "+0700", "+0800", "+0845", "+0900", "+0930", "+1000", "+1030", "+1100", "+1130", "+1200", "+1245", "+1300", "+1400"];
                    tp_inst._defaults.timezoneIso8601 && (timezoneList = $.map(timezoneList, function(t) {
                        return "+0000" == t ? "Z" : t.substring(0, 3) + ":" + t.substring(3)
                    }
                    )),
                    tp_inst._defaults.timezoneList = timezoneList
                }
                return tp_inst.timezone = tp_inst._defaults.timezone,
                tp_inst.hour = tp_inst._defaults.hour < tp_inst._defaults.hourMin ? tp_inst._defaults.hourMin : tp_inst._defaults.hour > tp_inst._defaults.hourMax ? tp_inst._defaults.hourMax : tp_inst._defaults.hour,
                tp_inst.minute = tp_inst._defaults.minute < tp_inst._defaults.minuteMin ? tp_inst._defaults.minuteMin : tp_inst._defaults.minute > tp_inst._defaults.minuteMax ? tp_inst._defaults.minuteMax : tp_inst._defaults.minute,
                tp_inst.second = tp_inst._defaults.second < tp_inst._defaults.secondMin ? tp_inst._defaults.secondMin : tp_inst._defaults.second > tp_inst._defaults.secondMax ? tp_inst._defaults.secondMax : tp_inst._defaults.second,
                tp_inst.millisec = tp_inst._defaults.millisec < tp_inst._defaults.millisecMin ? tp_inst._defaults.millisecMin : tp_inst._defaults.millisec > tp_inst._defaults.millisecMax ? tp_inst._defaults.millisecMax : tp_inst._defaults.millisec,
                tp_inst.ampm = "",
                tp_inst.$input = $input,
                o.altField && (tp_inst.$altInput = $(o.altField).css({
                    cursor: "pointer"
                }).focus(function() {
                    $input.trigger("focus")
                }
                )),
                (0 === tp_inst._defaults.minDate || 0 === tp_inst._defaults.minDateTime) && (tp_inst._defaults.minDate = new Date),
                (0 === tp_inst._defaults.maxDate || 0 === tp_inst._defaults.maxDateTime) && (tp_inst._defaults.maxDate = new Date),
                void 0 !== tp_inst._defaults.minDate && tp_inst._defaults.minDate instanceof Date && (tp_inst._defaults.minDateTime = new Date(tp_inst._defaults.minDate.getTime())),
                void 0 !== tp_inst._defaults.minDateTime && tp_inst._defaults.minDateTime instanceof Date && (tp_inst._defaults.minDate = new Date(tp_inst._defaults.minDateTime.getTime())),
                void 0 !== tp_inst._defaults.maxDate && tp_inst._defaults.maxDate instanceof Date && (tp_inst._defaults.maxDateTime = new Date(tp_inst._defaults.maxDate.getTime())),
                void 0 !== tp_inst._defaults.maxDateTime && tp_inst._defaults.maxDateTime instanceof Date && (tp_inst._defaults.maxDate = new Date(tp_inst._defaults.maxDateTime.getTime())),
                tp_inst.$input.bind("focus", function() {
                    tp_inst._onFocus()
                }
                ),
                tp_inst
            },
            _addTimePicker: function(t) {
                var e = this.$altInput && this._defaults.altFieldTimeOnly ? this.$input.val() + " " + this.$altInput.val() : this.$input.val();
                this.timeDefined = this._parseTime(e),
                this._limitMinMaxDateTime(t, !1),
                this._injectTimePicker()
            },
            _parseTime: function(t, e) {
                if (this.inst || (this.inst = $.datepicker._getInst(this.$input[0])),
                e || !this._defaults.timeOnly) {
                    var i = $.datepicker._get(this.inst, "dateFormat");
                    try {
                        var n = parseDateTimeInternal(i, this._defaults.timeFormat, t, $.datepicker._getFormatConfig(this.inst), this._defaults);
                        if (!n.timeObj)
                            return !1;
                        $.extend(this, n.timeObj)
                    } catch (s) {
                        return $.timepicker.log("Error parsing the date/time string: " + s + "\ndate/time string = " + t + "\ntimeFormat = " + this._defaults.timeFormat + "\ndateFormat = " + i),
                        !1
                    }
                    return !0
                }
                var a = $.datepicker.parseTime(this._defaults.timeFormat, t, this._defaults);
                return a ? ($.extend(this, a),
                !0) : !1
            },
            _injectTimePicker: function() {
                var t = this.inst.dpDiv
                  , e = this.inst.settings
                  , i = this
                  , n = ""
                  , s = ""
                  , a = {}
                  , r = {}
                  , o = null ;
                if (0 === t.find("div.ui-timepicker-div").length && e.showTimepicker) {
                    for (var l = ' style="display:none;"', c = '<div class="ui-timepicker-div' + (e.isRTL ? " ui-timepicker-rtl" : "") + '"><dl><dt class="ui_tpicker_time_label"' + (e.showTime ? "" : l) + ">" + e.timeText + '</dt><dd class="ui_tpicker_time"' + (e.showTime ? "" : l) + "></dd>", d = 0, h = this.units.length; h > d; d++) {
                        if (n = this.units[d],
                        s = n.substr(0, 1).toUpperCase() + n.substr(1),
                        a[n] = parseInt(e[n + "Max"] - (e[n + "Max"] - e[n + "Min"]) % e["step" + s], 10),
                        r[n] = 0,
                        c += '<dt class="ui_tpicker_' + n + '_label"' + (e["show" + s] ? "" : l) + ">" + e[n + "Text"] + '</dt><dd class="ui_tpicker_' + n + '"><div class="ui_tpicker_' + n + '_slider"' + (e["show" + s] ? "" : l) + "></div>",
                        e["show" + s] && e[n + "Grid"] > 0) {
                            if (c += '<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',
                            "hour" == n)
                                for (var u = e[n + "Min"]; u <= a[n]; u += parseInt(e[n + "Grid"], 10)) {
                                    r[n]++;
                                    var p = $.datepicker.formatTime(useAmpm(e.pickerTimeFormat || e.timeFormat) ? "hht" : "HH", {
                                        hour: u
                                    }, e);
                                    c += '<td data-for="' + n + '">' + p + "</td>"
                                }
                            else
                                for (var f = e[n + "Min"]; f <= a[n]; f += parseInt(e[n + "Grid"], 10))
                                    r[n]++,
                                    c += '<td data-for="' + n + '">' + (10 > f ? "0" : "") + f + "</td>";
                            c += "</tr></table></div>"
                        }
                        c += "</dd>"
                    }
                    c += '<dt class="ui_tpicker_timezone_label"' + (e.showTimezone ? "" : l) + ">" + e.timezoneText + "</dt>",
                    c += '<dd class="ui_tpicker_timezone" ' + (e.showTimezone ? "" : l) + "></dd>",
                    c += "</dl></div>";
                    var m = $(c);
                    e.timeOnly === !0 && (m.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">' + e.timeOnlyTitle + "</div></div>"),
                    t.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());
                    for (var d = 0, h = i.units.length; h > d; d++)
                        n = i.units[d],
                        s = n.substr(0, 1).toUpperCase() + n.substr(1),
                        i[n + "_slider"] = i.control.create(i, m.find(".ui_tpicker_" + n + "_slider"), n, i[n], e[n + "Min"], a[n], e["step" + s]),
                        e["show" + s] && e[n + "Grid"] > 0 && (o = 100 * r[n] * e[n + "Grid"] / (a[n] - e[n + "Min"]),
                        m.find(".ui_tpicker_" + n + " table").css({
                            width: o + "%",
                            marginLeft: e.isRTL ? "0" : o / (-2 * r[n]) + "%",
                            marginRight: e.isRTL ? o / (-2 * r[n]) + "%" : "0",
                            borderCollapse: "collapse"
                        }).find("td").click(function() {
                            var t = $(this)
                              , e = t.html()
                              , s = parseInt(e.replace(/[^0-9]/g), 10)
                              , a = e.replace(/[^apm]/gi)
                              , r = t.data("for");
                            "hour" == r && (-1 !== a.indexOf("p") && 12 > s ? s += 12 : -1 !== a.indexOf("a") && 12 === s && (s = 0)),
                            i.control.value(i, i[r + "_slider"], n, s),
                            i._onTimeChange(),
                            i._onSelectHandler()
                        }
                        ).css({
                            cursor: "pointer",
                            width: 100 / r[n] + "%",
                            textAlign: "center",
                            overflow: "hidden"
                        }));
                    if (this.timezone_select = m.find(".ui_tpicker_timezone").append("<select></select>").find("select"),
                    $.fn.append.apply(this.timezone_select, $.map(e.timezoneList, function(t) {
                        return $("<option />").val("object" == typeof t ? t.value : t).text("object" == typeof t ? t.label : t)
                    }
                    )),
                    "undefined" != typeof this.timezone && null  !== this.timezone && "" !== this.timezone) {
                        var g = new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12)
                          , v = $.timepicker.timeZoneOffsetString(g);
                        v == this.timezone ? selectLocalTimeZone(i) : this.timezone_select.val(this.timezone)
                    } else
                        "undefined" != typeof this.hour && null  !== this.hour && "" !== this.hour ? this.timezone_select.val(e.defaultTimezone) : selectLocalTimeZone(i);
                    this.timezone_select.change(function() {
                        i._defaults.useLocalTimezone = !1,
                        i._onTimeChange(),
                        i._onSelectHandler()
                    }
                    );
                    var b = t.find(".ui-datepicker-buttonpane");
                    if (b.length ? b.before(m) : t.append(m),
                    this.$timeObj = m.find(".ui_tpicker_time"),
                    null  !== this.inst) {
                        var _ = this.timeDefined;
                        this._onTimeChange(),
                        this.timeDefined = _
                    }
                    if (this._defaults.addSliderAccess) {
                        var y = this._defaults.sliderAccessArgs
                          , x = this._defaults.isRTL;
                        y.isRTL = x,
                        setTimeout(function() {
                            if (0 === m.find(".ui-slider-access").length) {
                                m.find(".ui-slider:visible").sliderAccess(y);
                                var t = m.find(".ui-slider-access:eq(0)").outerWidth(!0);
                                t && m.find("table:visible").each(function() {
                                    var e = $(this)
                                      , i = e.outerWidth()
                                      , n = e.css(x ? "marginRight" : "marginLeft").toString().replace("%", "")
                                      , s = i - t
                                      , a = n * s / i + "%"
                                      , r = {
                                        width: s,
                                        marginRight: 0,
                                        marginLeft: 0
                                    };
                                    r[x ? "marginRight" : "marginLeft"] = a,
                                    e.css(r)
                                }
                                )
                            }
                        }
                        , 10)
                    }
                }
            },
            _limitMinMaxDateTime: function(t, e) {
                var i = this._defaults
                  , n = new Date(t.selectedYear,t.selectedMonth,t.selectedDay);
                if (this._defaults.showTimepicker) {
                    if (null  !== $.datepicker._get(t, "minDateTime") && void 0 !== $.datepicker._get(t, "minDateTime") && n) {
                        var s = $.datepicker._get(t, "minDateTime")
                          , a = new Date(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0,0);
                        (null  === this.hourMinOriginal || null  === this.minuteMinOriginal || null  === this.secondMinOriginal || null  === this.millisecMinOriginal) && (this.hourMinOriginal = i.hourMin,
                        this.minuteMinOriginal = i.minuteMin,
                        this.secondMinOriginal = i.secondMin,
                        this.millisecMinOriginal = i.millisecMin),
                        t.settings.timeOnly || a.getTime() == n.getTime() ? (this._defaults.hourMin = s.getHours(),
                        this.hour <= this._defaults.hourMin ? (this.hour = this._defaults.hourMin,
                        this._defaults.minuteMin = s.getMinutes(),
                        this.minute <= this._defaults.minuteMin ? (this.minute = this._defaults.minuteMin,
                        this._defaults.secondMin = s.getSeconds(),
                        this.second <= this._defaults.secondMin ? (this.second = this._defaults.secondMin,
                        this._defaults.millisecMin = s.getMilliseconds()) : (this.millisec < this._defaults.millisecMin && (this.millisec = this._defaults.millisecMin),
                        this._defaults.millisecMin = this.millisecMinOriginal)) : (this._defaults.secondMin = this.secondMinOriginal,
                        this._defaults.millisecMin = this.millisecMinOriginal)) : (this._defaults.minuteMin = this.minuteMinOriginal,
                        this._defaults.secondMin = this.secondMinOriginal,
                        this._defaults.millisecMin = this.millisecMinOriginal)) : (this._defaults.hourMin = this.hourMinOriginal,
                        this._defaults.minuteMin = this.minuteMinOriginal,
                        this._defaults.secondMin = this.secondMinOriginal,
                        this._defaults.millisecMin = this.millisecMinOriginal)
                    }
                    if (null  !== $.datepicker._get(t, "maxDateTime") && void 0 !== $.datepicker._get(t, "maxDateTime") && n) {
                        var r = $.datepicker._get(t, "maxDateTime")
                          , o = new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);
                        (null  === this.hourMaxOriginal || null  === this.minuteMaxOriginal || null  === this.secondMaxOriginal) && (this.hourMaxOriginal = i.hourMax,
                        this.minuteMaxOriginal = i.minuteMax,
                        this.secondMaxOriginal = i.secondMax,
                        this.millisecMaxOriginal = i.millisecMax),
                        t.settings.timeOnly || o.getTime() == n.getTime() ? (this._defaults.hourMax = r.getHours(),
                        this.hour >= this._defaults.hourMax ? (this.hour = this._defaults.hourMax,
                        this._defaults.minuteMax = r.getMinutes(),
                        this.minute >= this._defaults.minuteMax ? (this.minute = this._defaults.minuteMax,
                        this._defaults.secondMax = r.getSeconds(),
                        this.second >= this._defaults.secondMax ? (this.second = this._defaults.secondMax,
                        this._defaults.millisecMax = r.getMilliseconds()) : (this.millisec > this._defaults.millisecMax && (this.millisec = this._defaults.millisecMax),
                        this._defaults.millisecMax = this.millisecMaxOriginal)) : (this._defaults.secondMax = this.secondMaxOriginal,
                        this._defaults.millisecMax = this.millisecMaxOriginal)) : (this._defaults.minuteMax = this.minuteMaxOriginal,
                        this._defaults.secondMax = this.secondMaxOriginal,
                        this._defaults.millisecMax = this.millisecMaxOriginal)) : (this._defaults.hourMax = this.hourMaxOriginal,
                        this._defaults.minuteMax = this.minuteMaxOriginal,
                        this._defaults.secondMax = this.secondMaxOriginal,
                        this._defaults.millisecMax = this.millisecMaxOriginal)
                    }
                    if (void 0 !== e && e === !0) {
                        var l = parseInt(this._defaults.hourMax - (this._defaults.hourMax - this._defaults.hourMin) % this._defaults.stepHour, 10)
                          , c = parseInt(this._defaults.minuteMax - (this._defaults.minuteMax - this._defaults.minuteMin) % this._defaults.stepMinute, 10)
                          , d = parseInt(this._defaults.secondMax - (this._defaults.secondMax - this._defaults.secondMin) % this._defaults.stepSecond, 10)
                          , h = parseInt(this._defaults.millisecMax - (this._defaults.millisecMax - this._defaults.millisecMin) % this._defaults.stepMillisec, 10);
                        this.hour_slider && (this.control.options(this, this.hour_slider, "hour", {
                            min: this._defaults.hourMin,
                            max: l
                        }),
                        this.control.value(this, this.hour_slider, "hour", this.hour - this.hour % this._defaults.stepHour)),
                        this.minute_slider && (this.control.options(this, this.minute_slider, "minute", {
                            min: this._defaults.minuteMin,
                            max: c
                        }),
                        this.control.value(this, this.minute_slider, "minute", this.minute - this.minute % this._defaults.stepMinute)),
                        this.second_slider && (this.control.options(this, this.second_slider, "second", {
                            min: this._defaults.secondMin,
                            max: d
                        }),
                        this.control.value(this, this.second_slider, "second", this.second - this.second % this._defaults.stepSecond)),
                        this.millisec_slider && (this.control.options(this, this.millisec_slider, "millisec", {
                            min: this._defaults.millisecMin,
                            max: h
                        }),
                        this.control.value(this, this.millisec_slider, "millisec", this.millisec - this.millisec % this._defaults.stepMillisec))
                    }
                }
            },
            _onTimeChange: function() {
                var t = this.hour_slider ? this.control.value(this, this.hour_slider, "hour") : !1
                  , e = this.minute_slider ? this.control.value(this, this.minute_slider, "minute") : !1
                  , i = this.second_slider ? this.control.value(this, this.second_slider, "second") : !1
                  , n = this.millisec_slider ? this.control.value(this, this.millisec_slider, "millisec") : !1
                  , s = this.timezone_select ? this.timezone_select.val() : !1
                  , a = this._defaults
                  , r = a.pickerTimeFormat || a.timeFormat
                  , o = a.pickerTimeSuffix || a.timeSuffix;
                "object" == typeof t && (t = !1),
                "object" == typeof e && (e = !1),
                "object" == typeof i && (i = !1),
                "object" == typeof n && (n = !1),
                "object" == typeof s && (s = !1),
                t !== !1 && (t = parseInt(t, 10)),
                e !== !1 && (e = parseInt(e, 10)),
                i !== !1 && (i = parseInt(i, 10)),
                n !== !1 && (n = parseInt(n, 10));
                var l = a[12 > t ? "amNames" : "pmNames"][0]
                  , c = t != this.hour || e != this.minute || i != this.second || n != this.millisec || this.ampm.length > 0 && 12 > t != (-1 !== $.inArray(this.ampm.toUpperCase(), this.amNames)) || null  === this.timezone && s != this.defaultTimezone || null  !== this.timezone && s != this.timezone;
                c && (t !== !1 && (this.hour = t),
                e !== !1 && (this.minute = e),
                i !== !1 && (this.second = i),
                n !== !1 && (this.millisec = n),
                s !== !1 && (this.timezone = s),
                this.inst || (this.inst = $.datepicker._getInst(this.$input[0])),
                this._limitMinMaxDateTime(this.inst, !0)),
                useAmpm(a.timeFormat) && (this.ampm = l),
                this.formattedTime = $.datepicker.formatTime(a.timeFormat, this, a),
                this.$timeObj && this.$timeObj.text(r === a.timeFormat ? this.formattedTime + o : $.datepicker.formatTime(r, this, a) + o),
                this.timeDefined = !0,
                c && this._updateDateTime()
            },
            _onSelectHandler: function() {
                var t = this._defaults.onSelect || this.inst.settings.onSelect
                  , e = this.$input ? this.$input[0] : null ;
                t && e && t.apply(e, [this.formattedDateTime, this])
            },
            _updateDateTime: function(t) {
                t = this.inst || t;
                var e = $.datepicker._daylightSavingAdjust(new Date(t.selectedYear,t.selectedMonth,t.selectedDay))
                  , i = $.datepicker._get(t, "dateFormat")
                  , n = $.datepicker._getFormatConfig(t)
                  , s = null  !== e && this.timeDefined;
                this.formattedDate = $.datepicker.formatDate(i, null  === e ? new Date : e, n);
                var a = this.formattedDate;
                if ("" == t.lastVal && (t.currentYear = t.selectedYear,
                t.currentMonth = t.selectedMonth,
                t.currentDay = t.selectedDay),
                this._defaults.timeOnly === !0 ? a = this.formattedTime : this._defaults.timeOnly !== !0 && (this._defaults.alwaysSetTime || s) && (a += this._defaults.separator + this.formattedTime + this._defaults.timeSuffix),
                this.formattedDateTime = a,
                this._defaults.showTimepicker)
                    if (this.$altInput && this._defaults.altFieldTimeOnly === !0)
                        this.$altInput.val(this.formattedTime),
                        this.$input.val(this.formattedDate);
                    else if (this.$altInput) {
                        this.$input.val(a);
                        var r = ""
                          , o = this._defaults.altSeparator ? this._defaults.altSeparator : this._defaults.separator
                          , l = this._defaults.altTimeSuffix ? this._defaults.altTimeSuffix : this._defaults.timeSuffix;
                        r = this._defaults.altFormat ? $.datepicker.formatDate(this._defaults.altFormat, null  === e ? new Date : e, n) : this.formattedDate,
                        r && (r += o),
                        r += this._defaults.altTimeFormat ? $.datepicker.formatTime(this._defaults.altTimeFormat, this, this._defaults) + l : this.formattedTime + l,
                        this.$altInput.val(r)
                    } else
                        this.$input.val(a);
                else
                    this.$input.val(this.formattedDate);
                this.$input.trigger("change")
            },
            _onFocus: function() {
                if (!this.$input.val() && this._defaults.defaultValue) {
                    this.$input.val(this._defaults.defaultValue);
                    var t = $.datepicker._getInst(this.$input.get(0))
                      , e = $.datepicker._get(t, "timepicker");
                    if (e && e._defaults.timeOnly && t.input.val() != t.lastVal)
                        try {
                            $.datepicker._updateDatepicker(t)
                        } catch (i) {
                            $.timepicker.log(i)
                        }
                }
            },
            _controls: {
                slider: {
                    create: function(t, e, i, n, s, a, r) {
                        var o = t._defaults.isRTL;
                        return e.prop("slide", null ).slider({
                            orientation: "horizontal",
                            value: o ? -1 * n : n,
                            min: o ? -1 * a : s,
                            max: o ? -1 * s : a,
                            step: r,
                            slide: function(e, n) {
                                t.control.value(t, $(this), i, o ? -1 * n.value : n.value),
                                t._onTimeChange()
                            },
                            stop: function() {
                                t._onSelectHandler()
                            }
                        })
                    },
                    options: function(t, e, i, n, s) {
                        if (t._defaults.isRTL) {
                            if ("string" == typeof n)
                                return "min" == n || "max" == n ? void 0 !== s ? e.slider(n, -1 * s) : Math.abs(e.slider(n)) : e.slider(n);
                            var a = n.min
                              , r = n.max;
                            return n.min = n.max = null ,
                            void 0 !== a && (n.max = -1 * a),
                            void 0 !== r && (n.min = -1 * r),
                            e.slider(n)
                        }
                        return "string" == typeof n && void 0 !== s ? e.slider(n, s) : e.slider(n)
                    },
                    value: function(t, e, i, n) {
                        return t._defaults.isRTL ? void 0 !== n ? e.slider("value", -1 * n) : Math.abs(e.slider("value")) : void 0 !== n ? e.slider("value", n) : e.slider("value")
                    }
                },
                select: {
                    create: function(t, e, i, n, s, a, r) {
                        for (var o = '<select class="ui-timepicker-select" data-unit="' + i + '" data-min="' + s + '" data-max="' + a + '" data-step="' + r + '">', l = (-1 !== t._defaults.timeFormat.indexOf("t") ? "toLowerCase" : "toUpperCase",
                        s); a >= l; l += r)
                            o += '<option value="' + l + '"' + (l == n ? " selected" : "") + ">",
                            o += "hour" == i && useAmpm(t._defaults.pickerTimeFormat || t._defaults.timeFormat) ? $.datepicker.formatTime("hh TT", {
                                hour: l
                            }, t._defaults) : "millisec" == i || l >= 10 ? l : "0" + l.toString(),
                            o += "</option>";
                        return o += "</select>",
                        e.children("select").remove(),
                        $(o).appendTo(e).change(function() {
                            t._onTimeChange(),
                            t._onSelectHandler()
                        }
                        ),
                        e
                    },
                    options: function(t, e, i, n, s) {
                        var a = {}
                          , r = e.children("select");
                        if ("string" == typeof n) {
                            if (void 0 === s)
                                return r.data(n);
                            a[n] = s
                        } else
                            a = n;
                        return t.control.create(t, e, r.data("unit"), r.val(), a.min || r.data("min"), a.max || r.data("max"), a.step || r.data("step"))
                    },
                    value: function(t, e, i, n) {
                        var s = e.children("select");
                        return void 0 !== n ? s.val(n) : s.val()
                    }
                }
            }
        }),
        $.fn.extend({
            timepicker: function(t) {
                t = t || {};
                var e = Array.prototype.slice.call(arguments);
                return "object" == typeof t && (e[0] = $.extend(t, {
                    timeOnly: !0
                })),
                $(this).each(function() {
                    $.fn.datetimepicker.apply($(this), e)
                }
                )
            },
            datetimepicker: function(t) {
                t = t || {};
                var e = arguments;
                return "string" == typeof t ? "getDate" == t ? $.fn.datepicker.apply($(this[0]), e) : this.each(function() {
                    var t = $(this);
                    t.datepicker.apply(t, e)
                }
                ) : this.each(function() {
                    var e = $(this);
                    e.datepicker($.timepicker._newInst(e, t)._defaults)
                }
                )
            }
        }),
        $.datepicker.parseDateTime = function(t, e, i, n, s) {
            var a = parseDateTimeInternal(t, e, i, n, s);
            if (a.timeObj) {
                var r = a.timeObj;
                a.date.setHours(r.hour, r.minute, r.second, r.millisec)
            }
            return a.date
        }
        ,
        $.datepicker.parseTime = function(t, e, i) {
            var n = extendRemove(extendRemove({}, $.timepicker._defaults), i || {})
              , s = function(t, e, i) {
                var n, s = function(t, e) {
                    var i = [];
                    return t && $.merge(i, t),
                    e && $.merge(i, e),
                    i = $.map(i, function(t) {
                        return t.replace(/[.*+?|()\[\]{}\\]/g, "\\$&")
                    }
                    ),
                    "(" + i.join("|") + ")?"
                }
                , a = function(t) {
                    var e = t.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z|'.*?')/g)
                      , i = {
                        h: -1,
                        m: -1,
                        s: -1,
                        l: -1,
                        t: -1,
                        z: -1
                    };
                    if (e)
                        for (var n = 0; n < e.length; n++)
                            -1 == i[e[n].toString().charAt(0)] && (i[e[n].toString().charAt(0)] = n + 1);
                    return i
                }
                , r = "^" + t.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[lz]|'.*?')/g, function(t) {
                    var e = t.length;
                    switch (t.charAt(0).toLowerCase()) {
                    case "h":
                        return 1 === e ? "(\\d?\\d)" : "(\\d{" + e + "})";
                    case "m":
                        return 1 === e ? "(\\d?\\d)" : "(\\d{" + e + "})";
                    case "s":
                        return 1 === e ? "(\\d?\\d)" : "(\\d{" + e + "})";
                    case "l":
                        return "(\\d?\\d?\\d)";
                    case "z":
                        return "(z|[-+]\\d\\d:?\\d\\d|\\S+)?";
                    case "t":
                        return s(i.amNames, i.pmNames);
                    default:
                        return "(" + t.replace(/\'/g, "").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g, function(t) {
                            return "\\" + t
                        }
                        ) + ")?"
                    }
                }
                ).replace(/\s/g, "\\s?") + i.timeSuffix + "$", o = a(t), l = "";
                n = e.match(new RegExp(r,"i"));
                var c = {
                    hour: 0,
                    minute: 0,
                    second: 0,
                    millisec: 0
                };
                if (n) {
                    if (-1 !== o.t && (void 0 === n[o.t] || 0 === n[o.t].length ? (l = "",
                    c.ampm = "") : (l = -1 !== $.inArray(n[o.t].toUpperCase(), i.amNames) ? "AM" : "PM",
                    c.ampm = i["AM" == l ? "amNames" : "pmNames"][0])),
                    -1 !== o.h && (c.hour = "AM" == l && "12" == n[o.h] ? 0 : "PM" == l && "12" != n[o.h] ? parseInt(n[o.h], 10) + 12 : Number(n[o.h])),
                    -1 !== o.m && (c.minute = Number(n[o.m])),
                    -1 !== o.s && (c.second = Number(n[o.s])),
                    -1 !== o.l && (c.millisec = Number(n[o.l])),
                    -1 !== o.z && void 0 !== n[o.z]) {
                        var d = n[o.z].toUpperCase();
                        switch (d.length) {
                        case 1:
                            d = i.timezoneIso8601 ? "Z" : "+0000";
                            break;
                        case 5:
                            i.timezoneIso8601 && (d = "0000" == d.substring(1) ? "Z" : d.substring(0, 3) + ":" + d.substring(3));
                            break;
                        case 6:
                            i.timezoneIso8601 ? "00:00" == d.substring(1) && (d = "Z") : d = "Z" == d || "00:00" == d.substring(1) ? "+0000" : d.replace(/:/, "")
                        }
                        c.timezone = d
                    }
                    return c
                }
                return !1
            }
              , a = function(t, e, i) {
                try {
                    var n = new Date("2012-01-01 " + e);
                    if (isNaN(n.getTime()) && (n = new Date("2012-01-01T" + e),
                    isNaN(n.getTime()) && (n = new Date("01/01/2012 " + e),
                    isNaN(n.getTime()))))
                        throw "Unable to parse time with native Date: " + e;
                    return {
                        hour: n.getHours(),
                        minute: n.getMinutes(),
                        second: n.getSeconds(),
                        millisec: n.getMilliseconds(),
                        timezone: $.timepicker.timeZoneOffsetString(n)
                    }
                } catch (a) {
                    try {
                        return s(t, e, i)
                    } catch (r) {
                        $.timepicker.log("Unable to parse \ntimeString: " + e + "\ntimeFormat: " + t)
                    }
                }
                return !1
            }
            ;
            return "function" == typeof n.parse ? n.parse(t, e, n) : "loose" === n.parse ? a(t, e, n) : s(t, e, n)
        }
        ,
        $.datepicker.formatTime = function(t, e, i) {
            i = i || {},
            i = $.extend({}, $.timepicker._defaults, i),
            e = $.extend({
                hour: 0,
                minute: 0,
                second: 0,
                millisec: 0,
                timezone: "+0000"
            }, e);
            var n = t
              , s = i.amNames[0]
              , a = parseInt(e.hour, 10);
            return a > 11 && (s = i.pmNames[0]),
            n = n.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[lz]|('.*?'|".*?"))/g, function(t) {
                switch (t) {
                case "HH":
                    return ("0" + a).slice(-2);
                case "H":
                    return a;
                case "hh":
                    return ("0" + convert24to12(a)).slice(-2);
                case "h":
                    return convert24to12(a);
                case "mm":
                    return ("0" + e.minute).slice(-2);
                case "m":
                    return e.minute;
                case "ss":
                    return ("0" + e.second).slice(-2);
                case "s":
                    return e.second;
                case "l":
                    return ("00" + e.millisec).slice(-3);
                case "z":
                    return null  === e.timezone ? i.defaultTimezone : e.timezone;
                case "T":
                    return s.charAt(0).toUpperCase();
                case "TT":
                    return s.toUpperCase();
                case "t":
                    return s.charAt(0).toLowerCase();
                case "tt":
                    return s.toLowerCase();
                default:
                    return t.replace(/\'/g, "") || "'"
                }
            }
            ),
            n = $.trim(n)
        }
        ,
        $.datepicker._base_selectDate = $.datepicker._selectDate,
        $.datepicker._selectDate = function(t, e) {
            var i = this._getInst($(t)[0])
              , n = this._get(i, "timepicker");
            n ? (n._limitMinMaxDateTime(i, !0),
            i.inline = i.stay_open = !0,
            this._base_selectDate(t, e),
            i.inline = i.stay_open = !1,
            this._notifyChange(i),
            this._updateDatepicker(i)) : this._base_selectDate(t, e)
        }
        ,
        $.datepicker._base_updateDatepicker = $.datepicker._updateDatepicker,
        $.datepicker._updateDatepicker = function(t) {
            var e = t.input[0];
            if (!($.datepicker._curInst && $.datepicker._curInst != t && $.datepicker._datepickerShowing && $.datepicker._lastInput != e || "boolean" == typeof t.stay_open && t.stay_open !== !1)) {
                this._base_updateDatepicker(t);
                var i = this._get(t, "timepicker");
                i && i._addTimePicker(t)
            }
        }
        ,
        $.datepicker._base_doKeyPress = $.datepicker._doKeyPress,
        $.datepicker._doKeyPress = function(t) {
            var e = $.datepicker._getInst(t.target)
              , i = $.datepicker._get(e, "timepicker");
            if (i && $.datepicker._get(e, "constrainInput")) {
                var n = useAmpm(i._defaults.timeFormat)
                  , s = $.datepicker._possibleChars($.datepicker._get(e, "dateFormat"))
                  , a = i._defaults.timeFormat.toString().replace(/[hms]/g, "").replace(/TT/g, n ? "APM" : "").replace(/Tt/g, n ? "AaPpMm" : "").replace(/tT/g, n ? "AaPpMm" : "").replace(/T/g, n ? "AP" : "").replace(/tt/g, n ? "apm" : "").replace(/t/g, n ? "ap" : "") + " " + i._defaults.separator + i._defaults.timeSuffix + (i._defaults.showTimezone ? i._defaults.timezoneList.join("") : "") + i._defaults.amNames.join("") + i._defaults.pmNames.join("") + s
                  , r = String.fromCharCode(void 0 === t.charCode ? t.keyCode : t.charCode);
                return t.ctrlKey || " " > r || !s || a.indexOf(r) > -1
            }
            return $.datepicker._base_doKeyPress(t)
        }
        ,
        $.datepicker._base_updateAlternate = $.datepicker._updateAlternate,
        $.datepicker._updateAlternate = function(t) {
            var e = this._get(t, "timepicker");
            if (e) {
                var i = e._defaults.altField;
                if (i) {
                    var n = (e._defaults.altFormat || e._defaults.dateFormat,
                    this._getDate(t))
                      , s = $.datepicker._getFormatConfig(t)
                      , a = ""
                      , r = e._defaults.altSeparator ? e._defaults.altSeparator : e._defaults.separator
                      , o = e._defaults.altTimeSuffix ? e._defaults.altTimeSuffix : e._defaults.timeSuffix
                      , l = null  !== e._defaults.altTimeFormat ? e._defaults.altTimeFormat : e._defaults.timeFormat;
                    a += $.datepicker.formatTime(l, e, e._defaults) + o,
                    e._defaults.timeOnly || e._defaults.altFieldTimeOnly || null  === n || (a = e._defaults.altFormat ? $.datepicker.formatDate(e._defaults.altFormat, n, s) + r + a : e.formattedDate + r + a),
                    $(i).val(a)
                }
            } else
                $.datepicker._base_updateAlternate(t)
        }
        ,
        $.datepicker._base_doKeyUp = $.datepicker._doKeyUp,
        $.datepicker._doKeyUp = function(t) {
            var e = $.datepicker._getInst(t.target)
              , i = $.datepicker._get(e, "timepicker");
            if (i && i._defaults.timeOnly && e.input.val() != e.lastVal)
                try {
                    $.datepicker._updateDatepicker(e)
                } catch (n) {
                    $.timepicker.log(n)
                }
            return $.datepicker._base_doKeyUp(t)
        }
        ,
        $.datepicker._base_gotoToday = $.datepicker._gotoToday,
        $.datepicker._gotoToday = function(t) {
            var e = this._getInst($(t)[0])
              , i = e.dpDiv;
            this._base_gotoToday(t);
            var n = this._get(e, "timepicker");
            selectLocalTimeZone(n);
            var s = new Date;
            this._setTime(e, s),
            $(".ui-datepicker-today", i).click()
        }
        ,
        $.datepicker._disableTimepickerDatepicker = function(t) {
            var e = this._getInst(t);
            if (e) {
                var i = this._get(e, "timepicker");
                $(t).datepicker("getDate"),
                i && (i._defaults.showTimepicker = !1,
                i._updateDateTime(e))
            }
        }
        ,
        $.datepicker._enableTimepickerDatepicker = function(t) {
            var e = this._getInst(t);
            if (e) {
                var i = this._get(e, "timepicker");
                $(t).datepicker("getDate"),
                i && (i._defaults.showTimepicker = !0,
                i._addTimePicker(e),
                i._updateDateTime(e))
            }
        }
        ,
        $.datepicker._setTime = function(t, e) {
            var i = this._get(t, "timepicker");
            if (i) {
                var n = i._defaults;
                i.hour = e ? e.getHours() : n.hour,
                i.minute = e ? e.getMinutes() : n.minute,
                i.second = e ? e.getSeconds() : n.second,
                i.millisec = e ? e.getMilliseconds() : n.millisec,
                i._limitMinMaxDateTime(t, !0),
                i._onTimeChange(),
                i._updateDateTime(t)
            }
        }
        ,
        $.datepicker._setTimeDatepicker = function(t, e, i) {
            var n = this._getInst(t);
            if (n) {
                var s = this._get(n, "timepicker");
                if (s) {
                    this._setDateFromField(n);
                    var a;
                    e && ("string" == typeof e ? (s._parseTime(e, i),
                    a = new Date,
                    a.setHours(s.hour, s.minute, s.second, s.millisec)) : a = new Date(e.getTime()),
                    "Invalid Date" == a.toString() && (a = void 0),
                    this._setTime(n, a))
                }
            }
        }
        ,
        $.datepicker._base_setDateDatepicker = $.datepicker._setDateDatepicker,
        $.datepicker._setDateDatepicker = function(t, e) {
            var i = this._getInst(t);
            if (i) {
                var n = e instanceof Date ? new Date(e.getTime()) : e;
                this._updateDatepicker(i),
                this._base_setDateDatepicker.apply(this, arguments),
                this._setTimeDatepicker(t, n, !0)
            }
        }
        ,
        $.datepicker._base_getDateDatepicker = $.datepicker._getDateDatepicker,
        $.datepicker._getDateDatepicker = function(t, e) {
            var i = this._getInst(t);
            if (i) {
                var n = this._get(i, "timepicker");
                if (n) {
                    void 0 === i.lastVal && this._setDateFromField(i, e);
                    var s = this._getDate(i);
                    return s && n._parseTime($(t).val(), n.timeOnly) && s.setHours(n.hour, n.minute, n.second, n.millisec),
                    s
                }
                return this._base_getDateDatepicker(t, e)
            }
        }
        ,
        $.datepicker._base_parseDate = $.datepicker.parseDate,
        $.datepicker.parseDate = function(t, e, i) {
            var n;
            try {
                n = this._base_parseDate(t, e, i)
            } catch (s) {
                n = this._base_parseDate(t, e.substring(0, e.length - (s.length - s.indexOf(":") - 2)), i),
                $.timepicker.log("Error parsing the date string: " + s + "\ndate string = " + e + "\ndate format = " + t)
            }
            return n
        }
        ,
        $.datepicker._base_formatDate = $.datepicker._formatDate,
        $.datepicker._formatDate = function(t) {
            var e = this._get(t, "timepicker");
            return e ? (e._updateDateTime(t),
            e.$input.val()) : this._base_formatDate(t)
        }
        ,
        $.datepicker._base_optionDatepicker = $.datepicker._optionDatepicker,
        $.datepicker._optionDatepicker = function(t, e, i) {
            var n, s = this._getInst(t);
            if (!s)
                return null ;
            var a = this._get(s, "timepicker");
            if (a) {
                var r, o = null , l = null , c = null , d = a._defaults.evnts, h = {};
                if ("string" == typeof e) {
                    if ("minDate" === e || "minDateTime" === e)
                        o = i;
                    else if ("maxDate" === e || "maxDateTime" === e)
                        l = i;
                    else if ("onSelect" === e)
                        c = i;
                    else if (d.hasOwnProperty(e)) {
                        if ("undefined" == typeof i)
                            return d[e];
                        h[e] = i,
                        n = {}
                    }
                } else if ("object" == typeof e) {
                    e.minDate ? o = e.minDate : e.minDateTime ? o = e.minDateTime : e.maxDate ? l = e.maxDate : e.maxDateTime && (l = e.maxDateTime);
                    for (r in d)
                        d.hasOwnProperty(r) && e[r] && (h[r] = e[r])
                }
                for (r in h)
                    h.hasOwnProperty(r) && (d[r] = h[r],
                    n || (n = $.extend({}, e)),
                    delete n[r]);
                if (n && isEmptyObject(n))
                    return;
                o ? (o = 0 === o ? new Date : new Date(o),
                a._defaults.minDate = o,
                a._defaults.minDateTime = o) : l ? (l = 0 === l ? new Date : new Date(l),
                a._defaults.maxDate = l,
                a._defaults.maxDateTime = l) : c && (a._defaults.onSelect = c)
            }
            return void 0 === i ? this._base_optionDatepicker.call($.datepicker, t, e) : this._base_optionDatepicker.call($.datepicker, t, n || e, i)
        }
        ;
        var isEmptyObject = function(t) {
            var e;
            for (e in t)
                if (t.hasOwnProperty(t))
                    return !1;
            return !0
        }
          , extendRemove = function(t, e) {
            $.extend(t, e);
            for (var i in e)
                (null  === e[i] || void 0 === e[i]) && (t[i] = e[i]);
            return t
        }
          , useAmpm = function(t) {
            return -1 !== t.indexOf("t") && -1 !== t.indexOf("h")
        }
          , convert24to12 = function(t) {
            return t > 12 && (t -= 12),
            0 == t && (t = 12),
            String(t)
        }
          , splitDateTime = function(t, e, i, n) {
            try {
                var s = n && n.separator ? n.separator : $.timepicker._defaults.separator
                  , a = n && n.timeFormat ? n.timeFormat : $.timepicker._defaults.timeFormat
                  , r = a.split(s)
                  , o = r.length
                  , l = e.split(s)
                  , c = l.length;
                if (c > 1)
                    return [l.splice(0, c - o).join(s), l.splice(0, o).join(s)]
            } catch (d) {
                if ($.timepicker.log("Could not split the date from the time. Please check the following datetimepicker options\nthrown error: " + d + "\ndateTimeString" + e + "\ndateFormat = " + t + "\nseparator = " + n.separator + "\ntimeFormat = " + n.timeFormat),
                d.indexOf(":") >= 0) {
                    {
                        var h = e.length - (d.length - d.indexOf(":") - 2);
                        e.substring(h)
                    }
                    return [$.trim(e.substring(0, h)), $.trim(e.substring(h))]
                }
                throw d
            }
            return [e, ""]
        }
          , parseDateTimeInternal = function(t, e, i, n, s) {
            var a, r = splitDateTime(t, i, n, s);
            if (a = $.datepicker._base_parseDate(t, r[0], n),
            "" !== r[1]) {
                var o = r[1]
                  , l = $.datepicker.parseTime(e, o, s);
                if (null  === l)
                    throw "Wrong time format";
                return {
                    date: a,
                    timeObj: l
                }
            }
            return {
                date: a
            }
        }
          , selectLocalTimeZone = function(t, e) {
            if (t && t.timezone_select) {
                t._defaults.useLocalTimezone = !0;
                var i = "undefined" != typeof e ? e : new Date
                  , n = $.timepicker.timeZoneOffsetString(i);
                t._defaults.timezoneIso8601 && (n = n.substring(0, 3) + ":" + n.substring(3)),
                t.timezone_select.val(n)
            }
        }
        ;
        $.timepicker = new Timepicker,
        $.timepicker.timeZoneOffsetString = function(t) {
            var e = -1 * t.getTimezoneOffset()
              , i = e % 60
              , n = (e - i) / 60;
            return (e >= 0 ? "+" : "-") + ("0" + (101 * n).toString()).slice(-2) + ("0" + (101 * i).toString()).slice(-2)
        }
        ,
        $.timepicker.timeRange = function(t, e, i) {
            return $.timepicker.handleRange("timepicker", t, e, i)
        }
        ,
        $.timepicker.dateTimeRange = function(t, e, i) {
            $.timepicker.dateRange(t, e, i, "datetimepicker")
        }
        ,
        $.timepicker.dateRange = function(t, e, i, n) {
            n = n || "datepicker",
            $.timepicker.handleRange(n, t, e, i)
        }
        ,
        $.timepicker.handleRange = function(t, e, i, n) {
            function s(t, n, s) {
                n.val() && new Date(e.val()) > new Date(i.val()) && n.val(s)
            }
            function a(e, i, n) {
                if ($(e).val()) {
                    var s = $(e)[t].call($(e), "getDate");
                    s.getTime && $(i)[t].call($(i), "option", n, s)
                }
            }
            return $.fn[t].call(e, $.extend({
                onClose: function(t) {
                    s(this, i, t)
                },
                onSelect: function() {
                    a(this, i, "minDate")
                }
            }, n, n.start)),
            $.fn[t].call(i, $.extend({
                onClose: function(t) {
                    s(this, e, t)
                },
                onSelect: function() {
                    a(this, e, "maxDate")
                }
            }, n, n.end)),
            "timepicker" != t && n.reformat && $([e, i]).each(function() {
                var e = $(this)[t].call($(this), "option", "dateFormat")
                  , i = new Date($(this).val());
                $(this).val() && i && $(this).val($.datepicker.formatDate(e, i))
            }
            ),
            s(e, i, e.val()),
            a(e, i, "minDate"),
            a(i, e, "maxDate"),
            $([e.get(0), i.get(0)])
        }
        ,
        $.timepicker.log = function(t) {
            window.console && console.log(t)
        }
        ,
        $.timepicker.version = "1.2"
    }
}
(jQuery),
function(t) {
    t.timepicker.regional.ru = {
        timeOnlyTitle: "Выберите время",
        timeText: "Время",
        hourText: "Часы",
        minuteText: "Минуты",
        secondText: "Секунды",
        millisecText: "Миллисекунды",
        timezoneText: "Часовой пояс",
        currentText: "Сейчас",
        closeText: "Закрыть",
        timeFormat: "HH:mm",
        amNames: ["AM", "A"],
        pmNames: ["PM", "P"],
        isRTL: !1
    },
    t.timepicker.setDefaults(t.timepicker.regional.ru)
}
(jQuery),
function(t) {
    t.fn.inputlimiter = function(e) {
        {
            var i = t.extend({}, t.fn.inputlimiter.defaults, e);
            t(this)
        }
        i.boxAttach && !t("#" + i.boxId).length && (t("<div/>").appendTo("body").attr({
            id: i.boxId,
            "class": i.boxClass
        }).css({
            position: "absolute"
        }).hide(),
        t.fn.bgiframe && t("#" + i.boxId).bgiframe());
        var n = function() {
            var e = t(this)
              , n = r(e.val());
            !i.allowExceed && n > i.limit && e.val(o(e.val())),
            i.boxAttach && t("#" + i.boxId).css({
                right: t(window).width() - (e.offset().left + e.outerWidth()) + 8 + "px",
                top: e.offset().top + 8 + "px",
                "z-index": 2e3
            });
            var s = i.limit - n > 0 ? i.limit - n : 0
              , a = i.remTextFilter(i, s)
              , l = i.limitTextFilter(i);
            if (i.limitTextShow) {
                t("#" + i.boxId).html(a + " " + l);
                var c = t("<span/>").appendTo("body").attr({
                    id: "19cc9195583bfae1fad88e19d443be7a",
                    "class": i.boxClass
                }).html(a + " " + l).innerWidth();
                t("#19cc9195583bfae1fad88e19d443be7a").remove(),
                c > t("#" + i.boxId).innerWidth() && t("#" + i.boxId).html(a + "<br />" + l),
                t("#" + i.boxId).show()
            } else
                t("#" + i.boxId).html(a).show()
        }
          , s = function(e) {
            var n = r(t(this).val());
            if (!i.allowExceed && n > i.limit) {
                var s = e.ctrlKey || e.altKey || e.metaKey;
                if (!s && e.which >= 32 && e.which <= 122 && this.selectionStart === this.selectionEnd)
                    return !1
            }
        }
          , a = function() {
            var e = t(this);
            if (count = r(e.val()),
            !i.allowExceed && count > i.limit && e.val(o(e.val())),
            i.boxAttach)
                t("#" + i.boxId).fadeOut("fast");
            else if (i.remTextHideOnBlur) {
                var n = i.limitText;
                n = n.replace(/\%n/g, i.limit),
                n = n.replace(/\%s/g, 1 === i.limit ? "" : "s"),
                t("#" + i.boxId).html(n)
            }
        }
          , r = function(e) {
            if ("words" === i.limitBy.toLowerCase())
                return e.length > 0 ? t.trim(e).replace(/\ +(?= )/g, "").split(" ").length : 0;
            var n = e.length
              , s = e.match(/\n/g);
            return s && i.lineReturnCount > 1 && (n += s.length * (i.lineReturnCount - 1)),
            n
        }
          , o = function(e) {
            return "words" === i.limitBy.toLowerCase() ? t.trim(e).replace(/\ +(?= )/g, "").split(" ").splice(0, i.limit).join(" ") + " " : e.substring(0, i.limit)
        }
        ;
        t(this).each(function() {
            var r = t(this);
            (!e || !e.limit) && i.useMaxlength && parseInt(r.attr("maxlength")) > 0 && parseInt(r.attr("maxlength")) != i.limit ? r.inputlimiter(t.extend({}, i, {
                limit: parseInt(r.attr("maxlength"))
            })) : (!i.allowExceed && i.useMaxlength && "characters" === i.limitBy.toLowerCase() && r.attr("maxlength", i.limit),
            r.unbind(".inputlimiter"),
            r.bind("keyup.inputlimiter", n),
            r.bind("keypress.inputlimiter", s),
            r.bind("blur.inputlimiter", a))
        }
        )
    }
    ,
    t.fn.inputlimiter.remtextfilter = function(t, e) {
        var i = t.remText;
        return 0 === e && null  !== t.remFullText && (i = t.remFullText),
        i = i.replace(/\%n/g, e),
        i = i.replace(/\%s/g, t.zeroPlural ? 1 === e ? "" : "s" : 1 >= e ? "" : "s")
    }
    ,
    t.fn.inputlimiter.limittextfilter = function(t) {
        var e = t.limitText;
        return e = e.replace(/\%n/g, t.limit),
        e = e.replace(/\%s/g, t.limit <= 1 ? "" : "s")
    }
    ,
    t.fn.inputlimiter.defaults = {
        limit: 255,
        boxAttach: !0,
        boxId: "limiterBox",
        boxClass: "limiterBox",
        remText: "%n character%s remaining.",
        remTextFilter: t.fn.inputlimiter.remtextfilter,
        remTextHideOnBlur: !0,
        remFullText: null ,
        limitTextShow: !0,
        limitText: "Максимум %n символов.",
        limitTextFilter: t.fn.inputlimiter.limittextfilter,
        zeroPlural: !0,
        allowExceed: !1,
        useMaxlength: !0,
        limitBy: "characters",
        lineReturnCount: 1
    }
}
(jQuery),
function(t) {
    "use strict";
    var e = {
        init: function(i) {
            var n = this;
            return n.data("jqv") && null  != n.data("jqv") || (i = e._saveOptions(n, i),
            t(document).on("click", ".formError", function() {
                t(this).fadeOut(150, function() {
                    t(this).parent(".formErrorOuter").remove(),
                    t(this).remove()
                }
                )
            }
            )),
            this
        },
        attach: function(i) {
            var n, s = this;
            return n = i ? e._saveOptions(s, i) : s.data("jqv"),
            n.validateAttribute = s.find("[data-validation-engine*=validate]").length ? "data-validation-engine" : "class",
            n.binded && (s.on(n.validationEventTrigger, "[" + n.validateAttribute + "*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)", e._onFieldEvent),
            s.on("click", "[" + n.validateAttribute + "*=validate][type=checkbox],[" + n.validateAttribute + "*=validate][type=radio]", e._onFieldEvent),
            s.on(n.validationEventTrigger, "[" + n.validateAttribute + "*=validate][class*=datepicker]", {
                delay: 300
            }, e._onFieldEvent)),
            n.autoPositionUpdate && t(window).bind("resize", {
                noAnimation: !0,
                formElem: s
            }, e.updatePromptsPosition),
            s.on("click", "a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']", e._submitButtonClick),
            s.removeData("jqv_submitButton"),
            s.on("submit", e._onSubmitEvent),
            this
        },
        detach: function() {
            var i = this
              , n = i.data("jqv");
            return i.find("[" + n.validateAttribute + "*=validate]").not("[type=checkbox]").off(n.validationEventTrigger, e._onFieldEvent),
            i.find("[" + n.validateAttribute + "*=validate][type=checkbox],[class*=validate][type=radio]").off("click", e._onFieldEvent),
            i.off("submit", e.onAjaxFormComplete),
            i.die("submit", e.onAjaxFormComplete),
            i.removeData("jqv"),
            i.off("click", "a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']", e._submitButtonClick),
            i.removeData("jqv_submitButton"),
            n.autoPositionUpdate && t(window).unbind("resize", e.updatePromptsPosition),
            this
        },
        validate: function() {
            var i = t(this)
              , n = null ;
            if (!i.is("form") && !i.hasClass("validationEngineContainer") || i.hasClass("validating"))
                if (i.is("form") || i.hasClass("validationEngineContainer"))
                    i.removeClass("validating");
                else {
                    var s = i.closest("form, .validationEngineContainer")
                      , a = s.data("jqv") ? s.data("jqv") : t.validationEngine.defaults
                      , n = e._validateField(i, a);
                    n && a.onFieldSuccess ? a.onFieldSuccess() : a.onFieldFailure && a.InvalidFields.length > 0 && a.onFieldFailure()
                }
            else {
                i.addClass("validating");
                var a = i.data("jqv")
                  , n = e._validateFields(this);
                setTimeout(function() {
                    i.removeClass("validating")
                }
                , 100),
                n && a.onSuccess ? a.onSuccess() : !n && a.onFailure && a.onFailure()
            }
            return a.onValidationComplete ? !!a.onValidationComplete(s, n) : n
        },
        updatePromptsPosition: function(i) {
            if (i && this == window)
                var n = i.data.formElem
                  , s = i.data.noAnimation;
            else
                var n = t(this.closest("form, .validationEngineContainer"));
            var a = n.data("jqv");
            return n.find("[" + a.validateAttribute + "*=validate]").not(":disabled").each(function() {
                var i = t(this);
                a.prettySelect && i.is(":hidden") && (i = n.find("#" + a.usePrefix + i.attr("id") + a.useSuffix));
                var r = e._getPrompt(i)
                  , o = t(r).find(".formErrorContent").html();
                r && e._updatePrompt(i, t(r), o, void 0, !1, a, s)
            }
            ),
            this
        },
        showPrompt: function(t, i, n, s) {
            var a = this.closest("form, .validationEngineContainer")
              , r = a.data("jqv");
            return r || (r = e._saveOptions(this, r)),
            n && (r.promptPosition = n),
            r.showArrow = 1 == s,
            e._showPrompt(this, t, i, !1, r),
            this
        },
        hide: function() {
            var i, n = t(this).closest("form, .validationEngineContainer"), s = n.data("jqv"), a = s && s.fadeDuration ? s.fadeDuration : .3;
            return i = t(this).is("form") || t(this).hasClass("validationEngineContainer") ? "parentForm" + e._getClassName(t(this).attr("id")) : e._getClassName(t(this).attr("id")) + "formError",
            t("." + i).fadeTo(a, .3, function() {
                t(this).parent(".formErrorOuter").remove(),
                t(this).remove()
            }
            ),
            this
        },
        hideAll: function() {
            var e = this
              , i = e.data("jqv")
              , n = i ? i.fadeDuration : 300;
            return t(".formError").fadeTo(n, 300, function() {
                t(this).parent(".formErrorOuter").remove(),
                t(this).remove()
            }
            ),
            this
        },
        _onFieldEvent: function(i) {
            var n = t(this)
              , s = n.closest("form, .validationEngineContainer")
              , a = s.data("jqv");
            a.eventTrigger = "field",
            window.setTimeout(function() {
                e._validateField(n, a),
                0 == a.InvalidFields.length && a.onFieldSuccess ? a.onFieldSuccess() : a.InvalidFields.length > 0 && a.onFieldFailure && a.onFieldFailure()
            }
            , i.data ? i.data.delay : 0)
        },
        _onSubmitEvent: function() {
            var i = t(this)
              , n = i.data("jqv");
            if (i.data("jqv_submitButton")) {
                var s = t("#" + i.data("jqv_submitButton"));
                if (s && s.length > 0 && (s.hasClass("validate-skip") || "true" == s.attr("data-validation-engine-skip")))
                    return !0
            }
            n.eventTrigger = "submit";
            var a = e._validateFields(i);
            return a && n.ajaxFormValidation ? (e._validateFormWithAjax(i, n),
            !1) : n.onValidationComplete ? !!n.onValidationComplete(i, a) : a
        },
        _checkAjaxStatus: function(e) {
            var i = !0;
            return t.each(e.ajaxValidCache, function(t, e) {
                return e ? void 0 : (i = !1,
                !1)
            }
            ),
            i
        },
        _checkAjaxFieldStatus: function(t, e) {
            return 1 == e.ajaxValidCache[t]
        },
        _validateFields: function(i) {
            var n = i.data("jqv")
              , s = !1;
            i.trigger("jqv.form.validating");
            var a = null ;
            if (i.find("[" + n.validateAttribute + "*=validate]").not(":disabled").each(function() {
                var r = t(this)
                  , o = [];
                if (t.inArray(r.attr("name"), o) < 0) {
                    if (s |= e._validateField(r, n),
                    s && null  == a && (a = r.is(":hidden") && n.prettySelect ? r = i.find("#" + n.usePrefix + e._jqSelector(r.attr("id")) + n.useSuffix) : r),
                    n.doNotShowAllErrosOnSubmit)
                        return !1;
                    if (o.push(r.attr("name")),
                    1 == n.showOneMessage && s)
                        return !1
                }
            }
            ),
            i.trigger("jqv.form.result", [s]),
            s) {
                if (n.scroll) {
                    var r = a.offset().top
                      , o = a.offset().left
                      , l = n.promptPosition;
                    if ("string" == typeof l && -1 != l.indexOf(":") && (l = l.substring(0, l.indexOf(":"))),
                    "bottomRight" != l && "bottomLeft" != l) {
                        var c = e._getPrompt(a);
                        c && (r = c.offset().top)
                    }
                    if (n.scrollOffset && (r -= n.scrollOffset),
                    n.isOverflown) {
                        var d = t(n.overflownDIV);
                        if (!d.length)
                            return !1;
                        var h = d.scrollTop()
                          , u = -parseInt(d.offset().top);
                        r += h + u - 5;
                        var p = t(n.overflownDIV + ":not(:animated)");
                        p.animate({
                            scrollTop: r
                        }, 1100, function() {
                            n.focusFirstField && a.focus()
                        }
                        )
                    } else
                        t("html, body").animate({
                            scrollTop: r
                        }, 1100, function() {
                            n.focusFirstField && a.focus()
                        }
                        ),
                        t("html, body").animate({
                            scrollLeft: o
                        }, 1100)
                } else
                    n.focusFirstField && a.focus();
                return !1
            }
            return !0
        },
        _validateFormWithAjax: function(i, n) {
            var s = i.serialize()
              , a = n.ajaxFormValidationMethod ? n.ajaxFormValidationMethod : "GET"
              , r = n.ajaxFormValidationURL ? n.ajaxFormValidationURL : i.attr("action")
              , o = n.dataType ? n.dataType : "json";
            t.ajax({
                type: a,
                url: r,
                cache: !1,
                dataType: o,
                data: s,
                form: i,
                methods: e,
                options: n,
                beforeSend: function() {
                    return n.onBeforeAjaxFormValidation(i, n)
                },
                error: function(t, i) {
                    e._ajaxError(t, i)
                },
                success: function(s) {
                    if ("json" == o && s !== !0) {
                        for (var a = !1, r = 0; r < s.length; r++) {
                            var l = s[r]
                              , c = l[0]
                              , d = t(t("#" + c)[0]);
                            if (1 == d.length) {
                                var h = l[2];
                                if (1 == l[1])
                                    if ("" != h && h) {
                                        if (n.allrules[h]) {
                                            var u = n.allrules[h].alertTextOk;
                                            u && (h = u)
                                        }
                                        n.showPrompts && e._showPrompt(d, h, "pass", !1, n, !0)
                                    } else
                                        e._closePrompt(d);
                                else {
                                    if (a |= !0,
                                    n.allrules[h]) {
                                        var u = n.allrules[h].alertText;
                                        u && (h = u)
                                    }
                                    n.showPrompts && e._showPrompt(d, h, "", !1, n, !0)
                                }
                            }
                        }
                        n.onAjaxFormComplete(!a, i, s, n)
                    } else
                        n.onAjaxFormComplete(!0, i, s, n)
                }
            })
        },
        _validateField: function(i, n, s) {
            if (i.attr("id") || (i.attr("id", "form-validation-field-" + t.validationEngine.fieldIdCounter),
            ++t.validationEngine.fieldIdCounter),
            !n.validateNonVisibleFields && (i.is(":hidden") && !n.prettySelect || i.parent().is(":hidden")))
                return !1;
            var a = i.attr(n.validateAttribute)
              , r = /validate\[(.*)\]/.exec(a);
            if (!r)
                return !1;
            var o = r[1]
              , l = o.split(/\[|,|\]/)
              , c = !1
              , d = i.attr("name")
              , h = ""
              , u = ""
              , p = !1
              , f = !1;
            n.isError = !1,
            n.showArrow = !0,
            n.maxErrorsPerField > 0 && (f = !0);
            for (var m = t(i.closest("form, .validationEngineContainer")), g = 0; g < l.length; g++)
                l[g] = l[g].replace(" ", ""),
                "" === l[g] && delete l[g];
            for (var g = 0, v = 0; g < l.length; g++) {
                if (f && v >= n.maxErrorsPerField) {
                    if (!p) {
                        var b = t.inArray("required", l);
                        p = -1 != b && b >= g
                    }
                    break
                }
                var _ = void 0;
                switch (l[g]) {
                case "required":
                    p = !0,
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._required);
                    break;
                case "custom":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._custom);
                    break;
                case "groupRequired":
                    var y = "[" + n.validateAttribute + "*=" + l[g + 1] + "]"
                      , x = m.find(y).eq(0);
                    x[0] != i[0] && (e._validateField(x, n, s),
                    n.showArrow = !0),
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._groupRequired),
                    _ && (p = !0),
                    n.showArrow = !1;
                    break;
                case "ajax":
                    _ = e._ajax(i, l, g, n),
                    _ && (u = "load");
                    break;
                case "minSize":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._minSize);
                    break;
                case "maxSize":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._maxSize);
                    break;
                case "min":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._min);
                    break;
                case "max":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._max);
                    break;
                case "past":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._past);
                    break;
                case "future":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._future);
                    break;
                case "dateRange":
                    var y = "[" + n.validateAttribute + "*=" + l[g + 1] + "]";
                    n.firstOfGroup = m.find(y).eq(0),
                    n.secondOfGroup = m.find(y).eq(1),
                    (n.firstOfGroup[0].value || n.secondOfGroup[0].value) && (_ = e._getErrorMessage(m, i, l[g], l, g, n, e._dateRange)),
                    _ && (p = !0),
                    n.showArrow = !1;
                    break;
                case "dateTimeRange":
                    var y = "[" + n.validateAttribute + "*=" + l[g + 1] + "]";
                    n.firstOfGroup = m.find(y).eq(0),
                    n.secondOfGroup = m.find(y).eq(1),
                    (n.firstOfGroup[0].value || n.secondOfGroup[0].value) && (_ = e._getErrorMessage(m, i, l[g], l, g, n, e._dateTimeRange)),
                    _ && (p = !0),
                    n.showArrow = !1;
                    break;
                case "maxCheckbox":
                    i = t(m.find("input[name='" + d + "']")),
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._maxCheckbox);
                    break;
                case "minCheckbox":
                    i = t(m.find("input[name='" + d + "']")),
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._minCheckbox);
                    break;
                case "equals":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._equals);
                    break;
                case "funcCall":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._funcCall);
                    break;
                case "creditCard":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._creditCard);
                    break;
                case "condRequired":
                    _ = e._getErrorMessage(m, i, l[g], l, g, n, e._condRequired),
                    void 0 !== _ && (p = !0)
                }
                var w = !1;
                if ("object" == typeof _)
                    switch (_.status) {
                    case "_break":
                        w = !0;
                        break;
                    case "_error":
                        _ = _.message;
                        break;
                    case "_error_no_prompt":
                        return !0
                    }
                if (w)
                    break;
                "string" == typeof _ && (h += _ + "<br/>",
                n.isError = !0,
                v++)
            }
            !p && !i.val() && i.val().length < 1 && (n.isError = !1);
            var k = i.prop("type")
              , C = i.data("promptPosition") || n.promptPosition;
            ("radio" == k || "checkbox" == k) && m.find("input[name='" + d + "']").size() > 1 && (i = t("inline" === C ? m.find("input[name='" + d + "'][type!=hidden]:last") : m.find("input[name='" + d + "'][type!=hidden]:first")),
            n.showArrow = !1),
            i.is(":hidden") && n.prettySelect && (i = m.find("#" + n.usePrefix + e._jqSelector(i.attr("id")) + n.useSuffix)),
            n.isError && n.showPrompts ? e._showPrompt(i, h, u, !1, n) : c || e._closePrompt(i),
            c || i.trigger("jqv.field.result", [i, n.isError, h]);
            var T = t.inArray(i[0], n.InvalidFields);
            return -1 == T ? n.isError && n.InvalidFields.push(i[0]) : n.isError || n.InvalidFields.splice(T, 1),
            e._handleStatusCssClasses(i, n),
            n.isError && n.onFieldFailure && n.onFieldFailure(i),
            !n.isError && n.onFieldSuccess && n.onFieldSuccess(i),
            n.isError
        },
        _handleStatusCssClasses: function(t, e) {
            e.addSuccessCssClassToField && t.removeClass(e.addSuccessCssClassToField),
            e.addFailureCssClassToField && t.removeClass(e.addFailureCssClassToField),
            e.addSuccessCssClassToField && !e.isError && t.addClass(e.addSuccessCssClassToField),
            e.addFailureCssClassToField && e.isError && t.addClass(e.addFailureCssClassToField)
        },
        _getErrorMessage: function(i, n, s, a, r, o, l) {
            var c = jQuery.inArray(s, a);
            if ("custom" === s || "funcCall" === s) {
                var d = a[c + 1];
                s = s + "[" + d + "]",
                delete a[c]
            }
            var h, u = s, p = n.attr(n.attr("data-validation-engine") ? "data-validation-engine" : "class"), f = p.split(" ");
            if (h = "future" == s || "past" == s || "maxCheckbox" == s || "minCheckbox" == s ? l(i, n, a, r, o) : l(n, a, r, o),
            void 0 != h) {
                var m = e._getCustomErrorMessage(t(n), f, u, o);
                m && (h = m)
            }
            return h
        },
        _getCustomErrorMessage: function(t, i, n, s) {
            var a = !1
              , r = e._validityProp[n];
            if (void 0 != r && (a = t.attr("data-errormessage-" + r),
            void 0 != a))
                return a;
            if (a = t.attr("data-errormessage"),
            void 0 != a)
                return a;
            var o = "#" + t.attr("id");
            if ("undefined" != typeof s.custom_error_messages[o] && "undefined" != typeof s.custom_error_messages[o][n])
                a = s.custom_error_messages[o][n].message;
            else if (i.length > 0)
                for (var l = 0; l < i.length && i.length > 0; l++) {
                    var c = "." + i[l];
                    if ("undefined" != typeof s.custom_error_messages[c] && "undefined" != typeof s.custom_error_messages[c][n]) {
                        a = s.custom_error_messages[c][n].message;
                        break
                    }
                }
            return a || "undefined" == typeof s.custom_error_messages[n] || "undefined" == typeof s.custom_error_messages[n].message || (a = s.custom_error_messages[n].message),
            a
        },
        _validityProp: {
            required: "value-missing",
            custom: "custom-error",
            groupRequired: "value-missing",
            ajax: "custom-error",
            minSize: "range-underflow",
            maxSize: "range-overflow",
            min: "range-underflow",
            max: "range-overflow",
            past: "type-mismatch",
            future: "type-mismatch",
            dateRange: "type-mismatch",
            dateTimeRange: "type-mismatch",
            maxCheckbox: "range-overflow",
            minCheckbox: "range-underflow",
            equals: "pattern-mismatch",
            funcCall: "custom-error",
            creditCard: "pattern-mismatch",
            condRequired: "value-missing"
        },
        _required: function(e, i, n, s, a) {
            switch (e.prop("type")) {
            case "text":
            case "password":
            case "textarea":
            case "file":
            case "select-one":
            case "select-multiple":
            default:
                var r = t.trim(e.val())
                  , o = t.trim(e.attr("data-validation-placeholder"))
                  , l = t.trim(e.attr("placeholder"));
                if (!r || o && r == o || l && r == l)
                    return s.allrules[i[n]].alertText;
                break;
            case "radio":
            case "checkbox":
                if (a) {
                    if (!e.attr("checked"))
                        return s.allrules[i[n]].alertTextCheckboxMultiple;
                    break
                }
                var c = e.closest("form, .validationEngineContainer")
                  , d = e.attr("name");
                if (0 == c.find("input[name='" + d + "']:checked").size())
                    return 1 == c.find("input[name='" + d + "']:visible").size() ? s.allrules[i[n]].alertTextCheckboxe : s.allrules[i[n]].alertTextCheckboxMultiple
            }
        },
        _groupRequired: function(i, n, s, a) {
            var r = "[" + a.validateAttribute + "*=" + n[s + 1] + "]"
              , o = !1;
            return i.closest("form, .validationEngineContainer").find(r).each(function() {
                return e._required(t(this), n, s, a) ? void 0 : (o = !0,
                !1)
            }
            ),
            o ? void 0 : a.allrules[n[s]].alertText
        },
        _custom: function(t, e, i, n) {
            var s, a = e[i + 1], r = n.allrules[a];
            if (!r)
                return void alert("jqv:custom rule not found - " + a);
            if (r.regex) {
                var o = r.regex;
                if (!o)
                    return void alert("jqv:custom regex not found - " + a);
                var l = new RegExp(o);
                if (!l.test(t.val()))
                    return n.allrules[a].alertText
            } else {
                if (!r.func)
                    return void alert("jqv:custom type not allowed " + a);
                if (s = r.func,
                "function" != typeof s)
                    return void alert("jqv:custom parameter 'function' is no function - " + a);
                if (!s(t, e, i, n))
                    return n.allrules[a].alertText
            }
        },
        _funcCall: function(t, e, i, n) {
            var s, a = e[i + 1];
            if (a.indexOf(".") > -1) {
                for (var r = a.split("."), o = window; r.length; )
                    o = o[r.shift()];
                s = o
            } else
                s = window[a] || n.customFunctions[a];
            return "function" == typeof s ? s(t, e, i, n) : void 0
        },
        _equals: function(e, i, n, s) {
            var a = i[n + 1];
            return e.val() != t("#" + a).val() ? s.allrules.equals.alertText : void 0
        },
        _maxSize: function(t, e, i, n) {
            var s = e[i + 1]
              , a = t.val().length;
            if (a > s) {
                var r = n.allrules.maxSize;
                return r.alertText + s + r.alertText2
            }
        },
        _minSize: function(t, e, i, n) {
            var s = e[i + 1]
              , a = t.val().length;
            if (s > a) {
                var r = n.allrules.minSize;
                return r.alertText + s + r.alertText2
            }
        },
        _min: function(t, e, i, n) {
            var s = parseFloat(e[i + 1])
              , a = parseFloat(t.val());
            if (s > a) {
                var r = n.allrules.min;
                return r.alertText2 ? r.alertText + s + r.alertText2 : r.alertText + s
            }
        },
        _max: function(t, e, i, n) {
            var s = parseFloat(e[i + 1])
              , a = parseFloat(t.val());
            if (a > s) {
                var r = n.allrules.max;
                return r.alertText2 ? r.alertText + s + r.alertText2 : r.alertText + s
            }
        },
        _past: function(i, n, s, a, r) {
            var o, l = s[a + 1], c = t(i.find("input[name='" + l.replace(/^#+/, "") + "']"));
            if ("now" == l.toLowerCase())
                o = new Date;
            else if (void 0 != c.val()) {
                if (c.is(":disabled"))
                    return;
                o = e._parseDate(c.val())
            } else
                o = e._parseDate(l);
            var d = e._parseDate(n.val());
            if (d > o) {
                var h = r.allrules.past;
                return h.alertText2 ? h.alertText + e._dateToString(o) + h.alertText2 : h.alertText + e._dateToString(o)
            }
        },
        _future: function(i, n, s, a, r) {
            var o, l = s[a + 1], c = t(i.find("input[name='" + l.replace(/^#+/, "") + "']"));
            if ("now" == l.toLowerCase())
                o = new Date;
            else if (void 0 != c.val()) {
                if (c.is(":disabled"))
                    return;
                o = e._parseDate(c.val())
            } else
                o = e._parseDate(l);
            var d = e._parseDate(n.val());
            if (o > d) {
                var h = r.allrules.future;
                return h.alertText2 ? h.alertText + e._dateToString(o) + h.alertText2 : h.alertText + e._dateToString(o)
            }
        },
        _isDate: function(t) {
            var e = new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);
            return e.test(t)
        },
        _isDateTime: function(t) {
            var e = new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);
            return e.test(t)
        },
        _dateCompare: function(t, e) {
            return new Date(t.toString()) < new Date(e.toString())
        },
        _dateRange: function(t, i, n, s) {
            return !s.firstOfGroup[0].value && s.secondOfGroup[0].value || s.firstOfGroup[0].value && !s.secondOfGroup[0].value ? s.allrules[i[n]].alertText + s.allrules[i[n]].alertText2 : e._isDate(s.firstOfGroup[0].value) && e._isDate(s.secondOfGroup[0].value) && e._dateCompare(s.firstOfGroup[0].value, s.secondOfGroup[0].value) ? void 0 : s.allrules[i[n]].alertText + s.allrules[i[n]].alertText2
        },
        _dateTimeRange: function(t, i, n, s) {
            return !s.firstOfGroup[0].value && s.secondOfGroup[0].value || s.firstOfGroup[0].value && !s.secondOfGroup[0].value ? s.allrules[i[n]].alertText + s.allrules[i[n]].alertText2 : e._isDateTime(s.firstOfGroup[0].value) && e._isDateTime(s.secondOfGroup[0].value) && e._dateCompare(s.firstOfGroup[0].value, s.secondOfGroup[0].value) ? void 0 : s.allrules[i[n]].alertText + s.allrules[i[n]].alertText2
        },
        _maxCheckbox: function(t, e, i, n, s) {
            var a = i[n + 1]
              , r = e.attr("name")
              , o = t.find("input[name='" + r + "']:checked").size();
            return o > a ? (s.showArrow = !1,
            s.allrules.maxCheckbox.alertText2 ? s.allrules.maxCheckbox.alertText + " " + a + " " + s.allrules.maxCheckbox.alertText2 : s.allrules.maxCheckbox.alertText) : void 0
        },
        _minCheckbox: function(t, e, i, n, s) {
            var a = i[n + 1]
              , r = e.attr("name")
              , o = t.find("input[name='" + r + "']:checked").size();
            return a > o ? (s.showArrow = !1,
            s.allrules.minCheckbox.alertText + " " + a + " " + s.allrules.minCheckbox.alertText2) : void 0
        },
        _creditCard: function(t, e, i, n) {
            var s = !1
              , a = t.val().replace(/ +/g, "").replace(/-+/g, "")
              , r = a.length;
            if (r >= 14 && 16 >= r && parseInt(a) > 0) {
                var o, l = 0, i = r - 1, c = 1, d = new String;
                do
                    o = parseInt(a.charAt(i)),
                    d += c++ % 2 == 0 ? 2 * o : o;
                while (--i >= 0);for (i = 0; i < d.length; i++)
                    l += parseInt(d.charAt(i));
                s = l % 10 == 0
            }
            return s ? void 0 : n.allrules.creditCard.alertText
        },
        _ajax: function(i, n, s, a) {
            var r = n[s + 1]
              , o = a.allrules[r]
              , l = o.extraData
              , c = o.extraDataDynamic
              , d = {
                fieldId: i.attr("id"),
                fieldValue: i.val()
            };
            if ("object" == typeof l)
                t.extend(d, l);
            else if ("string" == typeof l)
                for (var h = l.split("&"), s = 0; s < h.length; s++) {
                    var u = h[s].split("=");
                    u[0] && u[0] && (d[u[0]] = u[1])
                }
            if (c)
                for (var p = String(c).split(","), s = 0; s < p.length; s++) {
                    var f = p[s];
                    if (t(f).length) {
                        {
                            var m = i.closest("form, .validationEngineContainer").find(f).val();
                            f.replace("#", "") + "=" + escape(m)
                        }
                        d[f.replace("#", "")] = m
                    }
                }
            return "field" == a.eventTrigger && delete a.ajaxValidCache[i.attr("id")],
            a.isError || e._checkAjaxFieldStatus(i.attr("id"), a) ? void 0 : (t.ajax({
                type: a.ajaxFormValidationMethod,
                url: o.url,
                cache: !1,
                dataType: "json",
                data: d,
                field: i,
                rule: o,
                methods: e,
                options: a,
                beforeSend: function() {},
                error: function(t, i) {
                    e._ajaxError(t, i)
                },
                success: function(n) {
                    var s = n[0]
                      , r = t("#" + s).eq(0);
                    if (1 == r.length) {
                        var l = n[1]
                          , c = n[2];
                        if (l) {
                            if (a.ajaxValidCache[s] = !0,
                            c) {
                                if (a.allrules[c]) {
                                    var d = a.allrules[c].alertTextOk;
                                    d && (c = d)
                                }
                            } else
                                c = o.alertTextOk;
                            a.showPrompts && (c ? e._showPrompt(r, c, "pass", !0, a) : e._closePrompt(r)),
                            "submit" == a.eventTrigger && i.closest("form").submit()
                        } else {
                            if (a.ajaxValidCache[s] = !1,
                            a.isError = !0,
                            c) {
                                if (a.allrules[c]) {
                                    var d = a.allrules[c].alertText;
                                    d && (c = d)
                                }
                            } else
                                c = o.alertText;
                            a.showPrompts && e._showPrompt(r, c, "", !0, a)
                        }
                    }
                    r.trigger("jqv.field.result", [r, a.isError, c])
                }
            }),
            o.alertTextLoad)
        },
        _ajaxError: function(t, e) {
            0 == t.status && null  == e ? alert("The page is not served from a server! ajax call failed") : "undefined" != typeof console && console.log("Ajax error: " + t.status + " " + e)
        },
        _dateToString: function(t) {
            return t.getFullYear() + "-" + (t.getMonth() + 1) + "-" + t.getDate()
        },
        _parseDate: function(t) {
            var e = t.split("-");
            return e == t && (e = t.split("/")),
            e == t ? (e = t.split("."),
            new Date(e[2],e[1] - 1,e[0])) : new Date(e[0],e[1] - 1,e[2])
        },
        _showPrompt: function(i, n, s, a, r, o) {
            var l = e._getPrompt(i);
            o && (l = !1),
            t.trim(n) && (l ? e._updatePrompt(i, l, n, s, a, r) : e._buildPrompt(i, n, s, a, r))
        },
        _buildPrompt: function(i, n, s, a, r) {
            var o = t("<div>");
            switch (o.addClass(e._getClassName(i.attr("id")) + "formError"),
            o.addClass("parentForm" + e._getClassName(i.closest("form, .validationEngineContainer").attr("id"))),
            o.addClass("formError"),
            s) {
            case "pass":
                o.addClass("greenPopup");
                break;
            case "load":
                o.addClass("blackPopup")
            }
            a && o.addClass("ajaxed");
            var l = (t("<div>").addClass("formErrorContent").html(n).appendTo(o),
            i.data("promptPosition") || r.promptPosition);
            if (r.showArrow) {
                var c = t("<div>").addClass("formErrorArrow");
                if ("string" == typeof l) {
                    var d = l.indexOf(":");
                    -1 != d && (l = l.substring(0, d))
                }
                switch (l) {
                case "bottomLeft":
                case "bottomRight":
                    o.find(".formErrorContent").before(c),
                    c.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');
                    break;
                case "topLeft":
                case "topRight":
                    c.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>'),
                    o.append(c)
                }
            }
            r.addPromptClass && o.addClass(r.addPromptClass);
            var h = i.attr("data-required-class");
            if (void 0 !== h)
                o.addClass(h);
            else if (r.prettySelect && t("#" + i.attr("id")).next().is("select")) {
                var u = t("#" + i.attr("id").substr(r.usePrefix.length).substring(r.useSuffix.length)).attr("data-required-class");
                void 0 !== u && o.addClass(u)
            }
            o.css({
                opacity: 0
            }),
            "inline" === l ? (o.addClass("inline"),
            "undefined" != typeof i.attr("data-prompt-target") && t("#" + i.attr("data-prompt-target")).length > 0 ? o.appendTo(t("#" + i.attr("data-prompt-target"))) : i.after(o)) : i.before(o);
            {
                var d = e._calculatePosition(i, o, r);
                t(window).width() - (d.callerleftPosition + o.outerWidth())
            }
            return console.log(),
            o.css({
                position: "inline" === l ? "relative" : "absolute",
                top: d.callerTopPosition,
                left: d.callerleftPosition,
                marginTop: d.marginTopSize,
                opacity: 0
            }).data("callerField", i),
            r.autoHidePrompt && setTimeout(function() {
                o.animate({
                    opacity: 0
                }, function() {
                    o.closest(".formErrorOuter").remove(),
                    o.remove()
                }
                )
            }
            , r.autoHideDelay),
            o.animate({
                opacity: .87
            })
        },
        _updatePrompt: function(t, i, n, s, a, r, o) {
            if (i) {
                "undefined" != typeof s && ("pass" == s ? i.addClass("greenPopup") : i.removeClass("greenPopup"),
                "load" == s ? i.addClass("blackPopup") : i.removeClass("blackPopup")),
                a ? i.addClass("ajaxed") : i.removeClass("ajaxed"),
                i.find(".formErrorContent").html(n);
                var l = e._calculatePosition(t, i, r)
                  , c = {
                    top: l.callerTopPosition,
                    left: l.callerleftPosition,
                    marginTop: l.marginTopSize
                };
                o ? i.css(c) : i.animate(c)
            }
        },
        _closePrompt: function(t) {
            var i = e._getPrompt(t);
            i && i.fadeTo("fast", 0, function() {
                i.parent(".formErrorOuter").remove(),
                i.remove()
            }
            )
        },
        closePrompt: function(t) {
            return e._closePrompt(t)
        },
        _getPrompt: function(i) {
            var n = t(i).closest("form, .validationEngineContainer").attr("id")
              , s = e._getClassName(i.attr("id")) + "formError"
              , a = t("." + e._escapeExpression(s) + ".parentForm" + n)[0];
            return a ? t(a) : void 0
        },
        _escapeExpression: function(t) {
            return t.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g, "\\$1")
        },
        isRTL: function(e) {
            var i = t(document)
              , n = t("body")
              , s = e && e.hasClass("rtl") || e && "rtl" === (e.attr("dir") || "").toLowerCase() || i.hasClass("rtl") || "rtl" === (i.attr("dir") || "").toLowerCase() || n.hasClass("rtl") || "rtl" === (n.attr("dir") || "").toLowerCase();
            return Boolean(s)
        },
        _calculatePosition: function(t, e, i) {
            var n, s, a, r = t.width(), o = t.position().left, l = t.position().top, c = (t.height(),
            e.height());
            n = s = 0,
            a = -c;
            var d = t.data("promptPosition") || i.promptPosition
              , h = ""
              , u = ""
              , p = 0
              , f = 0;
            switch ("string" == typeof d && -1 != d.indexOf(":") && (h = d.substring(d.indexOf(":") + 1),
            d = d.substring(0, d.indexOf(":")),
            -1 != h.indexOf(",") && (u = h.substring(h.indexOf(",") + 1),
            h = h.substring(0, h.indexOf(",")),
            f = parseInt(u),
            isNaN(f) && (f = 0)),
            p = parseInt(h),
            isNaN(h) && (h = 0)),
            d) {
            default:
            case "topRight":
                s += t.outerWidth(!0) + o - e.width(),
                n += l - 2;
                break;
            case "topLeft":
                n += l,
                s += o;
                break;
            case "centerRight":
                n = l + 4,
                a = 0,
                s = o + t.outerWidth(!0) + 5;
                break;
            case "centerLeft":
                s = o - (e.width() + 2),
                n = l + 4,
                a = 0;
                break;
            case "bottomLeft":
                n = l + t.height() + 5,
                a = 0,
                s = o;
                break;
            case "bottomRight":
                s = o + r - 30,
                n = l + t.height() + 5,
                a = 0;
                break;
            case "inline":
                s = 0,
                n = 0,
                a = 0
            }
            return s += p,
            n += f,
            {
                callerTopPosition: n + "px",
                callerleftPosition: s + "px",
                marginTopSize: a + "px"
            }
        },
        _saveOptions: function(e, i) {
            if (t.validationEngineLanguage)
                var n = t.validationEngineLanguage.allRules;
            else
                t.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");
            t.validationEngine.defaults.allrules = n;
            var s = t.extend(!0, {}, t.validationEngine.defaults, i);
            return e.data("jqv", s),
            s
        },
        _getClassName: function(t) {
            return t ? t.replace(/:/g, "_").replace(/\./g, "_") : void 0
        },
        _jqSelector: function(t) {
            return t.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g, "\\$1")
        },
        _condRequired: function(t, i, n, s) {
            var a, r;
            for (a = n + 1; a < i.length; a++)
                if (r = jQuery("#" + i[a]).first(),
                r.length && void 0 == e._required(r, ["required"], 0, s, !0))
                    return e._required(t, ["required"], 0, s)
        },
        _submitButtonClick: function() {
            var e = t(this)
              , i = e.closest("form, .validationEngineContainer");
            i.data("jqv_submitButton", e.attr("id"))
        }
    };
    t.fn.validationEngine = function(i) {
        var n = t(this);
        return n[0] ? "string" == typeof i && "_" != i.charAt(0) && e[i] ? ("showPrompt" != i && "hide" != i && "hideAll" != i && e.init.apply(n),
        e[i].apply(n, Array.prototype.slice.call(arguments, 1))) : "object" != typeof i && i ? void t.error("Method " + i + " does not exist in jQuery.validationEngine") : (e.init.apply(n, arguments),
        e.attach.apply(n)) : n
    }
    ,
    t.validationEngine = {
        fieldIdCounter: 0,
        defaults: {
            validationEventTrigger: "blur",
            scroll: !0,
            focusFirstField: !0,
            showPrompts: !0,
            validateNonVisibleFields: !1,
            promptPosition: "topRight",
            bindMethod: "bind",
            inlineAjax: !1,
            ajaxFormValidation: !1,
            ajaxFormValidationURL: !1,
            ajaxFormValidationMethod: "get",
            onAjaxFormComplete: t.noop,
            onBeforeAjaxFormValidation: t.noop,
            onValidationComplete: !1,
            doNotShowAllErrosOnSubmit: !1,
            custom_error_messages: {},
            binded: !0,
            showArrow: !0,
            isError: !1,
            maxErrorsPerField: !1,
            ajaxValidCache: {},
            autoPositionUpdate: !1,
            InvalidFields: [],
            onFieldSuccess: !1,
            onFieldFailure: !1,
            onSuccess: !1,
            onFailure: !1,
            validateAttribute: "class",
            addSuccessCssClassToField: "",
            addFailureCssClassToField: "",
            autoHidePrompt: !1,
            autoHideDelay: 1e4,
            fadeDuration: .3,
            prettySelect: !1,
            addPromptClass: "",
            usePrefix: "",
            useSuffix: "",
            showOneMessage: !1
        }
    },
    t(function() {
        t.validationEngine.defaults.promptPosition = e.isRTL() ? "topLeft" : "topRight"
    }
    )
}
(jQuery),
function(t) {
    t.fn.validationEngineLanguage = function() {}
    ,
    t.validationEngineLanguage = {
        newLang: function() {
            t.validationEngineLanguage.allRules = {
                required: {
                    regex: "none",
                    alertText: "* Необходимо заполнить",
                    alertTextCheckboxMultiple: "* Вы должны выбрать вариант",
                    alertTextCheckboxe: "* Необходимо отметить"
                },
                requiredInFunction: {
                    func: function(t) {
                        return "test" == t.val() ? !0 : !1
                    },
                    alertText: "* Field must equal test"
                },
                minSize: {
                    regex: "none",
                    alertText: "* Минимум ",
                    alertText2: " символа(ов)"
                },
                maxSize: {
                    regex: "none",
                    alertText: "* Максимум ",
                    alertText2: " символа(ов)"
                },
                groupRequired: {
                    regex: "none",
                    alertText: "* Необходимо заполнить"
                },
                min: {
                    regex: "none",
                    alertText: "* Минимальное значение "
                },
                max: {
                    regex: "none",
                    alertText: "* Максимальное значение "
                },
                past: {
                    regex: "none",
                    alertText: "* Дата до "
                },
                future: {
                    regex: "none",
                    alertText: "* Дата от "
                },
                maxCheckbox: {
                    regex: "none",
                    alertText: "* Нельзя выбрать столько вариантов"
                },
                minCheckbox: {
                    regex: "none",
                    alertText: "* Пожалуйста, выберите ",
                    alertText2: " опцию(ии)"
                },
                equals: {
                    regex: "none",
                    alertText: "* Поля не совпадают"
                },
                creditCard: {
                    regex: "none",
                    alertText: "* Неверный номер кредитной карты"
                },
                phone: {
                    regex: /^([\+][0-9]{1,4})?([\(]{1}[0-9]{2,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,
                    alertText: "* Неправильный формат телефона"
                },
                email: {
                    regex: /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
                    alertText: "* Неверный формат email"
                },
                integer: {
                    regex: /^[\-\+]?\d+$/,
                    alertText: "* Не целое число"
                },
                number: {
                    regex: /^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,
                    alertText: "* Неправильное число с плавающей точкой"
                },
                date: {
                    regex: /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,
                    alertText: "* Неправильная дата (должно быть в ДД.MM.ГГГГ формате)"
                },
                ipv4: {
                    regex: /^((([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))[.]){3}(([0-1]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))$/,
                    alertText: "* Неправильный IP-адрес"
                },
                url: {
                    regex: /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,
                    alertText: "* Неправильный URL"
                },
                onlyNumberSp: {
                    regex: /^[0-9\ ]+$/,
                    alertText: "* Только числа"
                },
                onlyLetterSp: {
                    regex: /^[a-zA-Z\u0400-\u04FF\ \']+$/,
                    alertText: "* Только буквы"
                },
                onlyLetterNumber: {
                    regex: /^[0-9a-zA-Z\u0400-\u04FF]+$/,
                    alertText: "* Запрещены специальные символы"
                },
                ajaxUserCall: {
                    url: "/index.ajax.php?route=validation_email",
                    extraData: "name=eric",
                    alertText: "* Пользователь с таким e-mail уже зарегистрирован",
                    alertTextLoad: "* Проверка, подождите..."
                },
                ajaxNameCall: {
                    url: "ajaxValidateFieldName",
                    alertText: "* Это имя уже занято",
                    alertTextOk: "* Это имя доступно",
                    alertTextLoad: "* Проверка, подождите..."
                },
                ajaxProducerSearch: {
                    url: "/index.ajax.php?route=validation_producer_name",
                    alertText: "* Такой производитель уже есть в нашей базе, будьте внимательны!",
                    alertTextOk: "* Производителя, действительно, нет в нашей базе",
                    alertTextLoad: "* Проверка, подождите..."
                },
                ajaxProductSearch: {
                    url: "/index.ajax.php?route=validation_product_name",
                    extraDataDynamic: ["#producer_id"],
                    alertText: "* Такой товар уже есть в нашей базе, будьте внимательны!",
                    alertTextOk: "* Товара, действительно, нет в нашей базе",
                    alertTextLoad: "* Проверка, подождите..."
                },
                validate2fields: {
                    alertText: "* Пожалуйста, введите HELLO"
                }
            }
        }
    },
    t.validationEngineLanguage.newLang()
}
(jQuery),
function(t) {
    "undefined" == typeof t.fn.each2 && t.fn.extend({
        each2: function(e) {
            for (var i = t([0]), n = -1, s = this.length; ++n < s && (i.context = i[0] = this[n]) && e.call(i[0], n, i) !== !1; )
                ;
            return this
        }
    })
}
(jQuery),
function(t, e) {
    "use strict";
    function i(t, e) {
        var i, n = 0, s = e.length;
        if ("undefined" == typeof t)
            return -1;
        if (t.constructor === String) {
            for (; s > n; n += 1)
                if (0 === t.localeCompare(e[n]))
                    return n
        } else
            for (; s > n; n += 1)
                if (i = e[n],
                i.constructor === String) {
                    if (0 === i.localeCompare(t))
                        return n
                } else if (i === t)
                    return n;
        return -1
    }
    function n(t, i) {
        return t === i ? !0 : t === e || i === e ? !1 : null  === t || null  === i ? !1 : t.constructor === String ? 0 === t.localeCompare(i) : i.constructor === String ? 0 === i.localeCompare(t) : !1
    }
    function s(e, i) {
        var n, s, a;
        if (null  === e || e.length < 1)
            return [];
        for (n = e.split(i),
        s = 0,
        a = n.length; a > s; s += 1)
            n[s] = t.trim(n[s]);
        return n
    }
    function a(t) {
        return t.outerWidth() - t.width()
    }
    function r(i) {
        var n = "keyup-change-value";
        i.bind("keydown", function() {
            t.data(i, n) === e && t.data(i, n, i.val())
        }
        ),
        i.bind("keyup", function() {
            var s = t.data(i, n);
            s !== e && i.val() !== s && (t.removeData(i, n),
            i.trigger("keyup-change"))
        }
        )
    }
    function o(i) {
        i.bind("mousemove", function(i) {
            var n = t.data(document, "select2-lastpos");
            (n === e || n.x !== i.pageX || n.y !== i.pageY) && t(i.target).trigger("mousemove-filtered", i)
        }
        )
    }
    function l(t, i, n) {
        n = n || e;
        var s;
        return function() {
            var e = arguments;
            window.clearTimeout(s),
            s = window.setTimeout(function() {
                i.apply(n, e)
            }
            , t)
        }
    }
    function c(t) {
        var e, i = !1;
        return function() {
            return i === !1 && (e = t(),
            i = !0),
            e
        }
    }
    function d(t, e) {
        var n = l(t, function(t) {
            e.trigger("scroll-debounced", t)
        }
        );
        e.bind("scroll", function(t) {
            i(t.target, e.get()) >= 0 && n(t)
        }
        )
    }
    function h(t) {
        t.preventDefault(),
        t.stopPropagation()
    }
    function u(e) {
        if (!D) {
            var i = e[0].currentStyle || window.getComputedStyle(e[0], null );
            D = t("<div></div>").css({
                position: "absolute",
                left: "-10000px",
                top: "-10000px",
                display: "none",
                fontSize: i.fontSize,
                fontFamily: i.fontFamily,
                fontStyle: i.fontStyle,
                fontWeight: i.fontWeight,
                letterSpacing: i.letterSpacing,
                textTransform: i.textTransform,
                whiteSpace: "nowrap"
            }),
            t("body").append(D)
        }
        return D.text(e.val()),
        D.width()
    }
    function p(t, e, i) {
        var n = t.toUpperCase().indexOf(e.toUpperCase())
          , s = e.length;
        return 0 > n ? void i.push(t) : (i.push(t.substring(0, n)),
        i.push("<span class='select2-match'>"),
        i.push(t.substring(n, n + s)),
        i.push("</span>"),
        void i.push(t.substring(n + s, t.length)))
    }
    function f(e) {
        var i, n = 0, s = null , a = e.quietMillis || 100;
        return function(r) {
            window.clearTimeout(i),
            i = window.setTimeout(function() {
                n += 1;
                var i = n
                  , a = e.data
                  , o = e.transport || t.ajax
                  , l = e.traditional || !1
                  , c = e.type || "GET";
                a = a.call(this, r.term, r.page, r.context),
                null  !== s && s.abort(),
                s = o.call(null , {
                    url: e.url,
                    dataType: e.dataType,
                    data: a,
                    type: c,
                    traditional: l,
                    success: function(t) {
                        if (!(n > i)) {
                            var s = e.results(t, r.page);
                            r.callback(s)
                        }
                    }
                })
            }
            , a)
        }
    }
    function m(e) {
        var i, n = e, s = function(t) {
            return "" + t.text
        }
        ;
        return t.isArray(n) || (s = n.text,
        t.isFunction(s) || (i = n.text,
        s = function(t) {
            return t[i]
        }
        ),
        n = n.results),
        function(e) {
            var i, a = e.term, r = {
                results: []
            };
            return "" === a ? void e.callback({
                results: n
            }) : (i = function(n, r) {
                var o, l;
                if (n = n[0],
                n.children) {
                    o = {};
                    for (l in n)
                        n.hasOwnProperty(l) && (o[l] = n[l]);
                    o.children = [],
                    t(n.children).each2(function(t, e) {
                        i(e, o.children)
                    }
                    ),
                    o.children.length && r.push(o)
                } else
                    e.matcher(a, s(n)) && r.push(n)
            }
            ,
            t(n).each2(function(t, e) {
                i(e, r.results)
            }
            ),
            void e.callback(r))
        }
    }
    function g(i) {
        return t.isFunction(i) ? i : function(n) {
            var s = n.term
              , a = {
                results: []
            };
            t(i).each(function() {
                var t = this.text !== e
                  , i = t ? this.text : this;
                ("" === s || n.matcher(s, i)) && a.results.push(t ? this : {
                    id: this,
                    text: this
                })
            }
            ),
            n.callback(a)
        }
    }
    function v(e) {
        if (t.isFunction(e))
            return !0;
        if (!e)
            return !1;
        throw new Error("formatterName must be a function or a falsy value")
    }
    function b(e) {
        return t.isFunction(e) ? e() : e
    }
    function _(e) {
        var i = 0;
        return t.each(e, function(t, e) {
            e.children ? i += _(e.children) : i++
        }
        ),
        i
    }
    function y(t, i, s, a) {
        var r, o, l, c, d, h = t, u = !1;
        if (!a.createSearchChoice || !a.tokenSeparators || a.tokenSeparators.length < 1)
            return e;
        for (; ; ) {
            for (o = -1,
            l = 0,
            c = a.tokenSeparators.length; c > l && (d = a.tokenSeparators[l],
            o = t.indexOf(d),
            !(o >= 0)); l++)
                ;
            if (0 > o)
                break;
            if (r = t.substring(0, o),
            t = t.substring(o + d.length),
            r.length > 0 && (r = a.createSearchChoice(r, i),
            r !== e && null  !== r && a.id(r) !== e && null  !== a.id(r))) {
                for (u = !1,
                l = 0,
                c = i.length; c > l; l++)
                    if (n(a.id(r), a.id(i[l]))) {
                        u = !0;
                        break
                    }
                u || s(r)
            }
        }
        return 0 != h.localeCompare(t) ? t : void 0
    }
    function x(e, i) {
        var n = function() {}
        ;
        return n.prototype = new e,
        n.prototype.constructor = n,
        n.prototype.parent = e.prototype,
        n.prototype = t.extend(n.prototype, i),
        n
    }
    if (window.Select2 === e) {
        var w, k, C, T, S, D;
        w = {
            TAB: 9,
            ENTER: 13,
            ESC: 27,
            SPACE: 32,
            LEFT: 37,
            UP: 38,
            RIGHT: 39,
            DOWN: 40,
            SHIFT: 16,
            CTRL: 17,
            ALT: 18,
            PAGE_UP: 33,
            PAGE_DOWN: 34,
            HOME: 36,
            END: 35,
            BACKSPACE: 8,
            DELETE: 46,
            isArrow: function(t) {
                switch (t = t.which ? t.which : t) {
                case w.LEFT:
                case w.RIGHT:
                case w.UP:
                case w.DOWN:
                    return !0
                }
                return !1
            },
            isControl: function(t) {
                var e = t.which;
                switch (e) {
                case w.SHIFT:
                case w.CTRL:
                case w.ALT:
                    return !0
                }
                return t.metaKey ? !0 : !1
            },
            isFunctionKey: function(t) {
                return t = t.which ? t.which : t,
                t >= 112 && 123 >= t
            }
        },
        S = function() {
            var t = 1;
            return function() {
                return t++
            }
        }
        (),
        t(document).delegate("body", "mousemove", function(e) {
            t.data(document, "select2-lastpos", {
                x: e.pageX,
                y: e.pageY
            })
        }
        ),
        t(document).ready(function() {
            t(document).delegate("body", "mousedown touchend", function(i) {
                var n, s = t(i.target).closest("div.select2-container").get(0);
                s ? t(document).find("div.select2-container-active").each(function() {
                    this !== s && t(this).data("select2").blur()
                }
                ) : (s = t(i.target).closest("div.select2-drop").get(0),
                t(document).find("div.select2-drop-active").each(function() {
                    this !== s && t(this).data("select2").blur()
                }
                )),
                s = t(i.target),
                n = s.attr("for"),
                "LABEL" === i.target.tagName && n && n.length > 0 && (s = t("#" + n),
                s = s.data("select2"),
                s !== e && (s.focus(),
                i.preventDefault()))
            }
            )
        }
        ),
        k = x(Object, {
            bind: function(t) {
                var e = this;
                return function() {
                    t.apply(e, arguments)
                }
            },
            init: function(i) {
                var n, s, a = ".select2-results";
                this.opts = i = this.prepareOpts(i),
                this.id = i.id,
                i.element.data("select2") !== e && null  !== i.element.data("select2") && this.destroy(),
                this.enabled = !0,
                this.container = this.createContainer(),
                this.containerId = "s2id_" + (i.element.attr("id") || "autogen" + S()),
                this.containerSelector = "#" + this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g, "\\$1"),
                this.container.attr("id", this.containerId),
                this.body = c(function() {
                    return i.element.closest("body")
                }
                ),
                i.element.attr("class") !== e && this.container.addClass(i.element.attr("class").replace(/validate\[[\S ]+] ?/, "")),
                this.container.css(b(i.containerCss)),
                this.container.addClass(b(i.containerCssClass)),
                this.opts.element.data("select2", this).hide().before(this.container),
                this.container.data("select2", this),
                this.dropdown = this.container.find(".select2-drop"),
                this.dropdown.addClass(b(i.dropdownCssClass)),
                this.dropdown.data("select2", this),
                this.results = n = this.container.find(a),
                this.search = s = this.container.find("input.select2-input"),
                s.attr("tabIndex", this.opts.element.attr("tabIndex")),
                this.resultsPage = 0,
                this.context = null ,
                this.initContainer(),
                this.initContainerWidth(),
                o(this.results),
                this.dropdown.delegate(a, "mousemove-filtered", this.bind(this.highlightUnderEvent)),
                d(80, this.results),
                this.dropdown.delegate(a, "scroll-debounced", this.bind(this.loadMoreIfNeeded)),
                t.fn.mousewheel && n.mousewheel(function(t, e, i, s) {
                    var a = n.scrollTop();
                    s > 0 && 0 >= a - s ? (n.scrollTop(0),
                    h(t)) : 0 > s && n.get(0).scrollHeight - n.scrollTop() + s <= n.height() && (n.scrollTop(n.get(0).scrollHeight - n.height()),
                    h(t))
                }
                ),
                r(s),
                s.bind("keyup-change", this.bind(this.updateResults)),
                s.bind("focus", function() {
                    s.addClass("select2-focused"),
                    " " === s.val() && s.val("")
                }
                ),
                s.bind("blur", function() {
                    s.removeClass("select2-focused")
                }
                ),
                this.dropdown.delegate(a, "mouseup", this.bind(function(e) {
                    t(e.target).closest(".select2-result-selectable:not(.select2-disabled)").length > 0 ? (this.highlightUnderEvent(e),
                    this.selectHighlighted(e)) : this.focusSearch(),
                    h(e)
                }
                )),
                this.dropdown.bind("click mouseup mousedown", function(t) {
                    t.stopPropagation()
                }
                ),
                t.isFunction(this.opts.initSelection) && (this.initSelection(),
                this.monitorSource()),
                (i.element.is(":disabled") || i.element.is("[readonly='readonly']")) && this.disable()
            },
            destroy: function() {
                var t = this.opts.element.data("select2");
                t !== e && (t.container.remove(),
                t.dropdown.remove(),
                t.opts.element.removeData("select2").unbind(".select2").show())
            },
            prepareOpts: function(i) {
                var a, r, o, l;
                if (a = i.element,
                "select" === a.get(0).tagName.toLowerCase() && (this.select = r = i.element),
                r && t.each(["id", "multiple", "ajax", "query", "createSearchChoice", "initSelection", "data", "tags"], function() {
                    if (this in i)
                        throw new Error("Option '" + this + "' is not allowed for Select2 when attached to a <select> element.")
                }
                ),
                i = t.extend({}, {
                    populateResults: function(n, s, a) {
                        var r, o = this.opts.id, l = this;
                        (r = function(n, s, c) {
                            var d, h, u, p, f, m, g, v, b;
                            for (d = 0,
                            h = n.length; h > d; d += 1)
                                u = n[d],
                                p = o(u) !== e,
                                f = u.children && u.children.length > 0,
                                m = t("<li></li>"),
                                m.addClass("select2-results-dept-" + c),
                                m.addClass("select2-result"),
                                m.addClass(p ? "select2-result-selectable" : "select2-result-unselectable"),
                                f && m.addClass("select2-result-with-children"),
                                m.addClass(l.opts.formatResultCssClass(u)),
                                g = t("<div></div>"),
                                g.addClass("select2-result-label"),
                                b = i.formatResult(u, g, a),
                                b !== e && g.html(l.opts.escapeMarkup(b)),
                                m.append(g),
                                f && (v = t("<ul></ul>"),
                                v.addClass("select2-result-sub"),
                                r(u.children, v, c + 1),
                                m.append(v)),
                                m.data("select2-data", u),
                                s.append(m)
                        }
                        )(s, n, 0)
                    }
                }, t.fn.select2.defaults, i),
                "function" != typeof i.id && (o = i.id,
                i.id = function(t) {
                    return t[o]
                }
                ),
                r ? (i.query = this.bind(function(i) {
                    var n, s, r, o = {
                        results: [],
                        more: !1
                    }, l = i.term;
                    r = function(t, e) {
                        var n;
                        t.is("option") ? i.matcher(l, t.text(), t) && e.push({
                            id: t.attr("value"),
                            text: t.text(),
                            element: t.get(),
                            css: t.attr("class")
                        }) : t.is("optgroup") && (n = {
                            text: t.attr("label"),
                            children: [],
                            element: t.get(),
                            css: t.attr("class")
                        },
                        t.children().each2(function(t, e) {
                            r(e, n.children)
                        }
                        ),
                        n.children.length > 0 && e.push(n))
                    }
                    ,
                    n = a.children(),
                    this.getPlaceholder() !== e && n.length > 0 && (s = n[0],
                    "" === t(s).text() && (n = n.not(s))),
                    n.each2(function(t, e) {
                        r(e, o.results)
                    }
                    ),
                    i.callback(o)
                }
                ),
                i.id = function(t) {
                    return t.id
                }
                ,
                i.formatResultCssClass = function(t) {
                    return t.css
                }
                ) : "query" in i || ("ajax" in i ? (l = i.element.data("ajax-url"),
                l && l.length > 0 && (i.ajax.url = l),
                i.query = f(i.ajax)) : "data" in i ? i.query = m(i.data) : "tags" in i && (i.query = g(i.tags),
                i.createSearchChoice = function(t) {
                    return {
                        id: t,
                        text: t
                    }
                }
                ,
                i.initSelection = function(e, a) {
                    var r = [];
                    t(s(e.val(), i.separator)).each(function() {
                        var e = this
                          , s = this
                          , a = i.tags;
                        t.isFunction(a) && (a = a()),
                        t(a).each(function() {
                            return n(this.id, e) ? (s = this.text,
                            !1) : void 0
                        }
                        ),
                        r.push({
                            id: e,
                            text: s
                        })
                    }
                    ),
                    a(r)
                }
                )),
                "function" != typeof i.query)
                    throw "query function not defined for Select2 " + i.element.attr("id");
                return i
            },
            monitorSource: function() {
                this.opts.element.bind("change.select2", this.bind(function() {
                    this.opts.element.data("select2-change-triggered") !== !0 && this.initSelection()
                }
                ))
            },
            triggerChange: function(e) {
                e = e || {},
                e = t.extend({}, e, {
                    type: "change",
                    val: this.val()
                }),
                this.opts.element.data("select2-change-triggered", !0),
                this.opts.element.trigger(e),
                this.opts.element.data("select2-change-triggered", !1),
                this.opts.element.click(),
                this.opts.blurOnChange && this.opts.element.blur()
            },
            enable: function() {
                this.enabled || (this.enabled = !0,
                this.container.removeClass("select2-container-disabled"))
            },
            disable: function() {
                this.enabled && (this.close(),
                this.enabled = !1,
                this.container.addClass("select2-container-disabled"))
            },
            opened: function() {
                return this.container.hasClass("select2-dropdown-open")
            },
            positionDropdown: function() {
                var e, i, n, s = this.container.offset(), a = this.container.outerHeight(), r = this.container.outerWidth(), o = this.dropdown.outerHeight(), l = t(window).scrollTop() + document.documentElement.clientHeight, c = s.top + a, d = s.left, h = l >= c + o, u = s.top - o >= this.body().scrollTop(), p = this.dropdown.hasClass("select2-drop-above");
                "static" !== this.body().css("position") && (e = this.body().offset(),
                c -= e.top,
                d -= e.left),
                p ? (i = !0,
                !u && h && (i = !1)) : (i = !1,
                !h && u && (i = !0)),
                i ? (c = s.top - o,
                this.container.addClass("select2-drop-above"),
                this.dropdown.addClass("select2-drop-above")) : (this.container.removeClass("select2-drop-above"),
                this.dropdown.removeClass("select2-drop-above")),
                n = t.extend({
                    top: c,
                    left: d,
                    width: r
                }, b(this.opts.dropdownCss)),
                this.dropdown.css(n)
            },
            shouldOpen: function() {
                var e;
                return this.opened() ? !1 : (e = t.Event("open"),
                this.opts.element.trigger(e),
                !e.isDefaultPrevented())
            },
            clearDropdownAlignmentPreference: function() {
                this.container.removeClass("select2-drop-above"),
                this.dropdown.removeClass("select2-drop-above")
            },
            open: function() {
                return this.shouldOpen() ? (window.setTimeout(this.bind(this.opening), 1),
                !0) : !1
            },
            opening: function() {
                var e = this.containerId
                  , i = this.containerSelector
                  , n = "scroll." + e
                  , s = "resize." + e;
                this.container.parents().each(function() {
                    t(this).bind(n, function() {
                        var e = t(i);
                        0 == e.length && t(this).unbind(n),
                        e.select2("close")
                    }
                    )
                }
                ),
                t(window).bind(s, function() {
                    var e = t(i);
                    0 == e.length && t(window).unbind(s),
                    e.select2("close")
                }
                ),
                this.clearDropdownAlignmentPreference(),
                " " === this.search.val() && this.search.val(""),
                this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),
                this.updateResults(!0),
                this.dropdown[0] !== this.body().children().last()[0] && this.dropdown.detach().appendTo(this.body()),
                this.dropdown.show(),
                this.positionDropdown(),
                this.dropdown.addClass("select2-drop-active"),
                this.ensureHighlightVisible(),
                this.focusSearch()
            },
            close: function() {
                if (this.opened()) {
                    var e = this;
                    this.container.parents().each(function() {
                        t(this).unbind("scroll." + e.containerId)
                    }
                    ),
                    t(window).unbind("resize." + this.containerId),
                    this.clearDropdownAlignmentPreference(),
                    this.dropdown.hide(),
                    this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),
                    this.results.empty(),
                    this.clearSearch(),
                    this.opts.element.trigger(t.Event("close"))
                }
            },
            clearSearch: function() {},
            ensureHighlightVisible: function() {
                var e, i, n, s, a, r, o, l = this.results;
                if (i = this.highlight(),
                !(0 > i)) {
                    if (0 == i)
                        return void l.scrollTop(0);
                    e = l.find(".select2-result-selectable"),
                    n = t(e[i]),
                    s = n.offset().top + n.outerHeight(),
                    i === e.length - 1 && (o = l.find("li.select2-more-results"),
                    o.length > 0 && (s = o.offset().top + o.outerHeight())),
                    a = l.offset().top + l.outerHeight(),
                    s > a && l.scrollTop(l.scrollTop() + (s - a)),
                    r = n.offset().top - l.offset().top,
                    0 > r && l.scrollTop(l.scrollTop() + r)
                }
            },
            moveHighlight: function(e) {
                for (var i = this.results.find(".select2-result-selectable"), n = this.highlight(); n > -1 && n < i.length; ) {
                    n += e;
                    var s = t(i[n]);
                    if (s.hasClass("select2-result-selectable") && !s.hasClass("select2-disabled")) {
                        this.highlight(n);
                        break
                    }
                }
            },
            highlight: function(e) {
                var n = this.results.find(".select2-result-selectable").not(".select2-disabled");
                return 0 === arguments.length ? i(n.filter(".select2-highlighted")[0], n.get()) : (e >= n.length && (e = n.length - 1),
                0 > e && (e = 0),
                n.removeClass("select2-highlighted"),
                t(n[e]).addClass("select2-highlighted"),
                void this.ensureHighlightVisible())
            },
            countSelectableResults: function() {
                return this.results.find(".select2-result-selectable").not(".select2-disabled").length
            },
            highlightUnderEvent: function(e) {
                var i = t(e.target).closest(".select2-result-selectable");
                if (i.length > 0 && !i.is(".select2-highlighted")) {
                    var n = this.results.find(".select2-result-selectable");
                    this.highlight(n.index(i))
                } else
                    0 == i.length && this.results.find(".select2-highlighted").removeClass("select2-highlighted")
            },
            loadMoreIfNeeded: function() {
                var t, e = this.results, i = e.find("li.select2-more-results"), n = this.resultsPage + 1, s = this, a = this.search.val(), r = this.context;
                0 !== i.length && (t = i.offset().top - e.offset().top - e.height(),
                0 >= t && (i.addClass("select2-active"),
                this.opts.query({
                    term: a,
                    page: n,
                    context: r,
                    matcher: this.opts.matcher,
                    callback: this.bind(function(t) {
                        s.opened() && (s.opts.populateResults.call(this, e, t.results, {
                            term: a,
                            page: n,
                            context: r
                        }),
                        t.more === !0 ? (i.detach().appendTo(e).text(s.opts.formatLoadMore(n + 1)),
                        window.setTimeout(function() {
                            s.loadMoreIfNeeded()
                        }
                        , 10)) : i.remove(),
                        s.positionDropdown(),
                        s.resultsPage = n)
                    }
                    )
                })))
            },
            tokenize: function() {},
            updateResults: function(i) {
                function s() {
                    c.scrollTop(0),
                    l.removeClass("select2-active"),
                    h.positionDropdown()
                }
                function a(t) {
                    c.html(h.opts.escapeMarkup(t)),
                    s()
                }
                var r, o, l = this.search, c = this.results, d = this.opts, h = this;
                if (i === !0 || this.showSearchInput !== !1 && this.opened()) {
                    if (l.addClass("select2-active"),
                    d.maximumSelectionSize >= 1 && (r = this.data(),
                    t.isArray(r) && r.length >= d.maximumSelectionSize && v(d.formatSelectionTooBig, "formatSelectionTooBig")))
                        return void a("<li class='select2-selection-limit'>" + d.formatSelectionTooBig(d.maximumSelectionSize) + "</li>");
                    if (l.val().length < d.minimumInputLength && v(d.formatInputTooShort, "formatInputTooShort"))
                        return void a("<li class='select2-no-results'>" + d.formatInputTooShort(l.val(), d.minimumInputLength) + "</li>");
                    a("<li class='select2-searching'>" + d.formatSearching() + "</li>"),
                    o = this.tokenize(),
                    o != e && null  != o && l.val(o),
                    this.resultsPage = 1,
                    d.query({
                        term: l.val(),
                        page: this.resultsPage,
                        context: null ,
                        matcher: d.matcher,
                        callback: this.bind(function(r) {
                            var o;
                            if (this.opened()) {
                                if (this.context = r.context === e ? null  : r.context,
                                this.opts.createSearchChoice && "" !== l.val() && (o = this.opts.createSearchChoice.call(null , l.val(), r.results),
                                o !== e && null  !== o && h.id(o) !== e && null  !== h.id(o) && 0 === t(r.results).filter(function() {
                                    return n(h.id(this), h.id(o))
                                }
                                ).length && r.results.unshift(o)),
                                0 === r.results.length && v(d.formatNoMatches, "formatNoMatches"))
                                    return void a("<li class='select2-no-results'>" + d.formatNoMatches(l.val()) + "</li>");
                                c.empty(),
                                h.opts.populateResults.call(this, c, r.results, {
                                    term: l.val(),
                                    page: this.resultsPage,
                                    context: null 
                                }),
                                r.more === !0 && v(d.formatLoadMore, "formatLoadMore") && (c.append("<li class='select2-more-results'>" + h.opts.escapeMarkup(d.formatLoadMore(this.resultsPage)) + "</li>"),
                                window.setTimeout(function() {
                                    h.loadMoreIfNeeded()
                                }
                                , 10)),
                                this.postprocessResults(r, i),
                                s()
                            }
                        }
                        )
                    })
                }
            },
            cancel: function() {
                this.close()
            },
            blur: function() {
                this.close(),
                this.container.removeClass("select2-container-active"),
                this.dropdown.removeClass("select2-drop-active"),
                this.search[0] === document.activeElement && this.search.blur(),
                this.clearSearch(),
                this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")
            },
            focusSearch: function() {
                this.search.show(),
                this.search.focus(),
                window.setTimeout(this.bind(function() {
                    this.search.show(),
                    this.search.focus(),
                    this.search.val(this.search.val())
                }
                ), 10)
            },
            selectHighlighted: function() {
                var t = this.highlight()
                  , e = this.results.find(".select2-highlighted").not(".select2-disabled")
                  , i = e.closest(".select2-result-selectable").data("select2-data");
                i && (e.addClass("select2-disabled"),
                this.highlight(t),
                this.onSelect(i))
            },
            getPlaceholder: function() {
                return this.opts.element.attr("placeholder") || this.opts.element.attr("data-placeholder") || this.opts.element.data("placeholder") || this.opts.placeholder
            },
            initContainerWidth: function() {
                function i() {
                    var i, n, s, a, r;
                    if ("off" === this.opts.width)
                        return null ;
                    if ("element" === this.opts.width)
                        return 0 === this.opts.element.outerWidth() ? "auto" : this.opts.element.outerWidth() + "px";
                    if ("copy" === this.opts.width || "resolve" === this.opts.width) {
                        if (i = this.opts.element.attr("style"),
                        i !== e)
                            for (n = i.split(";"),
                            a = 0,
                            r = n.length; r > a; a += 1)
                                if (s = n[a].replace(/\s/g, "").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),
                                null  !== s && s.length >= 1)
                                    return s[1];
                        return "resolve" === this.opts.width ? (i = this.opts.element.css("width"),
                        i.indexOf("%") > 0 ? i : 0 === this.opts.element.outerWidth() ? "auto" : this.opts.element.outerWidth() + "px") : null 
                    }
                    return t.isFunction(this.opts.width) ? this.opts.width() : this.opts.width
                }
                var n = i.call(this);
                null  !== n && this.container.attr("style", "width: " + n)
            }
        }),
        C = x(k, {
            createContainer: function() {
                var e = t("<div></div>", {
                    "class": "select2-container"
                }).html(["    <a href='#' onclick='return false;' class='select2-choice'>", "   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>", "   <div><b></b></div>", "</a>", "    <div class='select2-drop select2-offscreen'>", "   <div class='select2-search'>", "       <input type='text' autocomplete='off' class='select2-input'/>", "   </div>", "   <ul class='select2-results'>", "   </ul>", "</div>"].join(""));
                return e
            },
            opening: function() {
                this.search.show(),
                this.parent.opening.apply(this, arguments),
                this.dropdown.removeClass("select2-offscreen")
            },
            close: function() {
                this.opened() && (this.parent.close.apply(this, arguments),
                this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())
            },
            focus: function() {
                this.close(),
                this.selection.focus()
            },
            isFocused: function() {
                return this.selection[0] === document.activeElement
            },
            cancel: function() {
                this.parent.cancel.apply(this, arguments),
                this.selection.focus()
            },
            initContainer: function() {
                var t, e = this.container, i = this.dropdown, n = !1;
                this.selection = t = e.find(".select2-choice"),
                this.search.bind("keydown", this.bind(function(t) {
                    if (this.enabled) {
                        if (t.which === w.PAGE_UP || t.which === w.PAGE_DOWN)
                            return void h(t);
                        if (this.opened())
                            switch (t.which) {
                            case w.UP:
                            case w.DOWN:
                                return this.moveHighlight(t.which === w.UP ? -1 : 1),
                                void h(t);
                            case w.TAB:
                            case w.ENTER:
                                return this.selectHighlighted(),
                                void h(t);
                            case w.ESC:
                                return this.cancel(t),
                                void h(t)
                            }
                        else {
                            if (t.which === w.TAB || w.isControl(t) || w.isFunctionKey(t) || t.which === w.ESC)
                                return;
                            if (this.opts.openOnEnter === !1 && t.which === w.ENTER)
                                return;
                            if (this.open(),
                            t.which === w.ENTER)
                                return
                        }
                    }
                }
                )),
                this.search.bind("focus", this.bind(function() {
                    this.selection.attr("tabIndex", "-1")
                }
                )),
                this.search.bind("blur", this.bind(function() {
                    this.opened() || this.container.removeClass("select2-container-active"),
                    window.setTimeout(this.bind(function() {
                        this.selection.attr("tabIndex", this.opts.element.attr("tabIndex"))
                    }
                    ), 10)
                }
                )),
                t.bind("mousedown", this.bind(function() {
                    n = !0,
                    this.opened() ? (this.close(),
                    this.selection.focus()) : this.enabled && this.open(),
                    n = !1
                }
                )),
                i.bind("mousedown", this.bind(function() {
                    this.search.focus()
                }
                )),
                t.bind("focus", this.bind(function() {
                    this.container.addClass("select2-container-active"),
                    this.search.attr("tabIndex", "-1")
                }
                )),
                t.bind("blur", this.bind(function() {
                    this.opened() || this.container.removeClass("select2-container-active"),
                    window.setTimeout(this.bind(function() {
                        this.search.attr("tabIndex", this.opts.element.attr("tabIndex"))
                    }
                    ), 10)
                }
                )),
                t.bind("keydown", this.bind(function(t) {
                    if (this.enabled) {
                        if (t.which === w.PAGE_UP || t.which === w.PAGE_DOWN)
                            return void h(t);
                        if (!(t.which === w.TAB || w.isControl(t) || w.isFunctionKey(t) || t.which === w.ESC || this.opts.openOnEnter === !1 && t.which === w.ENTER)) {
                            if (t.which == w.DELETE)
                                return void (this.opts.allowClear && this.clear());
                            if (this.open(),
                            t.which === w.ENTER)
                                return void h(t);
                            if (t.which < 48)
                                return void h(t);
                            var e = String.fromCharCode(t.which).toLowerCase();
                            t.shiftKey && (e = e.toUpperCase()),
                            this.search.focus(),
                            this.search.val(e),
                            h(t)
                        }
                    }
                }
                )),
                t.delegate("abbr", "mousedown", this.bind(function(t) {
                    this.enabled && (this.clear(),
                    h(t),
                    this.close(),
                    this.triggerChange(),
                    this.selection.focus())
                }
                )),
                this.setPlaceholder(),
                this.search.bind("focus", this.bind(function() {
                    this.container.addClass("select2-container-active")
                }
                ))
            },
            clear: function() {
                this.opts.element.val(""),
                this.selection.find("span").empty(),
                this.selection.removeData("select2-data"),
                this.setPlaceholder()
            },
            initSelection: function() {
                if ("" === this.opts.element.val())
                    this.close(),
                    this.setPlaceholder();
                else {
                    var t = this;
                    this.opts.initSelection.call(null , this.opts.element, function(i) {
                        i !== e && null  !== i && (t.updateSelection(i),
                        t.close(),
                        t.setPlaceholder())
                    }
                    )
                }
            },
            prepareOpts: function() {
                var e = this.parent.prepareOpts.apply(this, arguments);
                return "select" === e.element.get(0).tagName.toLowerCase() && (e.initSelection = function(e, i) {
                    var n = e.find(":selected");
                    t.isFunction(i) && i({
                        id: n.attr("value"),
                        text: n.text()
                    })
                }
                ),
                e
            },
            setPlaceholder: function() {
                var t = this.getPlaceholder();
                if ("" === this.opts.element.val() && t !== e) {
                    if (this.select && "" !== this.select.find("option:first").text())
                        return;
                    this.selection.find("span").html(this.opts.escapeMarkup(t)),
                    this.selection.addClass("select2-default"),
                    this.selection.find("abbr").hide()
                }
            },
            postprocessResults: function(e, i) {
                var s = 0
                  , a = this
                  , r = !0;
                this.results.find(".select2-result-selectable").each2(function(t, e) {
                    return n(a.id(e.data("select2-data")), a.opts.element.val()) ? (s = t,
                    !1) : void 0
                }
                ),
                this.highlight(s),
                i === !0 && (r = this.showSearchInput = _(e.results) >= this.opts.minimumResultsForSearch,
                this.dropdown.find(".select2-search")[r ? "removeClass" : "addClass"]("select2-search-hidden"),
                t(this.dropdown, this.container)[r ? "addClass" : "removeClass"]("select2-with-searchbox"))
            },
            onSelect: function(t) {
                var e = this.opts.element.val();
                this.opts.element.val(this.id(t)),
                this.updateSelection(t),
                this.close(),
                this.selection.focus(),
                n(e, this.id(t)) || this.triggerChange()
            },
            updateSelection: function(t) {
                var i, n = this.selection.find("span");
                this.selection.data("select2-data", t),
                n.empty(),
                i = this.opts.formatSelection(t, n),
                i !== e && n.append(this.opts.escapeMarkup(i)),
                this.selection.removeClass("select2-default"),
                this.opts.allowClear && this.getPlaceholder() !== e && this.selection.find("abbr").show()
            },
            val: function() {
                var t, i = null , n = this;
                if (0 === arguments.length)
                    return this.opts.element.val();
                if (t = arguments[0],
                this.select)
                    this.select.val(t).find(":selected").each2(function(t, e) {
                        return i = {
                            id: e.attr("value"),
                            text: e.text()
                        },
                        !1
                    }
                    ),
                    this.updateSelection(i),
                    this.setPlaceholder();
                else {
                    if (this.opts.initSelection === e)
                        throw new Error("cannot call val() if initSelection() is not defined");
                    if (!t)
                        return void this.clear();
                    this.opts.element.val(t),
                    this.opts.initSelection(this.opts.element, function(t) {
                        n.opts.element.val(t ? n.id(t) : ""),
                        n.updateSelection(t),
                        n.setPlaceholder()
                    }
                    )
                }
            },
            clearSearch: function() {
                this.search.val("")
            },
            data: function(t) {
                var i;
                return 0 === arguments.length ? (i = this.selection.data("select2-data"),
                i == e && (i = null ),
                i) : void (t && "" !== t ? (this.opts.element.val(t ? this.id(t) : ""),
                this.updateSelection(t)) : this.clear())
            }
        }),
        T = x(k, {
            createContainer: function() {
                var e = t("<div></div>", {
                    "class": "select2-container select2-container-multi"
                }).html(["    <ul class='select2-choices'>", "  <li class='select2-search-field'>", "    <input type='text' autocomplete='off' class='select2-input'>", "  </li>", "</ul>", "<div class='select2-drop select2-drop-multi' style='display:none;'>", "   <ul class='select2-results'>", "   </ul>", "</div>"].join(""));
                return e
            },
            prepareOpts: function() {
                var e = this.parent.prepareOpts.apply(this, arguments);
                return "select" === e.element.get(0).tagName.toLowerCase() && (e.initSelection = function(e, i) {
                    var n = [];
                    e.find(":selected").each2(function(t, e) {
                        n.push({
                            id: e.attr("value"),
                            text: e.text()
                        })
                    }
                    ),
                    t.isFunction(i) && i(n)
                }
                ),
                e
            },
            initContainer: function() {
                var e, i = ".select2-choices";
                this.searchContainer = this.container.find(".select2-search-field"),
                this.selection = e = this.container.find(i),
                this.search.bind("keydown", this.bind(function(t) {
                    if (this.enabled) {
                        if (t.which === w.BACKSPACE && "" === this.search.val()) {
                            this.close();
                            var i, n = e.find(".select2-search-choice-focus");
                            if (n.length > 0)
                                return this.unselect(n.first()),
                                this.search.width(10),
                                void h(t);
                            i = e.find(".select2-search-choice"),
                            i.length > 0 && i.last().addClass("select2-search-choice-focus")
                        } else
                            e.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
                        if (this.opened())
                            switch (t.which) {
                            case w.UP:
                            case w.DOWN:
                                return this.moveHighlight(t.which === w.UP ? -1 : 1),
                                void h(t);
                            case w.ENTER:
                            case w.TAB:
                                return this.selectHighlighted(),
                                void h(t);
                            case w.ESC:
                                return this.cancel(t),
                                void h(t)
                            }
                        t.which === w.TAB || w.isControl(t) || w.isFunctionKey(t) || t.which === w.BACKSPACE || t.which === w.ESC || (this.opts.openOnEnter !== !1 || t.which !== w.ENTER) && (this.open(),
                        (t.which === w.PAGE_UP || t.which === w.PAGE_DOWN) && h(t))
                    }
                }
                )),
                this.search.bind("keyup", this.bind(this.resizeSearch)),
                this.search.bind("blur", this.bind(function(t) {
                    this.container.removeClass("select2-container-active"),
                    this.search.removeClass("select2-focused"),
                    this.clearSearch(),
                    t.stopImmediatePropagation()
                }
                )),
                this.container.delegate(i, "mousedown", this.bind(function(e) {
                    this.enabled && (t(e.target).closest(".select2-search-choice").length > 0 || (this.clearPlaceholder(),
                    this.open(),
                    this.focusSearch(),
                    e.preventDefault()))
                }
                )),
                this.container.delegate(i, "focus", this.bind(function() {
                    this.enabled && (this.container.addClass("select2-container-active"),
                    this.dropdown.addClass("select2-drop-active"),
                    this.clearPlaceholder())
                }
                )),
                this.clearSearch()
            },
            enable: function() {
                this.enabled || (this.parent.enable.apply(this, arguments),
                this.search.removeAttr("disabled"))
            },
            disable: function() {
                this.enabled && (this.parent.disable.apply(this, arguments),
                this.search.attr("disabled", !0))
            },
            initSelection: function() {
                if ("" === this.opts.element.val() && (this.updateSelection([]),
                this.close(),
                this.clearSearch()),
                this.select || "" !== this.opts.element.val()) {
                    var t = this;
                    this.opts.initSelection.call(null , this.opts.element, function(i) {
                        i !== e && null  !== i && (t.updateSelection(i),
                        t.close(),
                        t.clearSearch())
                    }
                    )
                }
            },
            clearSearch: function() {
                var t = this.getPlaceholder();
                t !== e && 0 === this.getVal().length && this.search.hasClass("select2-focused") === !1 ? (this.search.val(t).addClass("select2-default"),
                this.resizeSearch()) : this.search.val(" ").width(10)
            },
            clearPlaceholder: function() {
                this.search.hasClass("select2-default") ? this.search.val("").removeClass("select2-default") : " " === this.search.val() && this.search.val("")
            },
            opening: function() {
                this.parent.opening.apply(this, arguments),
                this.clearPlaceholder(),
                this.resizeSearch(),
                this.focusSearch()
            },
            close: function() {
                this.opened() && this.parent.close.apply(this, arguments)
            },
            focus: function() {
                this.close(),
                this.search.focus()
            },
            isFocused: function() {
                return this.search.hasClass("select2-focused")
            },
            updateSelection: function(e) {
                var n = []
                  , s = []
                  , a = this;
                t(e).each(function() {
                    i(a.id(this), n) < 0 && (n.push(a.id(this)),
                    s.push(this))
                }
                ),
                e = s,
                this.selection.find(".select2-search-choice").remove(),
                t(e).each(function() {
                    a.addSelectedChoice(this)
                }
                ),
                a.postprocessResults()
            },
            tokenize: function() {
                var t = this.search.val();
                t = this.opts.tokenizer(t, this.data(), this.bind(this.onSelect), this.opts),
                null  != t && t != e && (this.search.val(t),
                t.length > 0 && this.open())
            },
            onSelect: function(t) {
                this.addSelectedChoice(t),
                this.select && this.postprocessResults(),
                this.opts.closeOnSelect ? (this.close(),
                this.search.width(10)) : this.countSelectableResults() > 0 ? (this.search.width(10),
                this.resizeSearch(),
                this.positionDropdown()) : this.close(),
                this.triggerChange({
                    added: t
                }),
                this.focusSearch()
            },
            cancel: function() {
                this.close(),
                this.focusSearch()
            },
            addSelectedChoice: function(e) {
                var i, n = t("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"), s = this.id(e), a = this.getVal();
                i = this.opts.formatSelection(e, n),
                n.find("div").replaceWith("<div>" + this.opts.escapeMarkup(i) + "</div>"),
                n.find(".select2-search-choice-close").bind("mousedown", h).bind("click dblclick", this.bind(function(e) {
                    this.enabled && (t(e.target).closest(".select2-search-choice").fadeOut("fast", this.bind(function() {
                        this.unselect(t(e.target)),
                        this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),
                        this.close(),
                        this.focusSearch()
                    }
                    )).dequeue(),
                    h(e))
                }
                )).bind("focus", this.bind(function() {
                    this.enabled && (this.container.addClass("select2-container-active"),
                    this.dropdown.addClass("select2-drop-active"))
                }
                )),
                n.data("select2-data", e),
                n.insertBefore(this.searchContainer),
                a.push(s),
                this.setVal(a)
            },
            unselect: function(t) {
                var e, n, s = this.getVal();
                if (t = t.closest(".select2-search-choice"),
                0 === t.length)
                    throw "Invalid argument: " + t + ". Must be .select2-search-choice";
                e = t.data("select2-data"),
                n = i(this.id(e), s),
                n >= 0 && (s.splice(n, 1),
                this.setVal(s),
                this.select && this.postprocessResults()),
                t.remove(),
                this.triggerChange({
                    removed: e
                })
            },
            postprocessResults: function() {
                var t = this.getVal()
                  , e = this.results.find(".select2-result-selectable")
                  , n = this.results.find(".select2-result-with-children")
                  , s = this;
                e.each2(function(e, n) {
                    var a = s.id(n.data("select2-data"));
                    i(a, t) >= 0 ? n.addClass("select2-disabled").removeClass("select2-result-selectable") : n.removeClass("select2-disabled").addClass("select2-result-selectable")
                }
                ),
                n.each2(function(t, e) {
                    0 == e.find(".select2-result-selectable").length ? e.addClass("select2-disabled") : e.removeClass("select2-disabled")
                }
                ),
                e.each2(function(t, e) {
                    return !e.hasClass("select2-disabled") && e.hasClass("select2-result-selectable") ? (s.highlight(0),
                    !1) : void 0
                }
                )
            },
            resizeSearch: function() {
                var t, e, i, n, s, r = a(this.search);
                t = u(this.search) + 10,
                e = this.search.offset().left,
                i = this.selection.width(),
                n = this.selection.offset().left,
                s = i - (e - n) - r,
                t > s && (s = i - r),
                40 > s && (s = i - r),
                this.search.width(s)
            },
            getVal: function() {
                var t;
                return this.select ? (t = this.select.val(),
                null  === t ? [] : t) : (t = this.opts.element.val(),
                s(t, this.opts.separator))
            },
            setVal: function(e) {
                var n;
                this.select ? this.select.val(e) : (n = [],
                t(e).each(function() {
                    i(this, n) < 0 && n.push(this)
                }
                ),
                this.opts.element.val(0 === n.length ? "" : n.join(this.opts.separator)))
            },
            val: function() {
                var i, n = [], s = this;
                if (0 === arguments.length)
                    return this.getVal();
                if (i = arguments[0],
                !i)
                    return this.opts.element.val(""),
                    this.updateSelection([]),
                    void this.clearSearch();
                if (this.setVal(i),
                this.select)
                    this.select.find(":selected").each(function() {
                        n.push({
                            id: t(this).attr("value"),
                            text: t(this).text()
                        })
                    }
                    ),
                    this.updateSelection(n);
                else {
                    if (this.opts.initSelection === e)
                        throw new Error("val() cannot be called if initSelection() is not defined");
                    this.opts.initSelection(this.opts.element, function(e) {
                        var i = t(e).map(s.id);
                        s.setVal(i),
                        s.updateSelection(e),
                        s.clearSearch()
                    }
                    )
                }
                this.clearSearch()
            },
            onSortStart: function() {
                if (this.select)
                    throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");
                this.search.width(0),
                this.searchContainer.hide()
            },
            onSortEnd: function() {
                var e = []
                  , i = this;
                this.searchContainer.show(),
                this.searchContainer.appendTo(this.searchContainer.parent()),
                this.resizeSearch(),
                this.selection.find(".select2-search-choice").each(function() {
                    e.push(i.opts.id(t(this).data("select2-data")))
                }
                ),
                this.setVal(e),
                this.triggerChange()
            },
            data: function(e) {
                var i, n = this;
                return 0 === arguments.length ? this.selection.find(".select2-search-choice").map(function() {
                    return t(this).data("select2-data")
                }
                ).get() : (e || (e = []),
                i = t.map(e, function(t) {
                    return n.opts.id(t)
                }
                ),
                this.setVal(i),
                this.updateSelection(e),
                this.clearSearch(),
                void 0)
            }
        }),
        t.fn.select2 = function() {
            var n, s, a, r, o = Array.prototype.slice.call(arguments, 0), l = ["val", "destroy", "opened", "open", "close", "focus", "isFocused", "container", "onSortStart", "onSortEnd", "enable", "disable", "positionDropdown", "data"];
            return this.each(function() {
                if (0 === o.length || "object" == typeof o[0])
                    n = 0 === o.length ? {} : t.extend({}, o[0]),
                    n.element = t(this),
                    "select" === n.element.get(0).tagName.toLowerCase() ? r = n.element.attr("multiple") : (r = n.multiple || !1,
                    "tags" in n && (n.multiple = r = !0)),
                    s = r ? new T : new C,
                    s.init(n);
                else {
                    if ("string" != typeof o[0])
                        throw "Invalid arguments to select2 plugin: " + o;
                    if (i(o[0], l) < 0)
                        throw "Unknown method: " + o[0];
                    if (a = e,
                    s = t(this).data("select2"),
                    s === e)
                        return;
                    if (a = "container" === o[0] ? s.container : s[o[0]].apply(s, o.slice(1)),
                    a !== e)
                        return !1
                }
            }
            ),
            a === e ? this : a
        }
        ,
        t.fn.select2.defaults = {
            width: "copy",
            closeOnSelect: !0,
            openOnEnter: !0,
            containerCss: {},
            dropdownCss: {},
            containerCssClass: "",
            dropdownCssClass: "",
            formatResult: function(t, e, i) {
                var n = [];
                return p(t.text, i.term, n),
                n.join("")
            },
            formatSelection: function(t) {
                return t ? t.text : e
            },
            formatResultCssClass: function() {
                return e
            },
            formatNoMatches: function() {
                return "No matches found"
            },
            formatInputTooShort: function(t, e) {
                return "Please enter " + (e - t.length) + " more characters"
            },
            formatSelectionTooBig: function(t) {
                return "You can only select " + t + " item" + (1 == t ? "" : "s")
            },
            formatLoadMore: function() {
                return "Loading more results..."
            },
            formatSearching: function() {
                return "Searching..."
            },
            minimumResultsForSearch: 0,
            minimumInputLength: 0,
            maximumSelectionSize: 0,
            id: function(t) {
                return t.id
            },
            matcher: function(t, e) {
                return e.toUpperCase().indexOf(t.toUpperCase()) >= 0
            },
            separator: ",",
            tokenSeparators: [],
            tokenizer: y,
            escapeMarkup: function(t) {
                return t && "string" == typeof t ? t.replace(/&/g, "&amp;") : t
            },
            blurOnChange: !1
        },
        window.Select2 = {
            query: {
                ajax: f,
                local: m,
                tags: g
            },
            util: {
                debounce: l,
                markMatch: p
            },
            "class": {
                "abstract": k,
                single: C,
                multi: T
            }
        }
    }
}
(jQuery),
function(t) {
    t.fn.listnav = function(e) {
        var i = t.extend({}, t.fn.listnav.defaults, e)
          , n = ["_", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "а", "б", "в", "г", "д", "е", "ж", "з", "и", "й", "к", "л", "м", "н", "о", "п", "р", "с", "т", "у", "ф", "х", "ц", "ч", "ш", "щ", "э", "ю", "я", "-"]
          , s = !1;
        return i.prefixes = t.map(i.prefixes, function(t) {
            return t.toLowerCase()
        }
        ),
        this.each(function() {
            function e() {
                if (p.append(u()),
                m = t(".ln-letters", p).slice(0, 1),
                i.showCounts && (g = t(".ln-letter-count", p).slice(0, 1)),
                r(),
                c(),
                i.flagDisabled && l(),
                h(),
                i.includeAll || f.show(),
                i.includeAll || t(".all", m).remove(),
                i.includeNums || t("._", m).remove(),
                i.includeOther || t(".-", m).remove(),
                t(":last", m).addClass("ln-last"),
                t.cookie && null  != i.cookieName) {
                    var e = t.cookie(i.cookieName);
                    null  != e && (i.initLetter = e)
                }
                if ("" != i.initLetter)
                    s = !0,
                    t("." + i.initLetter.toLowerCase(), m).slice(0, 1).click();
                else if (i.includeAll)
                    t(".all", m).addClass("ln-selected");
                else
                    for (var a = i.includeNums ? 0 : 1; a < n.length; a++)
                        if (b[n[a]] > 0) {
                            s = !0,
                            t("." + n[a], m).slice(0, 1).click();
                            break
                        }
            }
            function a() {
                g.css({
                    top: t(".a", m).slice(0, 1).offset({
                        margin: !1,
                        border: !0
                    }).top - g.outerHeight({
                        margin: !0
                    })
                })
            }
            function r() {
                var e, n, s, a, r = i.prefixes.length > 0;
                t(f).children().each(function() {
                    a = t(this),
                    n = "",
                    e = t.trim(a.text()).toLowerCase(),
                    "" != e && (r && (s = e.split(" "),
                    s.length > 1 && t.inArray(s[0], i.prefixes) > -1 && (n = s[1].charAt(0),
                    o(n, a, !0))),
                    n = e.charAt(0),
                    o(n, a))
                }
                )
            }
            function o(t, e, i) {
                /[а-яА-Я]/.test(t) || (/\W/.test(t) && (t = "-"),
                isNaN(t) || (t = "_")),
                e.addClass("ln-" + t),
                void 0 == b[t] && (b[t] = 0),
                b[t]++,
                i || _++
            }
            function l() {
                for (var e = 0; e < n.length; e++)
                    void 0 == b[n[e]] && t("." + n[e], m).addClass("ln-disabled")
            }
            function c() {
                f.append('<li class="ln-no-match" style="display:none">' + i.noMatchText + "</li>")
            }
            function d(e) {
                if (t(e).hasClass("all"))
                    return _;
                var i = b[t(e).attr("class").split(" ")[0]];
                return void 0 != i ? i : 0
            }
            function h() {
                i.showCounts && p.mouseover(function() {
                    a()
                }
                ),
                i.showCounts && (t("a", m).mouseover(function() {
                    var e = t(this).position().left
                      , i = t(this).outerWidth({
                        margin: !0
                    }) - 1 + "px"
                      , n = d(this);
                    g.css({
                        left: e,
                        width: i
                    }).text(n).show()
                }
                ),
                t("a", m).mouseout(function() {
                    g.hide()
                }
                )),
                t("a", m).click(function() {
                    t("a.ln-selected", m).removeClass("ln-selected");
                    var e = t(this).attr("class").split(" ")[0];
                    if ("all" == e)
                        f.children().show(),
                        f.children(".ln-no-match").hide(),
                        y = !0;
                    else {
                        y ? (f.children().hide(),
                        y = !1) : "" != x && f.children(".ln-" + x).hide();
                        var n = d(this);
                        n > 0 ? (f.children(".ln-no-match").hide(),
                        f.children(".ln-" + e).show()) : f.children(".ln-no-match").show(),
                        x = e
                    }
                    return t.cookie && null  != i.cookieName && t.cookie(i.cookieName, e),
                    t(this).addClass("ln-selected"),
                    t(this).blur(),
                    s || null  == i.onClick ? s = !1 : i.onClick(e),
                    !1
                }
                )
            }
            function u() {
                for (var t = [], e = 1; e < n.length; e++)
                    0 == t.length && t.push('<a class="all" href="#">Все</a><a class="_" href="#">0-9</a>'),
                    t.push('<a class="' + n[e] + '" href="#">' + ("-" == n[e] ? "..." : n[e].toUpperCase()) + "</a>");
                return '<div class="ln-letters">' + t.join("") + "</div>" + (i.showCounts ? '<div class="ln-letter-count" style="display:none; position:absolute; top:0; left:0; width:20px;">0</div>' : "")
            }
            var p, f, m, g, v;
            v = this.id,
            p = t("#" + v + "-nav"),
            f = t(this);
            var b = {}
              , _ = 0
              , y = !0
              , x = "";
            e()
        }
        )
    }
    ,
    t.fn.listnav.defaults = {
        initLetter: "",
        includeAll: !0,
        incudeOther: !1,
        includeNums: !0,
        flagDisabled: !0,
        noMatchText: "Нет результатов",
        showCounts: !0,
        cookieName: null ,
        onClick: null ,
        prefixes: []
    }
}
(jQuery),
jQuery.QapTcha = {
    build: function(t) {
        var e = {
            txtLock: "Если не робот - перетяни вправо",
            txtUnlock: "Разблокировано",
            disabledSubmit: !0,
            autoRevert: !0,
            PHPfile: "php/Qaptcha.jquery.php",
            autoSubmit: !1
        };
        return this.length > 0 ? jQuery(this).each(function(i) {
            function n(t) {
                var e = "azertyupqsdfghjkmwxcvbn23456789AZERTYUPQSDFGHJKMWXCVBN_-#@"
                  , n = "";
                for (i = 0; t > i; i++) {
                    var s = Math.round(Math.random() * e.length);
                    n += e.substring(s, s + 1)
                }
                return n
            }
            var s = $.extend(e, t)
              , a = $(this)
              , r = $("form").has(a)
              , o = jQuery("<div>", {
                "class": "clr"
            })
              , l = jQuery("<div>", {
                "class": "bgSlider"
            })
              , c = jQuery("<div>", {
                "class": "Slider"
            }).append('<i class="a-icon-chevron-right a-icon-white"></i>')
              , d = jQuery("<div>", {
                "class": " TxtStatus dropError",
                text: s.txtLock
            })
              , h = jQuery("<input>", {
                name: n(32),
                value: n(7),
                type: "hidden"
            });
            s.disabledSubmit && r.find("input[type='submit']").attr("disabled", "disabled"),
            l.appendTo(a),
            o.insertAfter(l),
            d.insertAfter(o),
            h.appendTo(a),
            c.appendTo(l),
            a.show(),
            c.draggable({
                revert: function() {
                    return s.autoRevert ? parseInt(c.css("left")) > l.width() - c.width() - 10 ? !1 : !0 : void 0
                },
                containment: l,
                axis: "x",
                stop: function(t, e) {
                    e.position.left > l.width() - c.width() - 10 && $.post(s.PHPfile, {
                        action: "qaptcha",
                        qaptcha_key: h.attr("name")
                    }, function(t) {
                        t.error || (c.draggable("disable").css("cursor", "default"),
                        h.val(""),
                        d.text(s.txtUnlock).addClass("dropSuccess").removeClass("dropError"),
                        r.find("input[type='submit']").removeAttr("disabled"),
                        s.autoSubmit && r.find("input[type='submit']").trigger("click"))
                    }
                    , "json")
                }
            })
        }
        ) : void 0
    }
},
jQuery.fn.QapTcha = jQuery.QapTcha.build,
function(t) {
    function e(t, e) {
        if (!(t.originalEvent.touches.length > 1)) {
            t.preventDefault();
            var i = t.originalEvent.changedTouches[0]
              , n = document.createEvent("MouseEvents");
            n.initMouseEvent(e, !0, !0, window, 1, i.screenX, i.screenY, i.clientX, i.clientY, !1, !1, !1, !1, 0, null ),
            t.target.dispatchEvent(n)
        }
    }
    if (t.support.touch = "ontouchend" in document,
    t.support.touch) {
        var i, n = t.ui.mouse.prototype, s = n._mouseInit;
        n._touchStart = function(t) {
            var n = this;
            !i && n._mouseCapture(t.originalEvent.changedTouches[0]) && (i = !0,
            n._touchMoved = !1,
            e(t, "mouseover"),
            e(t, "mousemove"),
            e(t, "mousedown"))
        }
        ,
        n._touchMove = function(t) {
            i && (this._touchMoved = !0,
            e(t, "mousemove"))
        }
        ,
        n._touchEnd = function(t) {
            i && (e(t, "mouseup"),
            e(t, "mouseout"),
            this._touchMoved || e(t, "click"),
            i = !1)
        }
        ,
        n._mouseInit = function() {
            var e = this;
            e.element.bind("touchstart", t.proxy(e, "_touchStart")).bind("touchmove", t.proxy(e, "_touchMove")).bind("touchend", t.proxy(e, "_touchEnd")),
            s.call(e)
        }
    }
}
(jQuery),
function(t) {
    "use strict";
    function e(e) {
        var i = e.data;
        e.isDefaultPrevented() || (e.preventDefault(),
        t(this).ajaxSubmit(i))
    }
    function i(e) {
        var i = e.target
          , n = t(i);
        if (!n.is("[type=submit],[type=image]")) {
            var s = n.closest("[type=submit]");
            if (0 === s.length)
                return;
            i = s[0]
        }
        var a = this;
        if (a.clk = i,
        "image" == i.type)
            if (void 0 !== e.offsetX)
                a.clk_x = e.offsetX,
                a.clk_y = e.offsetY;
            else if ("function" == typeof t.fn.offset) {
                var r = n.offset();
                a.clk_x = e.pageX - r.left,
                a.clk_y = e.pageY - r.top
            } else
                a.clk_x = e.pageX - i.offsetLeft,
                a.clk_y = e.pageY - i.offsetTop;
        setTimeout(function() {
            a.clk = a.clk_x = a.clk_y = null 
        }
        , 100)
    }
    function n() {
        if (t.fn.ajaxSubmit.debug) {
            var e = "[jquery.form] " + Array.prototype.join.call(arguments, "");
            window.console && window.console.log ? window.console.log(e) : window.opera && window.opera.postError && window.opera.postError(e)
        }
    }
    var s = {};
    s.fileapi = void 0 !== t("<input type='file'/>").get(0).files,
    s.formdata = void 0 !== window.FormData;
    var a = !!t.fn.prop;
    t.fn.attr2 = function() {
        if (!a)
            return this.attr.apply(this, arguments);
        var t = this.prop.apply(this, arguments);
        return t && t.jquery || "string" == typeof t ? t : this.attr.apply(this, arguments)
    }
    ,
    t.fn.ajaxSubmit = function(e) {
        function i(e) {
            var i, n, s = t.param(e).split("&"), a = s.length, r = [];
            for (i = 0; a > i; i++)
                s[i] = s[i].replace(/\+/g, " "),
                n = s[i].split("="),
                r.push([decodeURIComponent(n[0]), decodeURIComponent(n[1])]);
            return r
        }
        function r(n) {
            for (var s = new FormData, a = 0; a < n.length; a++)
                s.append(n[a].name, n[a].value);
            if (e.extraData) {
                var r = i(e.extraData);
                for (a = 0; a < r.length; a++)
                    r[a] && s.append(r[a][0], r[a][1])
            }
            e.data = null ;
            var o = t.extend(!0, {}, t.ajaxSettings, e, {
                contentType: !1,
                processData: !1,
                cache: !1,
                type: l || "POST"
            });
            e.uploadProgress && (o.xhr = function() {
                var t = jQuery.ajaxSettings.xhr();
                return t.upload && t.upload.addEventListener("progress", function(t) {
                    var i = 0
                      , n = t.loaded || t.position
                      , s = t.total;
                    t.lengthComputable && (i = Math.ceil(n / s * 100)),
                    e.uploadProgress(t, n, s, i)
                }
                , !1),
                t
            }
            ),
            o.data = null ;
            var c = o.beforeSend;
            return o.beforeSend = function(t, e) {
                e.data = s,
                c && c.call(this, t, e)
            }
            ,
            t.ajax(o)
        }
        function o(i) {
            function s(t) {
                var e = null ;
                try {
                    t.contentWindow && (e = t.contentWindow.document)
                } catch (i) {
                    n("cannot get iframe.contentWindow document: " + i)
                }
                if (e)
                    return e;
                try {
                    e = t.contentDocument ? t.contentDocument : t.document
                } catch (i) {
                    n("cannot get iframe.contentDocument: " + i),
                    e = t.document
                }
                return e
            }
            function r() {
                function e() {
                    try {
                        var t = s(v).readyState;
                        n("state = " + t),
                        t && "uninitialized" == t.toLowerCase() && setTimeout(e, 50)
                    } catch (i) {
                        n("Server abort: ", i, " (", i.name, ")"),
                        o(S),
                        w && clearTimeout(w),
                        w = void 0
                    }
                }
                var i = h.attr2("target")
                  , a = h.attr2("action");
                k.setAttribute("target", f),
                l || k.setAttribute("method", "POST"),
                a != u.url && k.setAttribute("action", u.url),
                u.skipEncodingOverride || l && !/post/i.test(l) || h.attr({
                    encoding: "multipart/form-data",
                    enctype: "multipart/form-data"
                }),
                u.timeout && (w = setTimeout(function() {
                    x = !0,
                    o(T)
                }
                , u.timeout));
                var r = [];
                try {
                    if (u.extraData)
                        for (var c in u.extraData)
                            u.extraData.hasOwnProperty(c) && r.push(t.isPlainObject(u.extraData[c]) && u.extraData[c].hasOwnProperty("name") && u.extraData[c].hasOwnProperty("value") ? t('<input type="hidden" name="' + u.extraData[c].name + '">').val(u.extraData[c].value).appendTo(k)[0] : t('<input type="hidden" name="' + c + '">').val(u.extraData[c]).appendTo(k)[0]);
                    u.iframeTarget || (g.appendTo("body"),
                    v.attachEvent ? v.attachEvent("onload", o) : v.addEventListener("load", o, !1)),
                    setTimeout(e, 15);
                    try {
                        k.submit()
                    } catch (d) {
                        var p = document.createElement("form").submit;
                        p.apply(k)
                    }
                } finally {
                    k.setAttribute("action", a),
                    i ? k.setAttribute("target", i) : h.removeAttr("target"),
                    t(r).remove()
                }
            }
            function o(e) {
                if (!b.aborted && !F) {
                    if (q = s(v),
                    q || (n("cannot access response document"),
                    e = S),
                    e === T && b)
                        return b.abort("timeout"),
                        void C.reject(b, "timeout");
                    if (e == S && b)
                        return b.abort("server abort"),
                        void C.reject(b, "error", "server abort");
                    if (q && q.location.href != u.iframeSrc || x) {
                        v.detachEvent ? v.detachEvent("onload", o) : v.removeEventListener("load", o, !1);
                        var i, a = "success";
                        try {
                            if (x)
                                throw "timeout";
                            var r = "xml" == u.dataType || q.XMLDocument || t.isXMLDoc(q);
                            if (n("isXml=" + r),
                            !r && window.opera && (null  === q.body || !q.body.innerHTML) && --I)
                                return n("requeing onLoad callback, DOM not available"),
                                void setTimeout(o, 250);
                            var l = q.body ? q.body : q.documentElement;
                            b.responseText = l ? l.innerHTML : null ,
                            b.responseXML = q.XMLDocument ? q.XMLDocument : q,
                            r && (u.dataType = "xml"),
                            b.getResponseHeader = function(t) {
                                var e = {
                                    "content-type": u.dataType
                                };
                                return e[t]
                            }
                            ,
                            l && (b.status = Number(l.getAttribute("status")) || b.status,
                            b.statusText = l.getAttribute("statusText") || b.statusText);
                            var c = (u.dataType || "").toLowerCase()
                              , d = /(json|script|text)/.test(c);
                            if (d || u.textarea) {
                                var h = q.getElementsByTagName("textarea")[0];
                                if (h)
                                    b.responseText = h.value,
                                    b.status = Number(h.getAttribute("status")) || b.status,
                                    b.statusText = h.getAttribute("statusText") || b.statusText;
                                else if (d) {
                                    var f = q.getElementsByTagName("pre")[0]
                                      , m = q.getElementsByTagName("body")[0];
                                    f ? b.responseText = f.textContent ? f.textContent : f.innerText : m && (b.responseText = m.textContent ? m.textContent : m.innerText)
                                }
                            } else
                                "xml" == c && !b.responseXML && b.responseText && (b.responseXML = M(b.responseText));
                            try {
                                E = P(b, c, u)
                            } catch (_) {
                                a = "parsererror",
                                b.error = i = _ || a
                            }
                        } catch (_) {
                            n("error caught: ", _),
                            a = "error",
                            b.error = i = _ || a
                        }
                        b.aborted && (n("upload aborted"),
                        a = null ),
                        b.status && (a = b.status >= 200 && b.status < 300 || 304 === b.status ? "success" : "error"),
                        "success" === a ? (u.success && u.success.call(u.context, E, "success", b),
                        C.resolve(b.responseText, "success", b),
                        p && t.event.trigger("ajaxSuccess", [b, u])) : a && (void 0 === i && (i = b.statusText),
                        u.error && u.error.call(u.context, b, a, i),
                        C.reject(b, "error", i),
                        p && t.event.trigger("ajaxError", [b, u, i])),
                        p && t.event.trigger("ajaxComplete", [b, u]),
                        p && !--t.active && t.event.trigger("ajaxStop"),
                        u.complete && u.complete.call(u.context, b, a),
                        F = !0,
                        u.timeout && clearTimeout(w),
                        setTimeout(function() {
                            u.iframeTarget || g.remove(),
                            b.responseXML = null 
                        }
                        , 100)
                    }
                }
            }
            var c, d, u, p, f, g, v, b, _, y, x, w, k = h[0], C = t.Deferred();
            if (i)
                for (d = 0; d < m.length; d++)
                    c = t(m[d]),
                    a ? c.prop("disabled", !1) : c.removeAttr("disabled");
            if (u = t.extend(!0, {}, t.ajaxSettings, e),
            u.context = u.context || u,
            f = "jqFormIO" + (new Date).getTime(),
            u.iframeTarget ? (g = t(u.iframeTarget),
            y = g.attr2("name"),
            y ? f = y : g.attr2("name", f)) : (g = t('<iframe name="' + f + '" src="' + u.iframeSrc + '" />'),
            g.css({
                position: "absolute",
                top: "-1000px",
                left: "-1000px"
            })),
            v = g[0],
            b = {
                aborted: 0,
                responseText: null ,
                responseXML: null ,
                status: 0,
                statusText: "n/a",
                getAllResponseHeaders: function() {},
                getResponseHeader: function() {},
                setRequestHeader: function() {},
                abort: function(e) {
                    var i = "timeout" === e ? "timeout" : "aborted";
                    n("aborting upload... " + i),
                    this.aborted = 1;
                    try {
                        v.contentWindow.document.execCommand && v.contentWindow.document.execCommand("Stop")
                    } catch (s) {}
                    g.attr("src", u.iframeSrc),
                    b.error = i,
                    u.error && u.error.call(u.context, b, i, e),
                    p && t.event.trigger("ajaxError", [b, u, i]),
                    u.complete && u.complete.call(u.context, b, i)
                }
            },
            p = u.global,
            p && 0 === t.active++ && t.event.trigger("ajaxStart"),
            p && t.event.trigger("ajaxSend", [b, u]),
            u.beforeSend && u.beforeSend.call(u.context, b, u) === !1)
                return u.global && t.active--,
                C.reject(),
                C;
            if (b.aborted)
                return C.reject(),
                C;
            _ = k.clk,
            _ && (y = _.name,
            y && !_.disabled && (u.extraData = u.extraData || {},
            u.extraData[y] = _.value,
            "image" == _.type && (u.extraData[y + ".x"] = k.clk_x,
            u.extraData[y + ".y"] = k.clk_y)));
            var T = 1
              , S = 2
              , D = t("meta[name=csrf-token]").attr("content")
              , $ = t("meta[name=csrf-param]").attr("content");
            $ && D && (u.extraData = u.extraData || {},
            u.extraData[$] = D),
            u.forceSync ? r() : setTimeout(r, 10);
            var E, q, F, I = 50, M = t.parseXML || function(t, e) {
                return window.ActiveXObject ? (e = new ActiveXObject("Microsoft.XMLDOM"),
                e.async = "false",
                e.loadXML(t)) : e = (new DOMParser).parseFromString(t, "text/xml"),
                e && e.documentElement && "parsererror" != e.documentElement.nodeName ? e : null 
            }
            , A = t.parseJSON || function(t) {
                return window.eval("(" + t + ")")
            }
            , P = function(e, i, n) {
                var s = e.getResponseHeader("content-type") || ""
                  , a = "xml" === i || !i && s.indexOf("xml") >= 0
                  , r = a ? e.responseXML : e.responseText;
                return a && "parsererror" === r.documentElement.nodeName && t.error && t.error("parsererror"),
                n && n.dataFilter && (r = n.dataFilter(r, i)),
                "string" == typeof r && ("json" === i || !i && s.indexOf("json") >= 0 ? r = A(r) : ("script" === i || !i && s.indexOf("javascript") >= 0) && t.globalEval(r)),
                r
            }
            ;
            return C
        }
        if (!this.length)
            return n("ajaxSubmit: skipping submit process - no element selected"),
            this;
        var l, c, d, h = this;
        "function" == typeof e && (e = {
            success: e
        }),
        l = e.type || this.attr2("method"),
        c = e.url || this.attr2("action"),
        d = "string" == typeof c ? t.trim(c) : "",
        d = d || window.location.href || "",
        d && (d = (d.match(/^([^#]+)/) || [])[1]),
        e = t.extend(!0, {
            url: d,
            success: t.ajaxSettings.success,
            type: l || "GET",
            iframeSrc: /^https/i.test(window.location.href || "") ? "javascript:false" : "about:blank"
        }, e);
        var u = {};
        if (this.trigger("form-pre-serialize", [this, e, u]),
        u.veto)
            return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),
            this;
        if (e.beforeSerialize && e.beforeSerialize(this, e) === !1)
            return n("ajaxSubmit: submit aborted via beforeSerialize callback"),
            this;
        var p = e.traditional;
        void 0 === p && (p = t.ajaxSettings.traditional);
        var f, m = [], g = this.formToArray(e.semantic, m);
        if (e.data && (e.extraData = e.data,
        f = t.param(e.data, p)),
        e.beforeSubmit && e.beforeSubmit(g, this, e) === !1)
            return n("ajaxSubmit: submit aborted via beforeSubmit callback"),
            this;
        if (this.trigger("form-submit-validate", [g, this, e, u]),
        u.veto)
            return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),
            this;
        var v = t.param(g, p);
        f && (v = v ? v + "&" + f : f),
        "GET" == e.type.toUpperCase() ? (e.url += (e.url.indexOf("?") >= 0 ? "&" : "?") + v,
        e.data = null ) : e.data = v;
        var b = [];
        if (e.resetForm && b.push(function() {
            h.resetForm()
        }
        ),
        e.clearForm && b.push(function() {
            h.clearForm(e.includeHidden)
        }
        ),
        !e.dataType && e.target) {
            var _ = e.success || function() {}
            ;
            b.push(function(i) {
                var n = e.replaceTarget ? "replaceWith" : "html";
                t(e.target)[n](i).each(_, arguments)
            }
            )
        } else
            e.success && b.push(e.success);
        if (e.success = function(t, i, n) {
            for (var s = e.context || this, a = 0, r = b.length; r > a; a++)
                b[a].apply(s, [t, i, n || h, h])
        }
        ,
        e.error) {
            var y = e.error;
            e.error = function(t, i, n) {
                var s = e.context || this;
                y.apply(s, [t, i, n, h])
            }
        }
        if (e.complete) {
            var x = e.complete;
            e.complete = function(t, i) {
                var n = e.context || this;
                x.apply(n, [t, i, h])
            }
        }
        var w = t('input[type=file]:enabled[value!=""]', this)
          , k = w.length > 0
          , C = "multipart/form-data"
          , T = h.attr("enctype") == C || h.attr("encoding") == C
          , S = s.fileapi && s.formdata;
        n("fileAPI :" + S);
        var D, $ = (k || T) && !S;
        e.iframe !== !1 && (e.iframe || $) ? e.closeKeepAlive ? t.get(e.closeKeepAlive, function() {
            D = o(g)
        }
        ) : D = o(g) : D = (k || T) && S ? r(g) : t.ajax(e),
        h.removeData("jqxhr").data("jqxhr", D);
        for (var E = 0; E < m.length; E++)
            m[E] = null ;
        return this.trigger("form-submit-notify", [this, e]),
        this
    }
    ,
    t.fn.ajaxForm = function(s) {
        if (s = s || {},
        s.delegation = s.delegation && t.isFunction(t.fn.on),
        !s.delegation && 0 === this.length) {
            var a = {
                s: this.selector,
                c: this.context
            };
            return !t.isReady && a.s ? (n("DOM not ready, queuing ajaxForm"),
            t(function() {
                t(a.s, a.c).ajaxForm(s)
            }
            ),
            this) : (n("terminating; zero elements found by selector" + (t.isReady ? "" : " (DOM not ready)")),
            this)
        }
        return s.delegation ? (t(document).off("submit.form-plugin", this.selector, e).off("click.form-plugin", this.selector, i).on("submit.form-plugin", this.selector, s, e).on("click.form-plugin", this.selector, s, i),
        this) : this.ajaxFormUnbind().bind("submit.form-plugin", s, e).bind("click.form-plugin", s, i)
    }
    ,
    t.fn.ajaxFormUnbind = function() {
        return this.unbind("submit.form-plugin click.form-plugin")
    }
    ,
    t.fn.formToArray = function(e, i) {
        var n = [];
        if (0 === this.length)
            return n;
        var a = this[0]
          , r = e ? a.getElementsByTagName("*") : a.elements;
        if (!r)
            return n;
        var o, l, c, d, h, u, p;
        for (o = 0,
        u = r.length; u > o; o++)
            if (h = r[o],
            c = h.name,
            c && !h.disabled)
                if (e && a.clk && "image" == h.type)
                    a.clk == h && (n.push({
                        name: c,
                        value: t(h).val(),
                        type: h.type
                    }),
                    n.push({
                        name: c + ".x",
                        value: a.clk_x
                    }, {
                        name: c + ".y",
                        value: a.clk_y
                    }));
                else if (d = t.fieldValue(h, !0),
                d && d.constructor == Array)
                    for (i && i.push(h),
                    l = 0,
                    p = d.length; p > l; l++)
                        n.push({
                            name: c,
                            value: d[l]
                        });
                else if (s.fileapi && "file" == h.type) {
                    i && i.push(h);
                    var f = h.files;
                    if (f.length)
                        for (l = 0; l < f.length; l++)
                            n.push({
                                name: c,
                                value: f[l],
                                type: h.type
                            });
                    else
                        n.push({
                            name: c,
                            value: "",
                            type: h.type
                        })
                } else
                    null  !== d && "undefined" != typeof d && (i && i.push(h),
                    n.push({
                        name: c,
                        value: d,
                        type: h.type,
                        required: h.required
                    }));
        if (!e && a.clk) {
            var m = t(a.clk)
              , g = m[0];
            c = g.name,
            c && !g.disabled && "image" == g.type && (n.push({
                name: c,
                value: m.val()
            }),
            n.push({
                name: c + ".x",
                value: a.clk_x
            }, {
                name: c + ".y",
                value: a.clk_y
            }))
        }
        return n
    }
    ,
    t.fn.formSerialize = function(e) {
        return t.param(this.formToArray(e))
    }
    ,
    t.fn.fieldSerialize = function(e) {
        var i = [];
        return this.each(function() {
            var n = this.name;
            if (n) {
                var s = t.fieldValue(this, e);
                if (s && s.constructor == Array)
                    for (var a = 0, r = s.length; r > a; a++)
                        i.push({
                            name: n,
                            value: s[a]
                        });
                else
                    null  !== s && "undefined" != typeof s && i.push({
                        name: this.name,
                        value: s
                    })
            }
        }
        ),
        t.param(i)
    }
    ,
    t.fn.fieldValue = function(e) {
        for (var i = [], n = 0, s = this.length; s > n; n++) {
            var a = this[n]
              , r = t.fieldValue(a, e);
            null  === r || "undefined" == typeof r || r.constructor == Array && !r.length || (r.constructor == Array ? t.merge(i, r) : i.push(r))
        }
        return i
    }
    ,
    t.fieldValue = function(e, i) {
        var n = e.name
          , s = e.type
          , a = e.tagName.toLowerCase();
        if (void 0 === i && (i = !0),
        i && (!n || e.disabled || "reset" == s || "button" == s || ("checkbox" == s || "radio" == s) && !e.checked || ("submit" == s || "image" == s) && e.form && e.form.clk != e || "select" == a && -1 == e.selectedIndex))
            return null ;
        if ("select" == a) {
            var r = e.selectedIndex;
            if (0 > r)
                return null ;
            for (var o = [], l = e.options, c = "select-one" == s, d = c ? r + 1 : l.length, h = c ? r : 0; d > h; h++) {
                var u = l[h];
                if (u.selected) {
                    var p = u.value;
                    if (p || (p = u.attributes && u.attributes.value && !u.attributes.value.specified ? u.text : u.value),
                    c)
                        return p;
                    o.push(p)
                }
            }
            return o
        }
        return t(e).val()
    }
    ,
    t.fn.clearForm = function(e) {
        return this.each(function() {
            t("input,select,textarea", this).clearFields(e)
        }
        )
    }
    ,
    t.fn.clearFields = t.fn.clearInputs = function(e) {
        var i = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;
        return this.each(function() {
            var n = this.type
              , s = this.tagName.toLowerCase();
            i.test(n) || "textarea" == s ? this.value = "" : "checkbox" == n || "radio" == n ? this.checked = !1 : "select" == s ? this.selectedIndex = -1 : "file" == n ? /MSIE/.test(navigator.userAgent) ? t(this).replaceWith(t(this).clone(!0)) : t(this).val("") : e && (e === !0 && /hidden/.test(n) || "string" == typeof e && t(this).is(e)) && (this.value = "")
        }
        )
    }
    ,
    t.fn.resetForm = function() {
        return this.each(function() {
            ("function" == typeof this.reset || "object" == typeof this.reset && !this.reset.nodeType) && this.reset()
        }
        )
    }
    ,
    t.fn.enable = function(t) {
        return void 0 === t && (t = !0),
        this.each(function() {
            this.disabled = !t
        }
        )
    }
    ,
    t.fn.selected = function(e) {
        return void 0 === e && (e = !0),
        this.each(function() {
            var i = this.type;
            if ("checkbox" == i || "radio" == i)
                this.checked = e;
            else if ("option" == this.tagName.toLowerCase()) {
                var n = t(this).parent("select");
                e && n[0] && "select-one" == n[0].type && n.find("option").selected(!1),
                this.selected = e
            }
        }
        )
    }
    ,
    t.fn.ajaxSubmit.debug = !1
}
(jQuery),
function(t) {
    var e, i, n = function(e) {
        return t(e).attr("href")
    }
    , s = function(t) {
        return null  === t && "Null" || t === i && "Undefined" || {}.toString.call(t).slice(8, -1)
    }
    ;
    t.fn.idTabs = function() {
        var t = e.args.apply(this, arguments)
          , i = t.update && "update" || t.remove && "remove" || "bind";
        return t.area = this,
        e[i](t),
        this
    }
    ,
    e = t.idTabs = function(a, r, o) {
        var l, c, d, h = t(), u = t.metadata ? t(a).metadata() : {}, p = {
            tab: e.tab,
            item: e.item
        };
        return p = t.extend(p, e.settings, u, r || {}),
        p.tabarea = t(a),
        p.data = o || "idTabs" + +new Date,
        t.each({
            selected: ".",
            event: "!",
            start: "#"
        }, function(t, e) {
            "String" == s(p[t]) && 0 == p[t].indexOf(e) && (p[t] = p[t].substr(1))
        }
        ),
        null  === p.start && (p.start = -1),
        d = [],
        p.tabs = c = t("a[href^=#]", a),
        c.each(function() {
            h = p.item(n(this)),
            h.length && (d = d.concat(h.get()))
        }
        ),
        p.items = t(d).hide(),
        l = "idTabs." + p.event,
        o = p.tabarea.data("idTabs") || {},
        o[l] = p,
        p.tabarea.data("idTabs", o),
        c.trigger(l).data(p.data, p).bind(l, {
            s: p
        }, function() {
            return e.unbind.apply(this, arguments)
        }
        ).bind(p.event, {
            s: p
        }, e.find),
        "Number" == s(p.start) && (p.start < 0 || (h = c.eq(p.start)).length) || "String" == s(p.start) && (h = c.filter("a[href=#" + p.start + "]")).length || (h = c.filter("." + p.selected).removeClass(p.selected)).length || p.start === i && (h = c.eq(0)).length,
        h.length && h.trigger(p.event),
        p
    }
    ,
    e.args = function() {
        for (var e, i = 0, n = {}, a = arguments, r = function(t, e) {
            0 == e.indexOf(".") ? n.selected = e : 0 == e.indexOf("!") ? /^!(true|false)$/i.test(e) ? n.toggle = /^!true$/i.test(e) : n.event = e : 0 == e.indexOf(":") ? (e = e.substr(1).toLowerCase(),
            0 == e.indexOf("!") ? n[e.substr(1)] = !1 : n[e] = !0) : e && (n.start = e)
        }
        ; i < a.length; )
            switch (e = a[i++],
            s(e)) {
            case "Object":
                t.extend(n, e);
                break;
            case "Boolean":
                n.change = e;
                break;
            case "Number":
                n.start = e;
                break;
            case "Function":
                n.click = e;
                break;
            case "Null":
                n.start = e;
                break;
            case "String":
                t.each(e.split(/\s+/g), r)
            }
        return n
    }
    ,
    e.bind = function(e) {
        if (e) {
            var i = "idTabs" + +new Date;
            e.grouped ? t.idTabs(e.area, e, i) : e.area.each(function() {
                t.idTabs(this, e, i)
            }
            )
        }
    }
    ,
    e.update = function(i) {
        if (i) {
            i.update = !1;
            var n, s, a, r = i.event;
            return r = 0 == (r + "").indexOf("!") && r.substr(1) || r,
            r = r ? "idTabs." + r : "",
            i.area.each(function() {
                if (n = t(this),
                s = n.data("idTabs"))
                    if (r)
                        a = t.extend({}, s[r], i),
                        e.remove(s[r]),
                        e(a.tabarea, a, a.data);
                    else
                        for (r in s)
                            Object.hasOwnProperty.call(s, r) && (a = t.extend({}, s[r], i),
                            e.remove(s[r]),
                            e(a.tabarea, a, a.data))
            }
            )
        }
    }
    ,
    e.remove = function(e) {
        if (e) {
            var i, n, s = e.event;
            return s = 0 == (s + "").indexOf("!") && s.substr(1) || s,
            s = "idTabs" + (s ? "." + s : ""),
            e.area.each(function() {
                i = t(this).data("idTabs"),
                delete i["idTabs." + e.event],
                t(this).data("idTabs", i),
                n = e.tabs || t("a[href^=#]", this),
                !n.length && t(this).is("a[href^=#]") && (n = t(this)),
                n.trigger(s)
            }
            )
        }
    }
    ,
    e.find = function(i) {
        var s = this
          , a = !1
          , r = i.data.s;
        return t("a[href=" + n(this) + "]:first", r.area).each(function() {
            var n = t(this).data(r.data);
            n && (a = e.showtab.call(n.tabarea == r.tabarea ? s : this, n, i) || a)
        }
        ),
        a
    }
    ,
    e.showtab = function(i, s) {
        if (!i || !i.toggle && t(this).is("." + i.selected))
            return i && i.change;
        var a = n(this);
        return i.click && 0 == i.click.call(this, a, i, s) ? i.change : (i.toggle && t(this).is("." + i.selected) && (a = null ),
        e.show.call(this, a, i, s))
    }
    ,
    e.show = function(t, e) {
        return e.tabs.removeClass(e.selected),
        e.tab(t).addClass(e.selected),
        e.items.hide(),
        e.item(t).show(),
        e.change
    }
    ,
    e.unbind = function(e) {
        var i = e.data.s;
        return t(this).removeData(i.data).unbind("idTabs." + i.event),
        !1
    }
    ,
    e.extend = function() {
        var t = arguments;
        return function() {
            [].push.apply(t, arguments),
            this.idTabs.apply(this, t)
        }
    }
    ,
    e.tab = function(e) {
        return e ? t("a[href=" + e + "]", this.tabarea) : t([])
    }
    ,
    e.item = function(e) {
        if (!e)
            return t([]);
        var i = t(e);
        return i.length ? i : t("." + e.substr(1))
    }
    ,
    e.settings = {
        start: i,
        change: !1,
        click: null ,
        selected: ".selected",
        event: "!click",
        toggle: !1,
        grouped: !1
    },
    e.version = "3.0",
    t(function() {
        t(".idTabs").idTabs()
    }
    )
}
(jQuery),
function(t, e) {
    "use strict";
    function i(t) {
        var e = Array.prototype.slice.call(arguments, 1);
        return t.prop ? t.prop.apply(t, e) : t.attr.apply(t, e)
    }
    function n(t, e, i) {
        var n, s;
        for (n in i)
            i.hasOwnProperty(n) && (s = n.replace(/ |$/g, e.eventNamespace),
            t.bind(n, i[n]))
    }
    function s(t, e, i) {
        n(t, i, {
            focus: function() {
                e.addClass(i.focusClass)
            },
            blur: function() {
                e.removeClass(i.focusClass),
                e.removeClass(i.activeClass)
            },
            mouseenter: function() {
                e.addClass(i.hoverClass)
            },
            mouseleave: function() {
                e.removeClass(i.hoverClass),
                e.removeClass(i.activeClass)
            },
            "mousedown touchbegin": function() {
                t.is(":disabled") || e.addClass(i.activeClass)
            },
            "mouseup touchend": function() {
                e.removeClass(i.activeClass)
            }
        })
    }
    function a(t, e) {
        t.removeClass(e.hoverClass + " " + e.focusClass + " " + e.activeClass)
    }
    function r(t, e, i) {
        i ? t.addClass(e) : t.removeClass(e)
    }
    function o(t, e, i) {
        var n = "checked"
          , s = e.is(":" + n);
        e.prop ? e.prop(n, s) : s ? e.attr(n, n) : e.removeAttr(n),
        r(t, i.checkedClass, s)
    }
    function l(t, e, i) {
        r(t, i.disabledClass, e.is(":disabled"))
    }
    function c(t, e, i) {
        switch (i) {
        case "after":
            return t.after(e),
            t.next();
        case "before":
            return t.before(e),
            t.prev();
        case "wrap":
            return t.wrap(e),
            t.parent()
        }
        return null 
    }
    function d(e, n, s) {
        var a, r, o;
        return s || (s = {}),
        s = t.extend({
            bind: {},
            divClass: null ,
            divWrap: "wrap",
            spanClass: null ,
            spanHtml: null ,
            spanWrap: "wrap"
        }, s),
        a = t("<div />"),
        r = t("<span />"),
        n.autoHide && e.is(":hidden") && "none" === e.css("display") && a.hide(),
        s.divClass && a.addClass(s.divClass),
        s.spanClass && r.addClass(s.spanClass),
        o = i(e, "id"),
        n.useID && o && i(a, "id", n.idPrefix + "-" + o),
        s.spanHtml && r.html(s.spanHtml),
        a = c(e, a, s.divWrap),
        r = c(e, r, s.spanWrap),
        l(a, e, n),
        {
            div: a,
            span: r
        }
    }
    function h() {
        var e, i, n, s;
        return s = "rgb(120,2,153)",
        i = t('<div style="width:0;height:0;color:' + s + '">'),
        t("body").append(i),
        n = i.get(0),
        e = window.getComputedStyle ? window.getComputedStyle(n, "").color : (n.currentStyle || n.style || {}).color,
        i.remove(),
        e.replace(/ /g, "") !== s
    }
    function u(e) {
        return e ? t("<span />").text(e).html() : ""
    }
    function p(t) {
        var e;
        return t[0].multiple ? !0 : (e = i(t, "size"),
        !e || 1 >= e ? !1 : !0)
    }
    function f() {
        return !1
    }
    function m(t, e) {
        var i = "none";
        n(t, e, {
            "selectstart dragstart mousedown": f
        }),
        t.css({
            MozUserSelect: i,
            msUserSelect: i,
            webkitUserSelect: i,
            userSelect: i
        })
    }
    function g(t, e, i) {
        var n = t.val();
        "" === n ? n = i.fileDefaultHtml : (n = n.split(/[\/\\]+/),
        n = n[n.length - 1]),
        e.text(n)
    }
    function v(t, e, i) {
        var n, s;
        for (n = [],
        t.each(function() {
            var t;
            for (t in e)
                Object.prototype.hasOwnProperty.call(e, t) && (n.push({
                    el: this,
                    name: t,
                    old: this.style[t]
                }),
                this.style[t] = e[t])
        }
        ),
        i(); n.length; )
            s = n.pop(),
            s.el.style[s.name] = s.old
    }
    function b(t, e) {
        v(t.parents().andSelf().not(":visible"), {
            visibility: "hidden",
            display: "block",
            position: "absolute"
        }, e)
    }
    function _(t, e) {
        return function() {
            t.unwrap().unwrap().unbind(e.eventNamespace)
        }
    }
    var y = !0
      , x = !1
      , w = [{
        match: function(t) {
            return t.is("a, button, :submit, :reset, input[type='button']")
        },
        apply: function(t, e) {
            var r, o, c, h, p;
            return o = e.submitDefaultHtml,
            t.is(":reset") && (o = e.resetDefaultHtml),
            h = t.is("a, button") ? function() {
                return t.html() || o
            }
             : function() {
                return u(i(t, "value")) || o
            }
            ,
            c = d(t, e, {
                divClass: e.buttonClass,
                spanHtml: h()
            }),
            r = c.div,
            s(t, r, e),
            p = !1,
            n(r, e, {
                "click touchend": function() {
                    var e, n, s, a;
                    p || (p = !0,
                    t[0].dispatchEvent ? (e = document.createEvent("MouseEvents"),
                    e.initEvent("click", !0, !0),
                    n = t[0].dispatchEvent(e),
                    (jQuery.browser.msie || jQuery.browser.mozilla) && t.is("a") && n && (s = i(t, "target"),
                    a = i(t, "href"),
                    s && "_self" !== s ? window.open(a, s) : document.location.href = a)) : t.click(),
                    p = !1)
                }
            }),
            m(r, e),
            {
                remove: function() {
                    return r.after(t),
                    r.remove(),
                    t.unbind(e.eventNamespace),
                    t
                },
                update: function() {
                    a(r, e),
                    l(r, t, e),
                    c.span.html(h())
                }
            }
        }
    }, {
        match: function(t) {
			if(t.attr('noUniform'))
			{
			  return false;	
			}
            return t.is(":checkbox")
        },
        apply: function(t, e) {
            var i, r, c;
            return i = d(t, e, {
                divClass: e.checkboxClass
            }),
            r = i.div,
            c = i.span,
            s(t, r, e),
            n(t, e, {
                "click touchend": function() {
                    o(c, t, e)
                }
            }),
            o(c, t, e),
            {
                remove: _(t, e),
                update: function() {
                    a(r, e),
                    c.removeClass(e.checkedClass),
                    o(c, t, e),
                    l(r, t, e)
                }
            }
        }
    }, {
        match: function(t) {
            return t.is(":file")
        },
        apply: function(e, r) {
            function o() {
                g(e, p, r)
            }
            var h, u, p, f;
            return h = d(e, r, {
                divClass: r.fileClass,
                spanClass: r.fileButtonClass,
                spanHtml: r.fileButtonHtml,
                spanWrap: "after"
            }),
            u = h.div,
            f = h.span,
            p = t("<span />").html(r.fileDefaultHtml),
            p.addClass(r.filenameClass),
            p = c(e, p, "after"),
            i(e, "size") || i(e, "size", u.width() / 10),
            s(e, u, r),
            o(),
            t.browser.msie ? n(e, r, {
                click: function() {
                    e.trigger("change"),
                    setTimeout(o, 0)
                }
            }) : n(e, r, {
                change: o
            }),
            m(p, r),
            m(f, r),
            {
                remove: function() {
                    return p.remove(),
                    f.remove(),
                    e.unwrap().unbind(r.eventNamespace)
                },
                update: function() {
                    a(u, r),
                    g(e, p, r),
                    l(u, e, r)
                }
            }
        }
    }, {
        match: function(t) {
            if (t.is("input")) {
                var e = (" " + i(t, "type") + " ").toLowerCase()
                  , n = " color date datetime datetime-local email month number password search tel text time url week ";
                return n.indexOf(e) >= 0
            }
            return !1
        },
        apply: function(t) {
            var e = i(t, "type");
            return t.addClass(e),
            {
                remove: function() {
                    t.removeClass(e)
                },
                update: f
            }
        }
    }, {
        match: function(t) {
			if(t.attr('noUniform'))
			{
			  return false;	
			}	
            return t.is(":radio")
        },
        apply: function(e, r) {
            var c, h, u;
            return c = d(e, r, {
                divClass: r.radioClass
            }),
            h = c.div,
            u = c.span,
            s(e, h, r),
            n(e, r, {
                "click touchend": function() {
                    t.uniform.update(t(':radio[name="' + i(e, "name") + '"]'))
                }
            }),
            o(u, e, r),
            {
                remove: _(e, r),
                update: function() {
                    a(h, r),
                    o(u, e, r),
                    l(h, e, r)
                }
            }
        }
    }, {
        match: function(t) {
            return t.is("select") && !p(t) ? !0 : !1
        },
        apply: function(e, i) {
            var r, o, c, h;
            return i.selectAutoWidth && b(e, function() {
                h = e.width()
            }
            ),
            r = d(e, i, {
                divClass: i.selectClass,
                spanHtml: (e.find(":selected:first") || e.find("option:first")).html(),
                spanWrap: "before"
            }),
            o = r.div,
            c = r.span,
            i.selectAutoWidth ? b(e, function() {
                var t;
                t = c.outerWidth() - c.width(),
                o.width(h + t),
                c.width(h)
            }
            ) : o.addClass("fixedWidth"),
            s(e, o, i),
            n(e, i, {
                change: function() {
                    c.html(e.find(":selected").html()),
                    o.removeClass(i.activeClass)
                },
                "click touchend": function() {
                    var t = e.find(":selected").html();
                    c.html() !== t && e.trigger("change")
                },
                keyup: function() {
                    c.html(e.find(":selected").html())
                }
            }),
            m(c, i),
            {
                remove: function() {
                    return c.remove(),
                    e.unwrap().unbind(i.eventNamespace),
                    e
                },
                update: function() {
                    i.selectAutoWidth ? (t.uniform.restore(e),
                    e.uniform(i)) : (a(o, i),
                    c.html(e.find(":selected").html()),
                    l(o, e, i))
                }
            }
        }
    }, {
        match: function(t) {
            return t.is("select") && p(t) ? !0 : !1
        },
        apply: function(t, e) {
            return t.addClass(e.selectMultiClass),
            {
                remove: function() {
                    t.removeClass(e.selectMultiClass)
                },
                update: f
            }
        }
    }, {
        match: function(t) {
            return t.is("textarea")
        },
        apply: function(t, e) {
            return t.addClass(e.textareaClass),
            {
                remove: function() {
                    t.removeClass(e.textareaClass)
                },
                update: f
            }
        }
    }];
    t.browser.msie && t.browser.version < 7 && (y = !1),
    t.uniform = {
        defaults: {
            activeClass: "active",
            autoHide: !0,
            buttonClass: "button",
            checkboxClass: "checker",
            checkedClass: "checked",
            disabledClass: "disabled",
            eventNamespace: ".uniform",
            fileButtonClass: "action",
            fileButtonHtml: "<i class='a-icon-plus'></i>",
            fileClass: "uploader",
            fileDefaultHtml: "Выберите файл...",
            filenameClass: "filename",
            focusClass: "focus",
            hoverClass: "hover",
            idPrefix: "uniform",
            radioClass: "radio",
            resetDefaultHtml: "Reset",
            resetSelector: !1,
            selectAutoWidth: !0,
            selectClass: "selector",
            selectMultiClass: "uniform-multiselect",
            submitDefaultHtml: "Submit",
            textareaClass: "uniform",
            useID: !0
        },
        elements: []
    },
    t.fn.uniform = function(e) {
        var i = this;
        return e = t.extend({}, t.uniform.defaults, e),
        x || (x = !0,
        h() && (y = !1)),
        y ? (e.resetSelector && t(e.resetSelector).mouseup(function() {
            window.setTimeout(function() {
                t.uniform.update(i)
            }
            , 10)
        }
        ),
        this.each(function() {
            var i, n, s, a = t(this);
            if (a.data("uniformed"))
                return void t.uniform.update(a);
            for (i = 0; i < w.length; i += 1)
                if (n = w[i],
                n.match(a, e))
                    return s = n.apply(a, e),
                    a.data("uniformed", s),
                    void t.uniform.elements.push(a.get(0))
        }
        )) : this
    }
    ,
    t.uniform.restore = t.fn.uniform.restore = function(i) {
        i === e && (i = t.uniform.elements),
        t(i).each(function() {
            var e, i, n = t(this);
            i = n.data("uniformed"),
            i && (i.remove(),
            e = t.inArray(this, t.uniform.elements),
            e >= 0 && t.uniform.elements.splice(e, 1),
            n.removeData("uniformed"))
        }
        )
    }
    ,
    t.uniform.update = t.fn.uniform.update = function(i) {
        i === e && (i = t.uniform.elements),
        t(i).each(function() {
            var e, i = t(this);
            e = i.data("uniformed"),
            e && e.update(i, e.options)
        }
        )
    }
}
(jQuery),
+function(t) {
    "use strict";
    function e() {
        t(n).remove(),
        t(s).each(function(e) {
            var n = i(t(this));
            n.hasClass("open") && (n.trigger(e = t.Event("hide.bs.dropdown")),
            e.isDefaultPrevented() || n.removeClass("open").trigger("hidden.bs.dropdown"))
        }
        )
    }
    function i(e) {
        var i = e.attr("data-target");
        i || (i = e.attr("href"),
        i = i && /#/.test(i) && i.replace(/.*(?=#[^\s]*$)/, ""));
        var n = i && t(i);
        return n && n.length ? n : e.parent()
    }
    var n = ".dropdown-backdrop"
      , s = "[data-toggle=dropdown]"
      , a = function(e) {
        t(e).on("click.bs.dropdown", this.toggle)
    }
    ;
    a.prototype.toggle = function(n) {
        var s = t(this);
        if (!s.is(".disabled, :disabled")) {
            var a = i(s)
              , r = a.hasClass("open");
            if (e(),
            !r) {
                if ("ontouchstart" in document.documentElement && !a.closest(".navbar-nav").length && t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click", e),
                a.trigger(n = t.Event("show.bs.dropdown")),
                n.isDefaultPrevented())
                    return;
                a.toggleClass("open").trigger("shown.bs.dropdown"),
                s.focus()
            }
            return !1
        }
    }
    ,
    a.prototype.keydown = function(e) {
        if (/(38|40|27)/.test(e.keyCode)) {
            var n = t(this);
            if (e.preventDefault(),
            e.stopPropagation(),
            !n.is(".disabled, :disabled")) {
                var a = i(n)
                  , r = a.hasClass("open");
                if (!r || r && 27 == e.keyCode)
                    return 27 == e.which && a.find(s).focus(),
                    n.click();
                var o = t("[role=menu] li:not(.divider):visible a", a);
                if (o.length) {
                    var l = o.index(o.filter(":focus"));
                    38 == e.keyCode && l > 0 && l--,
                    40 == e.keyCode && l < o.length - 1 && l++,
                    ~l || (l = 0),
                    o.eq(l).focus()
                }
            }
        }
    }
    ;
    var r = t.fn.dropdown;
    t.fn.dropdown = function(e) {
        return this.each(function() {
            var i = t(this)
              , n = i.data("bs.dropdown");
            n || i.data("bs.dropdown", n = new a(this)),
            "string" == typeof e && n[e].call(i)
        }
        )
    }
    ,
    t.fn.dropdown.Constructor = a,
    t.fn.dropdown.noConflict = function() {
        return t.fn.dropdown = r,
        this
    }
    ,
    t(document).on("click.bs.dropdown.data-api", e).on("click.bs.dropdown.data-api", ".dropdown form", function(t) {
        t.stopPropagation()
    }
    ).on("click.bs.dropdown.data-api", s, a.prototype.toggle).on("keydown.bs.dropdown.data-api", s + ", [role=menu]", a.prototype.keydown).on("click", ".dropdown-menu > li > a", e)
}
(jQuery),
function(t) {
    function e(t, i) {
        return new e.prototype.init(t,i)
    }
    var n = 0
      , s = function(t) {
        return this[0] = t.startOffset,
        this[1] = t.endOffset,
        this.range = t,
        this
    }
    ;
    s.prototype.equals = function() {
        return this[0] === this[1]
    }
    ,
    t.fn.redactor = function(i) {
        var n = []
          , s = Array.prototype.slice.call(arguments, 1);
        return this.each("string" == typeof i ? function() {
            var e = t.data(this, "redactor");
            if ("undefined" == typeof e || !t.isFunction(e[i]))
                return t.error('No such method "' + i + '" for Redactor');
            var a = e[i].apply(e, s);
            void 0 !== a && a !== e && n.push(a)
        }
         : function() {
            t.data(this, "redactor") || t.data(this, "redactor", e(this, i))
        }
        ),
        0 === n.length ? this : 1 === n.length ? n[0] : n
    }
    ,
    t.Redactor = e,
    t.Redactor.VERSION = "9.1.9",
    t.Redactor.opts = {
        rangy: !1,
        iframe: !1,
        fullpage: !1,
        css: !1,
        lang: "en",
        direction: "ltr",
        placeholder: !1,
        wym: !1,
        mobile: !0,
        cleanup: !0,
        tidyHtml: !0,
        pastePlainText: !1,
        removeEmptyTags: !0,
        templateVars: !1,
        xhtml: !1,
        visual: !0,
        focus: !1,
        tabindex: !1,
        autoresize: !0,
        minHeight: !1,
        maxHeight: !1,
        shortcuts: !0,
        autosave: !1,
        autosaveInterval: 60,
        plugins: !1,
        linkAnchor: !0,
        linkEmail: !0,
        linkProtocol: "http://",
        linkNofollow: !1,
        linkSize: 50,
        imageFloatMargin: "10px",
        imageGetJson: !1,
        imageUpload: !1,
        imageUploadParam: "file",
        fileUpload: !1,
        fileUploadParam: "file",
        clipboardUpload: !0,
        clipboardUploadUrl: !1,
        dragUpload: !0,
        dnbImageTypes: ["image/png", "image/jpeg", "image/gif"],
        s3: !1,
        uploadFields: !1,
        observeImages: !0,
        observeLinks: !0,
        modalOverlay: !0,
        tabSpaces: !1,
        tabFocus: !0,
        air: !1,
        airButtons: ["formatting", "|", "bold", "italic", "deleted", "|", "unorderedlist", "orderedlist", "outdent", "indent"],
        toolbar: !0,
        toolbarFixed: !1,
        toolbarFixedTarget: document,
        toolbarFixedTopOffset: 0,
        toolbarFixedBox: !1,
        toolbarExternal: !1,
        buttonSource: !0,
        buttonSeparator: '<li class="redactor_separator"></li>',
        buttonsCustom: {},
        buttonsAdd: [],
        buttons: ["html", "|", "formatting", "|", "bold", "italic", "deleted", "|", "unorderedlist", "orderedlist", "outdent", "indent", "|", "image", "video", "file", "table", "link", "|", "alignment", "|", "horizontalrule"],
        activeButtons: ["deleted", "italic", "bold", "underline", "unorderedlist", "orderedlist", "alignleft", "aligncenter", "alignright", "justify", "table"],
        activeButtonsStates: {
            b: "bold",
            strong: "bold",
            i: "italic",
            em: "italic",
            del: "deleted",
            strike: "deleted",
            ul: "unorderedlist",
            ol: "orderedlist",
            u: "underline",
            tr: "table",
            td: "table",
            table: "table"
        },
        activeButtonsAdd: !1,
        formattingTags: ["p", "blockquote", "pre", "h1", "h2", "h3", "h4", "h5", "h6"],
        linebreaks: !1,
        paragraphy: !0,
        convertDivs: !0,
        convertLinks: !0,
        convertImageLinks: !1,
        convertVideoLinks: !1,
        formattingPre: !1,
        phpTags: !1,
        allowedTags: !1,
        deniedTags: ["html", "head", "link", "body", "meta", "script", "style", "applet"],
        boldTag: "strong",
        italicTag: "em",
        indentValue: 20,
        buffer: [],
        rebuffer: [],
        textareamode: !1,
        emptyHtml: "<p>&#x200b;</p>",
        invisibleSpace: "&#x200b;",
        rBlockTest: /^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,
        alignmentTags: ["P", "H1", "H2", "H3", "H4", "H5", "H6", "DD", "DL", "DT", "DIV", "TD", "BLOCKQUOTE", "OUTPUT", "FIGCAPTION", "ADDRESS", "SECTION", "HEADER", "FOOTER", "ASIDE", "ARTICLE"],
        ownLine: ["area", "body", "head", "hr", "i?frame", "link", "meta", "noscript", "style", "script", "table", "tbody", "thead", "tfoot"],
        contOwnLine: ["li", "dt", "dt", "h[1-6]", "option", "script"],
        newLevel: ["blockquote", "div", "dl", "fieldset", "form", "frameset", "map", "ol", "p", "pre", "select", "td", "th", "tr", "ul"],
        blockLevelElements: ["P", "H1", "H2", "H3", "H4", "H5", "H6", "DD", "DL", "DT", "DIV", "LI", "BLOCKQUOTE", "OUTPUT", "FIGCAPTION", "PRE", "ADDRESS", "SECTION", "HEADER", "FOOTER", "ASIDE", "ARTICLE", "TD"],
        langs: {
            en: {
                html: "HTML",
                video: "Insert Video",
                image: "Insert Image",
                table: "Table",
                link: "Link",
                link_insert: "Insert link",
                link_edit: "Edit link",
                unlink: "Unlink",
                formatting: "Formatting",
                paragraph: "Normal text",
                quote: "Quote",
                code: "Code",
                header1: "Header 1",
                header2: "Header 2",
                header3: "Header 3",
                header4: "Header 4",
                header5: "Header 5",
                bold: "Bold",
                italic: "Italic",
                fontcolor: "Font Color",
                backcolor: "Back Color",
                unorderedlist: "Unordered List",
                orderedlist: "Ordered List",
                outdent: "Outdent",
                indent: "Indent",
                cancel: "Cancel",
                insert: "Insert",
                save: "Save",
                _delete: "Delete",
                insert_table: "Insert Table",
                insert_row_above: "Add Row Above",
                insert_row_below: "Add Row Below",
                insert_column_left: "Add Column Left",
                insert_column_right: "Add Column Right",
                delete_column: "Delete Column",
                delete_row: "Delete Row",
                delete_table: "Delete Table",
                rows: "Rows",
                columns: "Columns",
                add_head: "Add Head",
                delete_head: "Delete Head",
                title: "Title",
                image_position: "Position",
                none: "None",
                left: "Left",
                right: "Right",
                image_web_link: "Image Web Link",
                text: "Text",
                mailto: "Email",
                web: "URL",
                video_html_code: "Video Embed Code",
                file: "Insert File",
                upload: "Upload",
                download: "Download",
                choose: "Choose",
                or_choose: "Or choose",
                drop_file_here: "Drop file here",
                align_left: "Align text to the left",
                align_center: "Center text",
                align_right: "Align text to the right",
                align_justify: "Justify text",
                horizontalrule: "Insert Horizontal Rule",
                deleted: "Deleted",
                anchor: "Anchor",
                link_new_tab: "Open link in new tab",
                underline: "Underline",
                alignment: "Alignment",
                filename: "Name (optional)",
                edit: "Edit"
            }
        }
    },
    e.fn = t.Redactor.prototype = {
        keyCode: {
            BACKSPACE: 8,
            DELETE: 46,
            DOWN: 40,
            ENTER: 13,
            ESC: 27,
            TAB: 9,
            CTRL: 17,
            META: 91,
            LEFT: 37,
            LEFT_WIN: 91
        },
        init: function(e, s) {
            this.rtePaste = !1,
            this.$element = this.$source = t(e),
            this.uuid = n++;
            var a = t.extend(!0, {}, t.Redactor.opts);
            if (this.opts = t.extend({}, a, this.$element.data(), s),
            this.start = !0,
            this.dropdowns = [],
            this.sourceHeight = this.$source.css("height"),
            this.sourceWidth = this.$source.css("width"),
            this.opts.fullpage && (this.opts.iframe = !0),
            this.opts.linebreaks && (this.opts.paragraphy = !1),
            this.opts.paragraphy && (this.opts.linebreaks = !1),
            this.opts.toolbarFixedBox && (this.opts.toolbarFixed = !0),
            this.document = document,
            this.window = window,
            this.savedSel = !1,
            this.cleanlineBefore = new RegExp("^<(/?" + this.opts.ownLine.join("|/?") + "|" + this.opts.contOwnLine.join("|") + ")[ >]"),
            this.cleanlineAfter = new RegExp("^<(br|/?" + this.opts.ownLine.join("|/?") + "|/" + this.opts.contOwnLine.join("|/") + ")[ >]"),
            this.cleannewLevel = new RegExp("^</?(" + this.opts.newLevel.join("|") + ")[ >]"),
            this.rTestBlock = new RegExp("^(" + this.opts.blockLevelElements.join("|") + ")$","i"),
            this.opts.linebreaks === !1) {
                if (this.opts.allowedTags !== !1) {
                    var r = ["strong", "em", "del"]
                      , o = ["b", "i", "strike"];
                    "-1" === t.inArray("p", this.opts.allowedTags) && this.opts.allowedTags.push("p");
                    for (i in r)
                        "-1" != t.inArray(r[i], this.opts.allowedTags) && this.opts.allowedTags.push(o[i])
                }
                if (this.opts.deniedTags !== !1) {
                    var l = t.inArray("p", this.opts.deniedTags);
                    "-1" !== l && this.opts.deniedTags.splice(l, l)
                }
            }
            (this.browser("msie") || this.browser("opera")) && (this.opts.buttons = this.removeFromArrayByValue(this.opts.buttons, "horizontalrule")),
            this.opts.curLang = this.opts.langs[this.opts.lang],
            this.buildStart()
        },
        toolbarInit: function(t) {
            return {
                html: {
                    title: t.html,
                    func: "toggle"
                },
                formatting: {
                    title: t.formatting,
                    func: "show",
                    dropdown: {
                        p: {
                            title: t.paragraph,
                            func: "formatBlocks"
                        },
                        blockquote: {
                            title: t.quote,
                            func: "formatQuote",
                            className: "redactor_format_blockquote"
                        },
                        pre: {
                            title: t.code,
                            func: "formatBlocks",
                            className: "redactor_format_pre"
                        },
                        h1: {
                            title: t.header1,
                            func: "formatBlocks",
                            className: "redactor_format_h1"
                        },
                        h2: {
                            title: t.header2,
                            func: "formatBlocks",
                            className: "redactor_format_h2"
                        },
                        h3: {
                            title: t.header3,
                            func: "formatBlocks",
                            className: "redactor_format_h3"
                        },
                        h4: {
                            title: t.header4,
                            func: "formatBlocks",
                            className: "redactor_format_h4"
                        },
                        h5: {
                            title: t.header5,
                            func: "formatBlocks",
                            className: "redactor_format_h5"
                        }
                    }
                },
                bold: {
                    title: t.bold,
                    exec: "bold"
                },
                italic: {
                    title: t.italic,
                    exec: "italic"
                },
                deleted: {
                    title: t.deleted,
                    exec: "strikethrough"
                },
                underline: {
                    title: t.underline,
                    exec: "underline"
                },
                unorderedlist: {
                    title: "&bull; " + t.unorderedlist,
                    exec: "insertunorderedlist"
                },
                orderedlist: {
                    title: "1. " + t.orderedlist,
                    exec: "insertorderedlist"
                },
                outdent: {
                    title: "< " + t.outdent,
                    func: "indentingOutdent"
                },
                indent: {
                    title: "> " + t.indent,
                    func: "indentingIndent"
                },
                image: {
                    title: t.image,
                    func: "imageShow"
                },
                video: {
                    title: t.video,
                    func: "videoShow"
                },
                file: {
                    title: t.file,
                    func: "fileShow"
                },
                table: {
                    title: t.table,
                    func: "show",
                    dropdown: {
                        insert_table: {
                            title: t.insert_table,
                            func: "tableShow"
                        },
                        separator_drop1: {
                            name: "separator"
                        },
                        insert_row_above: {
                            title: t.insert_row_above,
                            func: "tableAddRowAbove"
                        },
                        insert_row_below: {
                            title: t.insert_row_below,
                            func: "tableAddRowBelow"
                        },
                        insert_column_left: {
                            title: t.insert_column_left,
                            func: "tableAddColumnLeft"
                        },
                        insert_column_right: {
                            title: t.insert_column_right,
                            func: "tableAddColumnRight"
                        },
                        separator_drop2: {
                            name: "separator"
                        },
                        add_head: {
                            title: t.add_head,
                            func: "tableAddHead"
                        },
                        delete_head: {
                            title: t.delete_head,
                            func: "tableDeleteHead"
                        },
                        separator_drop3: {
                            name: "separator"
                        },
                        delete_column: {
                            title: t.delete_column,
                            func: "tableDeleteColumn"
                        },
                        delete_row: {
                            title: t.delete_row,
                            func: "tableDeleteRow"
                        },
                        delete_table: {
                            title: t.delete_table,
                            func: "tableDeleteTable"
                        }
                    }
                },
                link: {
                    title: t.link,
                    func: "show",
                    dropdown: {
                        link: {
                            title: t.link_insert,
                            func: "linkShow"
                        },
                        unlink: {
                            title: t.unlink,
                            exec: "unlink"
                        }
                    }
                },
                fontcolor: {
                    title: t.fontcolor,
                    func: "show"
                },
                backcolor: {
                    title: t.backcolor,
                    func: "show"
                },
                alignment: {
                    title: t.alignment,
                    func: "show",
                    dropdown: {
                        alignleft: {
                            title: t.align_left,
                            func: "alignmentLeft"
                        },
                        aligncenter: {
                            title: t.align_center,
                            func: "alignmentCenter"
                        },
                        alignright: {
                            title: t.align_right,
                            func: "alignmentRight"
                        },
                        justify: {
                            title: t.align_justify,
                            func: "alignmentJustify"
                        }
                    }
                },
                alignleft: {
                    title: t.align_left,
                    func: "alignmentLeft"
                },
                aligncenter: {
                    title: t.align_center,
                    func: "alignmentCenter"
                },
                alignright: {
                    title: t.align_right,
                    func: "alignmentRight"
                },
                justify: {
                    title: t.align_justify,
                    func: "alignmentJustify"
                },
                horizontalrule: {
                    exec: "inserthorizontalrule",
                    title: t.horizontalrule
                }
            }
        },
        callback: function(e, i, n) {
            var s = this.opts[e + "Callback"];
            return t.isFunction(s) ? i === !1 ? s.call(this, n) : s.call(this, i, n) : n
        },
        destroy: function() {
            clearInterval(this.autosaveInterval),
            t(window).off(".redactor"),
            this.$source.off("redactor-textarea"),
            this.$element.off(".redactor").removeData("redactor");
            var e = this.get();
            if (this.opts.textareamode)
                this.$box.after(this.$source),
                this.$box.remove(),
                this.$source.val(e).show();
            else {
                var i = this.$editor;
                this.opts.iframe && (i = this.$element),
                this.$box.after(i),
                this.$box.remove(),
                i.removeClass("redactor_editor").removeClass("redactor_editor_wym").removeAttr("contenteditable").html(e).show()
            }
            this.opts.air && t("#redactor_air_" + this.uuid).remove()
        },
        getObject: function() {
            return t.extend({}, this)
        },
        getEditor: function() {
            return this.$editor
        },
        getBox: function() {
            return this.$box
        },
        getIframe: function() {
            return this.opts.iframe ? this.$frame : !1
        },
        getToolbar: function() {
            return this.$toolbar ? this.$toolbar : !1
        },
        get: function() {
            return this.$source.val()
        },
        getCodeIframe: function() {
            this.$editor.removeAttr("contenteditable").removeAttr("dir");
            var t = this.outerHtml(this.$frame.contents().children());
            return this.$editor.attr({
                contenteditable: !0,
                dir: this.opts.direction
            }),
            t
        },
        set: function(t, e, i) {
            t = t.toString(),
            t = t.replace(/\$/g, "&#36;"),
            this.opts.fullpage ? this.setCodeIframe(t) : this.setEditor(t, e),
            "" == t && (i = !1),
            i !== !1 && this.placeholderRemove()
        },
        setEditor: function(t, e) {
            e !== !1 && (t = this.cleanSavePreCode(t),
            t = this.cleanStripTags(t),
            t = this.cleanConvertProtected(t),
            t = this.cleanConvertInlineTags(t, !0),
            t = this.opts.linebreaks === !1 ? this.cleanConverters(t) : t.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi, "$2<br>")),
            t = t.replace(/&amp;#36;/g, "$"),
            t = this.cleanEmpty(t),
            this.$editor.html(t),
            this.setNonEditable(),
            this.setSpansVerified(),
            this.sync()
        },
        setCodeIframe: function(t) {
            var e = this.iframePage();
            this.$frame[0].src = "about:blank",
            t = this.cleanConvertProtected(t),
            t = this.cleanConvertInlineTags(t),
            t = this.cleanRemoveSpaces(t),
            e.open(),
            e.write(t),
            e.close(),
            this.opts.fullpage && (this.$editor = this.$frame.contents().find("body").attr({
                contenteditable: !0,
                dir: this.opts.direction
            })),
            this.setNonEditable(),
            this.setSpansVerified(),
            this.sync()
        },
        setFullpageOnInit: function(t) {
            t = this.cleanSavePreCode(t, !0),
            t = this.cleanConverters(t),
            t = this.cleanEmpty(t),
            this.$editor.html(t),
            this.setNonEditable(),
            this.setSpansVerified(),
            this.sync()
        },
        setSpansVerified: function() {
            var e = this.$editor.find("span")
              , i = "inline";
            t.each(e, function() {
                var e = this.outerHTML
                  , n = new RegExp("<" + this.tagName,"gi")
                  , s = e.replace(n, "<" + i);
                n = new RegExp("</" + this.tagName,"gi"),
                s = s.replace(n, "</" + i),
                t(this).replaceWith(s)
            }
            )
        },
        setSpansVerifiedHtml: function(t) {
            return t = t.replace(/<span(.*?)>/, "<inline$1>"),
            t.replace(/<\/span>/, "</inline>")
        },
        setNonEditable: function() {
            this.$editor.find(".noneditable").attr("contenteditable", !1)
        },
        sync: function() {
            var e = "";
            if (this.cleanUnverified(),
            e = this.opts.fullpage ? this.getCodeIframe() : this.$editor.html(),
            e = this.syncClean(e),
            e = this.cleanRemoveEmptyTags(e),
            e = e.replace(/<\/li><(ul|ol)>([\w\W]*?)<\/(ul|ol)>/gi, "<$1>$2</$1></li>"),
            "<br>" === t.trim(e) && (e = ""),
            this.opts.xhtml) {
                var i = ["br", "hr", "img", "link", "input", "meta"];
                t.each(i, function(t, i) {
                    e = e.replace(new RegExp("<" + i + "(.*?[^/$]?)>","gi"), "<" + i + "$1 />")
                }
                )
            }
            e = this.callback("syncBefore", !1, e),
            this.$source.val(e),
            this.callback("syncAfter", !1, e),
            this.start === !1 && this.callback("change", !1, e)
        },
        syncClean: function(e) {
            return this.opts.fullpage || (e = this.cleanStripTags(e)),
            e = t.trim(e),
            e = this.placeholderRemoveFromCode(e),
            e = e.replace(/&#x200b;/gi, ""),
            e = e.replace(/&#8203;/gi, ""),
            e = e.replace(/<\/a>&nbsp;/gi, "</a> "),
            this.opts.linkNofollow && (e = e.replace(/<a(.*?)rel="nofollow"(.*?)>/gi, "<a$1$2>"),
            e = e.replace(/<a(.*?)>/gi, '<a$1 rel="nofollow">')),
            e = e.replace("<!--?php", "<?php"),
            e = e.replace("?-->", "?>"),
            e = e.replace(/<(.*?)class="noeditable"(.*?) contenteditable="false"(.*?)>/gi, '<$1class="noeditable"$2$3>'),
            e = e.replace(/ data-tagblock=""/gi, ""),
            e = e.replace(/<br\s?\/?>\n?<\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi, "</$1>"),
            e = e.replace(/<span(.*?)id="redactor-image-box"(.*?)>([\w\W]*?)<img(.*?)><\/span>/i, "$3<img$4>"),
            e = e.replace(/<span(.*?)id="redactor-image-resizer"(.*?)>(.*?)<\/span>/i, ""),
            e = e.replace(/<span(.*?)id="redactor-image-editter"(.*?)>(.*?)<\/span>/i, ""),
            e = e.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi, "$2"),
            e = e.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi, "$2"),
            e = e.replace(/<inline>/gi, "<span>"),
            e = e.replace(/<inline /gi, "<span "),
            e = e.replace(/<\/inline>/gi, "</span>"),
            e = e.replace(/<span(.*?)class="redactor_placeholder"(.*?)>([\w\W]*?)<\/span>/gi, ""),
            e = e.replace(/<span>([\w\W]*?)<\/span>/gi, "$1"),
            e = e.replace(/&amp;/gi, "&"),
            e = e.replace(/™/gi, "&trade;"),
            e = e.replace(/©/gi, "&copy;"),
            e = this.cleanReConvertProtected(e)
        },
        buildStart: function() {
            this.content = "",
            this.$box = t('<div class="redactor_box" />'),
            "TEXTAREA" === this.$source[0].tagName && (this.opts.textareamode = !0),
            this.opts.mobile === !1 && this.isMobile() ? this.buildMobile() : (this.buildContent(),
            this.opts.iframe ? (this.opts.autoresize = !1,
            this.iframeStart()) : this.opts.textareamode ? this.buildFromTextarea() : this.buildFromElement(),
            this.opts.iframe || (this.buildOptions(),
            this.buildAfter()))
        },
        buildMobile: function() {
            this.opts.textareamode || (this.$editor = this.$source,
            this.$editor.hide(),
            this.$source = this.buildCodearea(this.$editor),
            this.$source.val(this.content)),
            this.$box.insertAfter(this.$source).append(this.$source)
        },
        buildContent: function() {
            this.content = t.trim(this.opts.textareamode ? this.$source.val() : this.$source.html())
        },
        buildFromTextarea: function() {
            this.$editor = t("<div />"),
            this.$box.insertAfter(this.$source).append(this.$editor).append(this.$source),
            this.buildAddClasses(this.$editor),
            this.buildEnable()
        },
        buildFromElement: function() {
            this.$editor = this.$source,
            this.$source = this.buildCodearea(this.$editor),
            this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source),
            this.buildEnable()
        },
        buildCodearea: function(e) {
            return t("<textarea />").attr("name", e.attr("id")).css("height", this.sourceHeight)
        },
        buildAddClasses: function(e) {
            t.each(this.$source.get(0).className.split(/\s+/), function(t, i) {
                e.addClass("redactor_" + i)
            }
            )
        },
        buildEnable: function() {
            this.$editor.addClass("redactor_editor").attr({
                contenteditable: !0,
                dir: this.opts.direction
            }),
            this.$source.attr("dir", this.opts.direction).hide(),
            this.set(this.content, !0, !1)
        },
        buildOptions: function() {
            var t = this.$editor;
            this.opts.iframe && (t = this.$frame),
            this.opts.tabindex && t.attr("tabindex", this.opts.tabindex),
            this.opts.minHeight && t.css("min-height", this.opts.minHeight + "px"),
            this.opts.maxHeight && (this.opts.autoresize = !1,
            this.sourceHeight = this.opts.maxHeight),
            this.opts.wym && this.$editor.addClass("redactor_editor_wym"),
            this.opts.autoresize || t.css("height", this.sourceHeight)
        },
        buildAfter: function() {
            if (this.start = !1,
            this.opts.toolbar && (this.opts.toolbar = this.toolbarInit(this.opts.curLang),
            this.toolbarBuild()),
            this.modalTemplatesInit(),
            this.buildPlugins(),
            this.buildBindKeyboard(),
            this.opts.autosave && this.autosave(),
            setTimeout(t.proxy(this.observeStart, this), 4),
            this.browser("mozilla"))
                try {
                    this.document.execCommand("enableObjectResizing", !1, !1),
                    this.document.execCommand("enableInlineTableEditing", !1, !1)
                } catch (e) {}
            this.opts.focus && setTimeout(t.proxy(this.focus, this), 100),
            this.opts.visual || setTimeout(t.proxy(function() {
                this.opts.visual = !0,
                this.toggle(!1)
            }
            , this), 200),
            this.callback("init")
        },
        buildBindKeyboard: function() {
            this.dblEnter = 0,
            this.opts.dragUpload && this.opts.imageUpload !== !1 && this.$editor.on("drop.redactor", t.proxy(this.buildEventDrop, this)),
            this.$editor.on("paste.redactor", t.proxy(this.buildEventPaste, this)),
            this.$editor.on("keydown.redactor", t.proxy(this.buildEventKeydown, this)),
            this.$editor.on("keyup.redactor", t.proxy(this.buildEventKeyup, this)),
            t.isFunction(this.opts.textareaKeydownCallback) && this.$source.on("keydown.redactor-textarea", t.proxy(this.opts.textareaKeydownCallback, this)),
            t.isFunction(this.opts.focusCallback) && this.$editor.on("focus.redactor", t.proxy(this.opts.focusCallback, this));
            var e;
            t(document).mousedown(function(i) {
                e = t(i.target)
            }
            ),
            this.$editor.on("blur.redactor", t.proxy(function(i) {
                t(e).hasClass("redactor_toolbar") || 0 != t(e).parents(".redactor_toolbar").size() || (this.selectall = !1,
                t.isFunction(this.opts.blurCallback) && this.callback("blur", i))
            }
            , this))
        },
        buildEventDrop: function(e) {
            if (e = e.originalEvent || e,
            void 0 === window.FormData || !e.dataTransfer)
                return !0;
            var i = e.dataTransfer.files.length;
            if (0 == i)
                return !0;
            e.preventDefault();
            var n = e.dataTransfer.files[0];
            if (this.opts.dnbImageTypes !== !1 && -1 == this.opts.dnbImageTypes.indexOf(n.type))
                return !0;
            this.bufferSet();
            var s = t('<div id="redactor-progress-drag" class="redactor-progress redactor-progress-striped"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div>');
            t(document.body).append(s),
            this.opts.s3 === !1 ? this.dragUploadAjax(this.opts.imageUpload, n, !0, s, e, this.opts.imageUploadParam) : this.s3uploadFile(n)
        },
        buildEventPaste: function(e) {
            var i = !1;
            if (this.browser("webkit") && -1 === navigator.userAgent.indexOf("Chrome")) {
                var n = this.browser("version").split(".");
                n[0] < 536 && (i = !0)
            }
            if (i)
                return !0;
            if (this.browser("opera"))
                return !0;
            if (this.opts.clipboardUpload && this.buildEventClipboardUpload(e))
                return !0;
            if (this.opts.cleanup) {
                this.rtePaste = !0,
                this.selectionSave(),
                this.selectall || (this.opts.autoresize === !0 && this.fullscreen !== !0 ? (this.$editor.height(this.$editor.height()),
                this.saveScroll = this.document.body.scrollTop) : this.saveScroll = this.$editor.scrollTop());
                var s = this.extractContent();
                setTimeout(t.proxy(function() {
                    var t = this.extractContent();
                    this.$editor.append(s),
                    this.selectionRestore();
                    var e = this.getFragmentHtml(t);
                    this.pasteClean(e),
                    this.opts.autoresize === !0 && this.fullscreen !== !0 && this.$editor.css("height", "auto")
                }
                , this), 1)
            }
        },
        buildEventClipboardUpload: function(e) {
            var i = e.originalEvent || e;
            if (this.clipboardFilePaste = !1,
            "undefined" == typeof i.clipboardData)
                return !1;
            if (i.clipboardData.items) {
                var n = i.clipboardData.items[0].getAsFile();
                if (null  !== n) {
                    this.bufferSet(),
                    this.clipboardFilePaste = !0;
                    var s = new FileReader;
                    return s.onload = t.proxy(this.pasteClipboardUpload, this),
                    s.readAsDataURL(n),
                    !0
                }
            }
            return !1
        },
        buildEventKeydown: function(e) {
            if (this.rtePaste)
                return !1;
            var i = e.which
              , n = e.ctrlKey || e.metaKey
              , s = this.getParent()
              , a = this.getCurrent()
              , r = this.getBlock()
              , o = !1;
            if (this.callback("keydown", e),
            this.imageResizeHide(!1),
            (s && "PRE" === t(s).get(0).tagName || a && "PRE" === t(a).get(0).tagName) && (o = !0,
            i === this.keyCode.DOWN && this.insertAfterLastElement(r)),
            i === this.keyCode.DOWN && (s && "BLOCKQUOTE" === t(s)[0].tagName && this.insertAfterLastElement(s),
            a && "BLOCKQUOTE" === t(a)[0].tagName && this.insertAfterLastElement(a),
            s && "P" === t(s)[0].tagName && "BLOCKQUOTE" == t(s).parent()[0].tagName && this.insertAfterLastElement(s, t(s).parent()[0]),
            a && "P" === t(a)[0].tagName && s && "BLOCKQUOTE" == t(s)[0].tagName && this.insertAfterLastElement(a, s)),
            n && !e.shiftKey && this.shortcuts(e, i),
            n && 90 === i && !e.shiftKey && !e.altKey)
                return e.preventDefault(),
                void (this.opts.buffer.length ? this.bufferUndo() : this.document.execCommand("undo", !1, !1));
            if (n && 90 === i && e.shiftKey && !e.altKey)
                return e.preventDefault(),
                void (0 != this.opts.rebuffer.length ? this.bufferRedo() : this.document.execCommand("redo", !1, !1));
            if (n && 65 === i ? this.selectall = !0 : i == this.keyCode.LEFT_WIN || n || (this.selectall = !1),
            i != this.keyCode.ENTER || e.shiftKey || e.ctrlKey || e.metaKey)
                i === this.keyCode.ENTER && (e.ctrlKey || e.shiftKey) && (this.bufferSet(),
                e.preventDefault(),
                this.insertLineBreak());
            else {
                if (this.browser("msie") && 1 == s.nodeType && ("TD" == s.tagName || "TH" == s.tagName))
                    return e.preventDefault(),
                    this.bufferSet(),
                    this.insertNode(document.createElement("br")),
                    this.callback("enter", e),
                    !1;
                if (r && ("BLOCKQUOTE" == r.tagName || "BLOCKQUOTE" == t(r).parent()[0].tagName))
                    if (this.isEndOfElement()) {
                        if (1 == this.dblEnter) {
                            var l, c;
                            if ("BLOCKQUOTE" == r.tagName ? (c = "br",
                            l = r) : (c = "p",
                            l = t(r).parent()[0]),
                            e.preventDefault(),
                            this.insertingAfterLastElement(l),
                            this.dblEnter = 0,
                            "p" == c)
                                t(r).parent().find("p").last().remove();
                            else {
                                var d = t.trim(t(r).html());
                                t(r).html(d.replace(/<br\s?\/?>$/i, ""))
                            }
                            return
                        }
                        this.dblEnter++
                    } else
                        this.dblEnter++;
                if (o === !0)
                    return this.buildEventKeydownPre(e, a);
                if (!this.opts.linebreaks)
                    if (r && this.opts.rBlockTest.test(r.tagName))
                        this.bufferSet(),
                        setTimeout(t.proxy(function() {
                            var e = this.getBlock();
                            if ("DIV" === e.tagName && !t(e).hasClass("redactor_editor")) {
                                var i = t("<p>" + this.opts.invisibleSpace + "</p>");
                                t(e).replaceWith(i),
                                this.selectionStart(i)
                            }
                        }
                        , this), 1);
                    else if (r === !1) {
                        this.bufferSet();
                        var h = t("<p>" + this.opts.invisibleSpace + "</p>");
                        return this.insertNode(h[0]),
                        this.selectionStart(h),
                        this.callback("enter", e),
                        !1
                    }
                if (this.opts.linebreaks) {
                    if (!r || !this.opts.rBlockTest.test(r.tagName))
                        return this.buildEventKeydownInsertLineBreak(e);
                    this.bufferSet(),
                    setTimeout(t.proxy(function() {
                        var e = this.getBlock();
                        "DIV" !== e.tagName && "P" !== e.tagName || t(e).hasClass("redactor_editor") || this.replaceLineBreak(e)
                    }
                    , this), 1)
                }
                if ("BLOCKQUOTE" == r.tagName || "FIGCAPTION" == r.tagName)
                    return this.buildEventKeydownInsertLineBreak(e);
                this.callback("enter", e)
            }
            return i === this.keyCode.TAB && this.opts.shortcuts ? this.buildEventKeydownTab(e, o) : void (i === this.keyCode.BACKSPACE && this.buildEventKeydownBackspace(a))
        },
        buildEventKeydownPre: function(e, i) {
            e.preventDefault(),
            this.bufferSet();
            var n = t(i).parent().text();
            return this.insertNode(document.createTextNode("\n")),
            -1 == n.search(/\s$/) && this.insertNode(document.createTextNode("\n")),
            this.sync(),
            this.callback("enter", e),
            !1
        },
        buildEventKeydownTab: function(t, e) {
            return this.opts.tabFocus ? this.isEmpty(this.get()) && this.opts.tabSpaces === !1 ? !0 : (t.preventDefault(),
            e !== !0 || t.shiftKey ? this.opts.tabSpaces !== !1 ? (this.bufferSet(),
            this.insertNode(document.createTextNode(Array(this.opts.tabSpaces + 1).join(" "))),
            this.sync(),
            !1) : (t.shiftKey ? this.indentingOutdent() : this.indentingIndent(),
            !1) : (this.bufferSet(),
            this.insertNode(document.createTextNode("	")),
            this.sync(),
            !1)) : !0
        },
        buildEventKeydownBackspace: function(e) {
            if ("undefined" != typeof e.tagName && /^(H[1-6])$/i.test(e.tagName)) {
                var i;
                i = t(this.opts.linebreaks === !1 ? "<p>" + this.opts.invisibleSpace + "</p>" : "<br>" + this.opts.invisibleSpace),
                t(e).replaceWith(i),
                this.selectionStart(i)
            }
            "undefined" != typeof e.nodeValue && null  !== e.nodeValue && e.remove && 3 === e.nodeType && null  == e.nodeValue.match(/[^/\u200B]/g) && e.remove()
        },
        buildEventKeydownInsertLineBreak: function(t) {
            this.bufferSet(),
            t.preventDefault(),
            this.insertLineBreak(),
            this.callback("enter", t)
        },
        buildEventKeyup: function(e) {
            if (this.rtePaste)
                return !1;
            var i = e.which
              , n = this.getParent()
              , s = this.getCurrent();
            if (!this.opts.linebreaks && 3 == s.nodeType && (0 == n || "BODY" == n.tagName)) {
                var a = t("<p>").append(t(s).clone());
                t(s).replaceWith(a);
                var r = t(a).next();
                "undefined" != typeof r[0] && "BR" == r[0].tagName && r.remove(),
                this.selectionEnd(a)
            }
            return (this.opts.convertLinks || this.opts.convertImageLinks || this.opts.convertVideoLinks) && i === this.keyCode.ENTER && this.buildEventKeyupConverters(),
            i === this.keyCode.DELETE || i === this.keyCode.BACKSPACE ? this.formatEmpty(e) : (this.callback("keyup", e),
            void this.sync())
        },
        buildEventKeyupConverters: function() {
            this.formatLinkify(this.opts.linkProtocol, this.opts.convertLinks, this.opts.convertImageLinks, this.opts.convertVideoLinks, this.opts.linkSize),
            setTimeout(t.proxy(function() {
                this.opts.convertImageLinks && this.observeImages(),
                this.opts.observeLinks && this.observeLinks()
            }
            , this), 5)
        },
        buildPlugins: function() {
            this.opts.plugins && t.each(this.opts.plugins, t.proxy(function(e, i) {
                RedactorPlugins[i] && (t.extend(this, RedactorPlugins[i]),
                t.isFunction(RedactorPlugins[i].init) && this.init())
            }
            , this))
        },
        iframeStart: function() {
            this.iframeCreate(),
            this.opts.textareamode ? this.iframeAppend(this.$source) : (this.$sourceOld = this.$source.hide(),
            this.$source = this.buildCodearea(this.$sourceOld),
            this.iframeAppend(this.$sourceOld))
        },
        iframeAppend: function(t) {
            this.$source.attr("dir", this.opts.direction).hide(),
            this.$box.insertAfter(t).append(this.$frame).append(this.$source)
        },
        iframeCreate: function() {
            this.$frame = t('<iframe style="width: 100%;" frameborder="0" />').one("load", t.proxy(function() {
                if (this.opts.fullpage) {
                    this.iframePage(),
                    "" === this.content && (this.content = this.opts.invisibleSpace),
                    this.$frame.contents()[0].write(this.content),
                    this.$frame.contents()[0].close();
                    var e = setInterval(t.proxy(function() {
                        this.$frame.contents().find("body").html() && (clearInterval(e),
                        this.iframeLoad())
                    }
                    , this), 0)
                } else
                    this.iframeLoad()
            }
            , this))
        },
        iframeDoc: function() {
            return this.$frame[0].contentWindow.document
        },
        iframePage: function() {
            var t = this.iframeDoc();
            return t.documentElement && t.removeChild(t.documentElement),
            t
        },
        iframeAddCss: function(e) {
            e = e || this.opts.css,
            this.isString(e) && this.$frame.contents().find("head").append('<link rel="stylesheet" href="' + e + '" />'),
            t.isArray(e) && t.each(e, t.proxy(function(t, e) {
                this.iframeAddCss(e)
            }
            , this))
        },
        iframeLoad: function() {
            this.$editor = this.$frame.contents().find("body").attr({
                contenteditable: !0,
                dir: this.opts.direction
            }),
            this.$editor[0] && (this.document = this.$editor[0].ownerDocument,
            this.window = this.document.defaultView || window),
            this.iframeAddCss(),
            this.opts.fullpage ? this.setFullpageOnInit(this.$editor.html()) : this.set(this.content, !0, !1),
            this.buildOptions(),
            this.buildAfter()
        },
        placeholderStart: function(e) {
            return this.isEmpty(e) && (this.$element.attr("placeholder") && (this.opts.placeholder = this.$element.attr("placeholder")),
            "" === this.opts.placeholder && (this.opts.placeholder = !1),
            this.opts.placeholder !== !1) ? (this.opts.focus = !1,
            this.$editor.one("focus.redactor_placeholder", t.proxy(this.placeholderFocus, this)),
            t('<span class="redactor_placeholder" data-redactor="verified">').attr("contenteditable", !1).text(this.opts.placeholder)) : !1
        },
        placeholderFocus: function() {
            this.$editor.find("span.redactor_placeholder").remove();
            var t = "";
            this.opts.linebreaks === !1 && (t = this.opts.emptyHtml),
            this.$editor.off("focus.redactor_placeholder"),
            this.$editor.html(t),
            this.opts.linebreaks === !1 ? this.selectionStart(this.$editor.children()[0]) : this.focus(),
            this.sync()
        },
        placeholderRemove: function() {
            this.opts.placeholder = !1,
            this.$editor.find("span.redactor_placeholder").remove(),
            this.$editor.off("focus.redactor_placeholder")
        },
        placeholderRemoveFromCode: function(t) {
            return t.replace(/<span class="redactor_placeholder"(.*?)>(.*?)<\/span>/i, "")
        },
        shortcuts: function(t, e) {
            this.opts.shortcuts && (t.altKey ? 48 === e ? this.shortcutsLoadFormat(t, "p") : 49 === e ? this.shortcutsLoadFormat(t, "h1") : 50 === e ? this.shortcutsLoadFormat(t, "h2") : 51 === e ? this.shortcutsLoadFormat(t, "h3") : 52 === e ? this.shortcutsLoadFormat(t, "h4") : 53 === e ? this.shortcutsLoadFormat(t, "h5") : 54 === e && this.shortcutsLoadFormat(t, "h6") : 77 === e ? this.shortcutsLoad(t, "removeFormat") : 66 === e ? this.shortcutsLoad(t, "bold") : 73 === e ? this.shortcutsLoad(t, "italic") : 74 === e ? this.shortcutsLoad(t, "insertunorderedlist") : 75 === e ? this.shortcutsLoad(t, "insertorderedlist") : 72 === e ? this.shortcutsLoad(t, "superscript") : 76 === e && this.shortcutsLoad(t, "subscript"))
        },
        shortcutsLoad: function(t, e) {
            t.preventDefault(),
            this.execCommand(e, !1)
        },
        shortcutsLoadFormat: function(t, e) {
            t.preventDefault(),
            this.formatBlocks(e)
        },
        focus: function() {
            this.browser("opera") ? this.$editor.focus() : this.window.setTimeout(t.proxy(this.focusSet, this, !0), 1)
        },
        focusEnd: function() {
            this.focusSet()
        },
        focusSet: function(t) {
            this.$editor.focus();
            var e = this.getRange();
            e.selectNodeContents(this.$editor[0]),
            e.collapse(t || !1);
            var i = this.getSelection();
            i.removeAllRanges(),
            i.addRange(e)
        },
        toggle: function(t) {
            this.opts.visual ? this.toggleCode(t) : this.toggleVisual()
        },
        toggleVisual: function() {
            var t = this.$source.hide().val();
            "undefined" != typeof this.modified && (this.modified = this.cleanRemoveSpaces(this.modified, !1) !== this.cleanRemoveSpaces(t, !1)),
            this.modified && (this.opts.fullpage && "" === t ? this.setFullpageOnInit(t) : (this.set(t),
            this.opts.fullpage && this.buildBindKeyboard())),
            this.opts.iframe ? this.$frame.show() : this.$editor.show(),
            this.opts.fullpage && this.$editor.attr("contenteditable", !0),
            this.$source.off("keydown.redactor-textarea-indenting"),
            this.$editor.focus(),
            this.selectionRestore(),
            this.observeStart(),
            this.buttonActiveVisual(),
            this.buttonInactive("html"),
            this.opts.visual = !0
        },
        toggleCode: function(t) {
            t !== !1 && this.selectionSave();
            var e = null ;
            this.opts.iframe ? (e = this.$frame.height(),
            this.opts.fullpage && this.$editor.removeAttr("contenteditable"),
            this.$frame.hide()) : (e = this.$editor.innerHeight(),
            this.$editor.hide());
            var i = this.$source.val();
            "" !== i && this.opts.tidyHtml && this.$source.val(this.cleanHtml(i)),
            this.modified = i,
            this.$source.height(e).show().focus(),
            this.$source.on("keydown.redactor-textarea-indenting", this.textareaIndenting),
            this.buttonInactiveVisual(),
            this.buttonActive("html"),
            this.opts.visual = !1
        },
        textareaIndenting: function(e) {
            if (9 === e.keyCode) {
                var i = t(this)
                  , n = i.get(0).selectionStart;
                return i.val(i.val().substring(0, n) + "	" + i.val().substring(i.get(0).selectionEnd)),
                i.get(0).selectionStart = i.get(0).selectionEnd = n + 1,
                !1
            }
        },
        autosave: function() {
            var e = !1;
            this.autosaveInterval = setInterval(t.proxy(function() {
                var i = this.get();
                e !== i && t.ajax({
                    url: this.opts.autosave,
                    type: "post",
                    data: this.$source.attr("name") + "=" + escape(encodeURIComponent(i)),
                    success: t.proxy(function(t) {
                        this.callback("autosave", !1, t),
                        e = i
                    }
                    , this)
                })
            }
            , this), 1e3 * this.opts.autosaveInterval)
        },
        toolbarBuild: function() {
            if (this.opts.air)
                this.opts.buttons = this.opts.airButtons;
            else if (!this.opts.buttonSource) {
                var e = this.opts.buttons.indexOf("html")
                  , i = this.opts.buttons[e + 1];
                this.opts.buttons.splice(e, 1),
                "|" === i && this.opts.buttons.splice(e, 1)
            }
            if (t.extend(this.opts.toolbar, this.opts.buttonsCustom),
            t.each(this.opts.buttonsAdd, t.proxy(function(t, e) {
                this.opts.buttons.push(e)
            }
            , this)),
            this.opts.toolbar && t.each(this.opts.toolbar.formatting.dropdown, t.proxy(function(e) {
                "-1" == t.inArray(e, this.opts.formattingTags) && delete this.opts.toolbar.formatting.dropdown[e]
            }
            , this)),
            0 === this.opts.buttons.length)
                return !1;
            if (this.airEnable(),
            this.$toolbar = t("<ul>").addClass("redactor_toolbar").attr("id", "redactor_toolbar_" + this.uuid),
            this.opts.air ? (this.$air = t('<div class="redactor_air">').attr("id", "redactor_air_" + this.uuid).hide(),
            this.$air.append(this.$toolbar),
            t("body").append(this.$air)) : this.opts.toolbarExternal ? t(this.opts.toolbarExternal).html(this.$toolbar) : this.$box.prepend(this.$toolbar),
            t.each(this.opts.buttons, t.proxy(function(e, i) {
                if ("|" === i)
                    this.$toolbar.append(t(this.opts.buttonSeparator));
                else if (this.opts.toolbar[i]) {
                    var n = this.opts.toolbar[i];
                    if (this.opts.fileUpload === !1 && "file" === i)
                        return !0;
                    this.$toolbar.append(t("<li>").append(this.buttonBuild(i, n)))
                }
            }
            , this)),
            this.$toolbar.find("a").attr("tabindex", "-1"),
            this.opts.toolbarFixed && (this.toolbarObserveScroll(),
            t(this.opts.toolbarFixedTarget).on("scroll.redactor", t.proxy(this.toolbarObserveScroll, this))),
            this.opts.activeButtons) {
                var n = t.proxy(this.buttonActiveObserver, this);
                this.$editor.on("mouseup.redactor keyup.redactor", n)
            }
        },
        toolbarObserveScroll: function() {
            var e = t(this.opts.toolbarFixedTarget).scrollTop()
              , i = this.$box.offset().top
              , n = 0
              , s = i + this.$box.height() + 40;
            if (e > i) {
                var a = "100%";
                this.opts.toolbarFixedBox && (n = this.$box.offset().left,
                a = this.$box.innerWidth(),
                this.$toolbar.addClass("toolbar_fixed_box")),
                this.toolbarFixed = !0,
                this.$toolbar.css({
                    position: "fixed",
                    width: a,
                    zIndex: 1005,
                    top: this.opts.toolbarFixedTopOffset + "px",
                    left: n
                }),
                s > e ? this.$toolbar.css("visibility", "visible") : this.$toolbar.css("visibility", "hidden")
            } else
                this.toolbarFixed = !1,
                this.$toolbar.css({
                    position: "relative",
                    width: "auto",
                    top: 0,
                    left: n
                }),
                this.opts.toolbarFixedBox && this.$toolbar.removeClass("toolbar_fixed_box")
        },
        airEnable: function() {
            this.opts.air && this.$editor.on("mouseup.redactor keyup.redactor", this, t.proxy(function(e) {
                var i = this.getSelectionText();
                if ("mouseup" === e.type && "" != i && this.airShow(e),
                "keyup" === e.type && e.shiftKey && "" != i) {
                    var n = t(this.getElement(this.getSelection().focusNode))
                      , s = n.offset();
                    s.height = n.height(),
                    this.airShow(s, !0)
                }
            }
            , this))
        },
        airShow: function(e, i) {
            if (this.opts.air) {
                var n, s;
                if (t(".redactor_air").hide(),
                i)
                    n = e.left,
                    s = e.top + e.height + 14,
                    this.opts.iframe && (s += this.$box.position().top - t(this.document).scrollTop(),
                    n += this.$box.position().left);
                else {
                    var a = this.$air.innerWidth();
                    n = e.clientX,
                    t(this.document).width() < n + a && (n -= a),
                    s = e.clientY + 14,
                    this.opts.iframe ? (s += this.$box.position().top,
                    n += this.$box.position().left) : s += t(this.document).scrollTop()
                }
                this.$air.css({
                    left: n + "px",
                    top: s + "px"
                }).show(),
                this.airBindHide()
            }
        },
        airBindHide: function() {
            if (this.opts.air) {
                var e = t.proxy(function(e) {
                    t(e).on("mousedown.redactor", t.proxy(function(i) {
                        0 === t(i.target).closest(this.$toolbar).length && (this.$air.fadeOut(100),
                        this.selectionRemove(),
                        t(e).off(i))
                    }
                    , this)).on("keydown.redactor", t.proxy(function(i) {
                        i.which === this.keyCode.ESC && this.getSelection().collapseToStart(),
                        this.$air.fadeOut(100),
                        t(e).off(i)
                    }
                    , this))
                }
                , this);
                e(document),
                this.opts.iframe && e(this.document)
            }
        },
        airBindMousemoveHide: function() {
            if (this.opts.air) {
                var e = t.proxy(function(e) {
                    t(e).on("mousemove.redactor", t.proxy(function(i) {
                        0 === t(i.target).closest(this.$toolbar).length && (this.$air.fadeOut(100),
                        t(e).off(i))
                    }
                    , this))
                }
                , this);
                e(document),
                this.opts.iframe && e(this.document)
            }
        },
        dropdownBuild: function(e, i) {
            t.each(i, t.proxy(function(i, n) {
                n.className || (n.className = "");
                var s;
                "separator" === n.name ? s = t('<a class="redactor_separator_drop">') : (s = t('<a href="#" class="' + n.className + " redactor_dropdown_" + i + '">' + n.title + "</a>"),
                s.on("click", t.proxy(function(t) {
                    t.preventDefault && t.preventDefault(),
                    this.browser("msie") && (t.returnValue = !1),
                    n.callback && n.callback.call(this, i, s, n, t),
                    n.exec && this.execCommand(n.exec, i),
                    n.func && this[n.func](i),
                    this.buttonActiveObserver(),
                    this.opts.air && this.$air.fadeOut(100)
                }
                , this))),
                e.append(s)
            }
            , this))
        },
        dropdownShow: function(e, i) {
            if (!this.opts.visual)
                return e.preventDefault(),
                !1;
            var n = this.$toolbar.find(".redactor_dropdown_box_" + i)
              , s = this.buttonGet(i);
            if (s.hasClass("dropact"))
                this.dropdownHideAll();
            else {
                this.dropdownHideAll(),
                this.buttonActive(i),
                s.addClass("dropact");
                var a = s.position();
                this.toolbarFixed && (a = s.offset());
                var r = n.width();
                a.left + r > t(document).width() && (a.left -= r);
                var o = a.left + "px"
                  , l = 29
                  , c = "absolute"
                  , d = l + "px";
                this.opts.toolbarFixed && this.toolbarFixed ? c = "fixed" : this.opts.air || (d = a.top + l + "px"),
                n.css({
                    position: c,
                    left: o,
                    top: d
                }).show()
            }
            var h = t.proxy(function(t) {
                this.dropdownHide(t, n)
            }
            , this);
            t(document).one("click", h),
            this.$editor.one("click", h),
            e.stopPropagation(),
            this.$editor.focus()
        },
        dropdownHideAll: function() {
            this.$toolbar.find("a.dropact").removeClass("redactor_act").removeClass("dropact"),
            t(".redactor_dropdown").hide()
        },
        dropdownHide: function(e, i) {
            t(e.target).hasClass("dropact") || (i.removeClass("dropact"),
            this.dropdownHideAll())
        },
        buttonBuild: function(e, i) {
            var n = t('<a href="javascript:;" title="' + i.title + '" tabindex="-1" class="redactor_btn redactor_btn_' + e + '"></a>');
            if (n.on("click", t.proxy(function(t) {
                return t.preventDefault && t.preventDefault(),
                this.browser("msie") && (t.returnValue = !1),
                n.hasClass("redactor_button_disabled") ? !1 : (this.isFocused() !== !1 || i.exec || this.$editor.focus(),
                i.exec ? (this.$editor.focus(),
                this.execCommand(i.exec, e),
                this.airBindMousemoveHide()) : i.func && "show" !== i.func ? (this[i.func](e),
                this.airBindMousemoveHide()) : i.callback ? (i.callback.call(this, e, n, i, t),
                this.airBindMousemoveHide()) : i.dropdown && this.dropdownShow(t, e),
                void this.buttonActiveObserver(!1, e))
            }
            , this)),
            i.dropdown) {
                var s = t('<div class="redactor_dropdown redactor_dropdown_box_' + e + '" style="display: none;">');
                s.appendTo(this.$toolbar),
                this.dropdownBuild(s, i.dropdown)
            }
            return n
        },
        buttonGet: function(e) {
            return this.opts.toolbar ? t(this.$toolbar.find("a.redactor_btn_" + e)) : !1
        },
        buttonActiveToggle: function(t) {
            var e = this.buttonGet(t);
            e.hasClass("redactor_act") ? e.removeClass("redactor_act") : e.addClass("redactor_act")
        },
        buttonActive: function(t) {
            this.buttonGet(t).addClass("redactor_act")
        },
        buttonInactive: function(t) {
            this.buttonGet(t).removeClass("redactor_act")
        },
        buttonInactiveAll: function(e) {
            t.each(this.opts.toolbar, t.proxy(function(t) {
                t != e && this.buttonInactive(t)
            }
            , this))
        },
        buttonActiveVisual: function() {
            this.$toolbar.find("a.redactor_btn").not("a.redactor_btn_html").removeClass("redactor_button_disabled")
        },
        buttonInactiveVisual: function() {
            this.$toolbar.find("a.redactor_btn").not("a.redactor_btn_html").addClass("redactor_button_disabled")
        },
        buttonChangeIcon: function(t, e) {
            this.buttonGet(t).addClass("redactor_btn_" + e)
        },
        buttonRemoveIcon: function(t, e) {
            this.buttonGet(t).removeClass("redactor_btn_" + e)
        },
        buttonAddSeparator: function() {
            this.$toolbar.append(t(this.opts.buttonSeparator))
        },
        buttonAddSeparatorAfter: function(e) {
            this.buttonGet(e).parent().after(t(this.opts.buttonSeparator))
        },
        buttonAddSeparatorBefore: function(e) {
            this.buttonGet(e).parent().before(t(this.opts.buttonSeparator))
        },
        buttonRemoveSeparatorAfter: function(t) {
            this.buttonGet(t).parent().next().remove()
        },
        buttonRemoveSeparatorBefore: function(t) {
            this.buttonGet(t).parent().prev().remove()
        },
        buttonSetRight: function(t) {
            this.opts.toolbar && this.buttonGet(t).parent().addClass("redactor_btn_right")
        },
        buttonSetLeft: function(t) {
            this.opts.toolbar && this.buttonGet(t).parent().removeClass("redactor_btn_right")
        },
        buttonAdd: function(e, i, n, s) {
            if (this.opts.toolbar) {
                var a = this.buttonBuild(e, {
                    title: i,
                    callback: n,
                    dropdown: s
                });
                this.$toolbar.append(t("<li>").append(a))
            }
        },
        buttonAddFirst: function(e, i, n, s) {
            if (this.opts.toolbar) {
                var a = this.buttonBuild(e, {
                    title: i,
                    callback: n,
                    dropdown: s
                });
                this.$toolbar.prepend(t("<li>").append(a))
            }
        },
        buttonAddAfter: function(e, i, n, s, a) {
            if (this.opts.toolbar) {
                var r = this.buttonBuild(i, {
                    title: n,
                    callback: s,
                    dropdown: a
                })
                  , o = this.buttonGet(e);
                0 !== o.size() ? o.parent().after(t("<li>").append(r)) : this.$toolbar.append(t("<li>").append(r))
            }
        },
        buttonAddBefore: function(e, i, n, s, a) {
            if (this.opts.toolbar) {
                var r = this.buttonBuild(i, {
                    title: n,
                    callback: s,
                    dropdown: a
                })
                  , o = this.buttonGet(e);
                0 !== o.size() ? o.parent().before(t("<li>").append(r)) : this.$toolbar.append(t("<li>").append(r))
            }
        },
        buttonRemove: function(t, e) {
            var i = this.buttonGet(t);
            e && i.parent().next().remove(),
            i.parent().removeClass("redactor_btn_right"),
            i.remove()
        },
        buttonActiveObserver: function(e, i) {
            var n = this.getParent();
            if (this.buttonInactiveAll(i),
            e === !1 && "html" !== i)
                return void (-1 != t.inArray(i, this.opts.activeButtons) && this.buttonActiveToggle(i));
            this.$toolbar.find("a.redactor_dropdown_link").text(n && "A" === n.tagName ? this.opts.curLang.link_edit : this.opts.curLang.link_insert),
            this.opts.activeButtonsAdd && (t.each(this.opts.activeButtonsAdd, t.proxy(function(t, e) {
                this.opts.activeButtons.push(e)
            }
            , this)),
            t.extend(this.opts.activeButtonsStates, this.opts.activeButtonsAdd)),
            t.each(this.opts.activeButtonsStates, t.proxy(function(e, i) {
                0 != t(n).closest(e, this.$editor.get()[0]).length && this.buttonActive(i)
            }
            , this));
            var s = t(n).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
            if (s.length) {
                var a = s.css("text-align");
                switch (a) {
                case "right":
                    this.buttonActive("alignright");
                    break;
                case "center":
                    this.buttonActive("aligncenter");
                    break;
                case "justify":
                    this.buttonActive("justify");
                    break;
                default:
                    this.buttonActive("alignleft")
                }
            }
        },
        execPasteFrag: function(t) {
            var e = this.getSelection();
            if (e.getRangeAt && e.rangeCount) {
                range = e.getRangeAt(0),
                range.deleteContents();
                var i = document.createElement("div");
                i.innerHTML = t;
                for (var n, s, a = document.createDocumentFragment(); n = i.firstChild; )
                    s = a.appendChild(n);
                {
                    a.firstChild
                }
                range.insertNode(a),
                s && (range = range.cloneRange(),
                range.setStartAfter(s),
                range.collapse(!0),
                e.removeAllRanges(),
                e.addRange(range))
            }
        },
        exec: function(t, e, i) {
            "formatblock" === t && this.browser("msie") && (e = "<" + e + ">"),
            "inserthtml" === t && this.browser("msie") ? this.isIe11() ? this.execPasteFrag(e) : (this.$editor.focus(),
            this.document.selection.createRange().pasteHTML(e)) : this.document.execCommand(t, !1, e),
            i !== !1 && this.sync(),
            this.callback("execCommand", t, e)
        },
        execCommand: function(t, e, i) {
            return this.opts.visual ? "inserthtml" === t ? (this.insertHtml(e, i),
            void this.callback("execCommand", t, e)) : this.currentOrParentIs("PRE") && !this.opts.formattingPre ? !1 : "insertunorderedlist" === t || "insertorderedlist" === t ? this.execLists(t, e) : "unlink" === t ? this.execUnlink(t, e) : (this.exec(t, e, i),
            void ("inserthorizontalrule" === t && this.$editor.find("hr").removeAttr("id"))) : (this.$source.focus(),
            !1)
        },
        execUnlink: function(e, i) {
            this.bufferSet();
            var n = this.currentOrParentIs("A");
            return n ? (t(n).replaceWith(t(n).text()),
            this.sync(),
            void this.callback("execCommand", e, i)) : void 0
        },
        execLists: function(e, i) {
            this.bufferSet();
            var n = this.getParent()
              , s = t(n).closest("ol, ul")
              , a = !1;
            if (s.length) {
                a = !0;
                var r = s[0].tagName;
                ("insertunorderedlist" === e && "OL" === r || "insertorderedlist" === e && "UL" === r) && (a = !1)
            }
            if (this.selectionSave(),
            a) {
                var o = this.getNodes()
                  , l = this.getBlocks(o);
                "undefined" != typeof o[0] && o.length > 1 && 3 == o[0].nodeType && l.unshift(this.getBlock());
                var c = ""
                  , d = "";
                t.each(l, t.proxy(function(e, i) {
                    if ("LI" == i.tagName) {
                        var n = t(i)
                          , s = n.clone();
                        s.find("ul", "ol").remove(),
                        c += this.opts.linebreaks === !1 ? this.outerHtml(t("<p>").append(s.contents())) : s.html() + "<br>",
                        0 == e ? (n.addClass("redactor-replaced").empty(),
                        d = this.outerHtml(n)) : n.remove()
                    }
                }
                , this)),
                html = this.$editor.html().replace(d, "</" + r + ">" + c + "<" + r + ">"),
                this.$editor.html(html),
                this.$editor.find(r + ":empty").remove()
            } else {
                var h = this.getParent();
                this.document.execCommand(e);
                var n = this.getParent()
                  , s = t(n).closest("ol, ul");
                if (h && "TD" == h.tagName && s.wrapAll("<td>"),
                s.length) {
                    var u = s.children().first();
                    if ("" == t.trim(t(u).text())) {
                        var p = t('<span id="selection-marker-1"></span>');
                        t(u).prepend(p)
                    }
                    (this.browser("msie") || this.browser("mozilla")) && "LI" !== n.tagName && t(n).replaceWith(t(n).html());
                    var f = s.parent();
                    this.isParentRedactor(f) && this.nodeTestBlocks(f[0]) && f.replaceWith(f.contents())
                }
                this.browser("mozilla") && this.$editor.focus()
            }
            this.selectionRestore(),
            t(p).remove(),
            this.sync(),
            this.callback("execCommand", e, i)
        },
        indentingIndent: function() {
            this.indentingStart("indent")
        },
        indentingOutdent: function() {
            this.indentingStart("outdent")
        },
        indentingStart: function(e) {
            if (this.bufferSet(),
            "indent" === e) {
                var i = this.getBlock();
                if (this.selectionSave(),
                i && "LI" == i.tagName) {
                    var n = this.getParent()
                      , s = t(n).closest("ol, ul")
                      , a = s[0].tagName
                      , r = this.getBlocks();
                    t.each(r, function(e, i) {
                        if ("LI" == i.tagName) {
                            var n = t(i).prev();
                            if (0 != n.size() && "LI" == n[0].tagName) {
                                var s = n.children("ul, ol");
                                0 == s.size() ? n.append(t("<" + a + ">").append(i)) : s.append(i)
                            }
                        }
                    }
                    )
                } else if (i === !1 && this.opts.linebreaks === !0) {
                    this.exec("formatBlock", "blockquote");
                    var o = this.getBlock()
                      , i = t('<div data-tagblock="">').html(t(o).html());
                    t(o).replaceWith(i);
                    var l = this.normalize(t(i).css("margin-left")) + this.opts.indentValue;
                    t(i).css("margin-left", l + "px")
                } else {
                    var c = this.getBlocks();
                    t.each(c, t.proxy(function(e, i) {
                        var n = !1;
                        if ("TD" !== i.tagName) {
                            n = -1 !== t.inArray(i.tagName, this.opts.alignmentTags) ? t(i) : t(i).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
                            var s = this.normalize(n.css("margin-left")) + this.opts.indentValue;
                            n.css("margin-left", s + "px")
                        }
                    }
                    , this))
                }
                this.selectionRestore()
            } else {
                this.selectionSave();
                var i = this.getBlock();
                if (i && "LI" == i.tagName) {
                    var r = this.getBlocks()
                      , d = 0;
                    this.insideOutdent(i, d, r)
                } else {
                    var c = this.getBlocks();
                    t.each(c, t.proxy(function(e, i) {
                        var n = !1;
                        n = -1 !== t.inArray(i.tagName, this.opts.alignmentTags) ? t(i) : t(i).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]);
                        var s = this.normalize(n.css("margin-left")) - this.opts.indentValue;
                        0 >= s ? this.opts.linebreaks === !0 && "undefined" != typeof n.data("tagblock") ? n.replaceWith(n.html()) : (n.css("margin-left", ""),
                        this.removeEmptyAttr(n, "style")) : n.css("margin-left", s + "px")
                    }
                    , this))
                }
                this.selectionRestore()
            }
            this.sync()
        },
        insideOutdent: function(e, i, n) {
            if (e && "LI" == e.tagName) {
                var s = t(e).parent().parent();
                0 != s.size() && "LI" == s[0].tagName ? s.after(e) : "undefined" != typeof n[i] ? (e = n[i],
                i++,
                this.insideOutdent(e, i, n)) : this.execCommand("insertunorderedlist")
            }
        },
        alignmentLeft: function() {
            this.alignmentSet("", "JustifyLeft")
        },
        alignmentRight: function() {
            this.alignmentSet("right", "JustifyRight")
        },
        alignmentCenter: function() {
            this.alignmentSet("center", "JustifyCenter")
        },
        alignmentJustify: function() {
            this.alignmentSet("justify", "JustifyFull")
        },
        alignmentSet: function(e, i) {
            if (this.bufferSet(),
            this.oldIE())
                return this.document.execCommand(i, !1, !1),
                !0;
            this.selectionSave();
            var n = this.getBlock();
            if (!n && this.opts.linebreaks) {
                this.exec("formatBlock", "blockquote");
                var s = this.getBlock()
                  , n = t('<div data-tagblock="">').html(t(s).html());
                t(s).replaceWith(n),
                t(n).css("text-align", e),
                this.removeEmptyAttr(n, "style"),
                "" == e && "undefined" != typeof t(n).data("tagblock") && t(n).replaceWith(t(n).html())
            } else {
                var a = this.getBlocks();
                t.each(a, t.proxy(function(i, n) {
                    var s = !1;
                    s = -1 !== t.inArray(n.tagName, this.opts.alignmentTags) ? t(n) : t(n).closest(this.opts.alignmentTags.toString().toLowerCase(), this.$editor[0]),
                    s && (s.css("text-align", e),
                    this.removeEmptyAttr(s, "style"))
                }
                , this))
            }
            this.selectionRestore(),
            this.sync()
        },
        cleanEmpty: function(t) {
            var e = this.placeholderStart(t);
            return e !== !1 ? e : (this.opts.linebreaks === !1 && ("" === t ? t = this.opts.emptyHtml : -1 !== t.search(/^<hr\s?\/?>$/gi) && (t = "<hr>" + this.opts.emptyHtml)),
            t)
        },
        cleanConverters: function(t) {
            return this.opts.convertDivs && (t = t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, "<p$1>$2</p>")),
            this.opts.paragraphy && (t = this.cleanParagraphy(t)),
            t
        },
        cleanConvertProtected: function(t) {
            return this.opts.templateVars && (t = t.replace(/\{\{(.*?)\}\}/gi, "<!-- template double $1 -->"),
            t = t.replace(/\{(.*?)\}/gi, "<!-- template $1 -->")),
            t = t.replace(/<script(.*?)>([\w\W]*?)<\/script>/gi, '<title type="text/javascript" style="display: none;" class="redactor-script-tag"$1>$2</title>'),
            t = t.replace(/<style(.*?)>([\w\W]*?)<\/style>/gi, '<section$1 style="display: none;" rel="redactor-style-tag">$2</section>'),
            t = t.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi, '<section$1 rel="redactor-form-tag">$2</section>'),
            t = this.opts.phpTags ? t.replace(/<\?php([\w\W]*?)\?>/gi, '<section style="display: none;" rel="redactor-php-tag">$1</section>') : t.replace(/<\?php([\w\W]*?)\?>/gi, "")
        },
        cleanReConvertProtected: function(t) {
            return this.opts.templateVars && (t = t.replace(/<!-- template double (.*?) -->/gi, "{{$1}}"),
            t = t.replace(/<!-- template (.*?) -->/gi, "{$1}")),
            t = t.replace(/<title type="text\/javascript" style="display: none;" class="redactor-script-tag"(.*?)>([\w\W]*?)<\/title>/gi, '<script$1 type="text/javascript">$2</script>'),
            t = t.replace(/<section(.*?) style="display: none;" rel="redactor-style-tag">([\w\W]*?)<\/section>/gi, "<style$1>$2</style>"),
            t = t.replace(/<section(.*?)rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi, "<form$1$2>$3</form>"),
            this.opts.phpTags && (t = t.replace(/<section style="display: none;" rel="redactor-php-tag">([\w\W]*?)<\/section>/gi, "<?php\r\n$1\r\n?>")),
            t
        },
        cleanRemoveSpaces: function(e, i) {
            if (i !== !1) {
                var i = []
                  , n = e.match(/<(pre|style|script|title)(.*?)>([\w\W]*?)<\/(pre|style|script|title)>/gi);
                if (null  === n && (n = []),
                this.opts.phpTags) {
                    var s = e.match(/<\?php([\w\W]*?)\?>/gi);
                    s && (n = t.merge(n, s))
                }
                n && t.each(n, function(t, n) {
                    e = e.replace(n, "buffer_" + t),
                    i.push(n)
                }
                )
            }
            return e = e.replace(/\n/g, " "),
            e = e.replace(/[\t]*/g, ""),
            e = e.replace(/\n\s*\n/g, "\n"),
            e = e.replace(/^[\s\n]*/g, " "),
            e = e.replace(/[\s\n]*$/g, " "),
            e = e.replace(/>\s{2,}</g, "> <"),
            e = this.cleanReplacer(e, i),
            e = e.replace(/\n\n/g, "\n")
        },
        cleanReplacer: function(e, i) {
            return i === !1 ? e : (t.each(i, function(t, i) {
                e = e.replace("buffer_" + t, i)
            }
            ),
            e)
        },
        cleanRemoveEmptyTags: function(t) {
            t = t.replace(/<span>([\w\W]*?)<\/span>/gi, "$1"),
            t = t.replace(/[\u200B-\u200D\uFEFF]/g, "");
            var e = ["<b>\\s*</b>", "<b>&nbsp;</b>", "<em>\\s*</em>"]
              , i = ["<pre></pre>", "<blockquote>\\s*</blockquote>", "<dd></dd>", "<dt></dt>", "<ul></ul>", "<ol></ol>", "<li></li>", "<table></table>", "<tr></tr>", "<span>\\s*<span>", "<span>&nbsp;<span>", "<p>\\s*</p>", "<p></p>", "<p>&nbsp;</p>", "<p>\\s*<br>\\s*</p>", "<div>\\s*</div>", "<div>\\s*<br>\\s*</div>"];
            i = this.opts.removeEmptyTags ? i.concat(e) : e;
            for (var n = i.length, s = 0; n > s; ++s)
                t = t.replace(new RegExp(i[s],"gi"), "");
            return t
        },
        cleanParagraphy: function(e) {
            function i(t, i, n) {
                return e.replace(new RegExp(t,i), n)
            }
            if (e = t.trim(e),
            this.opts.linebreaks === !0)
                return e;
            if ("" === e || "<p></p>" === e)
                return this.opts.emptyHtml;
            e += "\n";
            var n = []
              , s = e.match(/<(table|div|pre|object)(.*?)>([\w\W]*?)<\/(table|div|pre|object)>/gi);
            s || (s = []);
            var a = e.match(/<!--([\w\W]*?)-->/gi);
            if (a && (s = t.merge(s, a)),
            this.opts.phpTags) {
                var r = e.match(/<section(.*?)rel="redactor-php-tag">([\w\W]*?)<\/section>/gi);
                r && (s = t.merge(s, r))
            }
            s && t.each(s, function(t, i) {
                n[t] = i,
                e = e.replace(i, "{replace" + t + "}\n")
            }
            ),
            e = e.replace(/<br \/>\s*<br \/>/gi, "\n\n");
            var o = "(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)";
            e = i("(<" + o + "[^>]*>)", "gi", "\n$1"),
            e = i("(</" + o + ">)", "gi", "$1\n\n"),
            e = i("\r\n", "g", "\n"),
            e = i("\r", "g", "\n"),
            e = i("/\n\n+/", "g", "\n\n");
            var l = e.split(new RegExp("\ns*\n","g"), -1);
            e = "";
            for (var c in l)
                l.hasOwnProperty(c) && (-1 == l[c].search("{replace") ? (l[c] = l[c].replace(/<p>\n\t<\/p>/gi, ""),
                l[c] = l[c].replace(/<p><\/p>/gi, ""),
                "" != l[c] && (e += "<p>" + l[c].replace(/^\n+|\n+$/g, "") + "</p>")) : e += l[c]);
            return e = i("<p>s*</p>", "gi", ""),
            e = i("<p>([^<]+)</(div|address|form)>", "gi", "<p>$1</p></$2>"),
            e = i("<p>s*(</?" + o + "[^>]*>)s*</p>", "gi", "$1"),
            e = i("<p>(<li.+?)</p>", "gi", "$1"),
            e = i("<p>s*(</?" + o + "[^>]*>)", "gi", "$1"),
            e = i("(</?" + o + "[^>]*>)s*</p>", "gi", "$1"),
            e = i("(</?" + o + "[^>]*>)s*<br />", "gi", "$1"),
            e = i("<br />(s*</?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)", "gi", "$1"),
            e = i("\n</p>", "gi", "</p>"),
            e = i("<li><p>", "gi", "<li>"),
            e = i("</p></li>", "gi", "</li>"),
            e = i("</li><p>", "gi", "</li>"),
            e = i("<p>	?\n?<p>", "gi", "<p>"),
            e = i("</dt><p>", "gi", "</dt>"),
            e = i("</dd><p>", "gi", "</dd>"),
            e = i("<br></p></blockquote>", "gi", "</blockquote>"),
            e = i("<p>	*</p>", "gi", ""),
            t.each(n, function(t, i) {
                e = e.replace("{replace" + t + "}", i)
            }
            ),
            t.trim(e)
        },
        cleanConvertInlineTags: function(t, e) {
            var i = "strong";
            "b" === this.opts.boldTag && (i = "b");
            var n = "em";
            return "i" === this.opts.italicTag && (n = "i"),
            t = t.replace(/<span style="font-style: italic;">([\w\W]*?)<\/span>/gi, "<" + n + ">$1</" + n + ">"),
            t = t.replace(/<span style="font-weight: bold;">([\w\W]*?)<\/span>/gi, "<" + i + ">$1</" + i + ">"),
            t = "strong" === this.opts.boldTag ? t.replace(/<b>([\w\W]*?)<\/b>/gi, "<strong>$1</strong>") : t.replace(/<strong>([\w\W]*?)<\/strong>/gi, "<b>$1</b>"),
            t = "em" === this.opts.italicTag ? t.replace(/<i>([\w\W]*?)<\/i>/gi, "<em>$1</em>") : t.replace(/<em>([\w\W]*?)<\/em>/gi, "<i>$1</i>"),
            t = e !== !0 ? t.replace(/<strike>([\w\W]*?)<\/strike>/gi, "<del>$1</del>") : t.replace(/<del>([\w\W]*?)<\/del>/gi, "<strike>$1</strike>")
        },
        cleanStripTags: function(e) {
            if ("" == e || "undefined" == typeof e)
                return e;
            var i = !1;
            this.opts.allowedTags !== !1 && (i = !0);
            var n = i === !0 ? this.opts.allowedTags : this.opts.deniedTags
              , s = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;
            return e = e.replace(s, function(e, s) {
                return i === !0 ? t.inArray(s.toLowerCase(), n) > "-1" ? e : "" : t.inArray(s.toLowerCase(), n) > "-1" ? "" : e
            }
            ),
            e = this.cleanConvertInlineTags(e)
        },
        cleanSavePreCode: function(e, i) {
            var n = e.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/gi);
            return null  !== n && t.each(n, t.proxy(function(t, n) {
                var s = n.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/i);
                s[3] = s[3].replace(/&nbsp;/g, " "),
                i !== !1 && (s[3] = this.cleanEncodeEntities(s[3])),
                s[3] = s[3].replace(/\$/g, "&#36;"),
                e = e.replace(n, "<" + s[1] + s[2] + ">" + s[3] + "</" + s[1] + ">")
            }
            , this)),
            e
        },
        cleanEncodeEntities: function(t) {
            return t = String(t).replace(/&amp;/g, "&").replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&quot;/g, '"'),
            t.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
        },
        cleanUnverified: function() {
            var e = this.$editor.find("li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite");
            e.filter('[style*="background-color: transparent;"][style*="line-height"]').css("background-color", "").css("line-height", ""),
            e.filter('[style*="background-color: transparent;"]').css("background-color", ""),
            e.css("line-height", ""),
            t.each(e, t.proxy(function(t, e) {
                this.removeEmptyAttr(e, "style")
            }
            , this)),
            this.$editor.find('div[style="text-align: -webkit-auto;"]').contents().unwrap()
        },
        cleanHtml: function(t) {
            var e = 0
              , i = t.length
              , n = 0
              , s = null 
              , a = null 
              , r = ""
              , o = ""
              , l = "";
            for (this.cleanlevel = 0; i > e; e++) {
                if (n = e,
                -1 == t.substr(e).indexOf("<"))
                    return o += t.substr(e),
                    this.cleanFinish(o);
                for (; i > n && "<" != t.charAt(n); )
                    n++;
                for (e != n && (l = t.substr(e, n - e),
                l.match(/^\s{2,}$/g) || ("\n" == o.charAt(o.length - 1) ? o += this.cleanGetTabs() : "\n" == l.charAt(0) && (o += "\n" + this.cleanGetTabs(),
                l = l.replace(/^\s+/, "")),
                o += l),
                l.match(/\n/) && (o += "\n" + this.cleanGetTabs())),
                s = n; i > n && ">" != t.charAt(n); )
                    n++;
                r = t.substr(s, n - s),
                e = n;
                var c;
                if ("!--" == r.substr(1, 3)) {
                    if (!r.match(/--$/)) {
                        for (; "-->" != t.substr(n, 3); )
                            n++;
                        n += 2,
                        r = t.substr(s, n - s),
                        e = n
                    }
                    "\n" != o.charAt(o.length - 1) && (o += "\n"),
                    o += this.cleanGetTabs(),
                    o += r + ">\n"
                } else
                    "!" == r[1] ? o = this.placeTag(r + ">", o) : "?" == r[1] ? o += r + ">\n" : (c = r.match(/^<(script|style|pre)/i)) ? (c[1] = c[1].toLowerCase(),
                    r = this.cleanTag(r),
                    o = this.placeTag(r, o),
                    a = String(t.substr(e + 1)).toLowerCase().indexOf("</" + c[1]),
                    a && (l = t.substr(e + 1, a),
                    e += a,
                    o += l)) : (r = this.cleanTag(r),
                    o = this.placeTag(r, o))
            }
            return this.cleanFinish(o)
        },
        cleanGetTabs: function() {
            for (var t = "", e = 0; e < this.cleanlevel; e++)
                t += "	";
            return t
        },
        cleanFinish: function(t) {
            return t = t.replace(/\n\s*\n/g, "\n"),
            t = t.replace(/^[\s\n]*/, ""),
            t = t.replace(/[\s\n]*$/, ""),
            t = t.replace(/<script(.*?)>\n<\/script>/gi, "<script$1></script>"),
            this.cleanlevel = 0,
            t
        },
        cleanTag: function(t) {
            var e = "";
            t = t.replace(/\n/g, " "),
            t = t.replace(/\s{2,}/g, " "),
            t = t.replace(/^\s+|\s+$/g, " ");
            var i = "";
            t.match(/\/$/) && (i = "/",
            t = t.replace(/\/+$/, ""));
            for (var n; n = /\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(t); )
                n[2] ? e += n[1].toLowerCase() + "=" + n[2] : n[1] && (e += n[1].toLowerCase()),
                e += " ",
                t = t.substr(n[0].length);
            return e.replace(/\s*$/, "") + i + ">"
        },
        placeTag: function(t, e) {
            var i = t.match(this.cleannewLevel);
            return (t.match(this.cleanlineBefore) || i) && (e = e.replace(/\s*$/, ""),
            e += "\n"),
            i && "/" == t.charAt(1) && this.cleanlevel--,
            "\n" == e.charAt(e.length - 1) && (e += this.cleanGetTabs()),
            i && "/" != t.charAt(1) && this.cleanlevel++,
            e += t,
            (t.match(this.cleanlineAfter) || t.match(this.cleannewLevel)) && (e = e.replace(/ *$/, ""),
            e += "\n"),
            e
        },
        formatEmpty: function(e) {
            var i = t.trim(this.$editor.html());
            if (this.opts.linebreaks)
                "" == i && (e.preventDefault(),
                this.$editor.html(""),
                this.focus());
            else {
                i = i.replace(/<br\s?\/?>/i, "");
                var n = i.replace(/<p>\s?<\/p>/gi, "");
                if ("" === i || "" === n) {
                    e.preventDefault();
                    var s = t(this.opts.emptyHtml).get(0);
                    this.$editor.html(s),
                    this.focus()
                }
            }
            this.sync()
        },
        formatBlocks: function(e) {
            this.bufferSet();
            var i = this.getBlocks();
            this.selectionSave(),
            t.each(i, t.proxy(function(i, n) {
                if ("LI" !== n.tagName) {
                    var s = t(n).parent();
                    if ("p" === e) {
                        if ("P" === n.tagName && 0 != s.size() && "BLOCKQUOTE" === s[0].tagName || "BLOCKQUOTE" === n.tagName)
                            return void this.formatQuote();
                        if (this.opts.linebreaks)
                            return;
                        this.formatBlock(e, n)
                    } else
                        this.formatBlock(e, n)
                }
            }
            , this)),
            this.selectionRestore(),
            this.sync()
        },
        formatBlock: function(e, i) {
            if (i === !1 && (i = this.getBlock()),
            i === !1)
                return this.opts.linebreaks === !0 && this.execCommand("formatblock", e),
                !0;
            var n = "";
            if ("pre" !== e ? n = t(i).contents() : (n = t(i).html(),
            "" === t.trim(n) && (n = '<span id="selection-marker-1"></span>')),
            "PRE" === i.tagName && (e = "p"),
            this.opts.linebreaks === !0 && "p" === e)
                t(i).replaceWith(t("<div>").append(n).html() + "<br>");
            else {
                var s = this.getParent()
                  , a = t("<" + e + ">").append(n);
                t(i).replaceWith(a),
                s && "TD" == s.tagName && t(a).wrapAll("<td>")
            }
        },
        formatChangeTag: function(e, i, n) {
            n !== !1 && this.selectionSave();
            var s = t("<" + i + "/>");
            return t(e).replaceWith(function() {
                return s.append(t(this).contents())
            }
            ),
            n !== !1 && this.selectionRestore(),
            s
        },
        formatQuote: function() {
            if (this.bufferSet(),
            this.opts.linebreaks === !1) {
                this.selectionSave();
                var e = this.getBlocks()
                  , i = !1
                  , n = e.length;
                if (e) {
                    var s = ""
                      , a = ""
                      , r = !1
                      , o = !0;
                    if (t.each(e, function(t, e) {
                        "P" !== e.tagName && (o = !1)
                    }
                    ),
                    t.each(e, t.proxy(function(l, c) {
                        if ("BLOCKQUOTE" === c.tagName)
                            this.formatBlock("p", c, !1);
                        else if ("P" === c.tagName)
                            if (i = t(c).parent(),
                            "BLOCKQUOTE" == i[0].tagName) {
                                var d = t(i).children("p").size();
                                1 == d ? t(i).replaceWith(c) : d == n ? (r = "blockquote",
                                s += this.outerHtml(c)) : (r = "html",
                                s += this.outerHtml(c),
                                0 == l ? (t(c).addClass("redactor-replaced").empty(),
                                a = this.outerHtml(c)) : t(c).remove())
                            } else
                                o === !1 || 1 == e.length ? this.formatBlock("blockquote", c, !1) : (r = "paragraphs",
                                s += this.outerHtml(c));
                        else
                            "LI" !== c.tagName && this.formatBlock("blockquote", c, !1)
                    }
                    , this)),
                    r)
                        if ("paragraphs" == r)
                            t(e[0]).replaceWith("<blockquote>" + s + "</blockquote>"),
                            t(e).remove();
                        else if ("blockquote" == r)
                            t(i).replaceWith(s);
                        else if ("html" == r) {
                            var l = this.$editor.html().replace(a, "</blockquote>" + s + "<blockquote>");
                            this.$editor.html(l),
                            this.$editor.find("blockquote").each(function() {
                                "" == t.trim(t(this).html()) && t(this).remove()
                            }
                            )
                        }
                }
                this.selectionRestore()
            } else {
                var c = this.getBlock();
                if ("BLOCKQUOTE" === c.tagName) {
                    this.selectionSave();
                    var l = t.trim(t(c).html())
                      , d = t.trim(this.getSelectionHtml());
                    if (l = l.replace(/<span(.*?)id="selection-marker(.*?)<\/span>/gi, ""),
                    l == d)
                        t(c).replaceWith(t(c).html() + "<br>");
                    else {
                        this.inlineFormat("tmp");
                        var h = this.$editor.find("tmp");
                        h.empty();
                        var u = this.$editor.html().replace("<tmp></tmp>", '</blockquote><span id="selection-marker-1">' + this.opts.invisibleSpace + "</span>" + d + "<blockquote>");
                        this.$editor.html(u),
                        h.remove(),
                        this.$editor.find("blockquote").each(function() {
                            "" == t.trim(t(this).html()) && t(this).remove()
                        }
                        )
                    }
                    this.selectionRestore(),
                    this.$editor.find("span#selection-marker-1").attr("id", !1)
                } else {
                    var p = this.selectionWrap("blockquote")
                      , l = t(p).html()
                      , f = ["ul", "ol", "table", "tr", "tbody", "thead", "tfoot", "dl"];
                    t.each(f, function(t, e) {
                        l = l.replace(new RegExp("<" + e + "(.*?)>","gi"), ""),
                        l = l.replace(new RegExp("</" + e + ">","gi"), "")
                    }
                    );
                    var m = this.opts.blockLevelElements;
                    m.push("td"),
                    t.each(m, function(t, e) {
                        l = l.replace(new RegExp("<" + e + "(.*?)>","gi"), ""),
                        l = l.replace(new RegExp("</" + e + ">","gi"), "<br>")
                    }
                    ),
                    t(p).html(l),
                    this.selectionElement(p);
                    var g = t(p).next();
                    0 != g.size() && "BR" === g[0].tagName && g.remove()
                }
            }
            this.sync()
        },
        blockRemoveAttr: function(e) {
            var i = this.getBlocks();
            t(i).removeAttr(e),
            this.sync()
        },
        blockSetAttr: function(e, i) {
            var n = this.getBlocks();
            t(n).attr(e, i),
            this.sync()
        },
        blockRemoveStyle: function(e) {
            var i = this.getBlocks();
            t(i).css(e, ""),
            this.removeEmptyAttr(i, "style"),
            this.sync()
        },
        blockSetStyle: function(e, i) {
            var n = this.getBlocks();
            t(n).css(e, i),
            this.sync()
        },
        blockRemoveClass: function(e) {
            var i = this.getBlocks();
            t(i).removeClass(e),
            this.removeEmptyAttr(i, "class"),
            this.sync()
        },
        blockSetClass: function(e) {
            var i = this.getBlocks();
            t(i).addClass(e),
            this.sync()
        },
        inlineRemoveClass: function(e) {
            this.selectionSave(),
            this.inlineEachNodes(function(i) {
                t(i).removeClass(e),
                this.removeEmptyAttr(i, "class")
            }
            ),
            this.selectionRestore(),
            this.sync()
        },
        inlineSetClass: function(e) {
            var i = this.getCurrent();
            t(i).hasClass(e) || this.inlineMethods("addClass", e)
        },
        inlineRemoveStyle: function(e) {
            this.selectionSave(),
            this.inlineEachNodes(function(i) {
                t(i).css(e, ""),
                this.removeEmptyAttr(i, "style")
            }
            ),
            this.selectionRestore(),
            this.sync()
        },
        inlineSetStyle: function(t, e) {
            this.inlineMethods("css", t, e)
        },
        inlineRemoveAttr: function(e) {
            this.selectionSave();
            var i = this.getRange()
              , n = this.getElement()
              , s = this.getNodes();
            (i.collapsed || i.startContainer === i.endContainer && n) && (s = t(n)),
            t(s).removeAttr(e),
            this.inlineUnwrapSpan(),
            this.selectionRestore(),
            this.sync()
        },
        inlineSetAttr: function(t, e) {
            this.inlineMethods("attr", t, e)
        },
        inlineMethods: function(e, i, n) {
            this.bufferSet(),
            this.selectionSave();
            var s = this.getRange()
              , a = this.getElement();
            if (!s.collapsed && s.startContainer !== s.endContainer || !a || this.nodeTestBlocks(a)) {
                this.document.execCommand("fontSize", !1, 4);
                var r = this.$editor.find("font");
                t.each(r, t.proxy(function(t, s) {
                    this.inlineSetMethods(e, s, i, n)
                }
                , this))
            } else
                t(a)[e](i, n);
            this.selectionRestore(),
            this.sync()
        },
        inlineSetMethods: function(e, i, n, s) {
            var a, r = t(i).parent(), o = this.getSelectionText(), l = t(r).text(), c = o == l;
            return c && r && "INLINE" === r[0].tagName && 0 != r[0].attributes.length ? (a = r,
            t(i).replaceWith(t(i).html())) : (a = t("<inline>").append(t(i).contents()),
            t(i).replaceWith(a)),
            t(a)[e](n, s),
            a
        },
        inlineEachNodes: function(e) {
            var i, n = this.getRange(), s = this.getElement(), a = this.getNodes();
            (n.collapsed || n.startContainer === n.endContainer && s) && (a = t(s),
            i = !0),
            t.each(a, t.proxy(function(n, s) {
                if (!i && "INLINE" !== s.tagName) {
                    var a = this.getSelectionText()
                      , r = t(s).parent().text()
                      , o = a == r;
                    if (!o || "INLINE" !== s.parentNode.tagName || t(s.parentNode).hasClass("redactor_editor"))
                        return;
                    s = s.parentNode
                }
                e.call(this, s)
            }
            , this))
        },
        inlineUnwrapSpan: function() {
            var e = this.$editor.find("inline");
            t.each(e, t.proxy(function(e, i) {
                var n = t(i);
                void 0 === n.attr("class") && void 0 === n.attr("style") && n.contents().unwrap()
            }
            , this))
        },
        inlineFormat: function(e) {
            this.selectionSave(),
            this.document.execCommand("fontSize", !1, 4);
            var i, n = this.$editor.find("font");
            t.each(n, function(n, s) {
                var a = t("<" + e + "/>").append(t(s).contents());
                t(s).replaceWith(a),
                i = a
            }
            ),
            this.selectionRestore(),
            this.sync()
        },
        inlineRemoveFormat: function(e) {
            this.selectionSave();
            var i = e.toUpperCase()
              , n = this.getNodes()
              , s = t(this.getParent()).parent();
            t.each(n, function(t, e) {
                e.tagName === i && this.inlineRemoveFormatReplace(e)
            }
            ),
            s && s[0].tagName === i && this.inlineRemoveFormatReplace(s),
            this.selectionRestore(),
            this.sync()
        },
        inlineRemoveFormatReplace: function(e) {
            t(e).replaceWith(t(e).contents())
        },
        insertHtml: function(e, i) {
            var n = this.getCurrent()
              , s = n.parentNode;
            this.$editor.focus(),
            this.bufferSet();
            var a = t("<div>").append(t.parseHTML(e));
            e = a.html(),
            e = this.cleanRemoveEmptyTags(e),
            a = t("<div>").append(t.parseHTML(e));
            var r = this.getBlock();
            if (1 == a.contents().length) {
                var o = a.contents()[0].tagName;
                ("P" != o && o == r.tagName || "PRE" == o) && (e = a.text(),
                a = t("<div>").append(e))
            }
            !this.opts.linebreaks && 1 == a.contents().length && 3 == a.contents()[0].nodeType && (this.getRangeSelectedNodes().length > 2 || !n || "BODY" == n.tagName && !s || "HTML" == s.tagName) && (e = "<p>" + e + "</p>"),
            e = this.setSpansVerifiedHtml(e),
            a.contents().length > 1 && r || a.contents().is("p, :header, ul, ol, li, div, table, td, blockquote, pre, address, section, header, footer, aside, article") ? this.browser("msie") ? this.isIe11() ? this.execPasteFrag(e) : this.document.selection.createRange().pasteHTML(e) : this.document.execCommand("inserthtml", !1, e) : this.insertHtmlAdvanced(e, !1),
            this.selectall && this.window.setTimeout(t.proxy(function() {
                this.opts.linebreaks ? this.focusEnd() : this.selectionEnd(this.$editor.contents().last())
            }
            , this), 1),
            this.observeStart(),
            this.setNonEditable(),
            i !== !1 && this.sync()
        },
        insertHtmlAdvanced: function(t, e) {
            t = this.setSpansVerifiedHtml(t);
            var i = this.getSelection();
            if (i.getRangeAt && i.rangeCount) {
                var n = i.getRangeAt(0);
                n.deleteContents();
                var s = this.document.createElement("div");
                s.innerHTML = t;
                for (var a, r, o = this.document.createDocumentFragment(); a = s.firstChild; )
                    r = o.appendChild(a);
                n.insertNode(o),
                r && (n = n.cloneRange(),
                n.setStartAfter(r),
                n.collapse(!0),
                i.removeAllRanges(),
                i.addRange(n))
            }
            e !== !1 && this.sync()
        },
        insertBeforeCursor: function(e) {
            e = this.setSpansVerifiedHtml(e);
            var i = t(e)
              , n = document.createElement("span");
            n.innerHTML = "?";
            var s = this.getRange();
            s.insertNode(n),
            s.insertNode(i[0]),
            s.collapse(!1);
            var a = this.getSelection();
            a.removeAllRanges(),
            a.addRange(s),
            this.sync()
        },
        insertText: function(e) {
            var i = t(t.parseHTML(e));
            i.length && (e = i.text()),
            this.$editor.focus(),
            this.browser("msie") && !this.isIe11() ? this.document.selection.createRange().pasteHTML(e) : this.document.execCommand("inserthtml", !1, e),
            this.sync()
        },
        insertNode: function(e) {
            if (e = e[0] || e,
            "SPAN" == e.tagName) {
                var i = "inline"
                  , n = e.outerHTML
                  , s = new RegExp("<" + e.tagName,"i")
                  , a = n.replace(s, "<" + i);
                s = new RegExp("</" + e.tagName,"i"),
                a = a.replace(s, "</" + i),
                e = t(a)[0]
            }
            var r = this.getSelection();
            r.getRangeAt && r.rangeCount && (range = r.getRangeAt(0),
            range.deleteContents(),
            range.insertNode(e),
            range.setEndAfter(e),
            range.setStartAfter(e),
            r.removeAllRanges(),
            r.addRange(range))
        },
        insertNodeToCaretPositionFromPoint: function(t, e) {
            var i, n = t.clientX, s = t.clientY;
            if (this.document.caretPositionFromPoint) {
                var a = this.document.caretPositionFromPoint(n, s);
                i = this.getRange(),
                i.setStart(a.offsetNode, a.offset),
                i.collapse(!0),
                i.insertNode(e)
            } else if (this.document.caretRangeFromPoint)
                i = this.document.caretRangeFromPoint(n, s),
                i.insertNode(e);
            else if ("undefined" != typeof document.body.createTextRange) {
                i = this.document.body.createTextRange(),
                i.moveToPoint(n, s);
                var r = i.duplicate();
                r.moveToPoint(n, s),
                i.setEndPoint("EndToEnd", r),
                i.select()
            }
        },
        insertAfterLastElement: function(e, i) {
            if ("undefined" != typeof i && (e = i),
            this.isEndOfElement()) {
                if (this.opts.linebreaks) {
                    var n = t("<div>").append(t.trim(this.$editor.html())).contents();
                    if (this.outerHtml(n.last()[0]) != this.outerHtml(e))
                        return !1
                } else if (this.$editor.contents().last()[0] !== e)
                    return !1;
                this.insertingAfterLastElement(e)
            }
        },
        insertingAfterLastElement: function(e) {
            if (this.bufferSet(),
            this.opts.linebreaks === !1) {
                var i = t(this.opts.emptyHtml);
                t(e).after(i),
                this.selectionStart(i)
            } else {
                var i = t('<span id="selection-marker-1">' + this.opts.invisibleSpace + "</span>", this.document)[0];
                t(e).after(i),
                t(i).after(this.opts.invisibleSpace),
                this.selectionRestore(),
                this.$editor.find("span#selection-marker-1").removeAttr("id")
            }
        },
        insertLineBreak: function() {
            this.selectionSave(),
            this.$editor.find("#selection-marker-1").before("<br>" + (this.browser("webkit") ? this.opts.invisibleSpace : "")),
            this.selectionRestore()
        },
        insertDoubleLineBreak: function() {
            this.selectionSave(),
            this.$editor.find("#selection-marker-1").before("<br><br>" + (this.browser("webkit") ? this.opts.invisibleSpace : "")),
            this.selectionRestore()
        },
        replaceLineBreak: function(e) {
            var i = t("<br>" + this.opts.invisibleSpace);
            t(e).replaceWith(i),
            this.selectionStart(i)
        },
        pasteClean: function(e) {
            if (e = this.callback("pasteBefore", !1, e),
            this.browser("msie")) {
                var i = t.trim(e);
                0 == i.search(/^<a(.*?)>(.*?)<\/a>$/i) && (e = e.replace(/^<a(.*?)>(.*?)<\/a>$/i, "$2"))
            }
            if (this.opts.pastePlainText) {
                var i = this.document.createElement("div");
                return e = e.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi, "\n"),
                i.innerHTML = e,
                e = i.textContent || i.innerText,
                e = t.trim(e),
                e = e.replace("\n", "<br>"),
                e = this.cleanParagraphy(e),
                this.pasteInsert(e),
                !1
            }
            if (this.currentOrParentIs("PRE"))
                return e = this.pastePre(e),
                this.pasteInsert(e),
                !0;
            if (e = e.replace(/<p(.*?)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi, "<ul><li$2</li>"),
            e = e.replace(/<p(.*?)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi, "<li$2</li>"),
            e = e.replace(/<p(.*?)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi, "<li$2</li></ul>"),
            e = e.replace(/<p(.*?)class="MsoListParagraph"([\w\W]*?)<\/p>/gi, "<ul><li$2</li></ul>"),
            e = e.replace(/·/g, ""),
            e = e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi, ""),
            e = e.replace(/(&nbsp;){2,}/gi, "&nbsp;"),
            e = e.replace(/&nbsp;/gi, " "),
            e = e.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi, "$2"),
            e = e.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi, "$3"),
            e = this.cleanStripTags(e),
            e = e.replace(/<td><\/td>/gi, "[td]"),
            e = e.replace(/<td>&nbsp;<\/td>/gi, "[td]"),
            e = e.replace(/<td><br><\/td>/gi, "[td]"),
            e = e.replace(/<td(.*?)colspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi, '[td colspan="$2"]$4[/td]'),
            e = e.replace(/<td(.*?)rowspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi, '[td rowspan="$2"]$4[/td]'),
            e = e.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi, '[a href="$2"]$4[/a]'),
            e = e.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi, "[iframe$1]$2[/iframe]"),
            e = e.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi, "[video$1]$2[/video]"),
            e = e.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi, "[audio$1]$2[/audio]"),
            e = e.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi, "[embed$1]$2[/embed]"),
            e = e.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi, "[object$1]$2[/object]"),
            e = e.replace(/<param(.*?)>/gi, "[param$1]"),
            e = e.replace(/<img(.*?)>/gi, "[img$1]"),
            e = e.replace(/ class="(.*?)"/gi, ""),
            e = e.replace(/<(\w+)([\w\W]*?)>/gi, "<$1>"),
            e = e.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi, ""),
            e = e.replace(/<div>\s*?\t*?\n*?(<ul>|<ol>|<p>)/gi, "$1"),
            e = e.replace(/\[td colspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi, '<td colspan="$1">$2</td>'),
            e = e.replace(/\[td rowspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi, '<td rowspan="$1">$2</td>'),
            e = e.replace(/\[td\]/gi, "<td>&nbsp;</td>"),
            e = e.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi, '<a href="$1">$2</a>'),
            e = e.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi, "<iframe$1>$2</iframe>"),
            e = e.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi, "<video$1>$2</video>"),
            e = e.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi, "<audio$1>$2</audio>"),
            e = e.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi, "<embed$1>$2</embed>"),
            e = e.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi, "<object$1>$2</object>"),
            e = e.replace(/\[param(.*?)\]/gi, "<param$1>"),
            e = e.replace(/\[img(.*?)\]/gi, "<img$1>"),
            this.opts.convertDivs && (e = e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, "<p>$2</p>"),
            e = e.replace(/<\/div><p>/gi, "<p>"),
            e = e.replace(/<\/p><\/div>/gi, "</p>")),
            e = this.currentOrParentIs("LI") ? e.replace(/<p>([\w\W]*?)<\/p>/gi, "$1<br>") : this.cleanParagraphy(e),
            e = e.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi, "$2"),
            e = e.replace(/<img>/gi, ""),
            e = e.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi, ""),
            e = e.replace(/\n{3,}/gi, "\n"),
            e = e.replace(/<p><p>/gi, "<p>"),
            e = e.replace(/<\/p><\/p>/gi, "</p>"),
            e = e.replace(/<li>(\s*|\t*|\n*)<p>/gi, "<li>"),
            e = e.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi, "</li>"),
            this.opts.linebreaks === !0 && (e = e.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi, "$2<br>")),
            e = e.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi, ""),
            e = e.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi, ""),
            e = e.replace(/<td(.*?)>(\s*|\t*|\n*)<p>([\w\W]*?)<\/p>(\s*|\t*|\n*)<\/td>/gi, "<td$1>$3</td>"),
            e = e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, "$2"),
            e = e.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi, "$2"),
            this.pasteClipboardMozilla = !1,
            this.browser("mozilla")) {
                if (this.opts.clipboardUpload) {
                    var n = e.match(/<img src="data:image(.*?)"(.*?)>/gi);
                    if (null  !== n) {
                        this.pasteClipboardMozilla = n;
                        for (k in n) {
                            var s = n[k].replace("<img", '<img data-mozilla-paste-image="' + k + '" ');
                            e = e.replace(n[k], s)
                        }
                    }
                }
                for (; /<br>$/gi.test(e); )
                    e = e.replace(/<br>$/gi, "")
            }
            for (e = e.replace(/<p>•([\w\W]*?)<\/p>/gi, "<li>$1</li>"); /<font>([\w\W]*?)<\/font>/gi.test(e); )
                e = e.replace(/<font>([\w\W]*?)<\/font>/gi, "$1");
            e = e.replace(/<p>\n?<li>/gi, "<li>"),
            this.browser("msie") && !this.isIe11() && (e = e.replace(/\n/g, "")),
            this.pasteInsert(e)
        },
        pastePre: function(t) {
            t = t.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi, "\n");
            var e = this.document.createElement("div");
            return e.innerHTML = t,
            this.cleanEncodeEntities(e.textContent || e.innerText)
        },
        pasteInsert: function(e) {
            this.selectall && (this.$editor.html(this.opts.linebreaks ? "" : this.opts.emptyHtml),
            this.$editor.focus()),
            e = this.callback("pasteAfter", !1, e),
            this.insertHtml(e),
            this.selectall = !1,
            setTimeout(t.proxy(function() {
                this.rtePaste = !1,
                this.browser("mozilla") && this.$editor.find("p:empty").remove(),
                this.pasteClipboardMozilla !== !1 && this.pasteClipboardUploadMozilla()
            }
            , this), 100),
            this.opts.autoresize && this.fullscreen !== !0 ? t(this.document.body).scrollTop(this.saveScroll) : this.$editor.scrollTop(this.saveScroll)
        },
        pasteClipboardUploadMozilla: function() {
            var e = this.$editor.find("img[data-mozilla-paste-image]");
            t.each(e, t.proxy(function(e, i) {
                var n = t(i)
                  , s = i.src.split(",")
                  , a = s[1]
                  , r = s[0].split(";")[0].split(":")[1];
                t.post(this.opts.clipboardUploadUrl, {
                    contentType: r,
                    data: a
                }, t.proxy(function(e) {
                    var i = "string" == typeof e ? t.parseJSON(e) : e;
                    n.attr("src", i.filelink),
                    n.removeAttr("data-mozilla-paste-image"),
                    this.sync(),
                    this.callback("imageUpload", n, i)
                }
                , this))
            }
            , this))
        },
        pasteClipboardUpload: function(e) {
            var i = e.target.result
              , n = i.split(",")
              , s = n[1]
              , a = n[0].split(";")[0].split(":")[1];
            this.opts.clipboardUpload ? t.post(this.opts.clipboardUploadUrl, {
                contentType: a,
                data: s
            }, t.proxy(function(e) {
                var i = "string" == typeof e ? t.parseJSON(e) : e
                  , n = '<img src="' + i.filelink + '" id="clipboard-image-marker" />';
                this.execCommand("inserthtml", n, !1);
                var s = t(this.$editor.find("img#clipboard-image-marker"));
                s.length ? s.removeAttr("id") : s = !1,
                this.sync(),
                s && this.callback("imageUpload", s, i)
            }
            , this)) : this.insertHtml('<img src="' + i + '" />')
        },
        bufferSet: function(t) {
            void 0 !== t ? this.opts.buffer.push(t) : (this.selectionSave(),
            this.opts.buffer.push(this.$editor.html()),
            this.selectionRemoveMarkers("buffer"))
        },
        bufferUndo: function() {
            return 0 === this.opts.buffer.length ? void this.$editor.focus() : (this.selectionSave(),
            this.opts.rebuffer.push(this.$editor.html()),
            this.selectionRestore(!1, !0),
            this.$editor.html(this.opts.buffer.pop()),
            this.selectionRestore(),
            void setTimeout(t.proxy(this.observeStart, this), 100))
        },
        bufferRedo: function() {
            return 0 === this.opts.rebuffer.length ? (this.$editor.focus(),
            !1) : (this.selectionSave(),
            this.opts.buffer.push(this.$editor.html()),
            this.selectionRestore(!1, !0),
            this.$editor.html(this.opts.rebuffer.pop()),
            this.selectionRestore(!0),
            void setTimeout(t.proxy(this.observeStart, this), 4))
        },
        observeStart: function() {
            this.observeImages(),
            this.opts.observeLinks && this.observeLinks()
        },
        observeLinks: function() {
            this.$editor.find("a").on("click", t.proxy(this.linkObserver, this)),
            this.$editor.on("click.redactor", t.proxy(function(t) {
                this.linkObserverTooltipClose(t)
            }
            , this)),
            t(document).on("click.redactor", t.proxy(function(t) {
                this.linkObserverTooltipClose(t)
            }
            , this))
        },
        observeImages: function() {
            return this.opts.observeImages === !1 ? !1 : void this.$editor.find("img").each(t.proxy(function(e, i) {
                this.browser("msie") && t(i).attr("unselectable", "on"),
                this.imageResize(i)
            }
            , this))
        },
        linkObserver: function(e) {
            var i = t(e.target)
              , n = i.offset();
            if (this.opts.iframe) {
                var s = this.$frame.offset();
                n.top = s.top + (n.top - t(this.document).scrollTop()),
                n.left += s.left
            }
            var a = t('<span class="redactor-link-tooltip"></span>')
              , r = i.attr("href");
            r.length > 24 && (r = r.substring(0, 24) + "...");
            var o = t('<a href="' + i.attr("href") + '" target="_blank">' + r + "</a>").on("click", t.proxy(function() {
                this.linkObserverTooltipClose(!1)
            }
            , this))
              , l = t('<a href="#">' + this.opts.curLang.edit + "</a>").on("click", t.proxy(function(t) {
                t.preventDefault(),
                this.linkShow(),
                this.linkObserverTooltipClose(!1)
            }
            , this))
              , c = t('<a href="#">' + this.opts.curLang.unlink + "</a>").on("click", t.proxy(function(t) {
                t.preventDefault(),
                this.execCommand("unlink"),
                this.linkObserverTooltipClose(!1)
            }
            , this));
            a.append(o),
            a.append(" | "),
            a.append(l),
            a.append(" | "),
            a.append(c),
            a.css({
                top: n.top + 20 + "px",
                left: n.left + "px"
            }),
            t(".redactor-link-tooltip").remove(),
            t("body").append(a)
        },
        linkObserverTooltipClose: function(e) {
            return e !== !1 && "A" == e.target.tagName ? !1 : void t(".redactor-link-tooltip").remove()
        },
        getSelection: function() {
            return this.opts.rangy ? this.opts.iframe ? rangy.getSelection(this.$frame[0]) : rangy.getSelection() : this.document.getSelection()
        },
        getRange: function() {
            if (this.opts.rangy)
                return this.opts.iframe ? rangy.createRange(this.iframeDoc()) : rangy.createRange();
            if (this.document.getSelection) {
                var t = this.getSelection();
                if (t.getRangeAt && t.rangeCount)
                    return t.getRangeAt(0)
            }
            return this.document.createRange()
        },
        selectionElement: function(t) {
            this.setCaret(t)
        },
        selectionStart: function(t) {
            this.selectionSet(t[0] || t, 0, null , 0)
        },
        selectionEnd: function(t) {
            this.selectionSet(t[0] || t, 1, null , 1)
        },
        selectionSet: function(t, e, i, n) {
            null  == i && (i = t),
            null  == n && (n = e);
            var s = this.getSelection();
            if (s) {
                var a = this.getRange();
                a.setStart(t, e),
                a.setEnd(i, n);
                try {
                    s.removeAllRanges()
                } catch (r) {}
                s.addRange(a)
            }
        },
        selectionWrap: function(t) {
            t = t.toLowerCase();
            var e = this.getBlock();
            if (e) {
                var i = this.formatChangeTag(e, t);
                return this.sync(),
                i
            }
            var n = this.getSelection()
              , s = n.getRangeAt(0)
              , i = document.createElement(t);
            return i.appendChild(s.extractContents()),
            s.insertNode(i),
            this.selectionElement(i),
            i
        },
        selectionAll: function() {
            var t = this.getRange();
            t.selectNodeContents(this.$editor[0]);
            var e = this.getSelection();
            e.removeAllRanges(),
            e.addRange(t)
        },
        selectionRemove: function() {
            this.getSelection().removeAllRanges()
        },
        getCaretOffset: function(e) {
            var i = 0
              , n = this.getRange()
              , s = n.cloneRange();
            return s.selectNodeContents(e),
            s.setEnd(n.endContainer, n.endOffset),
            i = t.trim(s.toString()).length
        },
        getCaretOffsetRange: function() {
            return new s(this.getSelection().getRangeAt(0))
        },
        setCaret: function(t, e, i) {
            "undefined" == typeof i && (i = e),
            t = t[0] || t;
            var n = this.getRange();
            n.selectNodeContents(t);
            var s, a = this.getTextNodesIn(t), r = !1, o = 0;
            if (1 == a.length && e)
                n.setStart(a[0], e),
                n.setEnd(a[0], i);
            else
                for (var l, c = 0; l = a[c++]; ) {
                    if (s = o + l.length,
                    !r && e >= o && (s > e || e == s && c < a.length) && (n.setStart(l, e - o),
                    r = !0),
                    r && s >= i) {
                        n.setEnd(l, i - o);
                        break
                    }
                    o = s
                }
            var d = this.getSelection();
            d.removeAllRanges(),
            d.addRange(n)
        },
        getTextNodesIn: function(t) {
            var e = [];
            if (3 == t.nodeType)
                e.push(t);
            else
                for (var i = t.childNodes, n = 0, s = i.length; s > n; ++n)
                    e.push.apply(e, this.getTextNodesIn(i[n]));
            return e
        },
        getCurrent: function() {
            var t = !1
              , e = this.getSelection();
            return e && e.rangeCount > 0 && (t = e.getRangeAt(0).startContainer),
            this.isParentRedactor(t)
        },
        getParent: function(e) {
            return e = e || this.getCurrent(),
            e ? this.isParentRedactor(t(e).parent()[0]) : !1
        },
        getBlock: function(e) {
            for ("undefined" == typeof e && (e = this.getCurrent()); e; ) {
                if (this.nodeTestBlocks(e))
                    return t(e).hasClass("redactor_editor") ? !1 : e;
                e = e.parentNode
            }
            return !1
        },
        getBlocks: function(e) {
            var i = [];
            if ("undefined" == typeof e) {
                var n = this.getRange();
                if (n && n.collapsed === !0)
                    return [this.getBlock()];
                var e = this.getNodes(n)
            }
            return t.each(e, t.proxy(function(e, n) {
                return this.opts.iframe === !1 && 0 == t(n).parents("div.redactor_editor").size() ? !1 : void (this.nodeTestBlocks(n) && i.push(n))
            }
            , this)),
            0 === i.length && (i = [this.getBlock()]),
            i
        },
        nodeTestBlocks: function(t) {
            return 1 == t.nodeType && this.rTestBlock.test(t.nodeName)
        },
        tagTestBlock: function(t) {
            return this.rTestBlock.test(t)
        },
        getNodes: function(e, i) {
            if ("undefined" == typeof e || 0 == e)
                var e = this.getRange();
            if (e && e.collapsed === !0) {
                if ("undefined" == typeof i && this.tagTestBlock(i)) {
                    var n = this.getBlock();
                    return n.tagName == i ? [n] : []
                }
                return [this.getCurrent()]
            }
            var s = []
              , a = []
              , r = this.document.getSelection();
            if (r.isCollapsed || (s = this.getRangeSelectedNodes(r.getRangeAt(0))),
            t.each(s, t.proxy(function(e, n) {
                return this.opts.iframe === !1 && 0 == t(n).parents("div.redactor_editor").size() ? !1 : void ("undefined" == typeof i ? "" != t.trim(n.textContent) && a.push(n) : n.tagName == i && a.push(n))
            }
            , this)),
            0 == a.length) {
                if ("undefined" == typeof i && this.tagTestBlock(i)) {
                    var n = this.getBlock();
                    return n.tagName == i ? a.push(n) : []
                }
                a.push(this.getCurrent())
            }
            var o = a[a.length - 1];
            return this.nodeTestBlocks(o) && (a = a.slice(0, -1)),
            a
        },
        getElement: function(e) {
            for (e || (e = this.getCurrent()); e; ) {
                if (1 == e.nodeType)
                    return t(e).hasClass("redactor_editor") ? !1 : e;
                e = e.parentNode
            }
            return !1
        },
        getRangeSelectedNodes: function(t) {
            t = t || this.getRange();
            var e = t.startContainer
              , i = t.endContainer;
            if (e == i)
                return [e];
            for (var n = []; e && e != i; )
                n.push(e = this.nextNode(e));
            for (e = t.startContainer; e && e != t.commonAncestorContainer; )
                n.unshift(e),
                e = e.parentNode;
            return n
        },
        nextNode: function(t) {
            if (t.hasChildNodes())
                return t.firstChild;
            for (; t && !t.nextSibling; )
                t = t.parentNode;
            return t ? t.nextSibling : null 
        },
        getSelectionText: function() {
            return this.getSelection().toString()
        },
        getSelectionHtml: function() {
            var t = ""
              , e = this.getSelection();
            if (e.rangeCount) {
                for (var i = this.document.createElement("div"), n = e.rangeCount, s = 0; n > s; ++s)
                    i.appendChild(e.getRangeAt(s).cloneContents());
                t = i.innerHTML
            }
            return this.syncClean(t)
        },
        selectionSave: function() {
            this.isFocused() || this.$editor.focus(),
            this.opts.rangy ? this.savedSel = rangy.saveSelection() : this.selectionCreateMarker(this.getRange())
        },
        selectionCreateMarker: function(e) {
            if (e) {
                var i = t('<span id="selection-marker-1" class="redactor-selection-marker">' + this.opts.invisibleSpace + "</span>", this.document)[0]
                  , n = t('<span id="selection-marker-2" class="redactor-selection-marker">' + this.opts.invisibleSpace + "</span>", this.document)[0];
                e.collapsed === !0 ? this.selectionSetMarker(e, i, !0) : (this.selectionSetMarker(e, i, !0),
                this.selectionSetMarker(e, n, !1)),
                this.savedSel = this.$editor.html(),
                this.selectionRestore(!1, !1)
            }
        },
        selectionSetMarker: function(t, e, i) {
            var n = t.cloneRange();
            n.collapse(i),
            n.insertNode(e),
            n.detach()
        },
        selectionRestore: function(t, e) {
            if (this.opts.rangy)
                rangy.restoreSelection(this.savedSel);
            else {
                t === !0 && this.savedSel && this.$editor.html(this.savedSel);
                var i = this.$editor.find("span#selection-marker-1")
                  , n = this.$editor.find("span#selection-marker-2");
                this.browser("mozilla") ? this.$editor.focus() : this.isFocused() || this.$editor.focus(),
                0 != i.length && 0 != n.length ? this.selectionSet(i[0], 0, n[0], 0) : 0 != i.length && this.selectionSet(i[0], 0, null , 0),
                e !== !1 && (this.selectionRemoveMarkers(),
                this.savedSel = !1)
            }
        },
        selectionRemoveMarkers: function() {
            this.opts.rangy ? rangy.removeMarkers(this.savedSel) : t.each(this.$editor.find("span.redactor-selection-marker"), function() {
                var e = t.trim(t(this).html().replace(/[^\u0000-\u1C7F]/g, ""));
                "" == e ? t(this).remove() : t(this).removeAttr("class").removeAttr("id")
            }
            )
        },
        tableShow: function() {
            this.selectionSave(),
            this.modalInit(this.opts.curLang.table, this.opts.modal_table, 300, t.proxy(function() {
                t("#redactor_insert_table_btn").click(t.proxy(this.tableInsert, this)),
                setTimeout(function() {
                    t("#redactor_table_rows").focus()
                }
                , 200)
            }
            , this))
        },
        tableInsert: function() {
            var e, i, n, s, a = t("#redactor_table_rows").val(), r = t("#redactor_table_columns").val(), o = t("<div></div>"), l = Math.floor(99999 * Math.random()), c = t('<table id="table' + l + '"><tbody></tbody></table>');
            for (e = 0; a > e; e++) {
                for (i = t("<tr></tr>"),
                n = 0; r > n; n++)
                    s = t("<td>" + this.opts.invisibleSpace + "</td>"),
                    0 === e && 0 === n && s.append('<span id="selection-marker-1">' + this.opts.invisibleSpace + "</span>"),
                    t(i).append(s);
                c.append(i)
            }
            o.append(c);
            var d = o.html();
            this.modalClose(),
            this.selectionRestore();
            var h = this.getBlock() || this.getCurrent();
            h && "BODY" != h.tagName ? t(h).after(d) : this.insertHtmlAdvanced(d, !1),
            this.selectionRestore();
            var u = this.$editor.find("#table" + l);
            this.buttonActiveObserver(),
            u.find("span#selection-marker-1").remove(),
            u.removeAttr("id"),
            this.sync()
        },
        tableDeleteTable: function() {
            var e = t(this.getParent()).closest("table");
            return this.isParentRedactor(e) ? 0 == e.size() ? !1 : (this.bufferSet(),
            e.remove(),
            void this.sync()) : !1
        },
        tableDeleteRow: function() {
            var e = t(this.getParent()).closest("table");
            if (!this.isParentRedactor(e))
                return !1;
            if (0 == e.size())
                return !1;
            this.bufferSet();
            var i = t(this.getParent()).closest("tr")
              , n = i.prev().length ? i.prev() : i.next();
            if (n.length) {
                var s = n.children("td").first();
                s.length && s.prepend('<span id="selection-marker-1">' + this.opts.invisibleSpace + "</span>")
            }
            i.remove(),
            this.selectionRestore(),
            this.sync()
        },
        tableDeleteColumn: function() {
            var e = t(this.getParent()).closest("table");
            if (!this.isParentRedactor(e))
                return !1;
            if (0 == e.size())
                return !1;
            this.bufferSet();
            var i = t(this.getParent()).closest("td")
              , n = i.get(0).cellIndex;
            e.find("tr").each(t.proxy(function(e, i) {
                var s = 0 > n - 1 ? n + 1 : n - 1;
                0 === e && t(i).find("td").eq(s).prepend('<span id="selection-marker-1">' + this.opts.invisibleSpace + "</span>"),
                t(i).find("td").eq(n).remove()
            }
            , this)),
            this.selectionRestore(),
            this.sync()
        },
        tableAddHead: function() {
            var e = t(this.getParent()).closest("table");
            if (!this.isParentRedactor(e))
                return !1;
            if (0 == e.size())
                return !1;
            if (this.bufferSet(),
            0 !== e.find("thead").size())
                this.tableDeleteHead();
            else {
                var i = e.find("tr").first().clone();
                i.find("td").html(this.opts.invisibleSpace),
                $thead = t("<thead></thead>"),
                $thead.append(i),
                e.prepend($thead),
                this.sync()
            }
        },
        tableDeleteHead: function() {
            var e = t(this.getParent()).closest("table");
            if (!this.isParentRedactor(e))
                return !1;
            var i = e.find("thead");
            return 0 == i.size() ? !1 : (this.bufferSet(),
            i.remove(),
            void this.sync())
        },
        tableAddRowAbove: function() {
            this.tableAddRow("before")
        },
        tableAddRowBelow: function() {
            this.tableAddRow("after")
        },
        tableAddColumnLeft: function() {
            this.tableAddColumn("before")
        },
        tableAddColumnRight: function() {
            this.tableAddColumn("after")
        },
        tableAddRow: function(e) {
            var i = t(this.getParent()).closest("table");
            if (!this.isParentRedactor(i))
                return !1;
            if (0 == i.size())
                return !1;
            this.bufferSet();
            var n = t(this.getParent()).closest("tr")
              , s = n.clone();
            s.find("td").html(this.opts.invisibleSpace),
            "after" === e ? n.after(s) : n.before(s),
            this.sync()
        },
        tableAddColumn: function(e) {
            var i = t(this.getParent()).closest("table");
            if (!this.isParentRedactor(i))
                return !1;
            if (0 == i.size())
                return !1;
            this.bufferSet();
            var n = 0
              , s = t(this.getParent()).closest("tr")
              , a = t(this.getParent()).closest("td");
            s.find("td").each(t.proxy(function(e, i) {
                t(i)[0] === a[0] && (n = e)
            }
            , this)),
            i.find("tr").each(t.proxy(function(i, s) {
                var a = t(s).find("td").eq(n)
                  , r = a.clone();
                r.html(this.opts.invisibleSpace),
                "after" === e ? a.after(r) : a.before(r)
            }
            , this)),
            this.sync()
        },
        videoShow: function() {
            this.selectionSave(),
            this.modalInit(this.opts.curLang.video, this.opts.modal_video, 600, t.proxy(function() {
                t("#redactor_insert_video_btn").click(t.proxy(this.videoInsert, this)),
                setTimeout(function() {
                    t("#redactor_insert_video_area").focus()
                }
                , 200)
            }
            , this))
        },
        videoInsert: function() {
            var e = t("#redactor_insert_video_area").val();
            e = this.cleanStripTags(e),
            this.selectionRestore();
            var i = this.getBlock() || this.getCurrent();
            i ? t(i).after(e) : this.insertHtmlAdvanced(e, !1),
            this.sync(),
            this.modalClose()
        },
        linkShow: function() {
            this.selectionSave();
            var e = t.proxy(function() {
                this.insert_link_node = !1;
                var e = this.getSelection()
                  , i = ""
                  , n = ""
                  , s = ""
                  , a = this.getParent()
                  , r = t(a).parent().get(0);
                r && "A" === r.tagName && (a = r),
                a && "A" === a.tagName ? (i = a.href,
                n = t(a).text(),
                s = a.target,
                this.insert_link_node = a) : n = e.toString(),
                t(".redactor_link_text").val(n);
                var o = self.location.href.replace(/\/$/i, "")
                  , l = i.replace(o, "");
                if (this.opts.linkProtocol === !1) {
                    var c = new RegExp("^(http|ftp|https)://" + self.location.host,"i");
                    l = l.replace(c, "")
                }
                var d = t("#redactor_tabs").find("a");
                this.opts.linkEmail === !1 && d.eq(1).remove(),
                this.opts.linkAnchor === !1 && d.eq(2).remove(),
                this.opts.linkEmail === !1 && this.opts.linkAnchor === !1 ? (t("#redactor_tabs").remove(),
                t("#redactor_link_url").val(l)) : 0 === i.search("mailto:") ? (this.modalSetTab.call(this, 2),
                t("#redactor_tab_selected").val(2),
                t("#redactor_link_mailto").val(i.replace("mailto:", ""))) : 0 === l.search(/^#/gi) ? (this.modalSetTab.call(this, 3),
                t("#redactor_tab_selected").val(3),
                t("#redactor_link_anchor").val(l.replace(/^#/gi, ""))) : t("#redactor_link_url").val(l),
                "_blank" === s && t("#redactor_link_blank").prop("checked", !0),
                t("#redactor_insert_link_btn").click(t.proxy(this.linkProcess, this)),
                setTimeout(function() {
                    t("#redactor_link_url").focus()
                }
                , 200)
            }
            , this);
            this.modalInit(this.opts.curLang.link, this.opts.modal_link, 460, e)
        },
        linkProcess: function() {
            var e = t("#redactor_tab_selected").val()
              , i = ""
              , n = ""
              , s = ""
              , a = "";
            if ("1" === e) {
                i = t("#redactor_link_url").val(),
                n = t("#redactor_link_url_text").val(),
                t("#redactor_link_blank").prop("checked") && (s = ' target="_blank"',
                a = "_blank");
                var r = "((xn--)?[a-z0-9]+(-[a-z0-9]+)*.)+[a-z]{2,}"
                  , o = new RegExp("^(http|ftp|https)://" + r,"i")
                  , l = new RegExp("^" + r,"i");
                -1 == i.search(o) && 0 == i.search(l) && this.opts.linkProtocol && (i = this.opts.linkProtocol + i)
            } else
                "2" === e ? (i = "mailto:" + t("#redactor_link_mailto").val(),
                n = t("#redactor_link_mailto_text").val()) : "3" === e && (i = "#" + t("#redactor_link_anchor").val(),
                n = t("#redactor_link_anchor_text").val());
            n = n.replace(/<|>/g, ""),
            this.linkInsert('<a href="' + i + '"' + s + ">" + n + "</a>", t.trim(n), i, a)
        },
        linkInsert: function(e, i, n, s) {
            if (this.selectionRestore(),
            "" !== i)
                if (this.insert_link_node)
                    this.bufferSet(),
                    t(this.insert_link_node).text(i).attr("href", n),
                    "" !== s ? t(this.insert_link_node).attr("target", s) : t(this.insert_link_node).removeAttr("target"),
                    this.sync();
                else {
                    var a = t(e).addClass("redactor-added-link");
                    this.exec("inserthtml", this.outerHtml(a), !1),
                    this.$editor.find("a.redactor-added-link").removeAttr("style").removeClass("redactor-added-link").each(function() {
                        "" == this.className && t(this).removeAttr("class")
                    }
                    ),
                    this.sync()
                }
            setTimeout(t.proxy(function() {
                this.opts.observeLinks && this.observeLinks()
            }
            , this), 5),
            this.modalClose()
        },
        fileShow: function() {
            this.selectionSave();
            var e = t.proxy(function() {
                var e = this.getSelection()
                  , i = "";
                i = this.oldIE() ? e.text : e.toString(),
                t("#redactor_filename").val(i),
                this.isMobile() || this.draguploadInit("#redactor_file", {
                    url: this.opts.fileUpload,
                    uploadFields: this.opts.uploadFields,
                    success: t.proxy(this.fileCallback, this),
                    error: t.proxy(function(t, e) {
                        this.callback("fileUploadError", e)
                    }
                    , this),
                    uploadParam: this.opts.fileUploadParam
                }),
                this.uploadInit("redactor_file", {
                    auto: !0,
                    url: this.opts.fileUpload,
                    success: t.proxy(this.fileCallback, this),
                    error: t.proxy(function(t, e) {
                        this.callback("fileUploadError", e)
                    }
                    , this)
                })
            }
            , this);
            this.modalInit(this.opts.curLang.file, this.opts.modal_file, 500, e)
        },
        fileCallback: function(e) {
            if (this.selectionRestore(),
            e !== !1) {
                var i = t("#redactor_filename").val();
                "" === i && (i = e.filename);
                var n = '<a href="' + e.filelink + '" id="filelink-marker">' + i + "</a>";
                this.browser("webkit") && this.window.chrome && (n += "&nbsp;"),
                this.execCommand("inserthtml", n, !1);
                var s = t(this.$editor.find("a#filelink-marker"));
                0 != s.size() ? s.removeAttr("id") : s = !1,
                this.sync(),
                this.callback("fileUpload", s, e)
            }
            this.modalClose()
        },
        imageShow: function() {
            this.selectionSave();
            var e = t.proxy(function() {
                if (this.opts.imageGetJson ? t.getJSON(this.opts.imageGetJson, t.proxy(function(e) {
                    var i = {}
                      , n = 0;
                    t.each(e, t.proxy(function(t, e) {
                        "undefined" != typeof e.folder && (n++,
                        i[e.folder] = n)
                    }
                    , this));
                    var s = !1;
                    if (t.each(e, t.proxy(function(e, n) {
                        var a = "";
                        "undefined" != typeof n.title && (a = n.title);
                        var r = 0;
                        t.isEmptyObject(i) || "undefined" == typeof n.folder || (r = i[n.folder],
                        s === !1 && (s = ".redactorfolder" + r));
                        var o = t('<img src="' + n.thumb + '" class="redactorfolder redactorfolder' + r + '" rel="' + n.image + '" title="' + a + '" />');
                        t("#redactor_image_box").append(o),
                        t(o).click(t.proxy(this.imageThumbClick, this))
                    }
                    , this)),
                    !t.isEmptyObject(i)) {
                        t(".redactorfolder").hide(),
                        t(s).show();
                        var a = function(e) {
                            t(".redactorfolder").hide(),
                            t(".redactorfolder" + t(e.target).val()).show()
                        }
                          , r = t('<select id="redactor_image_box_select">');
                        t.each(i, function(e, i) {
                            r.append(t('<option value="' + i + '">' + e + "</option>"))
                        }
                        ),
                        t("#redactor_image_box").before(r),
                        r.change(a)
                    }
                }
                , this)) : t("#redactor_tabs").find("a").eq(1).remove(),
                this.opts.imageUpload || this.opts.s3)
                    this.isMobile() || this.opts.s3 !== !1 || t("#redactor_file").length && this.draguploadInit("#redactor_file", {
                        url: this.opts.imageUpload,
                        uploadFields: this.opts.uploadFields,
                        success: t.proxy(this.imageCallback, this),
                        error: t.proxy(function(t, e) {
                            this.callback("imageUploadError", e)
                        }
                        , this),
                        uploadParam: this.opts.imageUploadParam
                    }),
                    this.opts.s3 === !1 ? this.uploadInit("redactor_file", {
                        auto: !0,
                        url: this.opts.imageUpload,
                        success: t.proxy(this.imageCallback, this),
                        error: t.proxy(function(t, e) {
                            this.callback("imageUploadError", e)
                        }
                        , this)
                    }) : t("#redactor_file").on("change.redactor", t.proxy(this.s3handleFileSelect, this));
                else if (t(".redactor_tab").hide(),
                this.opts.imageGetJson) {
                    var e = t("#redactor_tabs").find("a");
                    e.eq(0).remove(),
                    e.eq(1).addClass("redactor_tabs_act"),
                    t("#redactor_tab2").show()
                } else
                    t("#redactor_tabs").remove(),
                    t("#redactor_tab3").show();
                t("#redactor_upload_btn").click(t.proxy(this.imageCallbackLink, this)),
                this.opts.imageUpload || this.opts.imageGetJson || setTimeout(function() {
                    t("#redactor_file_link").focus()
                }
                , 200)
            }
            , this);
            this.modalInit(this.opts.curLang.image, this.opts.modal_image, 610, e)
        },
        imageEdit: function(e) {
            var i = e
              , n = i.parent().parent()
              , s = t.proxy(function() {
                t("#redactor_file_alt").val(i.attr("alt")),
                t("#redactor_image_edit_src").attr("href", i.attr("src")),
                t("#redactor_form_image_align").val(i.css("float")),
                "A" === t(n).get(0).tagName && (t("#redactor_file_link").val(t(n).attr("href")),
                "_blank" == t(n).attr("target") && t("#redactor_link_blank").prop("checked", !0)),
                t("#redactor_image_delete_btn").click(t.proxy(function() {
                    this.imageRemove(i)
                }
                , this)),
                t("#redactorSaveBtn").click(t.proxy(function() {
                    this.imageSave(i)
                }
                , this))
            }
            , this);
            this.modalInit(this.opts.curLang.edit, this.opts.modal_image_edit, 380, s)
        },
        imageRemove: function(e) {
            var i = t(e).parent();
            t(e).remove(),
            i.length && "P" === i[0].tagName && (this.$editor.focus(),
            this.selectionStart(i)),
            this.callback("imageDelete", e),
            this.modalClose(),
            this.sync()
        },
        imageSave: function(e) {
            var i = t(e)
              , n = i.parent();
            i.attr("alt", t("#redactor_file_alt").val());
            var s = t("#redactor_form_image_align").val();
            if ("left" === s)
                this.imageMargin = "0 " + this.opts.imageFloatMargin + " " + this.opts.imageFloatMargin + " 0",
                i.css({
                    "float": "left",
                    margin: this.imageMargin
                });
            else if ("right" === s)
                this.imageMargin = "0 0 " + this.opts.imageFloatMargin + " " + this.opts.imageFloatMargin,
                i.css({
                    "float": "right",
                    margin: this.imageMargin
                });
            else {
                this.imageMargin = "0px";
                var a = i.closest("#redactor-image-box");
                0 != a.size() && a.css({
                    "float": "",
                    margin: ""
                }),
                i.css({
                    "float": "",
                    margin: ""
                })
            }
            var r = t.trim(t("#redactor_file_link").val());
            if ("" !== r) {
                var o = !1;
                if (t("#redactor_link_blank").prop("checked") && (o = !0),
                "A" !== n.get(0).tagName) {
                    var l = t('<a href="' + r + '">' + this.outerHtml(e) + "</a>");
                    o && l.attr("target", "_blank"),
                    i.replaceWith(l)
                } else
                    n.attr("href", r),
                    o ? n.attr("target", "_blank") : n.removeAttr("target")
            } else
                "A" === n.get(0).tagName && n.replaceWith(this.outerHtml(e));
            this.modalClose(),
            this.observeImages(),
            this.sync()
        },
        imageResizeHide: function(e) {
            if (e !== !1 && 0 != t(e.target).parent().size() && "redactor-image-box" === t(e.target).parent()[0].id)
                return !1;
            var i = this.$editor.find("#redactor-image-box");
            return 0 == i.size() ? !1 : (this.$editor.find("#redactor-image-editter, #redactor-image-resizer").remove(),
            "0px" != this.imageMargin && (i.find("img").css("margin", this.imageMargin),
            i.css("margin", ""),
            this.imageMargin = "0px"),
            i.find("img").css("opacity", ""),
            i.replaceWith(function() {
                return t(this).contents()
            }
            ),
            t(document).off("click.redactor-image-resize-hide"),
            this.$editor.off("click.redactor-image-resize-hide"),
            this.$editor.off("keydown.redactor-image-delete"),
            void this.sync())
        },
        imageResize: function(e) {
            var i = t(e);
            i.on("mousedown", t.proxy(function() {
                this.imageResizeHide(!1)
            }
            , this)),
            i.on("dragstart", t.proxy(function() {
                this.$editor.on("drop.redactor-image-inside-drop", t.proxy(function() {
                    setTimeout(t.proxy(function() {
                        this.observeImages(),
                        this.$editor.off("drop.redactor-image-inside-drop"),
                        this.sync()
                    }
                    , this), 1)
                }
                , this))
            }
            , this)),
            i.on("click", t.proxy(function() {
                if (0 != this.$editor.find("#redactor-image-box").size())
                    return !1;
                var e, n, s = i.width() / i.height(), a = 20, r = this.imageResizeControls(i), o = !1;
                r.on("mousedown", function(t) {
                    o = !0,
                    t.preventDefault(),
                    s = i.width() / i.height(),
                    e = Math.round(t.pageX - i.eq(0).offset().left),
                    n = Math.round(t.pageY - i.eq(0).offset().top)
                }
                ),
                t(this.document.body).on("mousemove", t.proxy(function(t) {
                    if (o) {
                        var r = (Math.round(t.pageX - i.eq(0).offset().left) - e,
                        Math.round(t.pageY - i.eq(0).offset().top) - n)
                          , l = i.height()
                          , c = parseInt(l, 10) + r
                          , d = Math.round(c * s);
                        d > a && (i.width(d),
                        this.imageEditter.css(100 > d ? {
                            marginTop: "-7px",
                            marginLeft: "-13px",
                            fontSize: "9px",
                            padding: "3px 5px"
                        } : {
                            marginTop: "-11px",
                            marginLeft: "-18px",
                            fontSize: "11px",
                            padding: "7px 10px"
                        })),
                        e = Math.round(t.pageX - i.eq(0).offset().left),
                        n = Math.round(t.pageY - i.eq(0).offset().top),
                        this.sync()
                    }
                }
                , this)).on("mouseup", function() {
                    o = !1
                }
                ),
                this.$editor.on("keydown.redactor-image-delete", t.proxy(function(t) {
                    var e = t.which;
                    (this.keyCode.BACKSPACE == e || this.keyCode.DELETE == e) && (this.bufferSet(),
                    this.imageResizeHide(!1),
                    this.imageRemove(i))
                }
                , this)),
                t(document).on("click.redactor-image-resize-hide", t.proxy(this.imageResizeHide, this)),
                this.$editor.on("click.redactor-image-resize-hide", t.proxy(this.imageResizeHide, this))
            }
            , this))
        },
        imageResizeControls: function(e) {
            var i = t('<span id="redactor-image-box" data-redactor="verified">');
            i.css({
                position: "relative",
                display: "inline-block",
                lineHeight: 0,
                outline: "1px dashed rgba(0, 0, 0, .6)",
                "float": e.css("float")
            }),
            i.attr("contenteditable", !1),
            this.imageMargin = e[0].style.margin,
            "0px" != this.imageMargin && (i.css("margin", this.imageMargin),
            e.css("margin", "")),
            e.css("opacity", .5).after(i),
            this.imageEditter = t('<span id="redactor-image-editter" data-redactor="verified">' + this.opts.curLang.edit + "</span>"),
            this.imageEditter.css({
                position: "absolute",
                zIndex: 2,
                top: "50%",
                left: "50%",
                marginTop: "-11px",
                marginLeft: "-18px",
                lineHeight: 1,
                backgroundColor: "#000",
                color: "#fff",
                fontSize: "11px",
                padding: "7px 10px",
                cursor: "pointer"
            }),
            this.imageEditter.attr("contenteditable", !1),
            this.imageEditter.on("click", t.proxy(function() {
                this.imageEdit(e)
            }
            , this)),
            i.append(this.imageEditter);
            var n = t('<span id="redactor-image-resizer" data-redactor="verified"></span>');
            return n.css({
                position: "absolute",
                zIndex: 2,
                lineHeight: 1,
                cursor: "nw-resize",
                bottom: "-4px",
                right: "-5px",
                border: "1px solid #fff",
                backgroundColor: "#000",
                width: "8px",
                height: "8px"
            }),
            n.attr("contenteditable", !1),
            i.append(n),
            i.append(e),
            n
        },
        imageThumbClick: function(e) {
            var i = '<img id="image-marker" src="' + t(e.target).attr("rel") + '" alt="' + t(e.target).attr("title") + '" />'
              , n = this.getParent();
            this.opts.paragraphy && 0 == t(n).closest("li").size() && (i = "<p>" + i + "</p>"),
            this.imageInsert(i, !0)
        },
        imageCallbackLink: function() {
            var e = t("#redactor_file_link").val();
            if ("" !== e) {
                var i = '<img id="image-marker" src="' + e + '" />';
                this.opts.linebreaks === !1 && (i = "<p>" + i + "</p>"),
                this.imageInsert(i, !0)
            } else
                this.modalClose()
        },
        imageCallback: function(t) {
            this.imageInsert(t)
        },
        imageInsert: function(e, i) {
            if (this.selectionRestore(),
            e !== !1) {
                var n = "";
                if (i !== !0) {
                    n = '<img id="image-marker" src="' + e.filelink + '" />';
                    var s = this.getParent();
                    this.opts.paragraphy && 0 == t(s).closest("li").size() && (n = "<p>" + n + "</p>")
                } else
                    n = e;
                this.execCommand("inserthtml", n, !1);
                var a = t(this.$editor.find("img#image-marker"));
                a.length ? a.removeAttr("id") : a = !1,
                this.sync(),
                i !== !0 && this.callback("imageUpload", a, e)
            }
            this.modalClose(),
            this.observeImages()
        },
        modalTemplatesInit: function() {
            t.extend(this.opts, {
                modal_file: String() + '<section><div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div><form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data"><label>' + this.opts.curLang.filename + '</label><input type="text" id="redactor_filename" class="redactor_input" /><div style="margin-top: 7px;"><input type="file" id="redactor_file" name="' + this.opts.fileUploadParam + '" /></div></form></section>',
                modal_image_edit: String() + "<section><label>" + this.opts.curLang.title + '</label><input id="redactor_file_alt" class="redactor_input" /><label>' + this.opts.curLang.link + '</label><input id="redactor_file_link" class="redactor_input" /><label><input type="checkbox" id="redactor_link_blank"> ' + this.opts.curLang.link_new_tab + "</label><label>" + this.opts.curLang.image_position + '</label><select id="redactor_form_image_align"><option value="none">' + this.opts.curLang.none + '</option><option value="left">' + this.opts.curLang.left + '</option><option value="right">' + this.opts.curLang.right + '</option></select></section><footer><button id="redactor_image_delete_btn" class="redactor_modal_btn redactor_modal_delete_btn">' + this.opts.curLang._delete + '</button>&nbsp;&nbsp;&nbsp;<button class="redactor_modal_btn redactor_btn_modal_close">' + this.opts.curLang.cancel + '</button><input type="button" name="save" class="redactor_modal_btn redactor_modal_action_btn" id="redactorSaveBtn" value="' + this.opts.curLang.save + '" /></footer>',
                modal_image: String() + '<section><div id="redactor_tabs"><a href="#" class="redactor_tabs_act">' + this.opts.curLang.upload + '</a><a href="#">' + this.opts.curLang.choose + '</a><a href="#">' + this.opts.curLang.link + '</a></div><div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div><form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data"><div id="redactor_tab1" class="redactor_tab"><input type="file" id="redactor_file" name="' + this.opts.imageUploadParam + '" /></div><div id="redactor_tab2" class="redactor_tab" style="display: none;"><div id="redactor_image_box"></div></div></form><div id="redactor_tab3" class="redactor_tab" style="display: none;"><label>' + this.opts.curLang.image_web_link + '</label><input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  /></div></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">' + this.opts.curLang.cancel + '</button><input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_upload_btn" value="' + this.opts.curLang.insert + '" /></footer>',
                modal_link: String() + '<section><form id="redactorInsertLinkForm" method="post" action=""><div id="redactor_tabs"><a href="#" class="redactor_tabs_act">URL</a><a href="#">Email</a><a href="#">' + this.opts.curLang.anchor + '</a></div><input type="hidden" id="redactor_tab_selected" value="1" /><div class="redactor_tab" id="redactor_tab1"><label>URL</label><input type="text" id="redactor_link_url" class="redactor_input"  /><label>' + this.opts.curLang.text + '</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_url_text" /><label><input type="checkbox" id="redactor_link_blank"> ' + this.opts.curLang.link_new_tab + '</label></div><div class="redactor_tab" id="redactor_tab2" style="display: none;"><label>Email</label><input type="text" id="redactor_link_mailto" class="redactor_input" /><label>' + this.opts.curLang.text + '</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_mailto_text" /></div><div class="redactor_tab" id="redactor_tab3" style="display: none;"><label>' + this.opts.curLang.anchor + '</label><input type="text" class="redactor_input" id="redactor_link_anchor"  /><label>' + this.opts.curLang.text + '</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_anchor_text" /></div></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">' + this.opts.curLang.cancel + '</button><input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_link_btn" value="' + this.opts.curLang.insert + '" /></footer>',
                modal_table: String() + "<section><label>" + this.opts.curLang.rows + '</label><input type="text" size="5" value="2" id="redactor_table_rows" /><label>' + this.opts.curLang.columns + '</label><input type="text" size="5" value="3" id="redactor_table_columns" /></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">' + this.opts.curLang.cancel + '</button><input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_table_btn" value="' + this.opts.curLang.insert + '" /></footer>',
                modal_video: String() + '<section><form id="redactorInsertVideoForm"><label>' + this.opts.curLang.video_html_code + '</label><textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">' + this.opts.curLang.cancel + '</button><input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_video_btn" value="' + this.opts.curLang.insert + '" /></footer>'
            })
        },
        modalInit: function(e, i, n, s) {
            var a = t("#redactor_modal_overlay");
            a.length || (this.$overlay = a = t('<div id="redactor_modal_overlay" style="display: none;"></div>'),
            t("body").prepend(this.$overlay)),
            this.opts.modalOverlay && a.show().on("click", t.proxy(this.modalClose, this));
            var r = t("#redactor_modal");
            r.length || (this.$modal = r = t('<div id="redactor_modal" style="display: none;"><div id="redactor_modal_close">&times;</div><header id="redactor_modal_header"></header><div id="redactor_modal_inner"></div></div>'),
            t("body").append(this.$modal)),
            t("#redactor_modal_close").on("click", t.proxy(this.modalClose, this)),
            this.hdlModalClose = t.proxy(function(t) {
                return t.keyCode === this.keyCode.ESC ? (this.modalClose(),
                !1) : void 0
            }
            , this),
            t(document).keyup(this.hdlModalClose),
            this.$editor.keyup(this.hdlModalClose),
            this.modalcontent = !1,
            0 == i.indexOf("#") ? (this.modalcontent = t(i),
            t("#redactor_modal_inner").empty().append(this.modalcontent.html()),
            this.modalcontent.html("")) : t("#redactor_modal_inner").empty().append(i),
            r.find("#redactor_modal_header").html(e),
            "undefined" != typeof t.fn.draggable && (r.draggable({
                handle: "#redactor_modal_header"
            }),
            r.find("#redactor_modal_header").css("cursor", "move"));
            var o = t("#redactor_tabs");
            if (o.length) {
                var l = this;
                o.find("a").each(function(e, i) {
                    e++,
                    t(i).on("click", function(i) {
                        if (i.preventDefault(),
                        o.find("a").removeClass("redactor_tabs_act"),
                        t(this).addClass("redactor_tabs_act"),
                        t(".redactor_tab").hide(),
                        t("#redactor_tab" + e).show(),
                        t("#redactor_tab_selected").val(e),
                        l.isMobile() === !1) {
                            var n = r.outerHeight();
                            r.css("margin-top", "-" + (n + 10) / 2 + "px")
                        }
                    }
                    )
                }
                )
            }
            r.find(".redactor_btn_modal_close").on("click", t.proxy(this.modalClose, this)),
            this.saveModalScroll = this.opts.autoresize === !0 ? this.document.body.scrollTop : this.$editor.scrollTop(),
            this.isMobile() === !1 ? (r.css({
                position: "fixed",
                top: "-2000px",
                left: "50%",
                width: n + "px",
                marginLeft: "-" + (n + 60) / 2 + "px"
            }).show(),
            this.modalSaveBodyOveflow = t(document.body).css("overflow"),
            t(document.body).css("overflow", "hidden")) : r.css({
                position: "fixed",
                width: "100%",
                height: "100%",
                top: "0",
                left: "0",
                margin: "0",
                minHeight: "300px"
            }).show(),
            "function" == typeof s && s(),
            this.isMobile() === !1 && setTimeout(function() {
                var t = r.outerHeight();
                r.css({
                    top: "50%",
                    height: "auto",
                    minHeight: "auto",
                    marginTop: "-" + (t + 10) / 2 + "px"
                })
            }
            , 10)
        },
        modalClose: function() {
            return t("#redactor_modal_close").off("click", this.modalClose),
            t("#redactor_modal").fadeOut("fast", t.proxy(function() {
                var e = t("#redactor_modal_inner");
                this.modalcontent !== !1 && (this.modalcontent.html(e.html()),
                this.modalcontent = !1),
                e.html(""),
                this.opts.modalOverlay && t("#redactor_modal_overlay").hide().off("click", this.modalClose),
                t(document).unbind("keyup", this.hdlModalClose),
                this.$editor.unbind("keyup", this.hdlModalClose),
                this.selectionRestore(),
                this.opts.autoresize && this.saveModalScroll ? t(this.document.body).scrollTop(this.saveModalScroll) : this.opts.autoresize === !1 && this.saveModalScroll && this.$editor.scrollTop(this.saveModalScroll)
            }
            , this)),
            this.isMobile() === !1 && t(document.body).css("overflow", this.modalSaveBodyOveflow ? this.modalSaveBodyOveflow : "visible"),
            !1
        },
        modalSetTab: function(e) {
            t(".redactor_tab").hide(),
            t("#redactor_tabs").find("a").removeClass("redactor_tabs_act").eq(e - 1).addClass("redactor_tabs_act"),
            t("#redactor_tab" + e).show()
        },
        s3handleFileSelect: function(t) {
            for (var e, i = t.target.files, n = 0; e = i[n]; n++)
                this.s3uploadFile(e)
        },
        s3uploadFile: function(e) {
            this.s3executeOnSignedUrl(e, t.proxy(function(t) {
                this.s3uploadToS3(e, t)
            }
            , this))
        },
        s3executeOnSignedUrl: function(e, i) {
            var n = new XMLHttpRequest
              , s = "?";
            "-1" != this.opts.s3.search(/\?/) && (s = "&"),
            n.open("GET", this.opts.s3 + s + "name=" + e.name + "&type=" + e.type, !0),
            n.overrideMimeType && n.overrideMimeType("text/plain; charset=x-user-defined"),
            n.onreadystatechange = function() {
                4 == this.readyState && 200 == this.status ? (t("#redactor-progress").fadeIn(),
                i(decodeURIComponent(this.responseText))) : 4 == this.readyState && 200 != this.status
            }
            ,
            n.send()
        },
        s3createCORSRequest: function(t, e) {
            var i = new XMLHttpRequest;
            return "withCredentials" in i ? i.open(t, e, !0) : "undefined" != typeof XDomainRequest ? (i = new XDomainRequest,
            i.open(t, e)) : i = null ,
            i
        },
        s3uploadToS3: function(e, i) {
            var n = this.s3createCORSRequest("PUT", i);
            n && (n.onload = t.proxy(function() {
                if (200 == n.status) {
                    t("#redactor-progress, #redactor-progress-drag").hide();
                    var e = i.split("?");
                    if (!e[0])
                        return !1;
                    this.selectionRestore();
                    var s = "";
                    s = '<img id="image-marker" src="' + e[0] + '" />',
                    this.opts.paragraphy && (s = "<p>" + s + "</p>"),
                    this.execCommand("inserthtml", s, !1);
                    var a = t(this.$editor.find("img#image-marker"));
                    a.length ? a.removeAttr("id") : a = !1,
                    this.sync(),
                    this.callback("imageUpload", a, !1),
                    this.modalClose(),
                    this.observeImages()
                }
            }
            , this),
            n.onerror = function() {}
            ,
            n.upload.onprogress = function() {}
            ,
            n.setRequestHeader("Content-Type", e.type),
            n.setRequestHeader("x-amz-acl", "public-read"),
            n.send(e))
        },
        uploadInit: function(e, i) {
            this.uploadOptions = {
                url: !1,
                success: !1,
                error: !1,
                start: !1,
                trigger: !1,
                auto: !1,
                input: !1
            },
            t.extend(this.uploadOptions, i);
            var n = t("#" + e);
            n.length && "INPUT" === n[0].tagName ? (this.uploadOptions.input = n,
            this.el = t(n[0].form)) : this.el = n,
            this.element_action = this.el.attr("action"),
            this.uploadOptions.auto ? t(this.uploadOptions.input).change(t.proxy(function(t) {
                this.el.submit(function() {
                    return !1
                }
                ),
                this.uploadSubmit(t)
            }
            , this)) : this.uploadOptions.trigger && t("#" + this.uploadOptions.trigger).click(t.proxy(this.uploadSubmit, this))
        },
        uploadSubmit: function() {
            t("#redactor-progress").fadeIn(),
            this.uploadForm(this.element, this.uploadFrame())
        },
        uploadFrame: function() {
            this.id = "f" + Math.floor(99999 * Math.random());
            var e = this.document.createElement("div")
              , i = '<iframe style="display:none" id="' + this.id + '" name="' + this.id + '"></iframe>';
            return e.innerHTML = i,
            t(e).appendTo("body"),
            this.uploadOptions.start && this.uploadOptions.start(),
            t("#" + this.id).load(t.proxy(this.uploadLoaded, this)),
            this.id
        },
        uploadForm: function(e, i) {
            if (this.uploadOptions.input) {
                var n = "redactorUploadForm" + this.id
                  , s = "redactorUploadFile" + this.id;
                this.form = t('<form  action="' + this.uploadOptions.url + '" method="POST" target="' + i + '" name="' + n + '" id="' + n + '" enctype="multipart/form-data" />'),
                this.opts.uploadFields !== !1 && "object" == typeof this.opts.uploadFields && t.each(this.opts.uploadFields, t.proxy(function(e, i) {
                    null  != i && 0 === i.toString().indexOf("#") && (i = t(i).val());
                    var n = t("<input/>", {
                        type: "hidden",
                        name: e,
                        value: i
                    });
                    t(this.form).append(n)
                }
                , this));
                var a = this.uploadOptions.input
                  , r = t(a).clone();
                t(a).attr("id", s).before(r).appendTo(this.form),
                t(this.form).css("position", "absolute").css("top", "-2000px").css("left", "-2000px").appendTo("body"),
                this.form.submit()
            } else
                e.attr("target", i).attr("method", "POST").attr("enctype", "multipart/form-data").attr("action", this.uploadOptions.url),
                this.element.submit()
        },
        uploadLoaded: function() {
            var e, i = t("#" + this.id)[0];
            if (e = i.contentDocument ? i.contentDocument : i.contentWindow ? i.contentWindow.document : window.frames[this.id].document,
            this.uploadOptions.success)
                if (t("#redactor-progress").hide(),
                "undefined" != typeof e) {
                    var n = e.body.innerHTML
                      , s = n.match(/\{(.|\n)*\}/)[0];
                    s = s.replace(/^\[/, ""),
                    s = s.replace(/\]$/, "");
                    var a = t.parseJSON(s);
                    "undefined" == typeof a.error ? this.uploadOptions.success(a) : (this.uploadOptions.error(this, a),
                    this.modalClose())
                } else
                    this.modalClose(),
                    alert("Upload failed!");
            this.el.attr("action", this.element_action),
            this.el.attr("target", "")
        },
        draguploadInit: function(e, i) {
            return this.draguploadOptions = t.extend({
                url: !1,
                success: !1,
                error: !1,
                preview: !1,
                uploadFields: !1,
                text: this.opts.curLang.drop_file_here,
                atext: this.opts.curLang.or_choose,
                uploadParam: !1
            }, i),
            void 0 === window.FormData ? !1 : (this.droparea = t('<div class="redactor_droparea"></div>'),
            this.dropareabox = t('<div class="redactor_dropareabox">' + this.draguploadOptions.text + "</div>"),
            this.dropalternative = t('<div class="redactor_dropalternative">' + this.draguploadOptions.atext + "</div>"),
            this.droparea.append(this.dropareabox),
            t(e).before(this.droparea),
            t(e).before(this.dropalternative),
            this.dropareabox.on("dragover", t.proxy(function() {
                return this.draguploadOndrag()
            }
            , this)),
            this.dropareabox.on("dragleave", t.proxy(function() {
                return this.draguploadOndragleave()
            }
            , this)),
            void (this.dropareabox.get(0).ondrop = t.proxy(function(t) {
                t.preventDefault(),
                this.dropareabox.removeClass("hover").addClass("drop"),
                this.dragUploadAjax(this.draguploadOptions.url, t.dataTransfer.files[0], !1, !1, !1, this.draguploadOptions.uploadParam)
            }
            , this)))
        },
        dragUploadAjax: function(e, i, n, s, a, r) {
            if (!n) {
                var o = t.ajaxSettings.xhr();
                o.upload && o.upload.addEventListener("progress", t.proxy(this.uploadProgress, this), !1),
                t.ajaxSetup({
                    xhr: function() {
                        return o
                    }
                })
            }
            var l = new FormData;
            r !== !1 ? l.append(r, i) : l.append("file", i),
            this.opts.uploadFields !== !1 && "object" == typeof this.opts.uploadFields && t.each(this.opts.uploadFields, t.proxy(function(e, i) {
                null  != i && 0 === i.toString().indexOf("#") && (i = t(i).val()),
                l.append(e, i)
            }
            , this)),
            t.ajax({
                url: e,
                dataType: "html",
                data: l,
                cache: !1,
                contentType: !1,
                processData: !1,
                type: "POST",
                success: t.proxy(function(e) {
                    e = e.replace(/^\[/, ""),
                    e = e.replace(/\]$/, "");
                    var i = "string" == typeof e ? t.parseJSON(e) : e;
                    if (n) {
                        s.fadeOut("slow", function() {
                            t(this).remove()
                        }
                        );
                        var r = t("<img>");
                        r.attr("src", i.filelink).attr("id", "drag-image-marker"),
                        this.insertNodeToCaretPositionFromPoint(a, r[0]);
                        var o = t(this.$editor.find("img#drag-image-marker"));
                        o.length ? o.removeAttr("id") : o = !1,
                        this.sync(),
                        this.observeImages(),
                        o && this.callback("imageUpload", o, i),
                        "undefined" != typeof i.error && this.callback("imageUploadError", i)
                    } else
                        "undefined" == typeof i.error ? this.draguploadOptions.success(i) : (this.draguploadOptions.error(this, i),
                        this.draguploadOptions.success(!1))
                }
                , this)
            })
        },
        draguploadOndrag: function() {
            return this.dropareabox.addClass("hover"),
            !1
        },
        draguploadOndragleave: function() {
            return this.dropareabox.removeClass("hover"),
            !1
        },
        uploadProgress: function(t, e) {
            var i = t.loaded ? parseInt(t.loaded / t.total * 100, 10) : t;
            this.dropareabox.text("Loading " + i + "% " + (e || ""))
        },
        isMobile: function() {
            return /(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)
        },
        normalize: function(t) {
            return "undefined" == typeof t ? 0 : parseInt(t.replace("px", ""), 10)
        },
        outerHtml: function(e) {
            return t("<div>").append(t(e).eq(0).clone()).html()
        },
        isString: function(t) {
            return "[object String]" == Object.prototype.toString.call(t)
        },
        isEmpty: function(t) {
            return t = t.replace(/&#x200b;|<br>|<br\/>|&nbsp;/gi, ""),
            t = t.replace(/\s/g, ""),
            t = t.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i, ""),
            "" == t
        },
        isIe11: function() {
            return !!navigator.userAgent.match(/Trident\/7\./)
        },
        browser: function(t) {
            var e = navigator.userAgent.toLowerCase()
              , i = /(opr)[\/]([\w.]+)/.exec(e) || /(chrome)[ \/]([\w.]+)/.exec(e) || /(webkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e) || /(webkit)[ \/]([\w.]+)/.exec(e) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e) || /(msie) ([\w.]+)/.exec(e) || e.indexOf("trident") >= 0 && /(rv)(?::| )([\w.]+)/.exec(e) || e.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e) || [];
            return "version" == t ? i[2] : "webkit" == t ? "chrome" == i[1] || "webkit" == i[1] : "rv" == i[1] ? "msie" == t : "opr" == i[1] ? "webkit" == t : t == i[1]
        },
        oldIE: function() {
            return this.browser("msie") && parseInt(this.browser("version"), 10) < 9 ? !0 : !1
        },
        getFragmentHtml: function(t) {
            var e = t.cloneNode(!0)
              , i = this.document.createElement("div");
            return i.appendChild(e),
            i.innerHTML
        },
        extractContent: function() {
            for (var t, e = this.$editor[0], i = this.document.createDocumentFragment(); t = e.firstChild; )
                i.appendChild(t);
            return i
        },
        isParentRedactor: function(e) {
            return e ? this.opts.iframe ? e : 0 == t(e).parents("div.redactor_editor").length || t(e).hasClass("redactor_editor") ? !1 : e : !1
        },
        currentOrParentIs: function(t) {
            var e = this.getParent()
              , i = this.getCurrent();
            return e && e.tagName === t ? e : i && i.tagName === t ? i : !1
        },
        isEndOfElement: function() {
            var e = this.getBlock()
              , i = this.getCaretOffset(e)
              , n = t.trim(t(e).text()).replace(/\n\r\n/g, "")
              , s = n.length;
            return i == s ? !0 : !1
        },
        isFocused: function() {
            var e, i = this.getSelection();
            return i && i.rangeCount && i.rangeCount > 0 && (e = i.getRangeAt(0).startContainer),
            e ? this.opts.iframe ? this.getCaretOffsetRange().equals() ? !this.$editor.is(e) : !0 : 0 != t(e).closest("div.redactor_editor").length : !1
        },
        removeEmptyAttr: function(e, i) {
            "" == t(e).attr(i) && t(e).removeAttr(i)
        },
        removeFromArrayByValue: function(t, e) {
            for (var i = null ; -1 !== (i = t.indexOf(e)); )
                t.splice(i, 1);
            return t
        }
    },
    e.prototype.init.prototype = e.prototype,
    t.Redactor.fn.formatLinkify = function(e, i, n, s, a) {
        for (var r = /(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g, o = /(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g, l = /(https?:\/\/.*\.(?:png|jpg|jpeg|gif))/gi, c = /https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi, d = /https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/, h = (this.$editor ? this.$editor.get(0) : this).childNodes, u = h.length; u--; ) {
            var p = h[u];
            if (3 === p.nodeType) {
                var f = p.nodeValue;
                if (s && f) {
                    var m = '<iframe width="500" height="281" src="'
                      , g = '" frameborder="0" allowfullscreen></iframe>';
                    f.match(c) ? (f = f.replace(c, m + "//www.youtube.com/embed/$1" + g),
                    t(p).after(f).remove()) : f.match(d) && (f = f.replace(d, m + "//player.vimeo.com/video/$2" + g),
                    t(p).after(f).remove())
                }
                if (n && f && f.match(l) && (f = f.replace(l, '<img src="$1">'),
                t(p).after(f).remove()),
                i && f && (f.match(r) || f.match(o))) {
                    var v = f.match(r) || f.match(o);
                    v = v[0],
                    v.length > a && (v = v.substring(0, a) + "..."),
                    f = f.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(r, '$1<a href="' + e + '$2">' + t.trim(v) + "</a>$3").replace(o, '$1<a href="$2">' + t.trim(v) + "</a>$5"),
                    t(p).after(f).remove()
                }
            } else
                1 !== p.nodeType || /^(a|button|textarea)$/i.test(p.tagName) || t.Redactor.fn.formatLinkify.call(p, e, i, n, s, a)
        }
    }
}
(jQuery),
function(t) {
    t.Redactor.opts.langs.ru = {
        html: "Код",
        video: "Видео",
        image: "Изображение",
        table: "Таблица",
        link: "Ссылка",
        link_insert: "Вставить ссылку ...",
        link_edit: "Изменить ссылку",
        unlink: "Удалить ссылку",
        formatting: "Форматирование",
        paragraph: "Обычный текст",
        quote: "Цитата",
        code: "Код",
        header1: "Заголовок 1",
        header2: "Заголовок 2",
        header3: "Заголовок 3",
        header4: "Заголовок 4",
        header5: "Заголовок 5",
        bold: "Полужирный",
        italic: "Наклонный",
        fontcolor: "Цвет текста",
        backcolor: "Заливка текста",
        unorderedlist: "Обычный список",
        orderedlist: "Нумерованный список",
        outdent: "Уменьшить отступ",
        indent: "Увеличить отступ",
        cancel: "Отменить",
        insert: "Вставить",
        save: "Сохранить",
        _delete: "Удалить",
        insert_table: "Вставить таблицу",
        insert_row_above: "Добавить строку сверху",
        insert_row_below: "Добавить строку снизу",
        insert_column_left: "Добавить столбец слева",
        insert_column_right: "Добавить столбец справа",
        delete_column: "Удалить столбец",
        delete_row: "Удалить строку",
        delete_table: "Удалить таблицу",
        rows: "Строки",
        columns: "Столбцы",
        add_head: "Добавить заголовок",
        delete_head: "Удалить заголовок",
        title: "Подсказка",
        image_position: "Обтекание текстом",
        none: "Нет",
        left: "Cлева",
        right: "Cправа",
        image_web_link: "Cсылка на изображение",
        text: "Текст",
        mailto: "Эл. почта",
        web: "URL",
        video_html_code: "Код видео ролика",
        file: "Файл",
        upload: "Загрузить",
        download: "Скачать",
        choose: "Выбрать",
        or_choose: "Или выберите",
        drop_file_here: "Перетащите файл сюда",
        align_left: "По левому краю",
        align_center: "По центру",
        align_right: "По правому краю",
        align_justify: "Выровнять текст по ширине",
        horizontalrule: "Горизонтальная линейка",
        fullscreen: "Во весь экран",
        deleted: "Зачеркнутый",
        anchor: "Якорь",
        link_new_tab: "Открывать в новой вкладке",
        underline: "Подчеркнутый",
        alignment: "Выравнивание",
        filename: "Название (необязательно)",
        edit: "Ред."
    }
}
(jQuery);
var qq = function(t) {
    "use strict";
    return {
        hide: function() {
            return t.style.display = "none",
            this
        },
        attach: function(e, i) {
            return t.addEventListener ? t.addEventListener(e, i, !1) : t.attachEvent && t.attachEvent("on" + e, i),
            function() {
                qq(t).detach(e, i)
            }
        },
        detach: function(e, i) {
            return t.removeEventListener ? t.removeEventListener(e, i, !1) : t.attachEvent && t.detachEvent("on" + e, i),
            this
        },
        contains: function(e) {
            return t === e ? !0 : t.contains ? t.contains(e) : !!(8 & e.compareDocumentPosition(t))
        },
        insertBefore: function(e) {
            return e.parentNode.insertBefore(t, e),
            this
        },
        remove: function() {
            return t.parentNode.removeChild(t),
            this
        },
        css: function(e) {
            return null  !== e.opacity && "string" != typeof t.style.opacity && "undefined" != typeof t.filters && (e.filter = "alpha(opacity=" + Math.round(100 * e.opacity) + ")"),
            qq.extend(t.style, e),
            this
        },
        hasClass: function(e) {
            var i = new RegExp("(^| )" + e + "( |$)");
            return i.test(t.className)
        },
        addClass: function(e) {
            return qq(t).hasClass(e) || (t.className += " " + e),
            this
        },
        removeClass: function(e) {
            var i = new RegExp("(^| )" + e + "( |$)");
            return t.className = t.className.replace(i, " ").replace(/^\s+|\s+$/g, ""),
            this
        },
        getByClass: function(e) {
            var i, n = [];
            return t.querySelectorAll ? t.querySelectorAll("." + e) : (i = t.getElementsByTagName("*"),
            qq.each(i, function(t, i) {
                qq(i).hasClass(e) && n.push(i)
            }
            ),
            n)
        },
        children: function() {
            for (var e = [], i = t.firstChild; i; )
                1 === i.nodeType && e.push(i),
                i = i.nextSibling;
            return e
        },
        setText: function(e) {
            return t.innerText = e,
            t.textContent = e,
            this
        },
        clearText: function() {
            return qq(t).setText("")
        }
    }
}
;
qq.log = function(t, e) {
    "use strict";
    window.console && (e && "info" !== e ? window.console[e] ? window.console[e](t) : window.console.log("<" + e + "> " + t) : window.console.log(t))
}
,
qq.isObject = function(t) {
    "use strict";
    return null  !== t && t && "object" == typeof t && t.constructor === Object
}
,
qq.isFunction = function(t) {
    "use strict";
    return "function" == typeof t
}
,
qq.isString = function(t) {
    "use strict";
    return "[object String]" === Object.prototype.toString.call(t)
}
,
qq.trimStr = function(t) {
    return String.prototype.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "")
}
,
qq.isFileOrInput = function(t) {
    "use strict";
    if (qq.isBlob(t) && window.File && t instanceof File)
        return !0;
    if (window.HTMLInputElement) {
        if (t instanceof HTMLInputElement && t.type && "file" === t.type.toLowerCase())
            return !0
    } else if (t.tagName && "input" === t.tagName.toLowerCase() && t.type && "file" === t.type.toLowerCase())
        return !0;
    return !1
}
,
qq.isBlob = function(t) {
    "use strict";
    return window.Blob && t instanceof Blob
}
,
qq.isXhrUploadSupported = function() {
    "use strict";
    var t = document.createElement("input");
    return t.type = "file",
    void 0 !== t.multiple && "undefined" != typeof File && "undefined" != typeof FormData && "undefined" != typeof (new XMLHttpRequest).upload
}
,
qq.isFolderDropSupported = function(t) {
    "use strict";
    return t.items && t.items[0].webkitGetAsEntry
}
,
qq.isFileChunkingSupported = function() {
    "use strict";
    return !qq.android() && qq.isXhrUploadSupported() && (File.prototype.slice || File.prototype.webkitSlice || File.prototype.mozSlice)
}
,
qq.extend = function(t, e, i) {
    "use strict";
    qq.each(e, function(e, n) {
        i && qq.isObject(n) ? (void 0 === t[e] && (t[e] = {}),
        qq.extend(t[e], n, !0)) : t[e] = n
    }
    )
}
,
qq.indexOf = function(t, e, i) {
    "use strict";
    if (t.indexOf)
        return t.indexOf(e, i);
    i = i || 0;
    var n = t.length;
    for (0 > i && (i += n); n > i; i += 1)
        if (t.hasOwnProperty(i) && t[i] === e)
            return i;
    return -1
}
,
qq.getUniqueId = function() {
    "use strict";
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t) {
        var e = 16 * Math.random() | 0
          , i = "x" == t ? e : 3 & e | 8;
        return i.toString(16)
    }
    )
}
,
qq.ie = function() {
    "use strict";
    return -1 !== navigator.userAgent.indexOf("MSIE")
}
,
qq.ie10 = function() {
    "use strict";
    return -1 !== navigator.userAgent.indexOf("MSIE 10")
}
,
qq.safari = function() {
    "use strict";
    return void 0 !== navigator.vendor && -1 !== navigator.vendor.indexOf("Apple")
}
,
qq.chrome = function() {
    "use strict";
    return void 0 !== navigator.vendor && -1 !== navigator.vendor.indexOf("Google")
}
,
qq.firefox = function() {
    "use strict";
    return -1 !== navigator.userAgent.indexOf("Mozilla") && void 0 !== navigator.vendor && "" === navigator.vendor
}
,
qq.windows = function() {
    "use strict";
    return "Win32" === navigator.platform
}
,
qq.android = function() {
    "use strict";
    return -1 !== navigator.userAgent.toLowerCase().indexOf("android")
}
,
qq.preventDefault = function(t) {
    "use strict";
    t.preventDefault ? t.preventDefault() : t.returnValue = !1
}
,
qq.toElement = function() {
    "use strict";
    var t = document.createElement("div");
    return function(e) {
        t.innerHTML = e;
        var i = t.firstChild;
        return t.removeChild(i),
        i
    }
}
(),
qq.each = function(t, e) {
    "use strict";
    var i, n;
    if (t)
        for (i in t)
            if (Object.prototype.hasOwnProperty.call(t, i) && (n = e(i, t[i]),
            n === !1))
                break
}
,
qq.obj2url = function(t, e, i) {
    "use strict";
    var n, s, a = [], r = "&", o = function(t, i) {
        var n = e ? /\[\]$/.test(e) ? e : e + "[" + i + "]" : i;
        "undefined" !== n && "undefined" !== i && a.push("object" == typeof t ? qq.obj2url(t, n, !0) : "[object Function]" === Object.prototype.toString.call(t) ? encodeURIComponent(n) + "=" + encodeURIComponent(t()) : encodeURIComponent(n) + "=" + encodeURIComponent(t))
    }
    ;
    if (!i && e)
        r = /\?/.test(e) ? /\?$/.test(e) ? "" : "&" : "?",
        a.push(e),
        a.push(qq.obj2url(t));
    else if ("[object Array]" === Object.prototype.toString.call(t) && "undefined" != typeof t)
        for (n = -1,
        s = t.length; s > n; n += 1)
            o(t[n], n);
    else if ("undefined" != typeof t && null  !== t && "object" == typeof t)
        for (n in t)
            t.hasOwnProperty(n) && o(t[n], n);
    else
        a.push(encodeURIComponent(e) + "=" + encodeURIComponent(t));
    return e ? a.join(r) : a.join(r).replace(/^&/, "").replace(/%20/g, "+")
}
,
qq.obj2FormData = function(t, e, i) {
    "use strict";
    return e || (e = new FormData),
    qq.each(t, function(t, n) {
        t = i ? i + "[" + t + "]" : t,
        qq.isObject(n) ? qq.obj2FormData(n, e, t) : qq.isFunction(n) ? e.append(t, n()) : e.append(t, n)
    }
    ),
    e
}
,
qq.obj2Inputs = function(t, e) {
    "use strict";
    var i;
    return e || (e = document.createElement("form")),
    qq.obj2FormData(t, {
        append: function(t, n) {
            i = document.createElement("input"),
            i.setAttribute("name", t),
            i.setAttribute("value", n),
            e.appendChild(i)
        }
    }),
    e
}
,
qq.setCookie = function(t, e, i) {
    var n = new Date
      , s = "";
    i && (n.setTime(n.getTime() + 24 * i * 60 * 60 * 1e3),
    s = "; expires=" + n.toGMTString()),
    document.cookie = t + "=" + e + s + "; path=/"
}
,
qq.getCookie = function(t) {
    for (var e, i = t + "=", n = document.cookie.split(";"), s = 0; s < n.length; s++) {
        for (e = n[s]; " " == e.charAt(0); )
            e = e.substring(1, e.length);
        if (0 === e.indexOf(i))
            return e.substring(i.length, e.length)
    }
}
,
qq.getCookieNames = function(t) {
    var e = document.cookie.split(";")
      , i = [];
    return qq.each(e, function(e, n) {
        n = qq.trimStr(n);
        var s = n.indexOf("=");
        n.match(t) && i.push(n.substr(0, s))
    }
    ),
    i
}
,
qq.deleteCookie = function(t) {
    qq.setCookie(t, "", -1)
}
,
qq.areCookiesEnabled = function() {
    var t = 1e5 * Math.random()
      , e = "qqCookieTest:" + t;
    return qq.setCookie(e, 1),
    qq.getCookie(e) ? (qq.deleteCookie(e),
    !0) : !1
}
,
qq.parseJson = function(json) {
    return window.JSON && qq.isFunction(JSON.parse) ? JSON.parse(json) : eval("(" + json + ")")
}
,
qq.DisposeSupport = function() {
    "use strict";
    var t = [];
    return {
        dispose: function() {
            var e;
            do
                e = t.shift(),
                e && e();
            while (e)
        },
        attach: function() {
            var t = arguments;
            this.addDisposer(qq(t[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)))
        },
        addDisposer: function(e) {
            t.push(e)
        }
    }
}
,
qq.Promise = function() {
    "use strict";
    var t, e, i, n, s = 0;
    return {
        then: function(a, r) {
            0 === s ? (i = a,
            n = r) : -1 === s && r ? r(e) : a && a(t)
        },
        success: function(e) {
            return s = 1,
            t = e,
            i && i(e),
            this
        },
        failure: function(t) {
            return s = -1,
            e = t,
            n && n(t),
            this
        }
    }
}
,
qq.UploadButton = function(t) {
    "use strict";
    function e() {
        var t = document.createElement("input");
        return s.multiple && t.setAttribute("multiple", "multiple"),
        s.acceptFiles && t.setAttribute("accept", s.acceptFiles),
        t.setAttribute("type", "file"),
        t.setAttribute("name", s.name),
        qq(t).css({
            position: "absolute",
            right: 0,
            top: 0,
            fontFamily: "Arial",
            fontSize: "118px",
            margin: 0,
            padding: 0,
            cursor: "pointer",
            opacity: 0
        }),
        s.element.appendChild(t),
        n.attach(t, "change", function() {
            s.onChange(t)
        }
        ),
        n.attach(t, "mouseover", function() {
            qq(s.element).addClass(s.hoverClass)
        }
        ),
        n.attach(t, "mouseout", function() {
            qq(s.element).removeClass(s.hoverClass)
        }
        ),
        n.attach(t, "focus", function() {
            qq(s.element).addClass(s.focusClass)
        }
        ),
        n.attach(t, "blur", function() {
            qq(s.element).removeClass(s.focusClass)
        }
        ),
        window.attachEvent && t.setAttribute("tabIndex", "-1"),
        t
    }
    var i, n = new qq.DisposeSupport, s = {
        element: null ,
        multiple: !1,
        acceptFiles: null ,
        name: "file",
        onChange: function() {},
        hoverClass: "qq-upload-button-hover",
        focusClass: "qq-upload-button-focus"
    };
    return qq.extend(s, t),
    qq(s.element).css({
        position: "relative",
        overflow: "hidden",
        direction: "ltr"
    }),
    i = e(),
    {
        getInput: function() {
            return i
        },
        reset: function() {
            i.parentNode && qq(i).remove(),
            qq(s.element).removeClass(s.focusClass),
            i = e()
        }
    }
}
,
qq.PasteSupport = function(t) {
    "use strict";
    function e(t) {
        return t.type && 0 === t.type.indexOf("image/")
    }
    function i() {
        qq(s.targetElement).attach("paste", function(t) {
            var i = t.clipboardData;
            i && qq.each(i.items, function(t, i) {
                if (e(i)) {
                    var n = i.getAsFile();
                    s.callbacks.pasteReceived(n)
                }
            }
            )
        }
        )
    }
    function n() {
        a && a()
    }
    var s, a;
    return s = {
        targetElement: null ,
        callbacks: {
            log: function() {},
            pasteReceived: function() {}
        }
    },
    qq.extend(s, t),
    i(),
    {
        reset: function() {
            n()
        }
    }
}
,
qq.FineUploaderBasic = function(t) {
    this._options = {
        debug: !1,
        button: null ,
        multiple: !0,
        maxConnections: 3,
        disableCancelForFormUploads: !1,
        autoUpload: !0,
        request: {
            endpoint: "/server/upload",
            params: {},
            paramsInBody: !0,
            customHeaders: {},
            forceMultipart: !0,
            inputName: "qqfile",
            uuidName: "qquuid",
            totalFileSizeName: "qqtotalfilesize"
        },
        validation: {
            allowedExtensions: [],
            sizeLimit: 0,
            minSizeLimit: 0,
            itemLimit: 0,
            stopOnFirstInvalidFile: !0
        },
        callbacks: {
            onSubmit: function() {},
            onSubmitted: function() {},
            onComplete: function() {},
            onCancel: function() {},
            onUpload: function() {},
            onUploadChunk: function() {},
            onResume: function() {},
            onProgress: function() {},
            onError: function() {},
            onAutoRetry: function() {},
            onManualRetry: function() {},
            onValidateBatch: function() {},
            onValidate: function() {},
            onSubmitDelete: function() {},
            onDelete: function() {},
            onDeleteComplete: function() {},
            onPasteReceived: function() {
                return (new qq.Promise).success()
            }
        },
        messages: {
            typeError: "{file} has an invalid extension. Valid extension(s): {extensions}.",
            sizeError: "{file} is too large, maximum file size is {sizeLimit}.",
            minSizeError: "{file} is too small, minimum file size is {minSizeLimit}.",
            emptyError: "{file} is empty, please select files again without it.",
            noFilesError: "No files to upload.",
            tooManyItemsError: "Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",
            retryFailTooManyItems: "Retry failed - you have reached your file limit.",
            onLeave: "The files are being uploaded, if you leave now the upload will be cancelled."
        },
        retry: {
            enableAuto: !1,
            maxAutoAttempts: 3,
            autoAttemptDelay: 5,
            preventRetryResponseProperty: "preventRetry"
        },
        classes: {
            buttonHover: "qq-upload-button-hover",
            buttonFocus: "qq-upload-button-focus"
        },
        chunking: {
            enabled: !1,
            partSize: 2e6,
            paramNames: {
                partIndex: "qqpartindex",
                partByteOffset: "qqpartbyteoffset",
                chunkSize: "qqchunksize",
                totalFileSize: "qqtotalfilesize",
                totalParts: "qqtotalparts",
                filename: "qqfilename"
            }
        },
        resume: {
            enabled: !1,
            id: null ,
            cookiesExpireIn: 7,
            paramNames: {
                resuming: "qqresume"
            }
        },
        formatFileName: function(t) {
            return t.length > 33 && (t = t.slice(0, 19) + "..." + t.slice(-14)),
            t
        },
        text: {
            sizeSymbols: ["kB", "MB", "GB", "TB", "PB", "EB"]
        },
        deleteFile: {
            enabled: !1,
            endpoint: "/server/upload",
            customHeaders: {},
            params: {}
        },
        cors: {
            expected: !1,
            sendCredentials: !1
        },
        blobs: {
            defaultName: "misc_data",
            paramNames: {
                name: "qqblobname"
            }
        },
        paste: {
            targetElement: null ,
            defaultName: "pasted_image"
        }
    },
    qq.extend(this._options, t, !0),
    this._wrapCallbacks(),
    this._disposeSupport = new qq.DisposeSupport,
    this._filesInProgress = [],
    this._storedIds = [],
    this._autoRetries = [],
    this._retryTimeouts = [],
    this._preventRetries = [],
    this._netFilesUploadedOrQueued = 0,
    this._paramsStore = this._createParamsStore("request"),
    this._deleteFileParamsStore = this._createParamsStore("deleteFile"),
    this._endpointStore = this._createEndpointStore("request"),
    this._deleteFileEndpointStore = this._createEndpointStore("deleteFile"),
    this._handler = this._createUploadHandler(),
    this._deleteHandler = this._createDeleteHandler(),
    this._options.button && (this._button = this._createUploadButton(this._options.button)),
    this._options.paste.targetElement && (this._pasteHandler = this._createPasteHandler()),
    this._preventLeaveInProgress()
}
,
qq.FineUploaderBasic.prototype = {
    log: function(t, e) {
        !this._options.debug || e && "info" !== e ? e && "info" !== e && qq.log("[FineUploader] " + t, e) : qq.log("[FineUploader] " + t)
    },
    setParams: function(t, e) {
        null  == e ? this._options.request.params = t : this._paramsStore.setParams(t, e)
    },
    setDeleteFileParams: function(t, e) {
        null  == e ? this._options.deleteFile.params = t : this._deleteFileParamsStore.setParams(t, e)
    },
    setEndpoint: function(t, e) {
        null  == e ? this._options.request.endpoint = t : this._endpointStore.setEndpoint(t, e)
    },
    getInProgress: function() {
        return this._filesInProgress.length
    },
    uploadStoredFiles: function() {
        "use strict";
        for (var t; this._storedIds.length; )
            t = this._storedIds.shift(),
            this._filesInProgress.push(t),
            this._handler.upload(t)
    },
    clearStoredFiles: function() {
        this._storedIds = []
    },
    retry: function(t) {
        return this._onBeforeManualRetry(t) ? (this._netFilesUploadedOrQueued++,
        this._handler.retry(t),
        !0) : !1
    },
    cancel: function(t) {
        this._handler.cancel(t)
    },
    cancelAll: function() {
        var t = []
          , e = this;
        qq.extend(t, this._storedIds),
        qq.each(t, function(t, i) {
            e.cancel(i)
        }
        ),
        this._handler.cancelAll()
    },
    reset: function() {
        this.log("Resetting uploader..."),
        this._handler.reset(),
        this._filesInProgress = [],
        this._storedIds = [],
        this._autoRetries = [],
        this._retryTimeouts = [],
        this._preventRetries = [],
        this._button.reset(),
        this._paramsStore.reset(),
        this._endpointStore.reset(),
        this._netFilesUploadedOrQueued = 0,
        this._pasteHandler && this._pasteHandler.reset()
    },
    addFiles: function(t) {
        var e, i, n = this, s = [];
        if (t) {
            for (window.FileList && t instanceof FileList || (t = [].concat(t)),
            e = 0; e < t.length; e += 1)
                i = t[e],
                qq.isFileOrInput(i) ? s.push(i) : n.log(i + " is not a File or INPUT element!  Ignoring!", "warn");
            this.log("Processing " + s.length + " files or inputs..."),
            this._uploadFileOrBlobDataList(s)
        }
    },
    addBlobs: function(t) {
        if (t) {
            var e = [].concat(t)
              , i = []
              , n = this;
            qq.each(e, function(t, e) {
                qq.isBlob(e) && !qq.isFileOrInput(e) ? i.push({
                    blob: e,
                    name: n._options.blobs.defaultName
                }) : qq.isObject(e) && e.blob && e.name ? i.push(e) : n.log("addBlobs: entry at index " + t + " is not a Blob or a BlobData object", "error")
            }
            ),
            this._uploadFileOrBlobDataList(i)
        } else
            this.log("undefined or non-array parameter passed into addBlobs", "error")
    },
    getUuid: function(t) {
        return this._handler.getUuid(t)
    },
    getResumableFilesData: function() {
        return this._handler.getResumableFilesData()
    },
    getSize: function(t) {
        return this._handler.getSize(t)
    },
    getName: function(t) {
        return this._handler.getName(t)
    },
    getFile: function(t) {
        return this._handler.getFile(t)
    },
    deleteFile: function(t) {
        this._onSubmitDelete(t)
    },
    setDeleteFileEndpoint: function(t, e) {
        null  == e ? this._options.deleteFile.endpoint = t : this._deleteFileEndpointStore.setEndpoint(t, e)
    },
    getPromissoryCallbackNames: function() {
        return ["onPasteReceived"]
    },
    _createUploadButton: function(t) {
        var e = this
          , i = new qq.UploadButton({
            element: t,
            multiple: this._options.multiple && qq.isXhrUploadSupported(),
            acceptFiles: this._options.validation.acceptFiles,
            onChange: function(t) {
                e._onInputChange(t)
            },
            hoverClass: this._options.classes.buttonHover,
            focusClass: this._options.classes.buttonFocus
        });
        return this._disposeSupport.addDisposer(function() {
            i.dispose()
        }
        ),
        i
    },
    _createUploadHandler: function() {
        var t = this;
        return new qq.UploadHandler({
            debug: this._options.debug,
            forceMultipart: this._options.request.forceMultipart,
            maxConnections: this._options.maxConnections,
            customHeaders: this._options.request.customHeaders,
            inputName: this._options.request.inputName,
            uuidParamName: this._options.request.uuidName,
            totalFileSizeParamName: this._options.request.totalFileSizeName,
            cors: this._options.cors,
            demoMode: this._options.demoMode,
            paramsInBody: this._options.request.paramsInBody,
            paramsStore: this._paramsStore,
            endpointStore: this._endpointStore,
            chunking: this._options.chunking,
            resume: this._options.resume,
            blobs: this._options.blobs,
            log: function(e, i) {
                t.log(e, i)
            },
            onProgress: function(e, i, n, s) {
                t._onProgress(e, i, n, s),
                t._options.callbacks.onProgress(e, i, n, s)
            },
            onComplete: function(e, i, n, s) {
                t._onComplete(e, i, n, s),
                t._options.callbacks.onComplete(e, i, n)
            },
            onCancel: function(e, i) {
                t._onCancel(e, i),
                t._options.callbacks.onCancel(e, i)
            },
            onUpload: function(e, i) {
                t._onUpload(e, i),
                t._options.callbacks.onUpload(e, i)
            },
            onUploadChunk: function(e, i, n) {
                t._options.callbacks.onUploadChunk(e, i, n)
            },
            onResume: function(e, i, n) {
                return t._options.callbacks.onResume(e, i, n)
            },
            onAutoRetry: function(e, i, n, s) {
                return t._preventRetries[e] = n[t._options.retry.preventRetryResponseProperty],
                t._shouldAutoRetry(e, i, n) ? (t._maybeParseAndSendUploadError(e, i, n, s),
                t._options.callbacks.onAutoRetry(e, i, t._autoRetries[e] + 1),
                t._onBeforeAutoRetry(e, i),
                t._retryTimeouts[e] = setTimeout(function() {
                    t._onAutoRetry(e, i, n)
                }
                , 1e3 * t._options.retry.autoAttemptDelay),
                !0) : !1
            }
        })
    },
    _createDeleteHandler: function() {
        var t = this;
        return new qq.DeleteFileAjaxRequestor({
            maxConnections: this._options.maxConnections,
            customHeaders: this._options.deleteFile.customHeaders,
            paramsStore: this._deleteFileParamsStore,
            endpointStore: this._deleteFileEndpointStore,
            demoMode: this._options.demoMode,
            cors: this._options.cors,
            log: function(e, i) {
                t.log(e, i)
            },
            onDelete: function(e) {
                t._onDelete(e),
                t._options.callbacks.onDelete(e)
            },
            onDeleteComplete: function(e, i, n) {
                t._onDeleteComplete(e, i, n),
                t._options.callbacks.onDeleteComplete(e, i, n)
            }
        })
    },
    _createPasteHandler: function() {
        var t = this;
        return new qq.PasteSupport({
            targetElement: this._options.paste.targetElement,
            callbacks: {
                log: function(e, i) {
                    t.log(e, i)
                },
                pasteReceived: function(e) {
                    var i = t._options.callbacks.onPasteReceived
                      , n = i(e);
                    n.then ? n.then(function(i) {
                        t._handlePasteSuccess(e, i)
                    }
                    , function(e) {
                        t.log("Ignoring pasted image per paste received callback.  Reason = '" + e + "'")
                    }
                    ) : t.log("Promise contract not fulfilled in pasteReceived callback handler!  Ignoring pasted item.", "error")
                }
            }
        })
    },
    _handlePasteSuccess: function(t, e) {
        var i = t.type.split("/")[1]
          , n = e;
        null  == n && (n = this._options.paste.defaultName),
        n += "." + i,
        this.addBlobs({
            name: n,
            blob: t
        })
    },
    _preventLeaveInProgress: function() {
        var t = this;
        this._disposeSupport.attach(window, "beforeunload", function(e) {
            if (t._filesInProgress.length) {
                var e = e || window.event;
                return e.returnValue = t._options.messages.onLeave,
                t._options.messages.onLeave
            }
        }
        )
    },
    _onSubmit: function(t) {
        this._netFilesUploadedOrQueued++,
        this._options.autoUpload && this._filesInProgress.push(t)
    },
    _onProgress: function() {},
    _onComplete: function(t, e, i, n) {
        i.success || this._netFilesUploadedOrQueued--,
        this._removeFromFilesInProgress(t),
        this._maybeParseAndSendUploadError(t, e, i, n)
    },
    _onCancel: function(t) {
        this._netFilesUploadedOrQueued--,
        this._removeFromFilesInProgress(t),
        clearTimeout(this._retryTimeouts[t]);
        var e = qq.indexOf(this._storedIds, t);
        !this._options.autoUpload && e >= 0 && this._storedIds.splice(e, 1)
    },
    _isDeletePossible: function() {
        return this._options.deleteFile.enabled && (!this._options.cors.expected || this._options.cors.expected && (qq.ie10() || !qq.ie()))
    },
    _onSubmitDelete: function(t) {
        return this._isDeletePossible() ? void (this._options.callbacks.onSubmitDelete(t) !== !1 && this._deleteHandler.sendDelete(t, this.getUuid(t))) : (this.log("Delete request ignored for ID " + t + ", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.", "warn"),
        !1)
    },
    _onDelete: function() {},
    _onDeleteComplete: function(t, e, i) {
        var n = this._handler.getName(t);
        i ? (this.log("Delete request for '" + n + "' has failed.", "error"),
        this._options.callbacks.onError(t, n, "Delete request failed with response code " + e.status, e)) : (this._netFilesUploadedOrQueued--,
        this.log("Delete request for '" + n + "' has succeeded."))
    },
    _removeFromFilesInProgress: function(t) {
        var e = qq.indexOf(this._filesInProgress, t);
        e >= 0 && this._filesInProgress.splice(e, 1)
    },
    _onUpload: function() {},
    _onInputChange: function(t) {
        this.addFiles(qq.isXhrUploadSupported() ? t.files : t),
        this._button.reset()
    },
    _onBeforeAutoRetry: function(t, e) {
        this.log("Waiting " + this._options.retry.autoAttemptDelay + " seconds before retrying " + e + "...")
    },
    _onAutoRetry: function(t, e) {
        this.log("Retrying " + e + "..."),
        this._autoRetries[t]++,
        this._handler.retry(t)
    },
    _shouldAutoRetry: function(t) {
        return !this._preventRetries[t] && this._options.retry.enableAuto ? (void 0 === this._autoRetries[t] && (this._autoRetries[t] = 0),
        this._autoRetries[t] < this._options.retry.maxAutoAttempts) : !1
    },
    _onBeforeManualRetry: function(t) {
        var e = this._options.validation.itemLimit;
        if (this._preventRetries[t])
            return this.log("Retries are forbidden for id " + t, "warn"),
            !1;
        if (this._handler.isValid(t)) {
            var i = this._handler.getName(t);
            return this._options.callbacks.onManualRetry(t, i) === !1 ? !1 : e > 0 && this._netFilesUploadedOrQueued + 1 > e ? (this._itemError("retryFailTooManyItems", ""),
            !1) : (this.log("Retrying upload for '" + i + "' (id: " + t + ")..."),
            this._filesInProgress.push(t),
            !0)
        }
        return this.log("'" + t + "' is not a valid file ID", "error"),
        !1
    },
    _maybeParseAndSendUploadError: function(t, e, i, n) {
        if (!i.success)
            if (n && 200 !== n.status && !i.error)
                this._options.callbacks.onError(t, e, "XHR returned response code " + n.status, n);
            else {
                var s = i.error ? i.error : "Upload failure reason unknown";
                this._options.callbacks.onError(t, e, s, n)
            }
    },
    _uploadFileOrBlobDataList: function(t) {
        var e, i = this._getValidationDescriptors(t), n = this._isBatchValid(i);
        if (n)
            if (t.length > 0) {
                for (e = 0; e < t.length; e++)
                    if (this._validateFileOrBlobData(t[e]))
                        this._upload(t[e]);
                    else if (this._options.validation.stopOnFirstInvalidFile)
                        return
            } else
                this._itemError("noFilesError", "")
    },
    _upload: function(t) {
        var e = this._handler.add(t)
          , i = this._handler.getName(e);
        this._options.callbacks.onSubmit(e, i) !== !1 && (this._onSubmit(e, i),
        this._options.callbacks.onSubmitted(e, i),
        this._options.autoUpload ? this._handler.upload(e) : this._storeForLater(e))
    },
    _storeForLater: function(t) {
        this._storedIds.push(t)
    },
    _isBatchValid: function(t) {
        var e, i = this._options.validation.itemLimit, n = this._netFilesUploadedOrQueued + t.length, s = this._options.callbacks.onValidateBatch(t) !== !1;
        return s && (0 === i || i >= n ? s = !0 : (s = !1,
        e = this._options.messages.tooManyItemsError.replace(/\{netItems\}/g, n).replace(/\{itemLimit\}/g, i),
        this._batchError(e))),
        s
    },
    _validateFileOrBlobData: function(t) {
        var e, i, n;
        return e = this._getValidationDescriptor(t),
        i = e.name,
        n = e.size,
        this._options.callbacks.onValidate(e) === !1 ? !1 : qq.isFileOrInput(t) && !this._isAllowedExtension(i) ? (this._itemError("typeError", i),
        !1) : 0 === n ? (this._itemError("emptyError", i),
        !1) : n && this._options.validation.sizeLimit && n > this._options.validation.sizeLimit ? (this._itemError("sizeError", i),
        !1) : n && n < this._options.validation.minSizeLimit ? (this._itemError("minSizeError", i),
        !1) : !0
    },
    _itemError: function(t, e) {
        function i(t, e) {
            s = s.replace(t, e)
        }
        var n, s = this._options.messages[t], a = [];
        return qq.each(this._options.validation.allowedExtensions, function(t, e) {
            qq.isString(e) && a.push(e)
        }
        ),
        n = a.join(", ").toLowerCase(),
        i("{file}", this._options.formatFileName(e)),
        i("{extensions}", n),
        i("{sizeLimit}", this._formatSize(this._options.validation.sizeLimit)),
        i("{minSizeLimit}", this._formatSize(this._options.validation.minSizeLimit)),
        this._options.callbacks.onError(null , e, s),
        s
    },
    _batchError: function(t) {
        this._options.callbacks.onError(null , null , t)
    },
    _isAllowedExtension: function(t) {
        var e = this._options.validation.allowedExtensions
          , i = !1;
        return e.length ? (qq.each(e, function(e, n) {
            if (qq.isString(n)) {
                var s = new RegExp("\\." + n + "$","i");
                if (null  != t.match(s))
                    return i = !0,
                    !1
            }
        }
        ),
        i) : !0
    },
    _formatSize: function(t) {
        var e = -1;
        do
            t /= 1024,
            e++;
        while (t > 99);return Math.max(t, .1).toFixed(1) + this._options.text.sizeSymbols[e]
    },
    _wrapCallbacks: function() {
        var t, e;
        t = this,
        e = function(e, i, n) {
            try {
                return i.apply(t, n)
            } catch (s) {
                t.log("Caught exception in '" + e + "' callback - " + s.message, "error")
            }
        }
        ;
        for (var i in this._options.callbacks)
            !function() {
                var n, s;
                n = i,
                s = t._options.callbacks[n],
                t._options.callbacks[n] = function() {
                    return e(n, s, arguments)
                }
            }
            ()
    },
    _parseFileOrBlobDataName: function(t) {
        var e;
        return e = qq.isFileOrInput(t) ? t.value ? t.value.replace(/.*(\/|\\)/, "") : null  !== t.fileName && void 0 !== t.fileName ? t.fileName : t.name : t.name
    },
    _parseFileOrBlobDataSize: function(t) {
        var e;
        return qq.isFileOrInput(t) ? t.value || (e = null  !== t.fileSize && void 0 !== t.fileSize ? t.fileSize : t.size) : e = t.blob.size,
        e
    },
    _getValidationDescriptor: function(t) {
        var e, i, n;
        return n = {},
        e = this._parseFileOrBlobDataName(t),
        i = this._parseFileOrBlobDataSize(t),
        n.name = e,
        i && (n.size = i),
        n
    },
    _getValidationDescriptors: function(t) {
        var e = this
          , i = [];
        return qq.each(t, function(t, n) {
            i.push(e._getValidationDescriptor(n))
        }
        ),
        i
    },
    _createParamsStore: function(t) {
        var e = {}
          , i = this;
        return {
            setParams: function(t, i) {
                var n = {};
                qq.extend(n, t),
                e[i] = n
            },
            getParams: function(n) {
                var s = {};
                return null  != n && e[n] ? qq.extend(s, e[n]) : qq.extend(s, i._options[t].params),
                s
            },
            remove: function(t) {
                return delete e[t]
            },
            reset: function() {
                e = {}
            }
        }
    },
    _createEndpointStore: function(t) {
        var e = {}
          , i = this;
        return {
            setEndpoint: function(t, i) {
                e[i] = t
            },
            getEndpoint: function(n) {
                return null  != n && e[n] ? e[n] : i._options[t].endpoint
            },
            remove: function(t) {
                return delete e[t]
            },
            reset: function() {
                e = {}
            }
        }
    }
},
qq.DragAndDrop = function(t) {
    "use strict";
    function e() {
        u !== p || d || (l.callbacks.log("Grabbed " + h.length + " files after tree traversal."),
        c.dropDisabled(!1),
        l.callbacks.dropProcessing(!1, h))
    }
    function i(t) {
        h.push(t),
        p += 1,
        e()
    }
    function n(t) {
        var s, a;
        u += 1,
        t.isFile ? t.file(function(t) {
            i(t)
        }
        ) : t.isDirectory && (d = !0,
        s = t.createReader(),
        s.readEntries(function(t) {
            for (p += 1,
            a = 0; a < t.length; a += 1)
                n(t[a]);
            d = !1,
            t.length || e()
        }
        ))
    }
    function s(t) {
        var i, s, a;
        if (l.callbacks.dropProcessing(!0),
        c.dropDisabled(!0),
        t.files.length > 1 && !l.multiple)
            l.callbacks.dropProcessing(!1),
            l.callbacks.error("tooManyFilesError", ""),
            c.dropDisabled(!1);
        else if (h = [],
        u = 0,
        p = 0,
        qq.isFolderDropSupported(t))
            for (s = t.items,
            i = 0; i < s.length; i += 1)
                a = s[i].webkitGetAsEntry(),
                a && (a.isFile ? (h.push(s[i].getAsFile()),
                i === s.length - 1 && e()) : n(a));
        else
            l.callbacks.dropProcessing(!1, t.files),
            c.dropDisabled(!1)
    }
    function a(t) {
        c = new qq.UploadDropZone({
            element: t,
            onEnter: function(e) {
                qq(t).addClass(l.classes.dropActive),
                e.stopPropagation()
            },
            onLeaveNotDescendants: function() {
                qq(t).removeClass(l.classes.dropActive)
            },
            onDrop: function(e) {
                l.hideDropzones && qq(t).hide(),
                qq(t).removeClass(l.classes.dropActive),
                s(e.dataTransfer)
            }
        }),
        f.addDisposer(function() {
            c.dispose()
        }
        ),
        l.hideDropzones && qq(t).hide()
    }
    function r(t) {
        var e;
        return qq.each(t.dataTransfer.types, function(t, i) {
            return "Files" === i ? (e = !0,
            !1) : void 0
        }
        ),
        e
    }
    function o() {
        l.dropArea && l.extraDropzones.push(l.dropArea);
        var t, e = l.extraDropzones;
        for (t = 0; t < e.length; t += 1)
            a(e[t]);
        !l.dropArea || qq.ie() && !qq.ie10() || f.attach(document, "dragenter", function(i) {
            if (!c.dropDisabled() && r(i)) {
                if (qq(l.dropArea).hasClass(l.classes.dropDisabled))
                    return;
                for (l.dropArea.style.display = "block",
                t = 0; t < e.length; t += 1)
                    e[t].style.display = "block"
            }
        }
        ),
        f.attach(document, "dragleave", function(i) {
            if (l.hideDropzones && qq.FineUploader.prototype._leaving_document_out(i))
                for (t = 0; t < e.length; t += 1)
                    qq(e[t]).hide()
        }
        ),
        f.attach(document, "drop", function(i) {
            if (l.hideDropzones)
                for (t = 0; t < e.length; t += 1)
                    qq(e[t]).hide();
            i.preventDefault()
        }
        )
    }
    var l, c, d, h = [], u = 0, p = 0, f = new qq.DisposeSupport;
    return l = {
        dropArea: null ,
        extraDropzones: [],
        hideDropzones: !0,
        multiple: !0,
        classes: {
            dropActive: null 
        },
        callbacks: {
            dropProcessing: function() {},
            error: function() {},
            log: function() {}
        }
    },
    qq.extend(l, t),
    {
        setup: function() {
            o()
        },
        setupExtraDropzone: function(t) {
            l.extraDropzones.push(t),
            a(t)
        },
        removeExtraDropzone: function(t) {
            var e, i = l.extraDropzones;
            for (e in i)
                if (i[e] === t)
                    return i.splice(e, 1)
        },
        dispose: function() {
            f.dispose(),
            c.dispose()
        }
    }
}
,
qq.UploadDropZone = function(t) {
    "use strict";
    function e() {
        return qq.safari() || qq.firefox() && qq.windows()
    }
    function i() {
        c || (e ? d.attach(document, "dragover", function(t) {
            t.preventDefault()
        }
        ) : d.attach(document, "dragover", function(t) {
            t.dataTransfer && (t.dataTransfer.dropEffect = "none",
            t.preventDefault())
        }
        ),
        c = !0)
    }
    function n(t) {
        if (qq.ie() && !qq.ie10())
            return !1;
        var e, i = t.dataTransfer, n = qq.safari();
        return e = qq.ie10() ? !0 : "none" !== i.effectAllowed,
        i && e && (i.files || !n && i.types.contains && i.types.contains("Files"))
    }
    function s(t) {
        return void 0 !== t && (l = t),
        l
    }
    function a() {
        d.attach(o, "dragover", function(t) {
            if (n(t)) {
                var e = qq.ie() ? null  : t.dataTransfer.effectAllowed;
                t.dataTransfer.dropEffect = "move" === e || "linkMove" === e ? "move" : "copy",
                t.stopPropagation(),
                t.preventDefault()
            }
        }
        ),
        d.attach(o, "dragenter", function(t) {
            if (!s()) {
                if (!n(t))
                    return;
                r.onEnter(t)
            }
        }
        ),
        d.attach(o, "dragleave", function(t) {
            if (n(t)) {
                r.onLeave(t);
                var e = document.elementFromPoint(t.clientX, t.clientY);
                qq(this).contains(e) || r.onLeaveNotDescendants(t)
            }
        }
        ),
        d.attach(o, "drop", function(t) {
            if (!s()) {
                if (!n(t))
                    return;
                t.preventDefault(),
                r.onDrop(t)
            }
        }
        )
    }
    var r, o, l, c, d = new qq.DisposeSupport;
    return r = {
        element: null ,
        onEnter: function() {},
        onLeave: function() {},
        onLeaveNotDescendants: function() {},
        onDrop: function() {}
    },
    qq.extend(r, t),
    o = r.element,
    i(),
    a(),
    {
        dropDisabled: function(t) {
            return s(t)
        },
        dispose: function() {
            d.dispose()
        }
    }
}
,
qq.FineUploader = function(t) {
    qq.FineUploaderBasic.apply(this, arguments),
    qq.extend(this._options, {
        element: null ,
        listElement: null ,
        dragAndDrop: {
            extraDropzones: [],
            hideDropzones: !0,
            disableDefaultDropzone: !1
        },
        text: {
            uploadButton: "Upload a file",
            cancelButton: "Cancel",
            retryButton: "Retry",
            deleteButton: "Delete",
            failUpload: "Upload failed",
            dragZone: "Drop files here to upload",
            dropProcessing: "Processing dropped files...",
            formatProgress: "{percent}% of {total_size}",
            waitingForResponse: "Processing..."
        },
        template: '<div class="qq-uploader">' + (this._options.dragAndDrop && this._options.dragAndDrop.disableDefaultDropzone ? "" : '<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>') + (this._options.button ? "" : '<div class="qq-upload-button"><div>{uploadButtonText}</div></div>') + '<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>' + (this._options.listElement ? "" : '<ul class="qq-upload-list"></ul>') + "</div>",
        fileTemplate: '<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><a class="qq-upload-retry" href="#">{retryButtonText}</a><a class="qq-upload-delete" href="#">{deleteButtonText}</a><span class="qq-upload-status-text">{statusText}</span></li>',
        classes: {
            button: "qq-upload-button",
            drop: "qq-upload-drop-area",
            dropActive: "qq-upload-drop-area-active",
            dropDisabled: "qq-upload-drop-area-disabled",
            list: "qq-upload-list",
            progressBar: "qq-progress-bar",
            file: "qq-upload-file",
            spinner: "qq-upload-spinner",
            finished: "qq-upload-finished",
            retrying: "qq-upload-retrying",
            retryable: "qq-upload-retryable",
            size: "qq-upload-size",
            cancel: "qq-upload-cancel",
            deleteButton: "qq-upload-delete",
            retry: "qq-upload-retry",
            statusText: "qq-upload-status-text",
            success: "qq-upload-success",
            fail: "qq-upload-fail",
            successIcon: null ,
            failIcon: null ,
            dropProcessing: "qq-drop-processing",
            dropProcessingSpinner: "qq-drop-processing-spinner"
        },
        failedUploadTextDisplay: {
            mode: "default",
            maxChars: 50,
            responseProperty: "error",
            enableTooltip: !0
        },
        messages: {
            tooManyFilesError: "You may only drop one file"
        },
        retry: {
            showAutoRetryNote: !0,
            autoRetryNote: "Retrying {retryNum}/{maxAuto}...",
            showButton: !1
        },
        deleteFile: {
            forceConfirm: !1,
            confirmMessage: "Are you sure you want to delete {filename}?",
            deletingStatusText: "Deleting...",
            deletingFailedText: "Delete failed"
        },
        display: {
            fileSizeOnSubmit: !1
        },
        paste: {
            promptForName: !1,
            namePromptMessage: "Please name this image"
        },
        showMessage: function(t) {
            setTimeout(function() {
                window.alert(t)
            }
            , 0)
        },
        showConfirm: function(t, e, i) {
            setTimeout(function() {
                var n = window.confirm(t);
                n ? e() : i && i()
            }
            , 0)
        },
        showPrompt: function(t, e) {
            var i = new qq.Promise
              , n = window.prompt(t, e);
            return null  != n && qq.trimStr(n).length > 0 ? i.success(n) : i.failure("Undefined or invalid user-supplied value."),
            i
        }
    }, !0),
    qq.extend(this._options, t, !0),
    this._wrapCallbacks(),
    this._options.template = this._options.template.replace(/\{dragZoneText\}/g, this._options.text.dragZone),
    this._options.template = this._options.template.replace(/\{uploadButtonText\}/g, this._options.text.uploadButton),
    this._options.template = this._options.template.replace(/\{dropProcessingText\}/g, this._options.text.dropProcessing),
    this._options.fileTemplate = this._options.fileTemplate.replace(/\{cancelButtonText\}/g, this._options.text.cancelButton),
    this._options.fileTemplate = this._options.fileTemplate.replace(/\{retryButtonText\}/g, this._options.text.retryButton),
    this._options.fileTemplate = this._options.fileTemplate.replace(/\{deleteButtonText\}/g, this._options.text.deleteButton),
    this._options.fileTemplate = this._options.fileTemplate.replace(/\{statusText\}/g, ""),
    this._element = this._options.element,
    this._element.innerHTML = this._options.template,
    this._listElement = this._options.listElement || this._find(this._element, "list"),
    this._classes = this._options.classes,
    this._button || (this._button = this._createUploadButton(this._find(this._element, "button"))),
    this._bindCancelAndRetryEvents(),
    this._dnd = this._setupDragAndDrop(),
    this._options.paste.targetElement && this._options.paste.promptForName && this._setupPastePrompt()
}
,
qq.extend(qq.FineUploader.prototype, qq.FineUploaderBasic.prototype),
qq.extend(qq.FineUploader.prototype, {
    clearStoredFiles: function() {
        qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this, arguments),
        this._listElement.innerHTML = ""
    },
    addExtraDropzone: function(t) {
        this._dnd.setupExtraDropzone(t)
    },
    removeExtraDropzone: function(t) {
        return this._dnd.removeExtraDropzone(t)
    },
    getItemByFileId: function(t) {
        for (var e = this._listElement.firstChild; e; ) {
            if (e.qqFileId == t)
                return e;
            e = e.nextSibling
        }
    },
    reset: function() {
        qq.FineUploaderBasic.prototype.reset.apply(this, arguments),
        this._element.innerHTML = this._options.template,
        this._listElement = this._options.listElement || this._find(this._element, "list"),
        this._options.button || (this._button = this._createUploadButton(this._find(this._element, "button"))),
        this._bindCancelAndRetryEvents(),
        this._dnd.dispose(),
        this._dnd = this._setupDragAndDrop()
    },
    _removeFileItem: function(t) {
        var e = this.getItemByFileId(t);
        qq(e).remove()
    },
    _setupDragAndDrop: function() {
        var t, e, i, n = this, s = this._find(this._element, "dropProcessing");
        return e = function(t) {
            t.preventDefault()
        }
        ,
        this._options.dragAndDrop.disableDefaultDropzone || (i = this._find(this._options.element, "drop")),
        t = new qq.DragAndDrop({
            dropArea: i,
            extraDropzones: this._options.dragAndDrop.extraDropzones,
            hideDropzones: this._options.dragAndDrop.hideDropzones,
            multiple: this._options.multiple,
            classes: {
                dropActive: this._options.classes.dropActive
            },
            callbacks: {
                dropProcessing: function(t, i) {
                    var a = n._button.getInput();
                    t ? (qq(s).css({
                        display: "block"
                    }),
                    qq(a).attach("click", e)) : (qq(s).hide(),
                    qq(a).detach("click", e)),
                    i && n.addFiles(i)
                },
                error: function(t, e) {
                    n._itemError(t, e)
                },
                log: function(t, e) {
                    n.log(t, e)
                }
            }
        }),
        t.setup(),
        t
    },
    _leaving_document_out: function(t) {
        return (qq.chrome() || qq.safari() && qq.windows()) && 0 == t.clientX && 0 == t.clientY || qq.firefox() && !t.relatedTarget
    },
    _storeForLater: function(t) {
        qq.FineUploaderBasic.prototype._storeForLater.apply(this, arguments);
        var e = this.getItemByFileId(t);
        qq(this._find(e, "spinner")).hide()
    },
    _find: function(t, e) {
        var i = qq(t).getByClass(this._options.classes[e])[0];
        if (!i)
            throw new Error("element not found " + e);
        return i
    },
    _onSubmit: function(t, e) {
        qq.FineUploaderBasic.prototype._onSubmit.apply(this, arguments),
        this._addToList(t, e)
    },
    _onProgress: function(t, e, i, n) {
        qq.FineUploaderBasic.prototype._onProgress.apply(this, arguments);
        var s, a, r, o;
        s = this.getItemByFileId(t),
        a = this._find(s, "progressBar"),
        r = Math.round(i / n * 100),
        i === n ? (o = this._find(s, "cancel"),
        qq(o).hide(),
        qq(a).hide(),
        qq(this._find(s, "statusText")).setText(this._options.text.waitingForResponse),
        this._displayFileSize(t)) : (this._displayFileSize(t, i, n),
        qq(a).css({
            display: "block"
        })),
        qq(a).css({
            width: r + "%"
        })
    },
    _onComplete: function(t, e, i) {
        qq.FineUploaderBasic.prototype._onComplete.apply(this, arguments);
        var n = this.getItemByFileId(t);
        qq(this._find(n, "statusText")).clearText(),
        qq(n).removeClass(this._classes.retrying),
        qq(this._find(n, "progressBar")).hide(),
        (!this._options.disableCancelForFormUploads || qq.isXhrUploadSupported()) && qq(this._find(n, "cancel")).hide(),
        qq(this._find(n, "spinner")).hide(),
        i.success ? (this._isDeletePossible() && this._showDeleteLink(t),
        qq(n).addClass(this._classes.success),
        this._classes.successIcon && (this._find(n, "finished").style.display = "inline-block",
        qq(n).addClass(this._classes.successIcon))) : (qq(n).addClass(this._classes.fail),
        this._classes.failIcon && (this._find(n, "finished").style.display = "inline-block",
        qq(n).addClass(this._classes.failIcon)),
        this._options.retry.showButton && !this._preventRetries[t] && qq(n).addClass(this._classes.retryable),
        this._controlFailureTextDisplay(n, i))
    },
    _onUpload: function(t) {
        qq.FineUploaderBasic.prototype._onUpload.apply(this, arguments),
        this._showSpinner(t)
    },
    _onCancel: function(t) {
        qq.FineUploaderBasic.prototype._onCancel.apply(this, arguments),
        this._removeFileItem(t)
    },
    _onBeforeAutoRetry: function(t) {
        var e, i, n, s, a, r;
        qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this, arguments),
        e = this.getItemByFileId(t),
        i = this._find(e, "progressBar"),
        this._showCancelLink(e),
        i.style.width = 0,
        qq(i).hide(),
        this._options.retry.showAutoRetryNote && (n = this._find(e, "statusText"),
        s = this._autoRetries[t] + 1,
        a = this._options.retry.maxAutoAttempts,
        r = this._options.retry.autoRetryNote.replace(/\{retryNum\}/g, s),
        r = r.replace(/\{maxAuto\}/g, a),
        qq(n).setText(r),
        1 === s && qq(e).addClass(this._classes.retrying))
    },
    _onBeforeManualRetry: function(t) {
        var e = this.getItemByFileId(t);
        return qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this, arguments) ? (this._find(e, "progressBar").style.width = 0,
        qq(e).removeClass(this._classes.fail),
        qq(this._find(e, "statusText")).clearText(),
        this._showSpinner(t),
        this._showCancelLink(e),
        !0) : (qq(e).addClass(this._classes.retryable),
        !1)
    },
    _onSubmitDelete: function(t) {
        return this._isDeletePossible() ? void (this._options.callbacks.onSubmitDelete(t) !== !1 && (this._options.deleteFile.forceConfirm ? this._showDeleteConfirm(t) : this._sendDeleteRequest(t))) : (this.log("Delete request ignored for file ID " + t + ", delete feature is disabled.", "warn"),
        !1)
    },
    _onDeleteComplete: function(t, e, i) {
        qq.FineUploaderBasic.prototype._onDeleteComplete.apply(this, arguments);
        var n = this.getItemByFileId(t)
          , s = this._find(n, "spinner")
          , a = this._find(n, "statusText");
        qq(s).hide(),
        i ? (qq(a).setText(this._options.deleteFile.deletingFailedText),
        this._showDeleteLink(t)) : this._removeFileItem(t)
    },
    _sendDeleteRequest: function(t) {
        var e = this.getItemByFileId(t)
          , i = this._find(e, "deleteButton")
          , n = this._find(e, "statusText");
        qq(i).hide(),
        this._showSpinner(t),
        qq(n).setText(this._options.deleteFile.deletingStatusText),
        this._deleteHandler.sendDelete(t, this.getUuid(t))
    },
    _showDeleteConfirm: function(t) {
        var e = this._handler.getName(t)
          , i = this._options.deleteFile.confirmMessage.replace(/\{filename\}/g, e)
          , n = (this.getUuid(t),
        this);
        this._options.showConfirm(i, function() {
            n._sendDeleteRequest(t)
        }
        )
    },
    _addToList: function(t, e) {
        var i = qq.toElement(this._options.fileTemplate);
        if (this._options.disableCancelForFormUploads && !qq.isXhrUploadSupported()) {
            var n = this._find(i, "cancel");
            qq(n).remove()
        }
        i.qqFileId = t;
        var s = this._find(i, "file");
        qq(s).setText(this._options.formatFileName(e)),
        qq(this._find(i, "size")).hide(),
        this._options.multiple || (this._handler.cancelAll(),
        this._clearList()),
        this._listElement.appendChild(i),
        this._options.display.fileSizeOnSubmit && qq.isXhrUploadSupported() && this._displayFileSize(t)
    },
    _clearList: function() {
        this._listElement.innerHTML = "",
        this.clearStoredFiles()
    },
    _displayFileSize: function(t, e, i) {
        var n = this.getItemByFileId(t)
          , s = this.getSize(t)
          , a = this._formatSize(s)
          , r = this._find(n, "size");
        void 0 !== e && void 0 !== i && (a = this._formatProgress(e, i)),
        qq(r).css({
            display: "inline"
        }),
        qq(r).setText(a)
    },
    _bindCancelAndRetryEvents: function() {
        var t = this
          , e = this._listElement;
        this._disposeSupport.attach(e, "click", function(e) {
            e = e || window.event;
            var i = e.target || e.srcElement;
            if (qq(i).hasClass(t._classes.cancel) || qq(i).hasClass(t._classes.retry) || qq(i).hasClass(t._classes.deleteButton)) {
                qq.preventDefault(e);
                for (var n = i.parentNode; void 0 === n.qqFileId; )
                    n = i = i.parentNode;
                qq(i).hasClass(t._classes.deleteButton) ? t.deleteFile(n.qqFileId) : qq(i).hasClass(t._classes.cancel) ? t.cancel(n.qqFileId) : (qq(n).removeClass(t._classes.retryable),
                t.retry(n.qqFileId))
            }
        }
        )
    },
    _formatProgress: function(t, e) {
        function i(t, e) {
            n = n.replace(t, e)
        }
        var n = this._options.text.formatProgress;
        return i("{percent}", Math.round(t / e * 100)),
        i("{total_size}", this._formatSize(e)),
        n
    },
    _controlFailureTextDisplay: function(t, e) {
        var i, n, s, a, r;
        i = this._options.failedUploadTextDisplay.mode,
        n = this._options.failedUploadTextDisplay.maxChars,
        s = this._options.failedUploadTextDisplay.responseProperty,
        "custom" === i ? (a = e[s],
        a ? a.length > n && (r = a.substring(0, n) + "...") : (a = this._options.text.failUpload,
        this.log("'" + s + "' is not a valid property on the server response.", "warn")),
        qq(this._find(t, "statusText")).setText(r || a),
        this._options.failedUploadTextDisplay.enableTooltip && this._showTooltip(t, a)) : "default" === i ? qq(this._find(t, "statusText")).setText(this._options.text.failUpload) : "none" !== i && this.log("failedUploadTextDisplay.mode value of '" + i + "' is not valid", "warn")
    },
    _showTooltip: function(t, e) {
        t.title = e
    },
    _showSpinner: function(t) {
        var e = this.getItemByFileId(t)
          , i = this._find(e, "spinner");
        i.style.display = "inline-block"
    },
    _showCancelLink: function(t) {
        if (!this._options.disableCancelForFormUploads || qq.isXhrUploadSupported()) {
            var e = this._find(t, "cancel");
            qq(e).css({
                display: "inline"
            })
        }
    },
    _showDeleteLink: function(t) {
        var e = this.getItemByFileId(t)
          , i = this._find(e, "deleteButton");
        qq(i).css({
            display: "inline"
        })
    },
    _itemError: function() {
        var t = qq.FineUploaderBasic.prototype._itemError.apply(this, arguments);
        this._options.showMessage(t)
    },
    _batchError: function(t) {
        qq.FineUploaderBasic.prototype._batchError.apply(this, arguments),
        this._options.showMessage(t)
    },
    _setupPastePrompt: function() {
        var t = this;
        this._options.callbacks.onPasteReceived = function() {
            var e = t._options.paste.namePromptMessage
              , i = t._options.paste.defaultName;
            return t._options.showPrompt(e, i)
        }
    }
}),
qq.AjaxRequestor = function(t) {
    "use strict";
    function e(t) {
        var e, i = qq.indexOf(u, t), s = f.maxConnections;
        delete p[t],
        u.splice(i, 1),
        u.length >= s && s > i && (e = u[s - 1],
        n(e))
    }
    function i(t) {
        var i = p[t].xhr
          , n = c()
          , s = !1;
        e(t),
        l(i.status) || (s = !0,
        d(n + " request for " + t + " has failed - response code " + i.status, "error")),
        f.onComplete(t, i, s)
    }
    function n(t) {
        var e, i = new XMLHttpRequest, n = c(), o = {};
        f.onSend(t),
        f.paramsStore.getParams && (o = f.paramsStore.getParams(t)),
        e = s(t, o),
        p[t].xhr = i,
        i.onreadystatechange = a(t),
        i.open(n, e, !0),
        f.cors.expected && f.cors.sendCredentials && (i.withCredentials = !0),
        r(t),
        d("Sending " + n + " request for " + t),
        !h && o ? i.send(qq.obj2url(o, "")) : i.send()
    }
    function s(t, e) {
        var i = f.endpointStore.getEndpoint(t)
          , n = p[t].addToPath;
        return void 0 !== n && (i += "/" + n),
        h && e ? qq.obj2url(e, i) : i
    }
    function a(t) {
        var e = p[t].xhr;
        return function() {
            4 === e.readyState && i(t, e)
        }
    }
    function r(t) {
        var e = p[t].xhr
          , i = f.customHeaders;
        e.setRequestHeader("X-Requested-With", "XMLHttpRequest"),
       e.setRequestHeader("Cache-Control", "no-cache"),
        qq.each(i, function(t, i) {
            e.setRequestHeader(t, i)
        }
        )
    }
    function o(t) {
        var i = p[t].xhr
          , n = c();
        return i ? (i.onreadystatechange = null ,
        i.abort(),
        e(t),
        d("Cancelled " + n + " for " + t),
        f.onCancel(t),
        !0) : !1
    }
    function l(t) {
        return qq.indexOf(f.successfulResponseCodes, t) >= 0
    }
    function c() {
        return f.demoMode ? "GET" : f.method
    }
    var d, h, u = [], p = [], f = {
        method: "POST",
        maxConnections: 3,
        customHeaders: {},
        endpointStore: {},
        paramsStore: {},
        successfulResponseCodes: [200],
        demoMode: !1,
        cors: {
            expected: !1,
            sendCredentials: !1
        },
        log: function() {},
        onSend: function() {},
        onComplete: function() {},
        onCancel: function() {}
    };
    return qq.extend(f, t),
    d = f.log,
    h = "GET" === c() || "DELETE" === c(),
    {
        send: function(t, e) {
            p[t] = {
                addToPath: e
            };
            var i = u.push(t);
            i <= f.maxConnections && n(t)
        },
        cancel: function(t) {
            return o(t)
        }
    }
}
,
qq.DeleteFileAjaxRequestor = function(t) {
    "use strict";
    var e, i = {
        endpointStore: {},
        maxConnections: 3,
        customHeaders: {},
        paramsStore: {},
        demoMode: !1,
        cors: {
            expected: !1,
            sendCredentials: !1
        },
        log: function() {},
        onDelete: function() {},
        onDeleteComplete: function() {}
    };
    return qq.extend(i, t),
    e = new qq.AjaxRequestor({
        method: "DELETE",
        endpointStore: i.endpointStore,
        paramsStore: i.paramsStore,
        maxConnections: i.maxConnections,
        customHeaders: i.customHeaders,
        successfulResponseCodes: [200, 202, 204],
        demoMode: i.demoMode,
        log: i.log,
        onSend: i.onDelete,
        onComplete: i.onDeleteComplete
    }),
    {
        sendDelete: function(t, n) {
            e.send(t, n),
            i.log("Submitted delete file request for " + t)
        }
    }
}
,
qq.WindowReceiveMessage = function(t) {
    var e = {
        log: function() {}
    }
      , i = {};
    return qq.extend(e, t),
    {
        receiveMessage: function(t, e) {
            var n = function(t) {
                e(t.data)
            }
            ;
            window.postMessage ? i[t] = qq(window).attach("message", n) : log("iframe message passing not supported in this browser!", "error")
        },
        stopReceivingMessages: function(t) {
            if (window.postMessage) {
                var e = i[t];
                e && e()
            }
        }
    }
}
,
qq.UploadHandler = function(t) {
    "use strict";
    var e, i, n, s, a = [];
    return e = {
        debug: !1,
        forceMultipart: !0,
        paramsInBody: !1,
        paramsStore: {},
        endpointStore: {},
        cors: {
            expected: !1,
            sendCredentials: !1
        },
        maxConnections: 3,
        uuidParamName: "qquuid",
        totalFileSizeParamName: "qqtotalfilesize",
        chunking: {
            enabled: !1,
            partSize: 2e6,
            paramNames: {
                partIndex: "qqpartindex",
                partByteOffset: "qqpartbyteoffset",
                chunkSize: "qqchunksize",
                totalParts: "qqtotalparts",
                filename: "qqfilename"
            }
        },
        resume: {
            enabled: !1,
            id: null ,
            cookiesExpireIn: 7,
            paramNames: {
                resuming: "qqresume"
            }
        },
        blobs: {
            paramNames: {
                name: "qqblobname"
            }
        },
        log: function() {},
        onProgress: function() {},
        onComplete: function() {},
        onCancel: function() {},
        onUpload: function() {},
        onUploadChunk: function() {},
        onAutoRetry: function() {},
        onResume: function() {}
    },
    qq.extend(e, t),
    i = e.log,
    n = function(t) {
        var i, n = qq.indexOf(a, t), r = e.maxConnections;
        n >= 0 && (a.splice(n, 1),
        a.length >= r && r > n && (i = a[r - 1],
        s.upload(i)))
    }
    ,
    s = qq.isXhrUploadSupported() ? new qq.UploadHandlerXhr(e,n,i) : new qq.UploadHandlerForm(e,n,i),
    {
        add: function(t) {
            return s.add(t)
        },
        upload: function(t) {
            var i = a.push(t);
            return i <= e.maxConnections ? s.upload(t) : void 0
        },
        retry: function(t) {
            var e = qq.indexOf(a, t);
            return e >= 0 ? s.upload(t, !0) : this.upload(t)
        },
        cancel: function(t) {
            i("Cancelling " + t),
            e.paramsStore.remove(t),
            s.cancel(t),
            n(t)
        },
        cancelAll: function() {
            var t = this
              , e = [];
            qq.extend(e, a),
            qq.each(e, function(e, i) {
                t.cancel(i)
            }
            ),
            a = []
        },
        getName: function(t) {
            return s.getName(t)
        },
        getSize: function(t) {
            return s.getSize ? s.getSize(t) : void 0
        },
        getFile: function(t) {
            return s.getFile ? s.getFile(t) : void 0
        },
        getQueue: function() {
            return a
        },
        reset: function() {
            i("Resetting upload handler"),
            a = [],
            s.reset()
        },
        getUuid: function(t) {
            return s.getUuid(t)
        },
        isValid: function(t) {
            return s.isValid(t)
        },
        getResumableFilesData: function() {
            return s.getResumableFilesData ? s.getResumableFilesData() : []
        }
    }
}
,
qq.UploadHandlerForm = function(t, e, i) {
    "use strict";
    function n(t) {
        void 0 !== p[t] && (p[t](),
        delete p[t])
    }
    function s(t, e) {
        var i = t.id;
        b[u[i]] = e,
        p[i] = qq(t).attach("load", function() {
            h[i] && (g("Received iframe load event for CORS upload request (file id " + i + ")"),
            f[i] = setTimeout(function() {
                var t = "No valid message received from loaded iframe for file id " + i;
                g(t, "error"),
                e({
                    error: t
                })
            }
            , 1e3))
        }
        ),
        v.receiveMessage(i, function(t) {
            g("Received the following window message: '" + t + "'");
            var e, s = qq.parseJson(t), a = s.uuid;
            a && b[a] ? (clearTimeout(f[i]),
            delete f[i],
            n(i),
            e = b[a],
            delete b[a],
            v.stopReceivingMessages(i),
            e(s)) : a || g("'" + t + "' does not contain a UUID - ignoring.")
        }
        )
    }
    function a(t, e) {
        d.cors.expected ? s(t, e) : p[t.id] = qq(t).attach("load", function() {
            if (g("Received response for " + t.id),
            t.parentNode) {
                try {
                    if (t.contentDocument && t.contentDocument.body && "false" == t.contentDocument.body.innerHTML)
                        return
                } catch (i) {
                    g("Error when attempting to access iframe during handling of upload response (" + i + ")", "error")
                }
                e()
            }
        }
        )
    }
    function r(t) {
        var e;
        try {
            var i = t.contentDocument || t.contentWindow.document
              , n = i.body.innerHTML;
            g("converting iframe's innerHTML to JSON"),
            g("innerHTML = " + n),
            n && n.match(/^<pre/i) && (n = i.body.firstChild.firstChild.nodeValue),
            e = qq.parseJson(n)
        } catch (s) {
            g("Error when attempting to parse form upload response (" + s + ")", "error"),
            e = {
                success: !1
            }
        }
        return e
    }
    function o(t) {
        var e = qq.toElement('<iframe src="javascript:false;" name="' + t + '" />');
        return e.setAttribute("id", t),
        e.style.display = "none",
        document.body.appendChild(e),
        e
    }
    function l(t, e) {
        var i = d.paramsStore.getParams(t)
          , n = d.demoMode ? "GET" : "POST"
          , s = qq.toElement('<form method="' + n + '" enctype="multipart/form-data"></form>')
          , a = d.endpointStore.getEndpoint(t)
          , r = a;
        return i[d.uuidParamName] = u[t],
        d.paramsInBody ? qq.obj2Inputs(i, s) : r = qq.obj2url(i, a),
        s.setAttribute("action", r),
        s.setAttribute("target", e.name),
        s.style.display = "none",
        document.body.appendChild(s),
        s
    }
    var c, d = t, h = [], u = [], p = {}, f = {}, m = e, g = i, v = new qq.WindowReceiveMessage({
        log: g
    }), b = {};
    return c = {
        add: function(t) {
            t.setAttribute("name", d.inputName);
            var e = h.push(t) - 1;
            return u[e] = qq.getUniqueId(),
            t.parentNode && qq(t).remove(),
            e
        },
        getName: function(t) {
            return c.isValid(t) ? h[t].value.replace(/.*(\/|\\)/, "") : void g(t + " is not a valid item ID.", "error")
        },
        isValid: function(t) {
            return void 0 !== h[t]
        },
        reset: function() {
            h = [],
            u = [],
            p = {}
        },
        getUuid: function(t) {
            return u[t]
        },
        cancel: function(t) {
            d.onCancel(t, this.getName(t)),
            delete h[t],
            delete u[t],
            delete p[t],
            d.cors.expected && (clearTimeout(f[t]),
            delete f[t],
            v.stopReceivingMessages(t));
            var e = document.getElementById(t);
            e && (e.setAttribute("src", "java" + String.fromCharCode(115) + "cript:false;"),
            qq(e).remove())
        },
        upload: function(t) {
            var e, i = h[t], s = c.getName(t), u = o(t);
            if (!i)
                throw new Error("file with passed id was not added, or already uploaded or cancelled");
            return d.onUpload(t, this.getName(t)),
            e = l(t, u),
            e.appendChild(i),
            a(u, function(e) {
                g("iframe loaded");
                var i = e ? e : r(u);
                n(t),
                d.cors.expected || qq(u).remove(),
                (i.success || !d.onAutoRetry(t, s, i)) && (d.onComplete(t, s, i),
                m(t))
            }
            ),
            g("Sending upload request for " + t),
            e.submit(),
            qq(e).remove(),
            t
        }
    }
}
,
qq.UploadHandlerXhr = function(t, e, i) {
    "use strict";
    function n(t, e, i) {
        var n = F.getSize(t)
          , s = F.getName(t);
        e[I.chunking.paramNames.partIndex] = i.part,
        e[I.chunking.paramNames.partByteOffset] = i.start,
        e[I.chunking.paramNames.chunkSize] = i.size,
        e[I.chunking.paramNames.totalParts] = i.count,
        e[I.totalFileSizeParamName] = n,
        L && (e[I.chunking.paramNames.filename] = s)
    }
    function s(t) {
        t[I.resume.paramNames.resuming] = !0
    }
    function a(t, e, i) {
        return t.slice ? t.slice(e, i) : t.mozSlice ? t.mozSlice(e, i) : t.webkitSlice ? t.webkitSlice(e, i) : void 0
    }
    function r(t, e) {
        var i = I.chunking.partSize
          , n = F.getSize(t)
          , s = P[t].file || P[t].blobData.blob
          , r = i * e
          , l = r + i >= n ? n : r + i
          , c = o(t);
        return {
            part: e,
            start: r,
            end: l,
            count: c,
            blob: a(s, r, l),
            size: l - r
        }
    }
    function o(t) {
        var e = F.getSize(t)
          , i = I.chunking.partSize;
        return Math.ceil(e / i)
    }
    function l(t) {
        var e = new XMLHttpRequest;
        return P[t].xhr = e,
        e
    }
    function c(t, e, i, n) {
        var s = new FormData
          , a = I.demoMode ? "GET" : "POST"
          , r = I.endpointStore.getEndpoint(n)
          , o = r
          , l = F.getName(n)
          , c = F.getSize(n)
          , d = P[n].blobData;
        return t[I.uuidParamName] = P[n].uuid,
        L && (t[I.totalFileSizeParamName] = c,
        d && (t[I.blobs.paramNames.name] = d.name)),
        I.paramsInBody || (L || (t[I.inputName] = l),
        o = qq.obj2url(t, r)),
        e.open(a, o, !0),
        I.cors.expected && I.cors.sendCredentials && (e.withCredentials = !0),
        L ? (I.paramsInBody && qq.obj2FormData(t, s),
        s.append(I.inputName, i),
        s) : i
    }
    function d(t, e) {
        var i = I.customHeaders
          , n = P[t].file || P[t].blobData.blob;
        e.setRequestHeader("X-Requested-With", "XMLHttpRequest"),
       e.setRequestHeader("Cache-Control", "no-cache"),
        L || (e.setRequestHeader("Content-Type", "application/octet-stream"),
        e.setRequestHeader("X-Mime-Type", n.type)),
        qq.each(i, function(t, i) {
            e.setRequestHeader(t, i)
        }
        )
    }
    function h(t, e, i) {
        var n = F.getName(t)
          , s = F.getSize(t);
        P[t].attemptingResume = !1,
        I.onProgress(t, n, s, s),
        I.onComplete(t, n, e, i),
        delete P[t].xhr,
        M(t)
    }
    function u(t) {
        var e, i, a = P[t].remainingChunkIdxs[0], o = r(t, a), h = l(t), u = F.getSize(t), f = F.getName(t);
        void 0 === P[t].loaded && (P[t].loaded = 0),
        z && P[t].file && C(t, o),
        h.onreadystatechange = k(t, h),
        h.upload.onprogress = function(e) {
            if (e.lengthComputable) {
                var i = e.loaded + P[t].loaded
                  , n = p(t, a, e.total);
                I.onProgress(t, f, i, n)
            }
        }
        ,
        I.onUploadChunk(t, f, w(o)),
        i = I.paramsStore.getParams(t),
        n(t, i, o),
        P[t].attemptingResume && s(i),
        e = c(i, h, o.blob, t),
        d(t, h),
        A("Sending chunked upload request for item " + t + ": bytes " + (o.start + 1) + "-" + o.end + " of " + u),
        h.send(e)
    }
    function p(t, e, i) {
        var n = r(t, e)
          , s = n.size
          , a = i - s
          , o = F.getSize(t)
          , l = n.count
          , c = P[t].initialRequestOverhead
          , d = a - c;
        return P[t].lastRequestOverhead = a,
        0 === e ? (P[t].lastChunkIdxProgress = 0,
        P[t].initialRequestOverhead = a,
        P[t].estTotalRequestsSize = o + l * a) : P[t].lastChunkIdxProgress !== e && (P[t].lastChunkIdxProgress = e,
        P[t].estTotalRequestsSize += d),
        P[t].estTotalRequestsSize
    }
    function f(t) {
        return L ? P[t].lastRequestOverhead : 0
    }
    function m(t, e, i) {
        var n = P[t].remainingChunkIdxs.shift()
          , s = r(t, n);
        P[t].attemptingResume = !1,
        P[t].loaded += s.size + f(t),
        P[t].remainingChunkIdxs.length > 0 ? u(t) : (z && T(t),
        h(t, e, i))
    }
    function g(t, e) {
        return 200 !== t.status || !e.success || e.reset
    }
    function v(t) {
        var e;
        try {
            e = qq.parseJson(t.responseText)
        } catch (i) {
            A("Error when attempting to parse xhr response text (" + i + ")", "error"),
            e = {}
        }
        return e
    }
    function b(t) {
        A("Server has ordered chunking effort to be restarted on next attempt for item ID " + t, "error"),
        z && (T(t),
        P[t].attemptingResume = !1),
        P[t].remainingChunkIdxs = [],
        delete P[t].loaded,
        delete P[t].estTotalRequestsSize,
        delete P[t].initialRequestOverhead
    }
    function _(t) {
        P[t].attemptingResume = !1,
        A("Server has declared that it cannot handle resume for item ID " + t + " - starting from the first chunk", "error"),
        b(t),
        F.upload(t, !0)
    }
    function y(t, e, i) {
        var n = F.getName(t);
        I.onAutoRetry(t, n, e, i) || h(t, e, i)
    }
    function x(t, e) {
        var i;
        P[t] && (A("xhr - server response received for " + t),
        A("responseText = " + e.responseText),
        i = v(e),
        g(e, i) ? (i.reset && b(t),
        P[t].attemptingResume && i.reset ? _(t) : y(t, i, e)) : O ? m(t, i, e) : h(t, i, e))
    }
    function w(t) {
        return {
            partIndex: t.part,
            startByte: t.start + 1,
            endByte: t.end,
            totalParts: t.count
        }
    }
    function k(t, e) {
        return function() {
            4 === e.readyState && x(t, e)
        }
    }
    function C(t, e) {
        var i = F.getUuid(t)
          , n = P[t].loaded
          , s = P[t].initialRequestOverhead
          , a = P[t].estTotalRequestsSize
          , r = D(t)
          , o = i + N + e.part + N + n + N + s + N + a
          , l = I.resume.cookiesExpireIn;
        qq.setCookie(r, o, l)
    }
    function T(t) {
        if (P[t].file) {
            var e = D(t);
            qq.deleteCookie(e)
        }
    }
    function S(t) {
        var e, i, n, s, a, r, o = qq.getCookie(D(t)), l = F.getName(t);
        if (o) {
            if (e = o.split(N),
            5 === e.length)
                return i = e[0],
                n = parseInt(e[1], 10),
                s = parseInt(e[2], 10),
                a = parseInt(e[3], 10),
                r = parseInt(e[4], 10),
                {
                    uuid: i,
                    part: n,
                    lastByteSent: s,
                    initialRequestOverhead: a,
                    estTotalRequestsSize: r
                };
            A("Ignoring previously stored resume/chunk cookie for " + l + " - old cookie format", "warn")
        }
    }
    function D(t) {
        var e, i = F.getName(t), n = F.getSize(t), s = I.chunking.partSize;
        return e = "qqfilechunk" + N + encodeURIComponent(i) + N + n + N + s,
        void 0 !== R && (e += N + R),
        e
    }
    function $() {
        return null  === I.resume.id || void 0 === I.resume.id || qq.isFunction(I.resume.id) || qq.isObject(I.resume.id) ? void 0 : I.resume.id
    function E(t, e) {
        var i, n, s, a = F.getName(t), l = 0;
        if (!P[t].remainingChunkIdxs || 0 === P[t].remainingChunkIdxs.length)
            for (P[t].remainingChunkIdxs = [],
            z && !e && P[t].file && (i = S(t),
            i && (n = r(t, i.part),
            I.onResume(t, a, w(n)) !== !1 && (l = i.part,
            P[t].uuid = i.uuid,
            P[t].loaded = i.lastByteSent,
            P[t].estTotalRequestsSize = i.estTotalRequestsSize,
            P[t].initialRequestOverhead = i.initialRequestOverhead,
            P[t].attemptingResume = !0,
            A("Resuming " + a + " at partition index " + l)))),
            s = o(t) - 1; s >= l; s -= 1)
                P[t].remainingChunkIdxs.unshift(s);
        u(t)
    }
    function q(t) {
        var e, i, n, s = P[t].file || P[t].blobData.blob, a = F.getName(t);
        P[t].loaded = 0,
        e = l(t),
        e.upload.onprogress = function(e) {
            e.lengthComputable && (P[t].loaded = e.loaded,
            I.onProgress(t, a, e.loaded, e.total))
        }
        ,
        e.onreadystatechange = k(t, e),
        i = I.paramsStore.getParams(t),
        n = c(i, e, s, t),
        d(t, e),
        A("Sending upload request for " + t),
        e.send(n)
    }
    var F, I = t, M = e, A = i, P = [], N = "|", O = I.chunking.enabled && qq.isFileChunkingSupported(), z = I.resume.enabled && O && qq.areCookiesEnabled(), R = $(), L = I.forceMultipart || I.paramsInBody;
    return F = {
        add: function(t) {
            var e;
            if (t instanceof File)
                e = P.push({
                    file: t
                }) - 1;
            else {
                if (!(t.blob instanceof Blob))
                    throw new Error("Passed obj in not a File or BlobData (in qq.UploadHandlerXhr)");
                e = P.push({
                    blobData: t
                }) - 1
            }
            return P[e].uuid = qq.getUniqueId(),
            e
        },
        getName: function(t) {
            if (F.isValid(t)) {
                var e = P[t].file
                  , i = P[t].blobData;
                return e ? null  !== e.fileName && void 0 !== e.fileName ? e.fileName : e.name : i.name
            }
            A(t + " is not a valid item ID.", "error")
        },
        getSize: function(t) {
            var e = P[t].file || P[t].blobData.blob;
            return qq.isFileOrInput(e) && null  != e.fileSize ? e.fileSize : e.size
        },
        getFile: function(t) {
            return P[t] ? P[t].file || P[t].blobData.blob : void 0
        },
        getLoaded: function(t) {
            return P[t].loaded || 0
        },
        isValid: function(t) {
            return void 0 !== P[t]
        },
        reset: function() {
            P = []
        },
        getUuid: function(t) {
            return P[t].uuid
        },
        upload: function(t, e) {
            var i = this.getName(t);
            I.onUpload(t, i),
            O ? E(t, e) : q(t)
        },
        cancel: function(t) {
            var e = P[t].xhr;
            I.onCancel(t, this.getName(t)),
            e && (e.onreadystatechange = null ,
            e.abort()),
            z && T(t),
            delete P[t]
        },
        getResumableFilesData: function() {
            var t = []
              , e = [];
            return O && z ? (t = qq.getCookieNames(void 0 === R ? new RegExp("^qqfilechunk\\" + N + ".+\\" + N + "\\d+\\" + N + I.chunking.partSize + "=") : new RegExp("^qqfilechunk\\" + N + ".+\\" + N + "\\d+\\" + N + I.chunking.partSize + "\\" + N + R + "=")),
            qq.each(t, function(t, i) {
                var n = i.split(N)
                  , s = qq.getCookie(i).split(N);
                e.push({
                    name: decodeURIComponent(n[1]),
                    size: n[2],
                    uuid: s[0],
                    partIdx: s[1]
                })
            }
            ),
            e) : []
        }
    }
}
,
function(t) {
    "use strict";
    var e, i, n, s, a, r, o, l, c, d;
    r = ["uploaderType"],
    n = function(t) {
        if (t) {
            var n = l(t);
            o(n),
            e("basic" === a("uploaderType") ? new qq.FineUploaderBasic(n) : new qq.FineUploader(n))
        }
        return i
    }
    ,
    s = function(t, e) {
        var n = i.data("fineuploader");
        return e ? (void 0 === n && (n = {}),
        n[t] = e,
        i.data("fineuploader", n),
        void 0) : void 0 === n ? null  : n[t]
    }
    ,
    e = function(t) {
        return s("uploader", t)
    }
    ,
    a = function(t, e) {
        return s(t, e)
    }
    ,
    o = function(e) {
        var n = e.callbacks = {}
          , s = new qq.FineUploaderBasic;
        t.each(s._options.callbacks, function(e, a) {
            var r, o;
            r = /^on(\w+)/.exec(e)[1],
            r = r.substring(0, 1).toLowerCase() + r.substring(1),
            o = i,
            n[e] = function() {
                var i = a
                  , n = Array.prototype.slice.call(arguments)
                  , l = o.triggerHandler(r, n);
                return void 0 === l && t.inArray(e, s.getPromissoryCallbackNames()) >= 0 ? i() : l
            }
        }
        )
    }
    ,
    l = function(e, n) {
        var s, o;
        return s = void 0 === n ? "basic" !== e.uploaderType ? {
            element: i[0]
        } : {} : n,
        t.each(e, function(e, i) {
            t.inArray(e, r) >= 0 ? a(e, i) : i instanceof t ? s[e] = i[0] : t.isPlainObject(i) ? (s[e] = {},
            l(i, s[e])) : t.isArray(i) ? (o = [],
            t.each(i, function(e, i) {
                i instanceof t ? t.merge(o, i) : o.push(i)
            }
            ),
            s[e] = o) : s[e] = i
        }
        ),
        void 0 === n ? s : void 0
    }
    ,
    c = function(i) {
        return "string" === t.type(i) && !i.match(/^_/) && void 0 !== e()[i]
    }
    ,
    d = function(t) {
        var i = []
          , n = Array.prototype.slice.call(arguments, 1);
        return l(n, i),
        e()[t].apply(e(), i)
    }
    ,
    t.fn.fineUploader = function(s) {
        var a = this
          , r = arguments
          , o = [];
        return this.each(function(l, h) {
            if (i = t(h),
            e() && c(s)) {
                if (o.push(d.apply(a, r)),
                1 === a.length)
                    return !1
            } else
                "object" != typeof s && s ? t.error("Method " + s + " does not exist on jQuery.fineUploader") : n.apply(a, r)
        }
        ),
        1 === o.length ? o[0] : o.length > 1 ? o : this
    }
}
(jQuery),
function() {
    "use strict";
    function t() {
        return "oninput" in document.body ? !0 : (document.body.setAttribute("oninput", "return"),
        "function" == typeof document.body.oninput)
    }
    function e() {
        return "onpropertychanged" in document.body
    }
    var i = this
      , n = i.$
      , s = {
        resize: n.noop
    };
    n.fn.autoResize = function(i) {
        var a = n.extend({}, s, i);
        return this.filter("textarea").each(function() {
            var i = n(this).css({
                "overflow-y": "hidden",
                resize: "none"
            })
              , s = i.height()
              , r = s
              , o = function() {
                var t = i.clone().attr("tab-index", -1).removeAttr("id").removeAttr("name").css({
                    position: "absolute",
                    top: 0,
                    left: -9999
                });
                return t.insertBefore(i)
            }
            ()
              , l = function() {
                var t, e = i.val();
                o.height(0).val(e).scrollTop(9999),
                t = Math.max(s, o.scrollTop()),
                t !== r && (r = t,
                a.resize.call(this),
                i.height(t))
            }
            ;
            i.unbind(".resize"),
            t() ? i.bind("input.resize", l) : e() ? i.bind("propertychanged.resize", l) : i.bind("keypress.resize", l),
            n(".tabs").bind("show", l),
            l()
        }
        ),
        this
    }
}
.call(this),
function(t) {
    t.address = function() {
        var e, i = function(e) {
            t(t.address).trigger(t.extend(t.Event(e), function() {
                for (var e = {}, i = t.address.parameterNames(), n = 0, s = i.length; s > n; n++)
                    e[i[n]] = t.address.parameter(i[n]);
                return {
                    value: t.address.value(),
                    path: t.address.path(),
                    pathNames: t.address.pathNames(),
                    parameterNames: i,
                    parameters: e,
                    queryString: t.address.queryString()
                }
            }
            .call(t.address)))
        }
        , n = function(t) {
            return Array.prototype.slice.call(t)
        }
        , s = function() {
            return t().bind.apply(t(t.address), Array.prototype.slice.call(arguments)),
            t.address
        }
        , a = function() {
            return P.pushState && $.state !== e
        }
        , r = function() {
            return ("/" + N.pathname.replace(new RegExp($.state), "") + N.search + (o() ? "#" + o() : "")).replace(R, "/")
        }
        , o = function() {
            var t = N.href.indexOf("#");
            return -1 != t ? h(N.href.substr(t + 1), D) : ""
        }
        , l = function() {
            return a() ? r() : o()
        }
        , c = function() {
            return "javascript"
        }
        , d = function(t) {
            return t = t.toString(),
            ($.strict && "/" != t.substr(0, 1) ? "/" : "") + t
        }
        , h = function(t, e) {
            return $.crawlable && e ? ("" !== t ? "!" : "") + t : t.replace(/^\!/, "")
        }
        , u = function(t, e) {
            return parseInt(t.css(e), 10)
        }
        , p = function() {
            if (!U) {
                var t = l();
                X != t && (F && 7 > q ? N.reload() : (F && !j && $.history && z(g, 50),
                X = t,
                f(D)))
            }
        }
        , f = function(t) {
            i(k),
            i(t ? C : T),
            z(m, 10)
        }
        , m = function() {
            if ("null" !== $.tracker && null  !== $.tracker) {
                var i = t.isFunction($.tracker) ? $.tracker : M[$.tracker]
                  , n = (N.pathname + N.search + (t.address && !a() ? t.address.value() : "")).replace(/\/\//, "/").replace(/^\/$/, "");
                t.isFunction(i) ? i(n) : t.isFunction(M.urchinTracker) ? M.urchinTracker(n) : M.pageTracker !== e && t.isFunction(M.pageTracker._trackPageview) ? M.pageTracker._trackPageview(n) : M._gaq !== e && t.isFunction(M._gaq.push) && M._gaq.push(["_trackPageview", decodeURI(n)])
            }
        }
        , g = function() {
            var t = c() + ":" + D + ";document.open();document.writeln('<html><head><title>" + A.title.replace(/\'/g, "\\'") + "</title><script>var " + x + ' = "' + l() + (A.domain != N.hostname ? '";document.domain="' + A.domain : "") + "\";</script></head></html>');document.close();";
            7 > q ? L.src = t : L.contentWindow.location.replace(t)
        }
        , v = function() {
            if (H && -1 != B) {
                var t, e, i = H.substr(B + 1).split("&");
                for (t = 0; t < i.length; t++)
                    e = i[t].split("="),
                    /^(autoUpdate|crawlable|history|strict|wrap)$/.test(e[0]) && ($[e[0]] = isNaN(e[1]) ? /^(true|yes)$/i.test(e[1]) : 0 !== parseInt(e[1], 10)),
                    /^(state|tracker)$/.test(e[0]) && ($[e[0]] = e[1]);
                H = null 
            }
            X = l()
        }
        , b = function() {
            if (!Y) {
                Y = S,
                v();
                var n = function() {
                    _.call(this),
                    y.call(this)
                }
                  , s = t("body").ajaxComplete(n);
                n(),
                $.wrap && (t("body > *").wrapAll('<div style="padding:' + (u(s, "marginTop") + u(s, "paddingTop")) + "px " + (u(s, "marginRight") + u(s, "paddingRight")) + "px " + (u(s, "marginBottom") + u(s, "paddingBottom")) + "px " + (u(s, "marginLeft") + u(s, "paddingLeft")) + 'px;" />').parent().wrap('<div id="' + x + '" style="height:100%;overflow:auto;position:relative;' + (I && !window.statusbar.visible ? "resize:both;" : "") + '" />'),
                t("html, body").css({
                    height: "100%",
                    margin: 0,
                    padding: 0,
                    overflow: "hidden"
                }),
                I && t('<style type="text/css" />').appendTo("head").text("#" + x + "::-webkit-resizer { background-color: #fff; }")),
                F && !j && (n = A.getElementsByTagName("frameset")[0],
                L = A.createElement((n ? "" : "i") + "frame"),
                L.src = c() + ":" + D,
                n ? (n.insertAdjacentElement("beforeEnd", L),
                n[n.cols ? "cols" : "rows"] += ",0",
                L.noResize = S,
                L.frameBorder = L.frameSpacing = 0) : (L.style.display = "none",
                L.style.width = L.style.height = 0,
                L.tabIndex = -1,
                A.body.insertAdjacentElement("afterBegin", L)),
                z(function() {
                    t(L).bind("load", function() {
                        var t = L.contentWindow;
                        X = t[x] !== e ? t[x] : "",
                        X != l() && (f(D),
                        N.hash = h(X, S))
                    }
                    ),
                    L.contentWindow[x] === e && g()
                }
                , 50)),
                z(function() {
                    i("init"),
                    f(D)
                }
                , 1),
                a() || (j ? M.addEventListener ? M.addEventListener(w, p, D) : M.attachEvent && M.attachEvent("on" + w, p) : O(p, 50)),
                "state" in window.history && t(window).trigger("popstate")
            }
        }
        , _ = function() {
            var e, i = t("a"), n = i.size(), s = -1, a = function() {
                ++s != n && (e = t(i.get(s)),
                e.is('[rel*="address:"]') && e.address('[rel*="address:"]'),
                z(a, 1))
            }
            ;
            z(a, 1)
        }
        , y = function() {
            if ($.crawlable) {
                var e = N.pathname.replace(/\/$/, "");
                -1 != t("body").html().indexOf("_escaped_fragment_") && t('a[href]:not([href^=http]), a[href*="' + document.domain + '"]').each(function() {
                    var i = t(this).attr("href").replace(/^http:/, "").replace(new RegExp(e + "/?$"), "");
                    ("" === i || -1 != i.indexOf("_escaped_fragment_")) && t(this).attr("href", "#" + encodeURI(decodeURIComponent(i.replace(/\/(.*)\?_escaped_fragment_=(.*)$/, "!$2"))))
                }
                )
            }
        }
        , x = "jQueryAddress", w = "hashchange", k = "change", C = "internalChange", T = "externalChange", S = !0, D = !1, $ = {
            autoUpdate: S,
            crawlable: D,
            history: S,
            strict: S,
            wrap: D
        }, E = t.browser, q = parseFloat(E.version), F = !t.support.opacity, I = E.webkit || E.safari, M = function() {
            try {
                return top.document !== e ? top : window
            } catch (t) {
                return window
            }
        }
        (), A = M.document, P = M.history, N = M.location, O = setInterval, z = setTimeout, R = /\/{2,9}/g;
        E = navigator.userAgent;
        var L, j = "on" + w in M, H = t("script:last").attr("src"), B = H ? H.indexOf("?") : -1, W = A.title, U = D, Y = D, V = S, K = D, X = l();
        if (F) {
            q = parseFloat(E.substr(E.indexOf("MSIE") + 4)),
            A.documentMode && A.documentMode != q && (q = 8 != A.documentMode ? 7 : 8);
            var G = A.onpropertychange;
            A.onpropertychange = function() {
                G && G.call(A),
                A.title != W && -1 != A.title.indexOf("#" + l()) && (A.title = W)
            }
        }
        if (P.navigationMode && (P.navigationMode = "compatible"),
        "complete" == document.readyState)
            var Q = setInterval(function() {
                t.address && (b(),
                clearInterval(Q))
            }
            , 50);
        else
            v(),
            t(b);
        return t(window).bind("popstate", function() {
            X != l() && (X = l(),
            f(D))
        }
        ).bind("unload", function() {
            M.removeEventListener ? M.removeEventListener(w, p, D) : M.detachEvent && M.detachEvent("on" + w, p)
        }
        ),
        {
            bind: function() {
                return s.apply(this, n(arguments))
            },
            init: function() {
                return s.apply(this, ["init"].concat(n(arguments)))
            },
            change: function() {
                return s.apply(this, [k].concat(n(arguments)))
            },
            internalChange: function() {
                return s.apply(this, [C].concat(n(arguments)))
            },
            externalChange: function() {
                return s.apply(this, [T].concat(n(arguments)))
            },
            baseURL: function() {
                var t = N.href;
                return -1 != t.indexOf("#") && (t = t.substr(0, t.indexOf("#"))),
                /\/$/.test(t) && (t = t.substr(0, t.length - 1)),
                t
            },
            autoUpdate: function(t) {
                return t !== e ? ($.autoUpdate = t,
                this) : $.autoUpdate
            },
            crawlable: function(t) {
                return t !== e ? ($.crawlable = t,
                this) : $.crawlable
            },
            history: function(t) {
                return t !== e ? ($.history = t,
                this) : $.history
            },
            state: function(t) {
                if (t !== e) {
                    $.state = t;
                    var i = r();
                    return $.state !== e && (P.pushState ? "/#/" == i.substr(0, 3) && N.replace($.state.replace(/^\/$/, "") + i.substr(2)) : "/" != i && i.replace(/^\/#/, "") != o() && z(function() {
                        N.replace($.state.replace(/^\/$/, "") + "/#" + i)
                    }
                    , 1)),
                    this
                }
                return $.state
            },
            strict: function(t) {
                return t !== e ? ($.strict = t,
                this) : $.strict
            },
            tracker: function(t) {
                return t !== e ? ($.tracker = t,
                this) : $.tracker
            },
            wrap: function(t) {
                return t !== e ? ($.wrap = t,
                this) : $.wrap
            },
            update: function() {
                return K = S,
                this.value(X),
                K = D,
                this
            },
            title: function(t) {
                return t !== e ? (z(function() {
                    W = A.title = t,
                    V && L && L.contentWindow && L.contentWindow.document && (L.contentWindow.document.title = t,
                    V = D)
                }
                , 50),
                this) : A.title
            },
            value: function(t) {
                if (t !== e) {
                    if (t = d(t),
                    "/" == t && (t = ""),
                    X == t && !K)
                        return;
                    return X = t,
                    ($.autoUpdate || K) && (f(S),
                    a() ? P[$.history ? "pushState" : "replaceState"]({}, "", $.state.replace(/\/$/, "") + ("" === X ? "/" : X)) : (U = S,
                    I ? $.history ? N.hash = "#" + h(X, S) : N.replace("#" + h(X, S)) : X != l() && ($.history ? N.hash = "#" + h(X, S) : N.replace("#" + h(X, S))),
                    F && !j && $.history && z(g, 50),
                    I ? z(function() {
                        U = D
                    }
                    , 1) : U = D)),
                    this
                }
                return d(X)
            },
            path: function(t) {
                if (t !== e) {
                    var i = this.queryString()
                      , n = this.hash();
                    return this.value(t + (i ? "?" + i : "") + (n ? "#" + n : "")),
                    this
                }
                return d(X).split("#")[0].split("?")[0]
            },
            pathNames: function() {
                var t = this.path()
                  , e = t.replace(R, "/").split("/");
                return ("/" == t.substr(0, 1) || 0 === t.length) && e.splice(0, 1),
                "/" == t.substr(t.length - 1, 1) && e.splice(e.length - 1, 1),
                e
            },
            queryString: function(t) {
                if (t !== e) {
                    var i = this.hash();
                    return this.value(this.path() + (t ? "?" + t : "") + (i ? "#" + i : "")),
                    this
                }
                return t = X.split("?"),
                t.slice(1, t.length).join("?").split("#")[0]
            },
            parameter: function(i, n, s) {
                var a, r;
                if (n !== e) {
                    var o = this.parameterNames();
                    for (r = [],
                    n = n ? n.toString() : "",
                    a = 0; a < o.length; a++) {
                        var l = o[a]
                          , c = this.parameter(l);
                        "string" == typeof c && (c = [c]),
                        l == i && (c = null  === n || "" === n ? [] : s ? c.concat([n]) : [n]);
                        for (var d = 0; d < c.length; d++)
                            r.push(l + "=" + c[d])
                    }
                    return -1 == t.inArray(i, o) && null  !== n && "" !== n && r.push(i + "=" + n),
                    this.queryString(r.join("&")),
                    this
                }
                if (n = this.queryString()) {
                    for (s = [],
                    r = n.split("&"),
                    a = 0; a < r.length; a++)
                        n = r[a].split("="),
                        n[0] == i && s.push(n.slice(1).join("="));
                    if (0 !== s.length)
                        return 1 != s.length ? s : s[0]
                }
            },
            parameterNames: function() {
                var e = this.queryString()
                  , i = [];
                if (e && -1 != e.indexOf("=")) {
                    e = e.split("&");
                    for (var n = 0; n < e.length; n++) {
                        var s = e[n].split("=")[0];
                        -1 == t.inArray(s, i) && i.push(s)
                    }
                }
                return i
            },
            hash: function(t) {
                return t !== e ? (this.value(X.split("#")[0] + (t ? "#" + t : "")),
                this) : (t = X.split("#"),
                t.slice(1, t.length).join("#"))
            }
        }
    }
    (),
    t.fn.address = function(e) {
        var i;
        return "string" == typeof e && (i = e,
        e = void 0),
        t(this).attr("address") || t(i ? i : this).live("click", function(i) {
            return i.shiftKey || i.ctrlKey || i.metaKey || 2 == i.which ? !0 : void (t(this).is("a") && (i.preventDefault(),
            i = e ? e.call(this) : /address:/.test(t(this).attr("rel")) ? t(this).attr("rel").split("address:")[1].split(" ")[0] : void 0 === t.address.state() || /^\/?$/.test(t.address.state()) ? t(this).attr("href").replace(/^(#\!?|\.)/, "") : t(this).attr("href").replace(new RegExp("^(.*" + t.address.state() + "|\\.)"), ""),
            t.address.value(i)))
        }
        ).live("submit", function(i) {
            t(this).is("form") && (i.preventDefault(),
            i = t(this).attr("action"),
            i = e ? e.call(this) : (-1 != i.indexOf("?") ? i.replace(/&$/, "") : i + "?") + t(this).serialize(),
            t.address.value(i))
        }
        ).attr("address", !0),
        this
    }
}
(jQuery),
function(t) {
    t.scrollUp = function(e) {
        var i = {
            scrollName: "scrollUp",
            topDistance: 300,
            topSpeed: 300,
            animation: "fade",
            animationInSpeed: 200,
            animationOutSpeed: 200,
            scrollText: "Scroll to top",
            scrollImg: !1,
            activeOverlay: !1
        }
          , n = t.extend({}, i, e)
          , s = "#" + n.scrollName;
        t("<a/>", {
            id: n.scrollName,
            href: "#top",
            title: n.scrollText
        }).appendTo("body"),
        n.scrollImg || t(s).html(n.scrollText),
        t(s).css({
            display: "none",
            position: "fixed",
            "z-index": "999"
        }),
        n.activeOverlay && (t("body").append("<div id='" + n.scrollName + "-active'></div>"),
        t(s + "-active").css({
            position: "absolute",
            top: n.topDistance + "px",
            width: "100%",
            "border-top": "1px dotted " + n.activeOverlay,
            "z-index": "2147483647"
        })),
        t(window).scroll(function() {
            switch (n.animation) {
            case "fade":
                t(t(window).scrollTop() > n.topDistance ? t(s).fadeIn(n.animationInSpeed) : t(s).fadeOut(n.animationOutSpeed));
                break;
            case "slide":
                t(t(window).scrollTop() > n.topDistance ? t(s).slideDown(n.animationInSpeed) : t(s).slideUp(n.animationOutSpeed));
                break;
            default:
                t(t(window).scrollTop() > n.topDistance ? t(s).show(0) : t(s).hide(0))
            }
        }
        ),
        t(s).click(function(e) {
            t("html, body").animate({
                scrollTop: 0
            }, n.topSpeed),
            e.preventDefault()
        }
        )
    }
}
(jQuery),
function(t) {
    t.confirm = function(e) {
        if (t("#confirmOverlay").length)
            return !1;
        var i = "";
        t.each(e.buttons, function(t, e) {
            i += '<a href="#" class="button ' + e["class"] + '">' + t + "<span></span></a>",
            e.action || (e.action = function() {}
            )
        }
        );
        var n = ['<div id="confirmOverlay">', '<div id="confirmBox">', "<h1>", e.title, "</h1>", "<p>", e.message, "</p>", '<div id="confirmButtons">', i, "</div></div></div>"].join("");
        t(n).hide().appendTo("body").fadeIn();
        var s = t("#confirmBox .button")
          , a = 0;
        t.each(e.buttons, function(e, i) {
            s.eq(a++).click(function() {
                return i.action(),
                t.confirm.hide(),
                !1
            }
            )
        }
        )
    }
    ,
    t.confirm.hide = function() {
        t("#confirmOverlay").fadeOut(function() {
            t(this).remove()
        }
        )
    }
}
(jQuery),
function(t) {
    "use strict";
    var e = {}
      , i = Math.max
      , n = Math.min;
    e.c = {},
    e.c.d = t(document),
    e.c.t = function(t) {
        return t.originalEvent.touches.length - 1
    }
    ,
    e.o = function() {
        var i = this;
        this.o = null ,
        this.$ = null ,
        this.i = null ,
        this.g = null ,
        this.v = null ,
        this.cv = null ,
        this.x = 0,
        this.y = 0,
        this.w = 0,
        this.h = 0,
        this.$c = null ,
        this.c = null ,
        this.t = 0,
        this.isInit = !1,
        this.fgColor = null ,
        this.pColor = null ,
        this.dH = null ,
        this.cH = null ,
        this.eH = null ,
        this.rH = null ,
        this.scale = 1,
        this.relative = !1,
        this.relativeWidth = !1,
        this.relativeHeight = !1,
        this.$div = null ,
        this.run = function() {
            var e = function(t, e) {
                var n;
                for (n in e)
                    i.o[n] = e[n];
                i.init(),
                i._configure()._draw()
            }
            ;
            if (!this.$.data("kontroled"))
                return this.$.data("kontroled", !0),
                this.extend(),
                this.o = t.extend({
                    min: this.$.data("min") || 0,
                    max: this.$.data("max") || 100,
                    stopper: !0,
                    readOnly: this.$.data("readonly") || "readonly" == this.$.attr("readonly"),
                    cursor: this.$.data("cursor") === !0 && 30 || this.$.data("cursor") || 0,
                    thickness: this.$.data("thickness") || .35,
                    lineCap: this.$.data("linecap") || "butt",
                    width: this.$.data("width") || 200,
                    height: this.$.data("height") || 200,
                    displayInput: null  == this.$.data("displayinput") || this.$.data("displayinput"),
                    displayPrevious: this.$.data("displayprevious"),
                    fgColor: this.$.data("fgcolor") || "#87CEEB",
                    inputColor: this.$.data("inputcolor") || this.$.data("fgcolor") || "#87CEEB",
                    font: this.$.data("font") || "Arial",
                    fontWeight: this.$.data("font-weight") || "bold",
                    inline: !1,
                    step: this.$.data("step") || 1,
                    draw: null ,
                    change: null ,
                    cancel: null ,
                    release: null ,
                    error: null 
                }, this.o),
                this.$.is("fieldset") ? (this.v = {},
                this.i = this.$.find("input"),
                this.i.each(function(e) {
                    var n = t(this);
                    i.i[e] = n,
                    i.v[e] = n.val(),
                    n.bind("change", function() {
                        var t = {};
                        t[e] = n.val(),
                        i.val(t)
                    }
                    )
                }
                ),
                this.$.find("legend").remove()) : (this.i = this.$,
                this.v = this.$.val(),
                "" == this.v && (this.v = this.o.min),
                this.$.bind("change", function() {
                    i.val(i._validate(i.$.val()))
                }
                )),
                !this.o.displayInput && this.$.hide(),
                this.$c = t(document.createElement("canvas")),
                "undefined" != typeof G_vmlCanvasManager && G_vmlCanvasManager.initElement(this.$c[0]),
                this.c = this.$c[0].getContext ? this.$c[0].getContext("2d") : null ,
                this.c ? (this.scale = (window.devicePixelRatio || 1) / (this.c.webkitBackingStorePixelRatio || this.c.mozBackingStorePixelRatio || this.c.msBackingStorePixelRatio || this.c.oBackingStorePixelRatio || this.c.backingStorePixelRatio || 1),
                this.relativeWidth = this.o.width % 1 !== 0 && this.o.width.indexOf("%"),
                this.relativeHeight = this.o.height % 1 !== 0 && this.o.height.indexOf("%"),
                this.relative = this.relativeWidth || this.relativeHeight,
                this.$div = t('<div style="' + (this.o.inline ? "display:inline;" : "") + '"></div>'),
                this.$.wrap(this.$div).before(this.$c),
                this.$div = this.$.parent(),
                this._carve(),
                this.v instanceof Object ? (this.cv = {},
                this.copy(this.v, this.cv)) : this.cv = this.v,
                this.$.bind("configure", e).parent().bind("configure", e),
                this._listen()._configure()._xy().init(),
                this.isInit = !0,
                this._draw(),
                this) : void (this.o.error && this.o.error())
        }
        ,
        this._carve = function() {
            if (this.relative) {
                var t = this.relativeWidth ? this.$div.parent().width() * parseInt(this.o.width) / 100 : this.$div.parent().width()
                  , e = this.relativeHeight ? this.$div.parent().height() * parseInt(this.o.height) / 100 : this.$div.parent().height();
                this.w = this.h = Math.min(t, e)
            } else
                this.w = this.o.width,
                this.h = this.o.height;
            return this.$div.css({
                width: this.w + "px",
                height: this.h + "px"
            }),
            this.$c.attr({
                width: this.w,
                height: this.h
            }),
            1 !== this.scale && (this.$c[0].width = this.$c[0].width * this.scale,
            this.$c[0].height = this.$c[0].height * this.scale,
            this.$c.width(this.w),
            this.$c.height(this.h)),
            this
        }
        ,
        this._draw = function() {
            var t = !0;
            i.g = i.c,
            i.clear(),
            i.dH && (t = i.dH()),
            t !== !1 && i.draw()
        }
        ,
        this._touch = function(t) {
            var n = function(t) {
                var e = i.xy2val(t.originalEvent.touches[i.t].pageX, t.originalEvent.touches[i.t].pageY);
                e != i.cv && (i.cH && i.cH(e) === !1 || (i.change(i._validate(e)),
                i._draw()))
            }
            ;
            return this.t = e.c.t(t),
            n(t),
            e.c.d.bind("touchmove.k", n).bind("touchend.k", function() {
                e.c.d.unbind("touchmove.k touchend.k"),
                i.rH && i.rH(i.cv) === !1 || i.val(i.cv)
            }
            ),
            this
        }
        ,
        this._mouse = function(t) {
            var n = function(t) {
                var e = i.xy2val(t.pageX, t.pageY);
                e != i.cv && (i.cH && i.cH(e) === !1 || (i.change(i._validate(e)),
                i._draw()))
            }
            ;
            return n(t),
            e.c.d.bind("mousemove.k", n).bind("keyup.k", function(t) {
                if (27 === t.keyCode) {
                    if (e.c.d.unbind("mouseup.k mousemove.k keyup.k"),
                    i.eH && i.eH() === !1)
                        return;
                    i.cancel()
                }
            }
            ).bind("mouseup.k", function() {
                e.c.d.unbind("mousemove.k mouseup.k keyup.k"),
                i.rH && i.rH(i.cv) === !1 || i.val(i.cv)
            }
            ),
            this
        }
        ,
        this._xy = function() {
            var t = this.$c.offset();
            return this.x = t.left,
            this.y = t.top,
            this
        }
        ,
        this._listen = function() {
            return this.o.readOnly ? this.$.attr("readonly", "readonly") : (this.$c.bind("mousedown", function(t) {
                t.preventDefault(),
                i._xy()._mouse(t)
            }
            ).bind("touchstart", function(t) {
                t.preventDefault(),
                i._xy()._touch(t)
            }
            ),
            this.relative && t(window).resize(function() {
                i._carve().init(),
                i._draw()
            }
            ),
            this.listen()),
            this
        }
        ,
        this._configure = function() {
            return this.o.draw && (this.dH = this.o.draw),
            this.o.change && (this.cH = this.o.change),
            this.o.cancel && (this.eH = this.o.cancel),
            this.o.release && (this.rH = this.o.release),
            this.o.displayPrevious ? (this.pColor = this.h2rgba(this.o.fgColor, "0.4"),
            this.fgColor = this.h2rgba(this.o.fgColor, "0.6")) : this.fgColor = this.o.fgColor,
            this
        }
        ,
        this._clear = function() {
            this.$c[0].width = this.$c[0].width
        }
        ,
        this._validate = function(t) {
            return ~~((0 > t ? -.5 : .5) + t / this.o.step) * this.o.step
        }
        ,
        this.listen = function() {}
        ,
        this.extend = function() {}
        ,
        this.init = function() {}
        ,
        this.change = function() {}
        ,
        this.val = function() {}
        ,
        this.xy2val = function() {}
        ,
        this.draw = function() {}
        ,
        this.clear = function() {
            this._clear()
        }
        ,
        this.h2rgba = function(t, e) {
            var i;
            return t = t.substring(1, 7),
            i = [parseInt(t.substring(0, 2), 16), parseInt(t.substring(2, 4), 16), parseInt(t.substring(4, 6), 16)],
            "rgba(" + i[0] + "," + i[1] + "," + i[2] + "," + e + ")"
        }
        ,
        this.copy = function(t, e) {
            for (var i in t)
                e[i] = t[i]
        }
    }
    ,
    e.Dial = function() {
        e.o.call(this),
        this.startAngle = null ,
        this.xy = null ,
        this.radius = null ,
        this.lineWidth = null ,
        this.cursorExt = null ,
        this.w2 = null ,
        this.PI2 = 2 * Math.PI,
        this.extend = function() {
            this.o = t.extend({
                bgColor: this.$.data("bgcolor") || "#EEEEEE",
                angleOffset: this.$.data("angleoffset") || 0,
                angleArc: this.$.data("anglearc") || 360,
                inline: !0
            }, this.o)
        }
        ,
        this.val = function(t) {
            return null  == t ? this.v : (this.cv = this.o.stopper ? i(n(t, this.o.max), this.o.min) : t,
            this.v = this.cv,
            this.$.val(this.v),
            this._draw(),
            void 0)
        }
        ,
        this.xy2val = function(t, e) {
            var s, a;
            return s = Math.atan2(t - (this.x + this.w2), -(e - this.y - this.w2)) - this.angleOffset,
            this.angleArc != this.PI2 && 0 > s && s > -.5 ? s = 0 : 0 > s && (s += this.PI2),
            a = ~~(.5 + s * (this.o.max - this.o.min) / this.angleArc) + this.o.min,
            this.o.stopper && (a = i(n(a, this.o.max), this.o.min)),
            a
        }
        ,
        this.listen = function() {
            var e, s, a = this, r = function(t) {
                t.preventDefault();
                var e = t.originalEvent
                  , i = e.detail || e.wheelDeltaX
                  , n = e.detail || e.wheelDeltaY
                  , s = parseInt(a.$.val()) + (i > 0 || n > 0 ? a.o.step : 0 > i || 0 > n ? -a.o.step : 0);
                a.cH && a.cH(s) === !1 || a.val(s)
            }
            , o = 1, l = {
                37: -a.o.step,
                38: a.o.step,
                39: a.o.step,
                40: -a.o.step
            };
            this.$.bind("keydown", function(r) {
                var c = r.keyCode;
                if (c >= 96 && 105 >= c && (c = r.keyCode = c - 48),
                e = parseInt(String.fromCharCode(c)),
                isNaN(e) && (13 !== c && 8 !== c && 9 !== c && 189 !== c && r.preventDefault(),
                t.inArray(c, [37, 38, 39, 40]) > -1)) {
                    r.preventDefault();
                    var d = parseInt(a.$.val()) + l[c] * o;
                    a.o.stopper && (d = i(n(d, a.o.max), a.o.min)),
                    a.change(d),
                    a._draw(),
                    s = window.setTimeout(function() {
                        o *= 2
                    }
                    , 30)
                }
            }
            ).bind("keyup", function() {
                isNaN(e) ? s && (window.clearTimeout(s),
                s = null ,
                o = 1,
                a.val(a.$.val())) : a.$.val() > a.o.max && a.$.val(a.o.max) || a.$.val() < a.o.min && a.$.val(a.o.min)
            }
            ),
            this.$c.bind("mousewheel DOMMouseScroll", r),
            this.$.bind("mousewheel DOMMouseScroll", r)
        }
        ,
        this.init = function() {
            (this.v < this.o.min || this.v > this.o.max) && (this.v = this.o.min),
            this.$.val(this.v),
            this.w2 = this.w / 2,
            this.cursorExt = this.o.cursor / 100,
            this.xy = this.w2 * this.scale,
            this.lineWidth = this.xy * this.o.thickness,
            this.lineCap = this.o.lineCap,
            this.radius = this.xy - this.lineWidth / 2,
            this.o.angleOffset && (this.o.angleOffset = isNaN(this.o.angleOffset) ? 0 : this.o.angleOffset),
            this.o.angleArc && (this.o.angleArc = isNaN(this.o.angleArc) ? this.PI2 : this.o.angleArc),
            this.angleOffset = this.o.angleOffset * Math.PI / 180,
            this.angleArc = this.o.angleArc * Math.PI / 180,
            this.startAngle = 1.5 * Math.PI + this.angleOffset,
            this.endAngle = 1.5 * Math.PI + this.angleOffset + this.angleArc;
            var t = i(String(Math.abs(this.o.max)).length, String(Math.abs(this.o.min)).length, 2) + 2;
            this.o.displayInput && this.i.css({
                width: (this.w / 2 + 4 >> 0) + "px",
                height: (this.w / 3 >> 0) + "px",
                position: "absolute",
                "vertical-align": "middle",
                "margin-top": (this.w / 3 >> 0) + "px",
                "margin-left": "-" + (3 * this.w / 4 + 2 >> 0) + "px",
                border: 0,
                background: "none",
                font: this.o.fontWeight + " " + (this.w / t >> 0) + "px " + this.o.font,
                "text-align": "center",
                color: this.o.inputColor || this.o.fgColor,
                padding: "0px",
                "-webkit-appearance": "none"
            }) || this.i.css({
                width: "0px",
                visibility: "hidden"
            })
        }
        ,
        this.change = function(t) {
            this.cv = t,
            this.$.val(t)
        }
        ,
        this.angle = function(t) {
            return (t - this.o.min) * this.angleArc / (this.o.max - this.o.min)
        }
        ,
        this.draw = function() {
            var t, e, i = this.g, n = this.angle(this.cv), s = this.startAngle, a = s + n, r = 1;
            i.lineWidth = this.lineWidth,
            i.lineCap = this.lineCap,
            this.o.cursor && (s = a - this.cursorExt) && (a += this.cursorExt),
            i.beginPath(),
            i.strokeStyle = this.o.bgColor,
            i.arc(this.xy, this.xy, this.radius, this.endAngle, this.startAngle, !0),
            i.stroke(),
            this.o.displayPrevious && (e = this.startAngle + this.angle(this.v),
            t = this.startAngle,
            this.o.cursor && (t = e - this.cursorExt) && (e += this.cursorExt),
            i.beginPath(),
            i.strokeStyle = this.pColor,
            i.arc(this.xy, this.xy, this.radius, t, e, !1),
            i.stroke(),
            r = this.cv == this.v),
            i.beginPath(),
            i.strokeStyle = r ? this.o.fgColor : this.fgColor,
            i.arc(this.xy, this.xy, this.radius, s, a, !1),
            i.stroke()
        }
        ,
        this.cancel = function() {
            this.val(this.v)
        }
    }
    ,
    t.fn.dial = t.fn.knob = function(i) {
        return this.each(function() {
            var n = new e.Dial;
            n.o = i,
            n.$ = t(this),
            n.run()
        }
        ).parent()
    }
}
(jQuery),
function(t) {
    function e(e, i) {
        var n = t(i);
        return n.length < 2 ? n : e.parent().find(i)
    }
    function i(i, s) {
        var a = this
          , r = i.add(a)
          , o = i.children()
          , l = 0
          , c = s.vertical;
        if (n || (n = a),
        o.length > 1 && (o = t(s.items, i)),
        s.size > 1 && (s.circular = !1),
        t.extend(a, {
            getConf: function() {
                return s
            },
            getIndex: function() {
                return l
            },
            getSize: function() {
                return a.getItems().size()
            },
            getNaviButtons: function() {
                return p.add(f)
            },
            getRoot: function() {
                return i
            },
            getItemWrap: function() {
                return o
            },
            getItems: function() {
                return o.find(s.item).not("." + s.clonedClass)
            },
            move: function(t, e) {
                return a.seekTo(l + t, e)
            },
            next: function(t) {
                return a.move(s.size, t)
            },
            prev: function(t) {
                return a.move(-s.size, t)
            },
            begin: function(t) {
                return a.seekTo(0, t)
            },
            end: function(t) {
                return a.seekTo(a.getSize() - 1, t)
            },
            focus: function() {
                return n = a,
                a
            },
            addItem: function(e) {
                return e = t(e),
                s.circular ? (o.children().last().before(e),
                o.children().first().replaceWith(e.clone().addClass(s.clonedClass))) : (o.append(e),
                f.removeClass("disabled")),
                r.trigger("onAddItem", [e]),
                a
            },
            seekTo: function(e, i, d) {
                if (e.jquery || (e *= 1),
                s.circular && 0 === e && -1 == l && 0 !== i)
                    return a;
                if (!s.circular && 0 > e || e > a.getSize() || -1 > e)
                    return a;
                var h = e;
                e.jquery ? e = a.getItems().index(e) : h = a.getItems().eq(e);
                var u = t.Event("onBeforeSeek");
                if (!d && (r.trigger(u, [e, i]),
                u.isDefaultPrevented() || !h.length))
                    return a;
                var p = c ? {
                    top: -h.position().top
                } : {
                    left: -h.position().left
                };
                return l = e,
                n = a,
                void 0 === i && (i = s.speed),
                o.animate(p, i, s.easing, d || function() {
                    r.trigger("onSeek", [e])
                }
                ),
                a
            }
        }),
        t.each(["onBeforeSeek", "onSeek", "onAddItem"], function(e, i) {
            t.isFunction(s[i]) && t(a).on(i, s[i]),
            a[i] = function(e) {
                return e && t(a).on(i, e),
                a
            }
        }
        ),
        s.circular) {
            var d = a.getItems().slice(-1).clone().prependTo(o)
              , h = a.getItems().eq(1).clone().appendTo(o);
            d.add(h).addClass(s.clonedClass),
            a.onBeforeSeek(function(t, e, i) {
                if (!t.isDefaultPrevented()) {
                    if (-1 == e)
                        return a.seekTo(d, i, function() {
                            a.end(0)
                        }
                        ),
                        t.preventDefault();
                    e == a.getSize() && a.seekTo(h, i, function() {
                        a.begin(0)
                    }
                    )
                }
            }
            );
            var u = i.parents().add(i).filter(function() {
                return "none" === t(this).css("display") ? !0 : void 0
            }
            );
            u.length ? (u.show(),
            a.seekTo(0, 0, function() {}
            ),
            u.hide()) : a.seekTo(0, 0, function() {}
            )
        }
        var p = e(i, s.prev).click(function(t) {
            t.stopPropagation(),
            a.prev()
        }
        )
          , f = e(i, s.next).click(function(t) {
            t.stopPropagation(),
            a.next()
        }
        );
        if (s.circular || (a.onBeforeSeek(function(t, e) {
            setTimeout(function() {
                t.isDefaultPrevented() || (p.toggleClass(s.disabledClass, 0 >= e),
                f.toggleClass(s.disabledClass, e >= a.getSize() - 1))
            }
            , 1)
        }
        ),
        s.initialIndex || p.addClass(s.disabledClass)),
        a.getSize() < 2 && p.add(f).addClass(s.disabledClass),
        s.mousewheel && t.fn.mousewheel && i.mousewheel(function(t, e) {
            return s.mousewheel ? (a.move(0 > e ? 1 : -1, s.wheelSpeed || 50),
            !1) : void 0
        }
        ),
        s.touch) {
            var m = {};
            o[0].ontouchstart = function(t) {
                var e = t.touches[0];
                m.x = e.clientX,
                m.y = e.clientY
            }
            ,
            o[0].ontouchmove = function(t) {
                if (1 == t.touches.length && !o.is(":animated")) {
                    var e = t.touches[0]
                      , i = m.x - e.clientX
                      , n = m.y - e.clientY;
                    a[c && n > 0 || !c && i > 0 ? "next" : "prev"](),
                    t.preventDefault()
                }
            }
        }
        s.keyboard && t(document).on("keydown.scrollable", function(e) {
            if (!(!s.keyboard || e.altKey || e.ctrlKey || e.metaKey || t(e.target).is(":input"))) {
                if ("static" != s.keyboard && n != a)
                    return;
                var i = e.keyCode;
                if (c && (38 == i || 40 == i))
                    return a.move(38 == i ? -1 : 1),
                    e.preventDefault();
                if (!c && (37 == i || 39 == i))
                    return a.move(37 == i ? -1 : 1),
                    e.preventDefault()
            }
        }
        ),
        s.initialIndex && a.seekTo(s.initialIndex, 0, function() {}
        )
    }
    t.tools = t.tools || {
        version: "v1.2.7"
    },
    t.tools.scrollable = {
        conf: {
            activeClass: "active",
            circular: !1,
            clonedClass: "cloned",
            disabledClass: "disabled",
            easing: "swing",
            initialIndex: 0,
            item: "> *",
            items: ".items",
            keyboard: !0,
            mousewheel: !1,
            next: ".next",
            prev: ".prev",
            size: 1,
            speed: 400,
            vertical: !1,
            touch: !0,
            wheelSpeed: 0
        }
    };
    var n;
    t.fn.scrollable = function(e) {
        var n = this.data("scrollable");
        return n ? n : (e = t.extend({}, t.tools.scrollable.conf, e),
        this.each(function() {
            n = new i(t(this),e),
            t(this).data("scrollable", n)
        }
        ),
        e.api ? n : this)
    }
}
(jQuery),
function(t) {
    var e = t.tools.scrollable;
    e.autoscroll = {
        conf: {
            autoplay: !0,
            interval: 3e3,
            autopause: !0
        }
    },
    t.fn.autoscroll = function(i) {
        "number" == typeof i && (i = {
            interval: i
        });
        var n, s = t.extend({}, e.autoscroll.conf, i);
        return this.each(function() {
            function e() {
                i && clearTimeout(i),
                i = setTimeout(function() {
                    a.next()
                }
                , s.interval)
            }
            var i, a = t(this).data("scrollable"), r = a.getRoot(), o = !1;
            a && (n = a),
            a.play = function() {
                i || (o = !1,
                r.on("onSeek", e),
                e())
            }
            ,
            a.pause = function() {
                i = clearTimeout(i),
                r.off("onSeek", e)
            }
            ,
            a.resume = function() {
                o || a.play()
            }
            ,
            a.stop = function() {
                o = !0,
                a.pause()
            }
            ,
            s.autopause && r.add(a.getNaviButtons()).hover(a.pause, a.resume),
            s.autoplay && a.play()
        }
        ),
        s.api ? n : this
    }
}
(jQuery),
function(t) {
    function e(e, i) {
        var n = t(i);
        return n.length < 2 ? n : e.parent().find(i)
    }
    var i = t.tools.scrollable;
    i.navigator = {
        conf: {
            navi: ".navi",
            naviItem: null ,
            activeClass: "active",
            indexed: !1,
            idPrefix: null ,
            history: !1
        }
    },
    t.fn.navigator = function(n) {
        "string" == typeof n && (n = {
            navi: n
        }),
        n = t.extend({}, i.navigator.conf, n);
        var s;
        return this.each(function() {
            function i(t, e, i) {
                o.seekTo(e),
                i.preventDefault(),
                h && history.pushState({
                    i: e
                }, "")
            }
            function a() {
                return l.find(n.naviItem || "> *")
            }
            function r(e) {
                var s = t("<" + (n.naviItem || "a") + "/>").click(function(n) {
                    i(t(this), e, n)
                }
                );
                return 0 === e && s.addClass(d),
                n.indexed && s.text(e + 1),
                n.idPrefix && s.attr("id", n.idPrefix + e),
                s.appendTo(l)
            }
            var o = t(this).data("scrollable")
              , l = n.navi.jquery ? n.navi : e(o.getRoot(), n.navi)
              , c = o.getNaviButtons()
              , d = n.activeClass
              , h = n.history && history.pushState
              , u = o.getConf().size;
            o && (s = o),
            o.getNaviButtons = function() {
                return c.add(l)
            }
            ,
            h && (history.pushState({
                i: 0
            }, ""),
            t(window).on("popstate", function(t) {
                var e = t.originalEvent.state;
                e && o.seekTo(e.i)
            }
            )),
            a().length ? a().each(function(e) {
                t(this).click(function(n) {
                    i(t(this), e, n)
                }
                )
            }
            ) : t.each(o.getItems(), function(t) {
                t % u == 0 && r(t)
            }
            ),
            o.onBeforeSeek(function(t, e) {
                setTimeout(function() {
                    if (!t.isDefaultPrevented()) {
                        var i = e / u
                          , n = a().eq(i);
                        n.length && a().removeClass(d).eq(i).addClass(d)
                    }
                }
                , 1)
            }
            ),
            o.onAddItem(function(t, e) {
                var i = o.getItems().index(e);
                i % u == 0 && r(i)
            }
            )
        }
        ),
        n.api ? s : this
    }
}
(jQuery),
function(t) {
    function e(t, e, i) {
        var n = parseInt(t.css("top"), 10);
        if ("left" == e) {
            var s = "-" + this.image_wrapper_height + "px";
            t.css("top", this.image_wrapper_height + "px")
        } else {
            var s = this.image_wrapper_height + "px";
            t.css("top", "-" + this.image_wrapper_height + "px")
        }
        return i && (i.css("bottom", "-" + i[0].offsetHeight + "px"),
        i.animate({
            bottom: 0
        }, 2 * this.settings.animation_speed)),
        this.current_description && this.current_description.animate({
            bottom: "-" + this.current_description[0].offsetHeight + "px"
        }, 2 * this.settings.animation_speed),
        {
            old_image: {
                top: s
            },
            new_image: {
                top: n
            }
        }
    }
    function i(t, e, i) {
        var n = parseInt(t.css("left"), 10);
        if ("left" == e) {
            var s = "-" + this.image_wrapper_width + "px";
            t.css("left", this.image_wrapper_width + "px")
        } else {
            var s = this.image_wrapper_width + "px";
            t.css("left", "-" + this.image_wrapper_width + "px")
        }
        return i && (i.css("bottom", "-" + i[0].offsetHeight + "px"),
        i.animate({
            bottom: 0
        }, 2 * this.settings.animation_speed)),
        this.current_description && this.current_description.animate({
            bottom: "-" + this.current_description[0].offsetHeight + "px"
        }, 2 * this.settings.animation_speed),
        {
            old_image: {
                left: s
            },
            new_image: {
                left: n
            }
        }
    }
    function n(t) {
        var e = t.width()
          , i = t.height()
          , n = parseInt(t.css("left"), 10)
          , s = parseInt(t.css("top"), 10);
        return t.css({
            width: 0,
            height: 0,
            top: this.image_wrapper_height / 2,
            left: this.image_wrapper_width / 2
        }),
        {
            old_image: {
                width: 0,
                height: 0,
                top: this.image_wrapper_height / 2,
                left: this.image_wrapper_width / 2
            },
            new_image: {
                width: e,
                height: i,
                top: s,
                left: n
            }
        }
    }
    function s(t) {
        return t.css("opacity", 0),
        {
            old_image: {
                opacity: 0
            },
            new_image: {
                opacity: 1
            }
        }
    }
    function a(t) {
        return t.css("opacity", 0),
        {
            old_image: {
                opacity: 0
            },
            new_image: {
                opacity: 1
            },
            speed: 0
        }
    }
    function r(t, e) {
        this.init(t, e)
    }
    function o(t, e) {
        this.init(t, e)
    }
    t.fn.adGallery = function(e) {
        var i = {
            loader_image: "loader.gif",
            start_at_index: 0,
            update_window_hash: !0,
            description_wrapper: !1,
            thumb_opacity: .7,
            animate_first_image: !1,
            animation_speed: 400,
            width: !1,
            height: !1,
            display_next_and_prev: !0,
            display_back_and_forward: !0,
            scroll_jump: 0,
            slideshow: {
                enable: !0,
                autostart: !1,
                speed: 5e3,
                start_label: "Start",
                stop_label: "Stop",
                stop_on_scroll: !0,
                countdown_prefix: "(",
                countdown_sufix: ")",
                onStart: !1,
                onStop: !1
            },
            effect: "slide-hori",
            enable_keyboard_move: !0,
            cycle: !0,
            hooks: {
                displayDescription: !1
            },
            callbacks: {
                init: !1,
                afterImageVisible: !1,
                beforeImageVisible: !1
            }
        }
          , n = t.extend(!1, i, e);
        e && e.slideshow && (n.slideshow = t.extend(!1, i.slideshow, e.slideshow)),
        n.slideshow.enable || (n.slideshow.autostart = !1);
        var s = [];
        return t(this).each(function() {
            var t = new r(this,n);
            s[s.length] = t
        }
        ),
        s
    }
    ,
    r.prototype = {
        wrapper: !1,
        image_wrapper: !1,
        gallery_info: !1,
        nav: !1,
        loader: !1,
        preloads: !1,
        thumbs_wrapper: !1,
        thumbs_wrapper_width: 0,
        scroll_back: !1,
        scroll_forward: !1,
        next_link: !1,
        prev_link: !1,
        slideshow: !1,
        image_wrapper_width: 0,
        image_wrapper_height: 0,
        current_index: -1,
        current_image: !1,
        current_description: !1,
        nav_display_width: 0,
        settings: !1,
        images: !1,
        in_transition: !1,
        animations: !1,
        init: function(e, i) {
            var n = this;
            this.wrapper = t(e),
            this.settings = i,
            this.setupElements(),
            this.setupAnimations(),
            this.settings.width ? (this.image_wrapper_width = this.settings.width,
            this.image_wrapper.width(this.settings.width),
            this.wrapper.width(this.settings.width)) : this.image_wrapper_width = this.image_wrapper.width(),
            this.settings.height ? (this.image_wrapper_height = this.settings.height,
            this.image_wrapper.height(this.settings.height)) : this.image_wrapper_height = this.image_wrapper.height(),
            this.nav_display_width = this.nav.width(),
            this.current_index = -1,
            this.current_image = !1,
            this.current_description = !1,
            this.in_transition = !1,
            this.findImages(),
            this.settings.display_next_and_prev && this.initNextAndPrev();
            var s = function(t) {
                return n.nextImage(t)
            }
            ;
            this.slideshow = new o(s,this.settings.slideshow),
            this.controls.append(this.slideshow.create()),
            this.settings.slideshow.enable ? this.slideshow.enable() : this.slideshow.disable(),
            this.settings.display_back_and_forward && this.initBackAndForward(),
            this.settings.enable_keyboard_move && this.initKeyEvents(),
            this.initHashChange();
            var a = parseInt(this.settings.start_at_index, 10);
            "undefined" != typeof this.getIndexFromHash() && (a = this.getIndexFromHash()),
            this.loading(!0),
            this.showImage(a, function() {
                n.settings.slideshow.autostart && (n.preloadImage(a + 1),
                n.slideshow.start())
            }
            ),
            this.fireCallback(this.settings.callbacks.init)
        },
        setupAnimations: function() {
            this.animations = {
                "slide-vert": e,
                "slide-hori": i,
                resize: n,
                fade: s,
                none: a
            }
        },
        setupElements: function() {
            this.controls = this.wrapper.find(".ad-controls"),
            this.gallery_info = t('<p class="ad-info"></p>'),
            this.controls.append(this.gallery_info),
            this.image_wrapper = this.wrapper.find(".ad-image-wrapper"),
            this.image_wrapper.empty(),
            this.nav = this.wrapper.find(".ad-nav"),
            this.thumbs_wrapper = this.nav.find(".ad-thumbs"),
            this.preloads = t('<div class="ad-preloads"></div>'),
            this.loader = t('<img class="ad-loader" src="' + this.settings.loader_image + '">'),
            this.image_wrapper.append(this.loader),
            this.loader.hide(),
            t(document.body).append(this.preloads)
        },
        loading: function(t) {
            t ? this.loader.show() : this.loader.hide()
        },
        addAnimation: function(e, i) {
            t.isFunction(i) && (this.animations[e] = i)
        },
        findImages: function() {
            var e = this;
            this.images = [];
            var i = 0
              , n = this.thumbs_wrapper.find("a")
              , s = n.length;
            this.settings.thumb_opacity < 1 && n.find("img").css("opacity", this.settings.thumb_opacity),
            n.each(function(n) {
                var s = t(this);
                s.data("ad-i", n);
                var a = s.attr("href")
                  , r = s.find("img");
                e.whenImageLoaded(r[0], function() {
                    var t = r[0].parentNode.parentNode.offsetWidth;
                    0 == r[0].width && (t = 100),
                    e.thumbs_wrapper_width += t,
                    i++
                }
                ),
                e._initLink(s),
                e.images[n] = e._createImageData(s, a)
            }
            );
            var a = setInterval(function() {
                s == i && (e._setThumbListWidth(e.thumbs_wrapper_width),
                clearInterval(a))
            }
            , 100)
        },
        _setThumbListWidth: function(t) {
            t -= 100;
            var e = this.nav.find(".ad-thumb-list");
            e.css("width", t + "px");
            for (var i = 1, n = e.height(); 201 > i && (e.css("width", t + i + "px"),
            n == e.height()); )
                n = e.height(),
                i++;
            e.width() < this.nav.width() && e.width(this.nav.width())
        },
        _initLink: function(e) {
            var i = this;
            e.click(function() {
                return i.showImage(e.data("ad-i")),
                i.slideshow.stop(),
                !1
            }
            ).hover(function() {
                !t(this).is(".ad-active") && i.settings.thumb_opacity < 1 && t(this).find("img").fadeTo(300, 1),
                i.preloadImage(e.data("ad-i"))
            }
            , function() {
                !t(this).is(".ad-active") && i.settings.thumb_opacity < 1 && t(this).find("img").fadeTo(300, i.settings.thumb_opacity)
            }
            )
        },
        _createImageData: function(t, e) {
            var i = !1
              , n = t.find("img");
            n.data("ad-link") ? i = t.data("ad-link") : n.attr("longdesc") && n.attr("longdesc").length && (i = n.attr("longdesc"));
            var s = !1;
            n.data("ad-desc") ? s = n.data("ad-desc") : n.attr("alt") && n.attr("alt").length && (s = n.attr("alt"));
            var a = !1;
            return n.data("ad-title") ? a = n.data("ad-title") : n.attr("title") && n.attr("title").length && (a = n.attr("title")),
            {
                thumb_link: t,
                image: e,
                error: !1,
                preloaded: !1,
                desc: s,
                title: a,
                size: !1,
                link: i
            }
        },
        initKeyEvents: function() {
            var e = this;
            t(document).keydown(function(t) {
                39 == t.keyCode ? (e.nextImage(),
                e.slideshow.stop()) : 37 == t.keyCode && (e.prevImage(),
                e.slideshow.stop())
            }
            )
        },
        getIndexFromHash: function() {
            if (window.location.hash && 0 === window.location.hash.indexOf("#ad-image-")) {
                var t = window.location.hash.replace(/^#ad-image-/g, "")
                  , e = this.thumbs_wrapper.find("#" + t);
                if (e.length)
                    return this.thumbs_wrapper.find("a").index(e);
                if (!isNaN(parseInt(t, 10)))
                    return parseInt(t, 10)
            }
            return void 0
        },
        removeImage: function(e) {
            if (0 > e || e >= this.images.length)
                throw "Cannot remove image for index " + e;
            var i = this.images[e];
            this.images.splice(e, 1);
            var n = i.thumb_link
              , s = n[0].parentNode.offsetWidth;
            this.thumbs_wrapper_width -= s,
            n.remove(),
            this._setThumbListWidth(this.thumbs_wrapper_width),
            this.gallery_info.html(this.current_index + 1 + " / " + this.images.length),
            this.thumbs_wrapper.find("a").each(function(e) {
                t(this).data("ad-i", e)
            }
            ),
            e == this.current_index && 0 != this.images.length && this.showImage(0)
        },
        removeAllImages: function() {
            for (var t = this.images.length - 1; t >= 0; t--)
                this.removeImage(t)
        },
        addImage: function(e, i, n, s, a) {
            n = n || "",
            s = s || "",
            a = a || "";
            var r = t('<li><a href="' + i + '" id="' + n + '"><img src="' + e + '" title="' + s + '" alt="' + a + '"></a></li>')
              , o = this;
            this.thumbs_wrapper.find("ul").append(r);
            var l = r.find("a")
              , c = l.find("img");
            c.css("opacity", this.settings.thumb_opacity),
            this.whenImageLoaded(c[0], function() {
                var t = c[0].parentNode.parentNode.offsetWidth;
                0 == c[0].width && (t = 100),
                o.thumbs_wrapper_width += t,
                o._setThumbListWidth(o.thumbs_wrapper_width)
            }
            );
            var d = this.images.length;
            l.data("ad-i", d),
            this._initLink(l),
            this.images[d] = o._createImageData(l, i),
            this.gallery_info.html(this.current_index + 1 + " / " + this.images.length)
        },
        initHashChange: function() {
            var e = this;
            if ("onhashchange" in window)
                t(window).bind("hashchange", function() {
                    var t = e.getIndexFromHash();
                    "undefined" != typeof t && t != e.current_index && e.showImage(t)
                }
                );
            else {
                var i = window.location.hash;
                setInterval(function() {
                    if (window.location.hash != i) {
                        i = window.location.hash;
                        var t = e.getIndexFromHash();
                        "undefined" != typeof t && t != e.current_index && e.showImage(t)
                    }
                }
                , 200)
            }
        },
        initNextAndPrev: function() {
            this.next_link = t('<div class="ad-next"><div class="ad-next-image"><i class="a-icon-chevron-right a-icon-white"></i></div></div>'),
            this.prev_link = t('<div class="ad-prev"><div class="ad-prev-image"><i class="a-icon-chevron-left a-icon-white"></i></div></div>'),
            this.image_wrapper.append(this.next_link),
            this.image_wrapper.append(this.prev_link);
            var e = this;
            this.prev_link.add(this.next_link).mouseover(function() {
                t(this).css("height", e.image_wrapper_height),
                t(this).find("div").show()
            }
            ).mouseout(function() {
                t(this).find("div").hide()
            }
            ).click(function() {
                t(this).is(".ad-next") ? (e.nextImage(),
                e.slideshow.stop()) : (e.prevImage(),
                e.slideshow.stop())
            }
            ).find("div").css("opacity", .7)
        },
        initBackAndForward: function() {
            var e = this;
            this.scroll_forward = t('<div class="ad-forward"><i class="a-icon-chevron-right"></i></div>'),
            this.scroll_back = t('<div class="ad-back"><i class="a-icon-chevron-left"></i></div>'),
            this.nav.append(this.scroll_forward),
            this.nav.prepend(this.scroll_back);
            var i = 0
              , n = !1;
            t(this.scroll_back).add(this.scroll_forward).click(function() {
                var i = e.nav_display_width - 50;
                if (e.settings.scroll_jump > 0)
                    var i = e.settings.scroll_jump;
                if (t(this).is(".ad-forward"))
                    var n = e.thumbs_wrapper.scrollLeft() + i;
                else
                    var n = e.thumbs_wrapper.scrollLeft() - i;
                return e.settings.slideshow.stop_on_scroll && e.slideshow.stop(),
                e.thumbs_wrapper.animate({
                    scrollLeft: n + "px"
                }),
                !1
            }
            ).css("opacity", .6).hover(function() {
                var s = "left";
                t(this).is(".ad-forward") && (s = "right"),
                n = setInterval(function() {
                    i++,
                    i > 30 && e.settings.slideshow.stop_on_scroll && e.slideshow.stop();
                    var t = e.thumbs_wrapper.scrollLeft() + 1;
                    "left" == s && (t = e.thumbs_wrapper.scrollLeft() - 1),
                    e.thumbs_wrapper.scrollLeft(t)
                }
                , 10),
                t(this).css("opacity", 1)
            }
            , function() {
                i = 0,
                clearInterval(n),
                t(this).css("opacity", .6)
            }
            )
        },
        _afterShow: function() {
            if (this.gallery_info.html(this.current_index + 1 + " / " + this.images.length),
            this.settings.cycle || (this.prev_link.show().css("height", this.image_wrapper_height),
            this.next_link.show().css("height", this.image_wrapper_height),
            this.current_index == this.images.length - 1 && this.next_link.hide(),
            0 == this.current_index && this.prev_link.hide()),
            this.settings.update_window_hash) {
                var t = this.images[this.current_index].thumb_link;
                window.location.hash = t.attr("id") ? "#ad-image-" + t.attr("id") : "#ad-image-" + this.current_index
            }
            this.fireCallback(this.settings.callbacks.afterImageVisible)
        },
        _getContainedImageSize: function(t, e) {
            if (e > this.image_wrapper_height) {
                var i = t / e;
                e = this.image_wrapper_height,
                t = this.image_wrapper_height * i
            }
            if (t > this.image_wrapper_width) {
                var i = e / t;
                t = this.image_wrapper_width,
                e = this.image_wrapper_width * i
            }
            return {
                width: t,
                height: e
            }
        },
        _centerImage: function(t, e, i) {
            if (t.css("top", "0px"),
            i < this.image_wrapper_height) {
                var n = this.image_wrapper_height - i;
                t.css("top", n / 2 + "px")
            }
            if (t.css("left", "0px"),
            e < this.image_wrapper_width) {
                var n = this.image_wrapper_width - e;
                t.css("left", n / 2 + "px")
            }
        },
        _getDescription: function(e) {
            var i = !1;
            if (e.desc.length || e.title.length) {
                var n = "";
                e.title.length && (n = '<strong class="ad-description-title">' + e.title + "</strong>");
                var i = "";
                e.desc.length && (i = "<span>" + e.desc + "</span>"),
                i = t('<p class="ad-image-description">' + n + i + "</p>")
            }
            return i
        },
        showImage: function(t, e) {
            if (this.images[t] && !this.in_transition && t != this.current_index) {
                var i = this
                  , n = this.images[t];
                this.in_transition = !0,
                n.preloaded ? this._showWhenLoaded(t, e) : (this.loading(!0),
                this.preloadImage(t, function() {
                    i.loading(!1),
                    i._showWhenLoaded(t, e)
                }
                ))
            }
        },
        _showWhenLoaded: function(e, i) {
            if (this.images[e]) {
                var n = this
                  , s = this.images[e]
                  , a = t(document.createElement("div")).addClass("ad-image")
                  , r = t(new Image).attr("src", s.image);
                if (s.link) {
                    var o = t('<a href="' + s.link + '" target="_blank"></a>');
                    o.append(r),
                    a.append(o)
                } else
                    a.append(r);
                this.image_wrapper.prepend(a);
                var l = this._getContainedImageSize(s.size.width, s.size.height);
                r.attr("width", l.width),
                r.attr("height", l.height),
                a.css({
                    width: l.width + "px",
                    height: l.height + "px"
                }),
                this._centerImage(a, l.width, l.height);
                var c = this._getDescription(s);
                if (c)
                    if (this.settings.description_wrapper || this.settings.hooks.displayDescription)
                        if (this.settings.hooks.displayDescription)
                            this.settings.hooks.displayDescription.call(this, s);
                        else {
                            var d = this.settings.description_wrapper;
                            d.append(c)
                        }
                    else {
                        a.append(c);
                        var h = l.width - parseInt(c.css("padding-left"), 10) - parseInt(c.css("padding-right"), 10);
                        c.css("width", h + "px")
                    }
                this.highLightThumb(this.images[e].thumb_link);
                var u = "right";
                if (this.current_index < e && (u = "left"),
                this.fireCallback(this.settings.callbacks.beforeImageVisible),
                this.current_image || this.settings.animate_first_image) {
                    var p = this.settings.animation_speed
                      , f = "swing"
                      , m = this.animations[this.settings.effect].call(this, a, u, c);
                    if ("undefined" != typeof m.speed && (p = m.speed),
                    "undefined" != typeof m.easing && (f = m.easing),
                    this.current_image) {
                        var g = this.current_image
                          , v = this.current_description;
                        g.animate(m.old_image, p, f, function() {
                            g.remove(),
                            v && v.remove()
                        }
                        )
                    }
                    a.animate(m.new_image, p, f, function() {
                        n.current_index = e,
                        n.current_image = a,
                        n.current_description = c,
                        n.in_transition = !1,
                        n._afterShow(),
                        n.fireCallback(i)
                    }
                    )
                } else
                    this.current_index = e,
                    this.current_image = a,
                    n.current_description = c,
                    this.in_transition = !1,
                    n._afterShow(),
                    this.fireCallback(i)
            }
        },
        nextIndex: function() {
            if (this.current_index == this.images.length - 1) {
                if (!this.settings.cycle)
                    return !1;
                var t = 0
            } else
                var t = this.current_index + 1;
            return t
        },
        nextImage: function(t) {
            var e = this.nextIndex();
            return e === !1 ? !1 : (this.preloadImage(e + 1),
            this.showImage(e, t),
            !0)
        },
        prevIndex: function() {
            if (0 == this.current_index) {
                if (!this.settings.cycle)
                    return !1;
                var t = this.images.length - 1
            } else
                var t = this.current_index - 1;
            return t
        },
        prevImage: function(t) {
            var e = this.prevIndex();
            return e === !1 ? !1 : (this.preloadImage(e - 1),
            this.showImage(e, t),
            !0)
        },
        preloadAll: function() {
            function t() {
                i < e.images.length && (i++,
                e.preloadImage(i, t))
            }
            var e = this
              , i = 0;
            e.preloadImage(i, t)
        },
        preloadImage: function(e, i) {
            if (this.images[e]) {
                var n = this.images[e];
                if (this.images[e].preloaded)
                    this.fireCallback(i);
                else {
                    var s = t(new Image);
                    if (s.attr("src", n.image),
                    this.isImageLoaded(s[0]))
                        n.preloaded = !0,
                        n.size = {
                            width: s[0].width,
                            height: s[0].height
                        },
                        this.fireCallback(i);
                    else {
                        this.preloads.append(s);
                        var a = this;
                        s.load(function() {
                            n.preloaded = !0,
                            n.size = {
                                width: this.width,
                                height: this.height
                            },
                            a.fireCallback(i)
                        }
                        ).error(function() {
                            n.error = !0,
                            n.preloaded = !1,
                            n.size = !1
                        }
                        )
                    }
                }
            }
        },
        whenImageLoaded: function(e, i) {
            this.isImageLoaded(e) ? i && i() : t(e).load(i)
        },
        isImageLoaded: function(t) {
            return "undefined" == typeof t.complete || t.complete ? "undefined" != typeof t.naturalWidth && 0 == t.naturalWidth ? !1 : !0 : !1
        },
        highLightThumb: function(t) {
            this.thumbs_wrapper.find(".ad-active").removeClass("ad-active"),
            t.addClass("ad-active"),
            this.settings.thumb_opacity < 1 && (this.thumbs_wrapper.find("a:not(.ad-active) img").fadeTo(300, this.settings.thumb_opacity),
            t.find("img").fadeTo(300, 1));
            var e = t[0].parentNode.offsetLeft;
            e -= this.nav_display_width / 2 - t[0].offsetWidth / 2,
            this.thumbs_wrapper.animate({
                scrollLeft: e + "px"
            })
        },
        fireCallback: function(e) {
            t.isFunction(e) && e.call(this)
        }
    },
    o.prototype = {
        start_link: !1,
        stop_link: !1,
        countdown: !1,
        controls: !1,
        settings: !1,
        nextimage_callback: !1,
        enabled: !1,
        running: !1,
        countdown_interval: !1,
        init: function(t, e) {
            this.nextimage_callback = t,
            this.settings = e
        },
        create: function() {
            this.start_link = t('<span class="ad-slideshow-start">' + this.settings.start_label + "</span>"),
            this.stop_link = t('<span class="ad-slideshow-stop">' + this.settings.stop_label + "</span>"),
            this.countdown = t('<span class="ad-slideshow-countdown"></span>'),
            this.controls = t('<div class="ad-slideshow-controls"></div>'),
            this.controls.append(this.start_link).append(this.stop_link).append(this.countdown),
            this.countdown.hide();
            var e = this;
            return this.start_link.click(function() {
                e.start()
            }
            ),
            this.stop_link.click(function() {
                e.stop()
            }
            ),
            t(document).keydown(function(t) {
                83 == t.keyCode && (e.running ? e.stop() : e.start())
            }
            ),
            this.controls
        },
        disable: function() {
            this.enabled = !1,
            this.stop(),
            this.controls.hide()
        },
        enable: function() {
            this.enabled = !0,
            this.controls.show()
        },
        toggle: function() {
            this.enabled ? this.disable() : this.enable()
        },
        start: function() {
            if (this.running || !this.enabled)
                return !1;
            return this.running = !0,
            this.controls.addClass("ad-slideshow-running"),
            this._next(),
            this.fireCallback(this.settings.onStart),
            !0
        },
        stop: function() {
            return this.running ? (this.running = !1,
            this.countdown.hide(),
            this.controls.removeClass("ad-slideshow-running"),
            clearInterval(this.countdown_interval),
            this.fireCallback(this.settings.onStop),
            !0) : !1
        },
        _next: function() {
            var t = this
              , e = this.settings.countdown_prefix
              , i = this.settings.countdown_sufix;
            clearInterval(t.countdown_interval),
            this.countdown.show().html(e + this.settings.speed / 1e3 + i);
            var n = 0;
            this.countdown_interval = setInterval(function() {
                if (n += 1e3,
                n >= t.settings.speed) {
                    var s = function() {
                        t.running && t._next(),
                        n = 0
                    }
                    ;
                    t.nextimage_callback(s) || t.stop(),
                    n = 0
                }
                var a = parseInt(t.countdown.text().replace(/[^0-9]/g, ""), 10);
                a--,
                a > 0 && t.countdown.html(e + a + i)
            }
            , 1e3)
        },
        fireCallback: function(e) {
            t.isFunction(e) && e.call(this)
        }
    }
}
(jQuery),
!function(t, e, i) {
    !function(t) {
        "use strict";
        "function" == typeof define && define.amd ? define(["jquery", "imagesloaded"], t) : jQuery && !jQuery.fn.qtip && t(jQuery)
    }
    (function(n) {
        function s(t, e, i, s) {
            this.id = i,
            this.target = t,
            this.tooltip = C,
            this.elements = elements = {
                target: t
            },
            this._id = M + "-" + i,
            this.timers = {
                img: {}
            },
            this.options = e,
            this.plugins = {},
            this.cache = cache = {
                event: {},
                target: n(),
                disabled: k,
                attr: s,
                onTooltip: k,
                lastClass: ""
            },
            this.rendered = this.destroyed = this.disabled = this.waiting = this.hiddenDuringWait = this.positioning = this.triggering = k
        }
        function a(t) {
            return t === C || "object" !== n.type(t)
        }
        function r(t) {
            return !(n.isFunction(t) || t && t.attr || t.length || "object" === n.type(t) && (t.jquery || t.then))
        }
        function o(t) {
            var e, i, s, o;
            return a(t) ? k : (a(t.metadata) && (t.metadata = {
                type: t.metadata
            }),
            "content" in t && (e = t.content,
            a(e) || e.jquery || e.done ? e = t.content = {
                text: i = r(e) ? k : e
            } : i = e.text,
            "ajax" in e && (s = e.ajax,
            o = s && s.once !== k,
            delete e.ajax,
            e.text = function(t, e) {
                var a = i || n(this).attr(e.options.content.attr) || "Loading..."
                  , r = n.ajax(n.extend({}, s, {
                    context: e
                })).then(s.success, C, s.error).then(function(t) {
                    return t && o && e.set("content.text", t),
                    t
                }
                , function(t, i, n) {
                    e.destroyed || 0 === t.status || e.set("content.text", i + ": " + n)
                }
                );
                return o ? a : (e.set("content.text", a),
                r)
            }
            ),
            "title" in e && (a(e.title) || (e.button = e.title.button,
            e.title = e.title.text),
            r(e.title || k) && (e.title = k))),
            "position" in t && a(t.position) && (t.position = {
                my: t.position,
                at: t.position
            }),
            "show" in t && a(t.show) && (t.show = t.show.jquery ? {
                target: t.show
            } : t.show === w ? {
                ready: w
            } : {
                event: t.show
            }),
            "hide" in t && a(t.hide) && (t.hide = t.hide.jquery ? {
                target: t.hide
            } : {
                event: t.hide
            }),
            "style" in t && a(t.style) && (t.style = {
                classes: t.style
            }),
            n.each(I, function() {
                this.sanitize && this.sanitize(t)
            }
            ),
            t)
        }
        function l(t, e) {
            for (var i, n = 0, s = t, a = e.split("."); s = s[a[n++]]; )
                n < a.length && (i = s);
            return [i || t, a.pop()]
        }
        function c(t, e) {
            var i, n, s;
            for (i in this.checks)
                for (n in this.checks[i])
                    (s = new RegExp(n,"i").exec(t)) && (e.push(s),
                    ("builtin" === i || this.plugins[i]) && this.checks[i][n].apply(this.plugins[i] || this, e))
        }
        function d(t) {
            return N.concat("").join(t ? "-" + t + " " : " ")
        }
        function h(t) {
            if (this.tooltip.hasClass(B))
                return k;
            clearTimeout(this.timers.show),
            clearTimeout(this.timers.hide);
            var e = n.proxy(function() {
                this.toggle(w, t)
            }
            , this);
            this.options.show.delay > 0 ? this.timers.show = setTimeout(e, this.options.show.delay) : e()
        }
        function u(t) {
            if (this.tooltip.hasClass(B))
                return k;
            var e = n(t.relatedTarget)
              , i = e.closest(O)[0] === this.tooltip[0]
              , s = e[0] === this.options.show.target[0];
            if (clearTimeout(this.timers.show),
            clearTimeout(this.timers.hide),
            this !== e[0] && "mouse" === this.options.position.target && i || this.options.hide.fixed && /mouse(out|leave|move)/.test(t.type) && (i || s))
                try {
                    t.preventDefault(),
                    t.stopImmediatePropagation()
                } catch (a) {}
            else {
                var r = n.proxy(function() {
                    this.toggle(k, t)
                }
                , this);
                this.options.hide.delay > 0 ? this.timers.hide = setTimeout(r, this.options.hide.delay) : r()
            }
        }
        function p(t) {
            return this.tooltip.hasClass(B) || !this.options.hide.inactive ? k : (clearTimeout(this.timers.inactive),
            void (this.timers.inactive = setTimeout(n.proxy(function() {
                this.hide(t)
            }
            , this), this.options.hide.inactive)))
        }
        function f(t) {
            this.rendered && this.tooltip[0].offsetWidth > 0 && this.reposition(t)
        }
        function m(t, i, s) {
            n(e.body).delegate(t, (i.split ? i : i.join(X + " ")) + X, function() {
                var t = v.api[n.attr(this, P)];
                t && !t.disabled && s.apply(t, arguments)
            }
            )
        }
        function g(t, i, a) {
            var r, l, c, d, h, u = n(e.body), p = t[0] === e ? u : t, f = t.metadata ? t.metadata(a.metadata) : C, m = "html5" === a.metadata.type && f ? f[a.metadata.name] : C, g = t.data(a.metadata.name || "qtipopts");
            try {
                g = "string" == typeof g ? n.parseJSON(g) : g
            } catch (b) {}
            if (d = n.extend(w, {}, v.defaults, a, "object" == typeof g ? o(g) : C, o(m || f)),
            l = d.position,
            d.id = i,
            "boolean" == typeof d.content.text) {
                if (c = t.attr(d.content.attr),
                d.content.attr === k || !c)
                    return k;
                d.content.text = c
            }
            if (l.container.length || (l.container = u),
            l.target === k && (l.target = p),
            d.show.target === k && (d.show.target = p),
            d.show.solo === w && (d.show.solo = l.container.closest("body")),
            d.hide.target === k && (d.hide.target = p),
            d.position.viewport === w && (d.position.viewport = l.container),
            l.container = l.container.eq(0),
            l.at = new _(l.at,w),
            l.my = new _(l.my),
            t.data(M))
                if (d.overwrite)
                    t.qtip("destroy");
                else if (d.overwrite === k)
                    return k;
            return t.attr(A, i),
            d.suppress && (h = t.attr("title")) && t.removeAttr("title").attr(U, h).attr("title", ""),
            r = new s(t,d,i,!!c),
            t.data(M, r),
            t.one("remove.qtip-" + i + " removeqtip.qtip-" + i, function() {
                var t;
                (t = n(this).data(M)) && t.destroy()
            }
            ),
            r
        }
        var v, b, _, y, x, w = !0, k = !1, C = null , T = "x", S = "y", D = "top", $ = "left", E = "bottom", q = "right", F = "center", I = {}, M = "qtip", A = "data-hasqtip", P = "data-qtip-id", N = ["ui-widget", "ui-tooltip"], O = "." + M, z = "click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "), R = M + "-fixed", L = M + "-default", j = M + "-focus", H = M + "-hover", B = M + "-disabled", W = "_replacedByqTip", U = "oldtitle";
        BROWSER = {
            ie: function() {
                for (var t = 3, i = e.createElement("div"); (i.innerHTML = "<!--[if gt IE " + ++t + "]><i></i><![endif]-->") && i.getElementsByTagName("i")[0]; )
                    ;
                return t > 4 ? t : 0 / 0
            }
            (),
            iOS: parseFloat(("" + (/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ""])[1]).replace("undefined", "3_2").replace("_", ".").replace("_", "")) || k
        },
        b = s.prototype,
        b.render = function(t) {
            if (this.rendered || this.destroyed)
                return this;
            var e = this
              , i = this.options
              , s = this.cache
              , a = this.elements
              , r = i.content.text
              , o = i.content.title
              , l = i.content.button
              , c = i.position
              , d = "." + this._id + " "
              , h = [];
            return n.attr(this.target[0], "aria-describedby", this._id),
            this.tooltip = a.tooltip = tooltip = n("<div/>", {
                id: this._id,
                "class": [M, L, i.style.classes, M + "-pos-" + i.position.my.abbrev()].join(" "),
                width: i.style.width || "",
                height: i.style.height || "",
                tracking: "mouse" === c.target && c.adjust.mouse,
                role: "alert",
                "aria-live": "polite",
                "aria-atomic": k,
                "aria-describedby": this._id + "-content",
                "aria-hidden": w
            }).toggleClass(B, this.disabled).attr(P, this.id).data(M, this).appendTo(c.container).append(a.content = n("<div />", {
                "class": M + "-content",
                id: this._id + "-content",
                "aria-atomic": w
            })),
            this.rendered = -1,
            this.positioning = w,
            o && (this._createTitle(),
            n.isFunction(o) || h.push(this._updateTitle(o, k))),
            l && this._createButton(),
            n.isFunction(r) || h.push(this._updateContent(r, k)),
            this.rendered = w,
            this._setWidget(),
            n.each(i.events, function(t, e) {
                n.isFunction(e) && tooltip.bind(("toggle" === t ? ["tooltipshow", "tooltiphide"] : ["tooltip" + t]).join(d) + d, e)
            }
            ),
            n.each(I, function(t) {
                var i;
                "render" === this.initialize && (i = this(e)) && (e.plugins[t] = i)
            }
            ),
            this._assignEvents(),
            n.when.apply(n, h).then(function() {
                e._trigger("render"),
                e.positioning = k,
                e.hiddenDuringWait || !i.show.ready && !t || e.toggle(w, s.event, k),
                e.hiddenDuringWait = k
            }
            ),
            v.api[this.id] = this,
            this
        }
        ,
        b.destroy = function(t) {
            function e() {
                if (!this.destroyed) {
                    this.destroyed = w;
                    var t = this.target
                      , e = t.attr(U);
                    this.rendered && this.tooltip.stop(1, 0).find("*").remove().end().remove(),
                    n.each(this.plugins, function() {
                        this.destroy && this.destroy()
                    }
                    ),
                    clearTimeout(this.timers.show),
                    clearTimeout(this.timers.hide),
                    this._unassignEvents(),
                    t.removeData(M).removeAttr(P).removeAttr("aria-describedby"),
                    this.options.suppress && e && t.attr("title", e).removeAttr(U),
                    this._unbind(t),
                    this.options = this.elements = this.cache = this.timers = this.plugins = this.mouse = C,
                    delete v.api[this.id]
                }
            }
            return this.destroyed ? this.target : (t !== w && this.rendered ? (tooltip.one("tooltiphidden", n.proxy(e, this)),
            !this.triggering && this.hide()) : e.call(this),
            this.target)
        }
        ,
        y = b.checks = {
            builtin: {
                "^id$": function(t, e, i, s) {
                    var a = i === w ? v.nextid : i
                      , r = M + "-" + a;
                    a !== k && a.length > 0 && !n("#" + r).length ? (this._id = r,
                    this.rendered && (this.tooltip[0].id = this._id,
                    this.elements.content[0].id = this._id + "-content",
                    this.elements.title[0].id = this._id + "-title")) : t[e] = s
                },
                "^prerender": function(t, e, i) {
                    i && !this.rendered && this.render(this.options.show.ready)
                },
                "^content.text$": function(t, e, i) {
                    this._updateContent(i)
                },
                "^content.attr$": function(t, e, i, n) {
                    this.options.content.text === this.target.attr(n) && this._updateContent(this.target.attr(i))
                },
                "^content.title$": function(t, e, i) {
                    return i ? (i && !this.elements.title && this._createTitle(),
                    void this._updateTitle(i)) : this._removeTitle()
                },
                "^content.button$": function(t, e, i) {
                    this._updateButton(i)
                },
                "^content.title.(text|button)$": function(t, e, i) {
                    this.set("content." + e, i)
                },
                "^position.(my|at)$": function(t, e, i) {
                    "string" == typeof i && (t[e] = new _(i,"at" === e))
                },
                "^position.container$": function(t, e, i) {
                    this.tooltip.appendTo(i)
                },
                "^show.ready$": function(t, e, i) {
                    i && (!this.rendered && this.render(w) || this.toggle(w))
                },
                "^style.classes$": function(t, e, i, n) {
                    this.tooltip.removeClass(n).addClass(i)
                },
                "^style.width|height": function(t, e, i) {
                    this.tooltip.css(e, i)
                },
                "^style.widget|content.title": function() {
                    this._setWidget()
                },
                "^style.def": function(t, e, i) {
                    this.tooltip.toggleClass(L, !!i)
                },
                "^events.(render|show|move|hide|focus|blur)$": function(t, e, i) {
                    tooltip[(n.isFunction(i) ? "" : "un") + "bind"]("tooltip" + e, i)
                },
                "^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)": function() {
                    var t = this.options.position;
                    tooltip.attr("tracking", "mouse" === t.target && t.adjust.mouse),
                    this._unassignEvents(),
                    this._assignEvents()
                }
            }
        },
        b.get = function(t) {
            if (this.destroyed)
                return this;
            var e = l(this.options, t.toLowerCase())
              , i = e[0][e[1]];
            return i.precedance ? i.string() : i
        }
        ;
        var Y = /^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i
          , V = /^prerender|show\.ready/i;
        b.set = function(t, e) {
            if (this.destroyed)
                return this;
            var i, s = this.rendered, a = k, r = this.options;
            return this.checks,
            "string" == typeof t ? (i = t,
            t = {},
            t[i] = e) : t = n.extend({}, t),
            n.each(t, function(e, i) {
                if (!s && !V.test(e))
                    return void delete t[e];
                var o, c = l(r, e.toLowerCase());
                o = c[0][c[1]],
                c[0][c[1]] = i && i.nodeType ? n(i) : i,
                a = Y.test(e) || a,
                t[e] = [c[0], c[1], i, o]
            }
            ),
            o(r),
            this.positioning = w,
            n.each(t, n.proxy(c, this)),
            this.positioning = k,
            this.rendered && this.tooltip[0].offsetWidth > 0 && a && this.reposition("mouse" === r.position.target ? C : this.cache.event),
            this
        }
        ,
        b._update = function(t, e) {
            var i = this
              , s = this.cache;
            return this.rendered && t ? (n.isFunction(t) && (t = t.call(this.elements.target, s.event, this) || ""),
            n.isFunction(t.then) ? (s.waiting = w,
            t.then(function(t) {
                return s.waiting = k,
                i._update(t, e)
            }
            , C, function(t) {
                return i._update(t, e)
            }
            )) : t === k || !t && "" !== t ? k : (t.jquery && t.length > 0 ? e.children().detach().end().append(t.css({
                display: "block"
            })) : e.html(t),
            s.waiting = w,
            (n.fn.imagesLoaded ? e.imagesLoaded() : n.Deferred().resolve(n([]))).done(function(t) {
                s.waiting = k,
                t.length && i.rendered && i.tooltip[0].offsetWidth > 0 && i.reposition(s.event, !t.length)
            }
            ).promise())) : k
        }
        ,
        b._updateContent = function(t, e) {
            this._update(t, this.elements.content, e)
        }
        ,
        b._updateTitle = function(t, e) {
            this._update(t, this.elements.title, e) === k && this._removeTitle(k)
        }
        ,
        b._createTitle = function() {
            var t = this.elements
              , e = this._id + "-title";
            t.titlebar && this._removeTitle(),
            t.titlebar = n("<div />", {
                "class": M + "-titlebar " + (this.options.style.widget ? d("header") : "")
            }).append(t.title = n("<div />", {
                id: e,
                "class": M + "-title",
                "aria-atomic": w
            })).insertBefore(t.content).delegate(".qtip-close", "mousedown keydown mouseup keyup mouseout", function(t) {
                n(this).toggleClass("ui-state-active ui-state-focus", "down" === t.type.substr(-4))
            }
            ).delegate(".qtip-close", "mouseover mouseout", function(t) {
                n(this).toggleClass("ui-state-hover", "mouseover" === t.type)
            }
            ),
            this.options.content.button && this._createButton()
        }
        ,
        b._removeTitle = function(t) {
            var e = this.elements;
            e.title && (e.titlebar.remove(),
            e.titlebar = e.title = e.button = C,
            t !== k && this.reposition())
        }
        ,
        b.reposition = function(i, s) {
            if (!this.rendered || this.positioning || this.destroyed)
                return this;
            this.positioning = w;
            var a, r, o = this.cache, l = this.tooltip, c = this.options.position, d = c.target, h = c.my, u = c.at, p = c.viewport, f = c.container, m = c.adjust, g = m.method.split(" "), v = l.outerWidth(k), b = l.outerHeight(k), _ = 0, y = 0, x = l.css("position"), C = {
                left: 0,
                top: 0
            }, T = l[0].offsetWidth > 0, S = i && "scroll" === i.type, M = n(t), A = f[0].ownerDocument, P = this.mouse;
            if (n.isArray(d) && 2 === d.length)
                u = {
                    x: $,
                    y: D
                },
                C = {
                    left: d[0],
                    top: d[1]
                };
            else if ("mouse" === d && (i && i.pageX || o.event.pageX))
                u = {
                    x: $,
                    y: D
                },
                i = !P || !P.pageX || !m.mouse && i && i.pageX ? (!i || "resize" !== i.type && "scroll" !== i.type ? i && i.pageX && "mousemove" === i.type ? i : (!m.mouse || this.options.show.distance) && o.origin && o.origin.pageX ? o.origin : i : o.event) || i || o.event || P || {} : P,
                "static" !== x && (C = f.offset()),
                A.body.offsetWidth !== (t.innerWidth || A.documentElement.clientWidth) && (r = n(A.body).offset()),
                C = {
                    left: i.pageX - C.left + (r && r.left || 0),
                    top: i.pageY - C.top + (r && r.top || 0)
                },
                m.mouse && S && (C.left -= P.scrollX - M.scrollLeft(),
                C.top -= P.scrollY - M.scrollTop());
            else {
                if ("event" === d && i && i.target && "scroll" !== i.type && "resize" !== i.type ? o.target = n(i.target) : "event" !== d && (o.target = n(d.jquery ? d : elements.target)),
                d = o.target,
                d = n(d).eq(0),
                0 === d.length)
                    return this;
                d[0] === e || d[0] === t ? (_ = BROWSER.iOS ? t.innerWidth : d.width(),
                y = BROWSER.iOS ? t.innerHeight : d.height(),
                d[0] === t && (C = {
                    top: (p || d).scrollTop(),
                    left: (p || d).scrollLeft()
                })) : I.imagemap && d.is("area") ? a = I.imagemap(this, d, u, I.viewport ? g : k) : I.svg && d[0].ownerSVGElement ? a = I.svg(this, d, u, I.viewport ? g : k) : (_ = d.outerWidth(k),
                y = d.outerHeight(k),
                C = d.offset()),
                a && (_ = a.width,
                y = a.height,
                r = a.offset,
                C = a.position),
                C = this.reposition.offset(d, C, f),
                (BROWSER.iOS > 3.1 && BROWSER.iOS < 4.1 || BROWSER.iOS >= 4.3 && BROWSER.iOS < 4.33 || !BROWSER.iOS && "fixed" === x) && (C.left -= M.scrollLeft(),
                C.top -= M.scrollTop()),
                (!a || a && a.adjustable !== k) && (C.left += u.x === q ? _ : u.x === F ? _ / 2 : 0,
                C.top += u.y === E ? y : u.y === F ? y / 2 : 0)
            }
            return C.left += m.x + (h.x === q ? -v : h.x === F ? -v / 2 : 0),
            C.top += m.y + (h.y === E ? -b : h.y === F ? -b / 2 : 0),
            I.viewport ? (C.adjusted = I.viewport(this, C, c, _, y, v, b),
            r && C.adjusted.left && (C.left += r.left),
            r && C.adjusted.top && (C.top += r.top)) : C.adjusted = {
                left: 0,
                top: 0
            },
            this._trigger("move", [C, p.elem || p], i) ? (delete C.adjusted,
            s === k || !T || isNaN(C.left) || isNaN(C.top) || "mouse" === d || !n.isFunction(c.effect) ? l.css(C) : n.isFunction(c.effect) && (c.effect.call(l, this, n.extend({}, C)),
            l.queue(function(t) {
                n(this).css({
                    opacity: "",
                    height: ""
                }),
                BROWSER.ie && this.style.removeAttribute("filter"),
                t()
            }
            )),
            this.positioning = k,
            this) : this
        }
        ,
        b.reposition.offset = function(t, i, s) {
            function a(t, e) {
                i.left += e * t.scrollLeft(),
                i.top += e * t.scrollTop()
            }
            if (!s[0])
                return i;
            var r, o, l, c, d = n(t[0].ownerDocument), h = !!BROWSER.ie && "CSS1Compat" !== e.compatMode, u = s[0];
            do
                "static" !== (o = n.css(u, "position")) && ("fixed" === o ? (l = u.getBoundingClientRect(),
                a(d, -1)) : (l = n(u).position(),
                l.left += parseFloat(n.css(u, "borderLeftWidth")) || 0,
                l.top += parseFloat(n.css(u, "borderTopWidth")) || 0),
                i.left -= l.left + (parseFloat(n.css(u, "marginLeft")) || 0),
                i.top -= l.top + (parseFloat(n.css(u, "marginTop")) || 0),
                r || "hidden" === (c = n.css(u, "overflow")) || "visible" === c || (r = n(u)));
            while (u = u.offsetParent);return r && (r[0] !== d[0] || h) && a(r, 1),
            i
        }
        ;
        var K = (_ = b.reposition.Corner = function(t, e) {
            t = ("" + t).replace(/([A-Z])/, " $1").replace(/middle/gi, F).toLowerCase(),
            this.x = (t.match(/left|right/i) || t.match(/center/) || ["inherit"])[0].toLowerCase(),
            this.y = (t.match(/top|bottom|center/i) || ["inherit"])[0].toLowerCase(),
            this.forceY = !!e;
            var i = t.charAt(0);
            this.precedance = "t" === i || "b" === i ? S : T
        }
        ).prototype;
        K.invert = function(t, e) {
            this[t] = this[t] === $ ? q : this[t] === q ? $ : e || this[t]
        }
        ,
        K.string = function() {
            var t = this.x
              , e = this.y;
            return t === e ? t : this.precedance === S || this.forceY && "center" !== e ? e + " " + t : t + " " + e
        }
        ,
        K.abbrev = function() {
            var t = this.string().split(" ");
            return t[0].charAt(0) + (t[1] && t[1].charAt(0) || "")
        }
        ,
        K.clone = function() {
            return new _(this.string(),this.forceY)
        }
        ,
        b.toggle = function(t, i) {
            var s = this.cache
              , a = this.options
              , r = this.tooltip;
            if (i) {
                if (/over|enter/.test(i.type) && /out|leave/.test(s.event.type) && a.show.target.add(i.target).length === a.show.target.length && r.has(i.relatedTarget).length)
                    return this;
                s.event = n.extend({}, i)
            }
            if (this.waiting && !t && (this.hiddenDuringWait = w),
            !this.rendered)
                return t ? this.render(1) : this;
            if (this.destroyed || this.disabled)
                return this;
            var o, l, c = t ? "show" : "hide", d = this.options[c], h = (this.options[t ? "hide" : "show"],
            this.options.position), u = this.options.content, p = this.tooltip.css("width"), f = this.tooltip[0].offsetWidth > 0, m = t || 1 === d.target.length, g = !i || d.target.length < 2 || s.target[0] === i.target;
            return (typeof t).search("boolean|number") && (t = !f),
            o = !r.is(":animated") && f === t && g,
            l = o ? C : !!this._trigger(c, [90]),
            l !== k && t && this.focus(i),
            !l || o ? this : (n.attr(r[0], "aria-hidden", !t),
            t ? (s.origin = n.extend({}, this.mouse),
            n.isFunction(u.text) && this._updateContent(u.text, k),
            n.isFunction(u.title) && this._updateTitle(u.title, k),
            !x && "mouse" === h.target && h.adjust.mouse && (n(e).bind("mousemove." + M, this._storeMouse),
            x = w),
            p || r.css("width", r.outerWidth(k)),
            this.reposition(i, arguments[2]),
            p || r.css("width", ""),
            d.solo && ("string" == typeof d.solo ? n(d.solo) : n(O, d.solo)).not(r).not(d.target).qtip("hide", n.Event("tooltipsolo"))) : (clearTimeout(this.timers.show),
            delete s.origin,
            x && !n(O + '[tracking="true"]:visible', d.solo).not(r).length && (n(e).unbind("mousemove." + M),
            x = k),
            this.blur(i)),
            after = n.proxy(function() {
                t ? (BROWSER.ie && r[0].style.removeAttribute("filter"),
                r.css("overflow", ""),
                "string" == typeof d.autofocus && n(this.options.show.autofocus, r).focus(),
                this.options.show.target.trigger("qtip-" + this.id + "-inactive")) : r.css({
                    display: "",
                    visibility: "",
                    opacity: "",
                    left: "",
                    top: ""
                }),
                this._trigger(t ? "visible" : "hidden")
            }
            , this),
            d.effect === k || m === k ? (r[c](),
            after()) : n.isFunction(d.effect) ? (r.stop(1, 1),
            d.effect.call(r, this),
            r.queue("fx", function(t) {
                after(),
                t()
            }
            )) : r.fadeTo(90, t ? 1 : 0, after),
            t && d.target.trigger("qtip-" + this.id + "-inactive"),
            this)
        }
        ,
        b.show = function(t) {
            return this.toggle(w, t)
        }
        ,
        b.hide = function(t) {
            return this.toggle(k, t)
        }
        ,
        b.focus = function(t) {
            if (!this.rendered || this.destroyed)
                return this;
            var e = n(O)
              , i = this.tooltip
              , s = parseInt(i[0].style.zIndex, 10)
              , a = v.zindex + e.length;
            return i.hasClass(j) || this._trigger("focus", [a], t) && (s !== a && (e.each(function() {
                this.style.zIndex > s && (this.style.zIndex = this.style.zIndex - 1)
            }
            ),
            e.filter("." + j).qtip("blur", t)),
            i.addClass(j)[0].style.zIndex = a),
            this
        }
        ,
        b.blur = function(t) {
            return !this.rendered || this.destroyed ? this : (this.tooltip.removeClass(j),
            this._trigger("blur", [this.tooltip.css("zIndex")], t),
            this)
        }
        ,
        b.disable = function(t) {
            return this.destroyed ? this : ("boolean" != typeof t && (t = !(this.tooltip.hasClass(B) || this.disabled)),
            this.rendered && this.tooltip.toggleClass(B, t).attr("aria-disabled", t),
            this.disabled = !!t,
            this)
        }
        ,
        b.enable = function() {
            return this.disable(k)
        }
        ,
        b._createButton = function() {
            var t = this
              , e = this.elements
              , i = e.tooltip
              , s = this.options.content.button
              , a = "string" == typeof s
              , r = a ? s : "Close tooltip";
            e.button && e.button.remove(),
            e.button = s.jquery ? s : n("<a />", {
                "class": "qtip-close " + (this.options.style.widget ? "" : M + "-icon"),
                title: r,
                "aria-label": r
            }).prepend(n("<span />", {
                "class": "ui-icon ui-icon-close",
                html: "&times;"
            })),
            e.button.appendTo(e.titlebar || i).attr("role", "button").click(function(e) {
                return i.hasClass(B) || t.hide(e),
                k
            }
            )
        }
        ,
        b._updateButton = function(t) {
            if (!this.rendered)
                return k;
            var e = this.elements.button;
            t ? this._createButton() : e.remove()
        }
        ,
        b._setWidget = function() {
            var t = this.options.style.widget
              , e = this.elements
              , i = e.tooltip
              , n = i.hasClass(B);
            i.removeClass(B),
            B = t ? "ui-state-disabled" : "qtip-disabled",
            i.toggleClass(B, n),
            i.toggleClass("ui-helper-reset " + d(), t).toggleClass(L, this.options.style.def && !t),
            e.content && e.content.toggleClass(d("content"), t),
            e.titlebar && e.titlebar.toggleClass(d("header"), t),
            e.button && e.button.toggleClass(M + "-icon", !t)
        }
        ,
        b._storeMouse = function(i) {
            this.mouse = {
                pageX: i.pageX,
                pageY: i.pageY,
                type: "mousemove",
                scrollX: t.pageXOffset || e.body.scrollLeft || e.documentElement.scrollLeft,
                scrollY: t.pageYOffset || e.body.scrollTop || e.documentElement.scrollTop
            }
        }
        ,
        b._bind = function(t, e, i, s, a) {
            var r = "." + this._id + (s ? "-" + s : "");
            e.length && n(t).bind((e.split ? e : e.join(r + " ")) + r, n.proxy(i, a || this))
        }
        ,
        b._unbind = function(t, e) {
            n(t).unbind("." + this._id + (e ? "-" + e : ""))
        }
        ;
        var X = "." + M;
        n(function() {
            m(O, ["mouseenter", "mouseleave"], function(t) {
                var e = "mouseenter" === t.type
                  , i = n(t.currentTarget)
                  , s = n(t.relatedTarget || t.target)
                  , a = this.options;
                e ? (this.focus(t),
                i.hasClass(R) && !i.hasClass(B) && clearTimeout(this.timers.hide)) : "mouse" === a.position.target && a.hide.event && a.show.target && !s.closest(a.show.target[0]).length && this.hide(t),
                i.toggleClass(H, e)
            }
            ),
            m("[" + P + "]", z, p)
        }
        ),
        b._trigger = function(t, e, i) {
            var s = n.Event("tooltip" + t);
            return s.originalEvent = i && n.extend({}, i) || this.cache.event || C,
            this.triggering = w,
            this.tooltip.trigger(s, [this].concat(e || [])),
            this.triggering = k,
            !s.isDefaultPrevented()
        }
        ,
        b._assignEvents = function() {
            var i = this.options
              , s = i.position
              , a = this.tooltip
              , r = i.show.target
              , o = i.hide.target
              , l = s.container
              , c = s.viewport
              , d = n(e)
              , m = (n(e.body),
            n(t))
              , g = i.show.event ? n.trim("" + i.show.event).split(" ") : []
              , b = i.hide.event ? n.trim("" + i.hide.event).split(" ") : []
              , _ = [];
            /mouse(out|leave)/i.test(i.hide.event) && "window" === i.hide.leave && this._bind(d, ["mouseout", "blur"], function(t) {
                /select|option/.test(t.target.nodeName) || t.relatedTarget || this.hide(t)
            }
            ),
            i.hide.fixed ? o = o.add(a.addClass(R)) : /mouse(over|enter)/i.test(i.show.event) && this._bind(o, "mouseleave", function() {
                clearTimeout(this.timers.show)
            }
            ),
            ("" + i.hide.event).indexOf("unfocus") > -1 && this._bind(l.closest("html"), ["mousedown", "touchstart"], function(t) {
                var e = n(t.target)
                  , i = this.rendered && !this.tooltip.hasClass(B) && this.tooltip[0].offsetWidth > 0
                  , s = e.parents(O).filter(this.tooltip[0]).length > 0;
                e[0] === this.target[0] || e[0] === this.tooltip[0] || s || this.target.has(e[0]).length || !i || this.hide(t)
            }
            ),
            "number" == typeof i.hide.inactive && (this._bind(r, "qtip-" + this.id + "-inactive", p),
            this._bind(o.add(a), v.inactiveEvents, p, "-inactive")),
            b = n.map(b, function(t) {
                var e = n.inArray(t, g);
                return e > -1 && o.add(r).length === o.length ? void _.push(g.splice(e, 1)[0]) : t
            }
            ),
            this._bind(r, g, h),
            this._bind(o, b, u),
            this._bind(r, _, function(t) {
                (this.tooltip[0].offsetWidth > 0 ? u : h).call(this, t)
            }
            ),
            this._bind(r.add(a), "mousemove", function(t) {
                if ("number" == typeof i.hide.distance) {
                    var e = this.cache.origin || {}
                      , n = this.options.hide.distance
                      , s = Math.abs;
                    (s(t.pageX - e.pageX) >= n || s(t.pageY - e.pageY) >= n) && this.hide(t)
                }
                this._storeMouse(t)
            }
            ),
            "mouse" === s.target && s.adjust.mouse && (i.hide.event && this._bind(r, ["mouseenter", "mouseleave"], function(t) {
                this.cache.onTarget = "mouseenter" === t.type
            }
            ),
            this._bind(d, "mousemove", function(t) {
                this.rendered && this.cache.onTarget && !this.tooltip.hasClass(B) && this.tooltip[0].offsetWidth > 0 && this.reposition(t)
            }
            )),
            (s.adjust.resize || c.length) && this._bind(n.event.special.resize ? c : m, "resize", f),
            s.adjust.scroll && this._bind(m.add(s.container), "scroll", f)
        }
        ,
        b._unassignEvents = function() {
            var i = [this.options.show.target[0], this.options.hide.target[0], this.rendered && this.tooltip[0], this.options.position.container[0], this.options.position.viewport[0], this.options.position.container.closest("html")[0], t, e];
            this.rendered ? this._unbind(n([]).pushStack(n.grep(i, function(t) {
                return "object" == typeof t
            }
            ))) : n(i[0]).unbind("." + this._id + "-create")
        }
        ,
        v = n.fn.qtip = function(t, e, s) {
            var a = ("" + t).toLowerCase()
              , r = C
              , l = n.makeArray(arguments).slice(1)
              , c = l[l.length - 1]
              , d = this[0] ? n.data(this[0], M) : C;
            return !arguments.length && d || "api" === a ? d : "string" == typeof t ? (this.each(function() {
                var t = n.data(this, M);
                if (!t)
                    return w;
                if (c && c.timeStamp && (t.cache.event = c),
                !e || "option" !== a && "options" !== a)
                    t[a] && t[a].apply(t, l);
                else {
                    if (s === i && !n.isPlainObject(e))
                        return r = t.get(e),
                        k;
                    t.set(e, s)
                }
            }
            ),
            r !== C ? r : this) : "object" != typeof t && arguments.length ? void 0 : (d = o(n.extend(w, {}, t)),
            v.bind.call(this, d, c))
        }
        ,
        v.bind = function(t, e) {
            return this.each(function(s) {
                function a(t) {
                    function e() {
                        d.render("object" == typeof t || r.show.ready),
                        o.show.add(o.hide).unbind(c)
                    }
                    return d.disabled ? k : (d.cache.event = n.extend({}, t),
                    d.cache.target = t ? n(t.target) : [i],
                    void (r.show.delay > 0 ? (clearTimeout(d.timers.show),
                    d.timers.show = setTimeout(e, r.show.delay),
                    l.show !== l.hide && o.hide.bind(l.hide, function() {
                        clearTimeout(d.timers.show)
                    }
                    )) : e()))
                }
                var r, o, l, c, d, h;
                return h = n.isArray(t.id) ? t.id[s] : t.id,
                h = !h || h === k || h.length < 1 || v.api[h] ? v.nextid++ : h,
                c = ".qtip-" + h + "-create",
                d = g(n(this), h, t),
                d === k ? w : (v.api[h] = d,
                r = d.options,
                n.each(I, function() {
                    "initialize" === this.initialize && this(d)
                }
                ),
                o = {
                    show: r.show.target,
                    hide: r.hide.target
                },
                l = {
                    show: n.trim("" + r.show.event).replace(/\s/g, c + " ") + c,
                    hide: n.trim("" + r.hide.event).replace(/\s/g, c + " ") + c
                },
                /mouse(over|enter)/i.test(l.show) && !/mouse(out|leave)/i.test(l.hide) && (l.hide += " mouseleave" + c),
                o.show.bind("mousemove" + c, function(t) {
                    d._storeMouse(t),
                    d.cache.onTarget = w
                }
                ),
                o.show.bind(l.show, a),
                void ((r.show.ready || r.prerender) && a(e)))
            }
            )
        }
        ,
        v.api = {},
        n.each({
            attr: function(t, e) {
                if (this.length) {
                    var i = this[0]
                      , s = "title"
                      , a = n.data(i, "qtip");
                    if (t === s && a && "object" == typeof a && a.options.suppress)
                        return arguments.length < 2 ? n.attr(i, U) : (a && a.options.content.attr === s && a.cache.attr && a.set("content.text", e),
                        this.attr(U, e))
                }
                return n.fn["attr" + W].apply(this, arguments)
            },
            clone: function(t) {
                var e = (n([]),
                n.fn["clone" + W].apply(this, arguments));
                return t || e.filter("[" + U + "]").attr("title", function() {
                    return n.attr(this, U)
                }
                ).removeAttr(U),
                e
            }
        }, function(t, e) {
            if (!e || n.fn[t + W])
                return w;
            var i = n.fn[t + W] = n.fn[t];
            n.fn[t] = function() {
                return e.apply(this, arguments) || i.apply(this, arguments)
            }
        }
        ),
        n.ui || (n["cleanData" + W] = n.cleanData,
        n.cleanData = function(t) {
            for (var e, i = 0; (e = n(t[i])).length; i++)
                if (e.attr(A))
                    try {
                        e.triggerHandler("removeqtip")
                    } catch (s) {}
            n["cleanData" + W].apply(this, arguments)
        }
        ),
        v.version = "2.1.1",
        v.nextid = 0,
        v.inactiveEvents = z,
        v.zindex = 15e3,
        v.defaults = {
            prerender: k,
            id: k,
            overwrite: w,
            suppress: w,
            content: {
                text: w,
                attr: "title",
                title: k,
                button: k
            },
            position: {
                my: "top left",
                at: "bottom right",
                target: k,
                container: k,
                viewport: k,
                adjust: {
                    x: 0,
                    y: 0,
                    mouse: w,
                    scroll: w,
                    resize: w,
                    method: "flipinvert flipinvert"
                },
                effect: function(t, e) {
                    n(this).animate(e, {
                        duration: 200,
                        queue: k
                    })
                }
            },
            show: {
                target: k,
                event: "mouseenter",
                effect: w,
                delay: 90,
                solo: k,
                ready: k,
                autofocus: k
            },
            hide: {
                target: k,
                event: "mouseleave",
                effect: w,
                delay: 0,
                fixed: k,
                inactive: k,
                leave: "window",
                distance: k
            },
            style: {
                classes: "",
                widget: k,
                width: k,
                height: k,
                def: w
            },
            events: {
                render: C,
                move: C,
                show: C,
                hide: C,
                toggle: C,
                visible: C,
                hidden: C,
                focus: C,
                blur: C
            }
        }
    }
    )
}
(window, document),
function(t) {
    var e = new Array
      , n = new Array;
    t.fn.doAutosize = function(e) {
        var i = t(this).data("minwidth")
          , n = t(this).data("maxwidth")
          , s = ""
          , a = t(this)
          , r = t("#" + t(this).data("tester_id"));
        if (s !== (s = a.val())) {
            var o = s.replace(/&/g, "&amp;").replace(/\s/g, " ").replace(/</g, "&lt;").replace(/>/g, "&gt;");
            r.html(o);
            var l = r.width()
              , c = l + e.comfortZone >= i ? l + e.comfortZone : i
              , d = a.width()
              , h = d > c && c >= i || c > i && n > c;
            h && a.width(c)
        }
    }
    ,
    t.fn.resetAutosize = function(e) {
        var i = t(this).data("minwidth") || e.minInputWidth || t(this).width()
          , n = t(this).data("maxwidth") || e.maxInputWidth || t(this).closest(".tagsinput").width() - e.inputPadding
          , s = t(this)
          , a = t("<tester/>").css({
            position: "absolute",
            top: -9999,
            left: -9999,
            width: "auto",
            fontSize: s.css("fontSize"),
            fontFamily: s.css("fontFamily"),
            fontWeight: s.css("fontWeight"),
            letterSpacing: s.css("letterSpacing"),
            whiteSpace: "nowrap"
        })
          , r = t(this).attr("id") + "_autosize_tester";
        !t("#" + r).length > 0 && (a.attr("id", r),
        a.appendTo("body")),
        s.data("minwidth", i),
        s.data("maxwidth", n),
        s.data("tester_id", r),
        s.css("width", i)
    }
    ,
    t.fn.addTag = function(i, s) {
        return s = jQuery.extend({
            focus: !1,
            callback: !0
        }, s),
        this.each(function() {
            var a = t(this).attr("id")
              , r = t(this).val().split(e[a]);
            if ("" == r[0] && (r = new Array),
            i = jQuery.trim(i),
            s.unique) {
                var o = t(this).tagExist(i);
                1 == o && t("#" + a + "_tag").addClass("not_valid")
            } else
                var o = !1;
            if ("" != i && 1 != o) {
                if (t("<span>").addClass("tag").append(t("<span>").text(i).append("&nbsp;&nbsp;"), t("<a>", {
                    href: "#",
                    title: "Removing tag",
                    text: "x"
                }).click(function() {
                    return t("#" + a).removeTag(escape(i))
                }
                )).insertBefore("#" + a + "_addTag"),
                r.push(i),
                t("#" + a + "_tag").val(""),
                s.focus ? t("#" + a + "_tag").focus() : t("#" + a + "_tag").blur(),
                t.fn.tagsInput.updateTagsField(this, r),
                s.callback && n[a] && n[a].onAddTag) {
                    var l = n[a].onAddTag;
                    l.call(this, i)
                }
                if (n[a] && n[a].onChange) {
                    var c = r.length
                      , l = n[a].onChange;
                    l.call(this, t(this), r[c - 1])
                }
            }
        }
        ),
        !1
    }
    ,
    t.fn.removeTag = function(s) {
        return s = unescape(s),
        this.each(function() {
            var a = t(this).attr("id")
              , r = t(this).val().split(e[a]);
            for (t("#" + a + "_tagsinput .tag").remove(),
            str = "",
            i = 0; i < r.length; i++)
                r[i] != s && (str = str + e[a] + r[i]);
            if (t.fn.tagsInput.importTags(this, str),
            n[a] && n[a].onRemoveTag) {
                var o = n[a].onRemoveTag;
                o.call(this, s)
            }
        }
        ),
        !1
    }
    ,
    t.fn.tagExist = function(i) {
        var n = t(this).attr("id")
          , s = t(this).val().split(e[n]);
        return jQuery.inArray(i, s) >= 0
    }
    ,
    t.fn.importTags = function(e) {
        id = t(this).attr("id"),
        t("#" + id + "_tagsinput .tag").remove(),
        t.fn.tagsInput.importTags(this, e)
    }
    ,
    t.fn.tagsInput = function(i) {
        var s = jQuery.extend({
            interactive: !0,
            defaultText: "add a tag",
            minChars: 0,
            width: "300px",
            height: "100px",
            autocomplete: {
                selectFirst: !1
            },
            hide: !0,
            delimiter: ";",
            unique: !0,
            removeWithBackspace: !0,
            placeholderColor: "#666666",
            autosize: !0,
            comfortZone: 20,
            inputPadding: 12
        }, i);
        return this.each(function() {
            s.hide && t(this).hide();
            var i = t(this).attr("id");
            (!i || e[t(this).attr("id")]) && (i = t(this).attr("id", "tags" + (new Date).getTime()).attr("id"));
            var a = jQuery.extend({
                pid: i,
                real_input: "#" + i,
                holder: "#" + i + "_tagsinput",
                input_wrapper: "#" + i + "_addTag",
                fake_input: "#" + i + "_tag"
            }, s);
            e[i] = a.delimiter,
            (s.onAddTag || s.onRemoveTag || s.onChange) && (n[i] = new Array,
            n[i].onAddTag = s.onAddTag,
            n[i].onRemoveTag = s.onRemoveTag,
            n[i].onChange = s.onChange);
            var r = '<div id="' + i + '_tagsinput" class="tagsinput"><div id="' + i + '_addTag">';
            if (s.interactive && (r = r + '<input id="' + i + '_tag" value="" data-default="' + s.defaultText + '" />'),
            r += '</div><div class="tags_clear"></div></div>',
            t(r).insertAfter(this),
            t(a.holder).css("width", s.width),
            t(a.holder).css("min-height", s.height),
            t(a.holder).css("height", "100%"),
            "" != t(a.real_input).val() && t.fn.tagsInput.importTags(t(a.real_input), t(a.real_input).val()),
            s.interactive) {
                if (t(a.fake_input).val(t(a.fake_input).attr("data-default")),
                t(a.fake_input).css("color", s.placeholderColor),
                t(a.fake_input).resetAutosize(s),
                t(a.holder).bind("click", a, function(e) {
                    t(e.data.fake_input).focus()
                }
                ),
                t(a.fake_input).bind("focus", a, function(e) {
                    t(e.data.fake_input).val() == t(e.data.fake_input).attr("data-default") && t(e.data.fake_input).val(""),
                    t(e.data.fake_input).css("color", "#000000")
                }
                ),
                void 0 != s.autocomplete_url) {
                    autocomplete_options = {
                        source: s.autocomplete_url
                    };
                    for (attrname in s.autocomplete)
                        autocomplete_options[attrname] = s.autocomplete[attrname];
                    void 0 !== jQuery.Autocompleter ? (t(a.fake_input).autocomplete(s.autocomplete_url, s.autocomplete),
                    t(a.fake_input).bind("result", a, function(e, n) {
                        n && t("#" + i).addTag(n[0] + "", {
                            focus: !0,
                            unique: s.unique
                        })
                    }
                    )) : void 0 !== jQuery.ui.autocomplete && (t(a.fake_input).autocomplete(autocomplete_options),
                    t(a.fake_input).bind("autocompleteselect", a, function(e, i) {
                        return t(e.data.real_input).addTag(i.item.value, {
                            focus: !0,
                            unique: s.unique
                        }),
                        !1
                    }
                    ))
                } else
                    t(a.fake_input).bind("blur", a, function(e) {
                        var i = t(this).attr("data-default");
                        return "" != t(e.data.fake_input).val() && t(e.data.fake_input).val() != i ? e.data.minChars <= t(e.data.fake_input).val().length && (!e.data.maxChars || e.data.maxChars >= t(e.data.fake_input).val().length) && t(e.data.real_input).addTag(t(e.data.fake_input).val(), {
                            focus: !0,
                            unique: s.unique
                        }) : (t(e.data.fake_input).val(t(e.data.fake_input).attr("data-default")),
                        t(e.data.fake_input).css("color", s.placeholderColor)),
                        !1
                    }
                    );
                t(a.fake_input).bind("keypress", a, function(e) {
                    return e.which == e.data.delimiter.charCodeAt(0) || 13 == e.which ? (e.preventDefault(),
                    e.data.minChars <= t(e.data.fake_input).val().length && (!e.data.maxChars || e.data.maxChars >= t(e.data.fake_input).val().length) && t(e.data.real_input).addTag(t(e.data.fake_input).val(), {
                        focus: !0,
                        unique: s.unique
                    }),
                    t(e.data.fake_input).resetAutosize(s),
                    !1) : void (e.data.autosize && t(e.data.fake_input).doAutosize(s))
                }
                ),
                a.removeWithBackspace && t(a.fake_input).bind("keydown", function(e) {
                    if (8 == e.keyCode && "" == t(this).val()) {
                        e.preventDefault();
                        var i = t(this).closest(".tagsinput").find(".tag:last").text()
                          , n = t(this).attr("id").replace(/_tag$/, "");
                        i = i.replace(/[\s]+x$/, ""),
                        t("#" + n).removeTag(escape(i)),
                        t(this).trigger("focus")
                    }
                }
                ),
                t(a.fake_input).blur(),
                a.unique && t(a.fake_input).keydown(function(e) {
                    (8 == e.keyCode || String.fromCharCode(e.which).match(/\w+|[aeiouAEIOUnN,/]+/)) && t(this).removeClass("not_valid")
                }
                )
            }
        }
        ),
        this
    }
    ,
    t.fn.tagsInput.updateTagsField = function(i, n) {
        var s = t(i).attr("id");
        t(i).val(n.join(e[s]))
    }
    ,
    t.fn.tagsInput.importTags = function(s, a) {
        t(s).val("");
        var r = t(s).attr("id")
          , o = a.split(e[r]);
        for (i = 0; i < o.length; i++)
            t(s).addTag(o[i], {
                focus: !1,
                callback: !1
            });
        if (n[r] && n[r].onChange) {
            var l = n[r].onChange;
            l.call(s, s, o[i])
        }
    }
}
(jQuery),
Array.prototype.indexOf || (Array.prototype.indexOf = function(t) {
    var e = this.length >>> 0
      , i = Number(arguments[1]) || 0;
    for (i = 0 > i ? Math.ceil(i) : Math.floor(i),
    0 > i && (i += e); e > i; i++)
        if (i in this && this[i] === t)
            return i;
    return -1
}
),
eval(function(t, e, i, n, s, a) {
    if (s = function(t) {
        return (e > t ? "" : s(parseInt(t / e))) + ((t %= e) > 35 ? String.fromCharCode(t + 29) : t.toString(36))
    }
    ,
    !"".replace(/^/, String)) {
        for (; i--; )
            a[s(i)] = n[i] || s(i);
        n = [function(t) {
            return a[t]
        }
        ],
        s = function() {
            return "\\w+"
        }
        ,
        i = 1
    }
    for (; i--; )
        n[i] && (t = t.replace(new RegExp("\\b" + s(i) + "\\b","g"), n[i]));
    return t
}
("(6($){k i={1D:6(d){d=$.26(J,{},j,d);d.H=d.H 1y V?d.H:$(d.H);3(l d.u=='v')d.u=d.u.G(' ').1f(',',' ');3(l d.q=='v')d.q=d.q.G(' ').1f(',',' ');3(l d.m=='v')d.m=d.m.G(' ').1f(',',' ');d.u=(''+d.u).1e(' ');d.q=(''+d.q).1e(' ');d.m=(''+d.m).1e(' ');k f=d.u.G('.7 ')+'.7',1n=d.q.G('.7 ')+'.7',1q=d.m.G('.7 ')+'.7';k g=l d.T=='6';3(d.o===J)d.o=j.o;s 3(d.o===A)d.o=0;3(l d.o!='v')d.o=[d.o,d.o];3(l d.D!='v')d.D=[d.D,d.D];3(l d.E!='v')d.E=[d.E,d.E];3(l d.w!='v')d.w=[d.w,d.w];3(l d.9=='v')d.9=d.9.G(' ');d.9={K:d.9.P('K')!==-1,N:d.9.P('N')!==-1,B:d.9.P('B')!==-1,M:d.9.P('M')!==-1};k h='7';3(d.9.K)h+='-K';s 3(d.9.N)h+='-N';3(d.9.B)h+='-B';s 3(d.9.M)h+='-M';p n.O(6(){k a=$(n),4=a.4('7')||{},r=[F,F],I='';3(4&&4.16)$('#'+4.16).23();k b='7-'+ ++j.1o,$8=$('<1u 1v=\"'+b+'\" />');3(!g){3(d.T)I=d.T;s I=a.1Y('1z')}a.1X('1z');3(d.17)$8.1h(d.17);$8.W(d.W).1h('7 '+h).15(I);d.H.1W($8);4={16:b,8:$8,r:r,t:d};k c=$.C(d.R,a),1r=$.C(d.L,a),1i=$.C(d.1b,a),1c=l d.1d=='6'?$.C(d.1d,a):A,11=l d.12=='6'?$.C(d.12,a):A,13=l d.14=='6'?$.C(d.14,a):A;3(d.1j&&d.q.P('1g')!=-1){$8.1l('.7').U('1m.7',6(e){a.7('R')}).U('1g.7',6(e){a.7('L')})}a.4('7',4).1l('.7').U(f,6(e){3(1c&&!e.18&&1c($8,d,e)===A)p;3($.1V.1U)d.H.1T('1u.7[1v^=\"7-\"]').1s($8).L();3(g)I=$.C(d.T,a)($8,4,e);3(r[1]){1t(r[1]);$8.Z(J);r[1]=F}3(!I)p;3(g)$8.15(I);3(d.u[0]!=d.m[0])a.S(d.m[0]);r[0]=1w(6(){c($8,d,e)},d.D[0])}).U(1n,6(e){3(11&&!e.18&&11($8,d,e)===A)p;3(r[0]){1t(r[0]);$8.Z(J);r[0]=F}3(d.q[0]!=d.m[0])a.S(d.m[0]);r[1]=1w(6(){1r($8,d,e)},d.D[1])}).U(1q,6(e){3(d.1x)p;3(13&&!e.18&&13($8,d,e)===A)p;1i($8,d,e)})})},R:6(){p n.O(6(){k a=$(n),4=a.4('7');3(4&&4.t&&4.t.u)a.S(4.t.u[0])})},L:6(){p n.O(6(){k a=$(n),4=a.4('7');3(4&&4.t&&4.t.q)a.S(4.t.q[0])})},1b:6(b){p n.O(6(){k a=$(n),4=a.4('7');3(4&&4.8){3(l b=='1S')4.8.15(b);3(4.t&&4.t.m)a.S(4.t.m[0])}})},1R:6(){k b=[];n.O(6(){k a=$(n).4('7');3(a&&a.8)b.1Q(a.8[0])});p $(b)}};$.1B.7=6(a){3(i[a]){p i[a].1C(n,1O.1N.1Z.1H(1F,1))}s 3(l a=='v'||!a){p i.1D.1C(n,1F)}s{$.1I('1J '+a+' 1K 1s 1L 1M V.7')}};k j={1o:0,u:'1m',R:6(a,b){a.Z(J).R().1E({Q:b.Q},b.o[0],b.E[0])},1d:F,q:'1g',L:6(a,b){a.Z(J).1E({Q:0},b.o[1],b.E[1],6(){a.L()})},12:F,m:'1P',1b:6(a,b,e){k c=$(n),x,y,10=0,Y=0,19=a.1p(),1a=a.1A();3(b.X 1y V){c=b.X}3(b.X=='1G'){x=e.20;y=e.21}s{k d=c.22();x=d.B;y=d.K;10=c.1p();Y=c.1A()}3(b.9.B){x-=19+b.w[0]}s 3(b.9.M){x+=10+b.w[0]}s{x+=(10-19)/2}3(b.9.N){y+=Y+b.w[1]}s 3(b.9.K){y-=1a+b.w[1]}s{y+=(Y-1a)/2}a.W({B:x,K:y})},14:F,1x:A,T:'',H:'24',X:'25',9:'N M',w:5,1j:J,D:1k,o:1k,E:'27',17:'28',Q:1,W:{'Q':0,'29':'2a','2b':'2c','z-2d':2e}};$.1B.7.2f=j})(V);", 62, 140, "|||if|data||function|mTip|tip|align|||||||||||var|typeof|updateOn|this|fade|return|hideOn|timer|else|options|showOn|object|spacing||||false|left|proxy|delay|fadeEasing|null|join|holder|value|true|top|hide|right|bottom|each|indexOf|opacity|show|trigger|content|bind|jQuery|css|alignTo|eh|stop|ew|bHideCB|beforeHide|bUpdateCB|beforeUpdate|html|tipID|className|isTrigger|tw|th|update|bShowCB|beforeShow|split|replace|mouseleave|addClass|updateCB|keepOnHover|250|unbind|mouseenter|hideEvent|_id|innerWidth|updateEvent|hideCB|not|clearTimeout|div|id|setTimeout|cancelUpdate|instanceof|title|innerHeight|fn|apply|init|animate|arguments|cursor|call|error|Method|does|exist|on|prototype|Array|mousemove|push|get|string|find|msie|browser|append|removeAttr|attr|slice|pageX|pageY|offset|remove|body|element|extend|linear|black|display|none|position|absolute|index|10000|defaults".split("|"), 0, {})),
function(t) {
    "function" == typeof define && define.amd ? define(["jquery"], t) : t(jQuery)
}
(function(t) {
    function e(t) {
        return o.raw ? t : encodeURIComponent(t)
    }
    function i(t) {
        return o.raw ? t : decodeURIComponent(t)
    }
    function n(t) {
        return e(o.json ? JSON.stringify(t) : String(t))
    }
    function s(t) {
        0 === t.indexOf('"') && (t = t.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\"));
        try {
            return t = decodeURIComponent(t.replace(r, " ")),
            o.json ? JSON.parse(t) : t
        } catch (e) {}
    }
    function a(e, i) {
        var n = o.raw ? e : s(e);
        return t.isFunction(i) ? i(n) : n
    }
    var r = /\+/g
      , o = t.cookie = function(s, r, l) {
        if (void 0 !== r && !t.isFunction(r)) {
            if (l = t.extend({}, o.defaults, l),
            "number" == typeof l.expires) {
                var c = l.expires
                  , d = l.expires = new Date;
                d.setTime(+d + 864e5 * c)
            }
            return document.cookie = [e(s), "=", n(r), l.expires ? "; expires=" + l.expires.toUTCString() : "", l.path ? "; path=" + l.path : "", l.domain ? "; domain=" + l.domain : "", l.secure ? "; secure" : ""].join("")
        }
        for (var h = s ? void 0 : {}, u = document.cookie ? document.cookie.split("; ") : [], p = 0, f = u.length; f > p; p++) {
            var m = u[p].split("=")
              , g = i(m.shift())
              , v = m.join("=");
            if (s && s === g) {
                h = a(v, r);
                break
            }
            s || void 0 === (v = a(v)) || (h[g] = v)
        }
        return h
    }
    ;
    o.defaults = {},
    t.removeCookie = function(e, i) {
        return void 0 === t.cookie(e) ? !1 : (t.cookie(e, "", t.extend({}, i, {
            expires: -1
        })),
        !t.cookie(e))
    }
}
);
var Main = {
    options: {
        addressValue: null ,
        addressNoLoad: !1,
        addressHash: null ,
        contactPhones: 1,
        validationStatus: !1,
        submitName: null ,
        is_open_modal: !1
    },
    templates: {
        resume_add_work: function(t) {
            return String() + '<div class="resume-add-work-parent" id="resume-add-work-' + t + '"><a href="javascript:void(0)" class="delete-resume-added">Удалить</a><div class="a-row"><label><font class="a-red">*</font> Компания</label><input class="validate[required]" type="text" name="work[company_name][]" id="company_name_' + t + '" /></div><div class="a-row"><label><font class="a-red">*</font> Должность</label><input class="validate[required]" type="text" name="work[position][]" id="position_' + t + '" /></div><div class="a-row"><label><font class="a-red">*</font> Выполняемые обязаности</label><input class="validate[required]" type="text" name="work[activity][]" id="activity_' + t + '" /></div><div class="a-row"><label><font class="a-red">*</font> Период работы</label><input placeholder="Дата начала" type="text" class="month-picker month-picker-start validate[required]" name="work[date_start][]" id="work_date_' + t + '" /><i class="a-icon-calendar"></i><input placeholder="Дата окончания" type="text" class="month-picker validate[required]" name="work[date_end][]" id="work_date_' + t + '" /><i class="a-icon-calendar"></i></div><!--<div class="a-row"><label>По сегодняшний день</label><input type="checkbox" class="is_working" name="work[flag_working][]" id="flag_working_' + t + '" value="1" /></div>--><hr class="hr-min" /></div>'
        },
        resume_add_experience: function(t) {
            return String() + '<div style="position:relative;" class="resume-add-experience-parent" id="resume-experience-' + t + '"><a href="javascript:void(0)" class="delete-resume-added">Удалить</a><div class="a-row"><label><font class="a-red">*</font> Уровень образования</label><select class="validate[required]" name="education[type][]" id="type_rid_' + t + '"><option value=""> - выбрать - </option><option value="1">высшее</option><option value="2">неоконченное высшее</option><option value="3">среднее специальное</option><option value="4">среднее</option>	</select></div><div class="a-row"><label><font class="a-red">*</font> Учебное заведение</label><input class="validate[required]" type="text" name="education[institution][]" id="institution_' + t + '" /></div><div class="a-row"><label><font class="a-red">*</font> Факультет, специальность</label><input class="validate[required]" type="text" name="education[faculty][]" id="faculty_' + t + '" /></div><div class="a-row"><label><font class="a-red">*</font> Город</label><input class="validate[required]" type="text" name="education[location][]" id="location_' + t + '" /></div><div class="a-row"><label><font class="a-red">*</font> Период обучения</label><input placeholder="Дата начала" type="text" class="month-picker month-picker-start validate[required]" name="education[date_start][]" id="education_date_start_' + t + '" /><i class="a-icon-calendar"></i><input placeholder="Дата окончания" type="text" class="month-picker validate[required]" name="education[date_end][]" id="education_date_end_' + t + '" /><i class="a-icon-calendar"></i></div><hr class="hr-min" /></div>'
        },
        resume_add_traning: function(t) {
            return String() + '<div style="position:relative;" class="resume-add-traning-parent" id="resuma-traning-' + t + '"><a href="javascript:void(0)" class="delete-resume-added">Удалить</a><div class="a-row"><label><font class="a-red">*</font> Название учебного заведения (курсов)</label><input class="validate[required]" type="text" name="traning[name][]" id="traning_name_' + t + '" /></div><div class="a-row"><label><font class="a-red">*</font> Год, длительность</label><input class="validate[required]" type="text" name="traning[description][]" id="traning_year_' + t + '" /></div><hr class="hr-min" /></div>'
        },
        resume_add_lang: function(t) {
            return String() + '<div style="position:relative;" class="resume-add-lang-parent" id="resume-lang-' + t + '"><a href="javascript:void(0)" class="delete-resume-added">Удалить</a><div class="a-row"><label><font class="a-red">*</font> Язык</label><input class="validate[required]" type="text" name="langs[name][]" id="lang_name_' + t + '" /></div><div class="a-row"><label><font class="a-red">*</font> Уровень</label><select class="validate[required]" name="langs[level][]" id="lang_level_' + t + '"><option value=""> - выбрать - </option><option value="1">Начинающий</option><option value="2">Средний</option><option value="3">Эксперт</option></select></div><hr class="hr-min" /></div>'
        },
        resume_add_button: function(t, e) {
            return String() + '<div class="a-row"><a class="a-btn a-float-right" id="' + e + '" href="javascript:void(0)"><i class="a-icon-plus"></i>' + t + "</a></div>"
        },
        passw_recovery: function() {
            return String() + '<h1 class="n-form-title"><span>Восстановление пароля</span></h1><div id="ajax-response" class="a-mess-red display-none" style="max-width: 400px"></div><form id="n-recovery-form" name="n-aut-form" style="width:400px" class="n-aut-form" action="/index.ajax.php?route=/passw_recovery" method="post"><div class="a-row"><span><i class="a-icon-envelope"></i></span><input placeholder="Введите e-mail..." type="text" name="user_email" /></div><div class="a-row a-row-bottom"><input value="Восстановить" type="submit" class="a-btn-green" /></div></form>'
        },
        load_more_sections: function() {
            return String() + '<div class="f_t_ll">Смотрите объявления в разделах:</div><ul class="article-sections ads-sections scroll-sections"><li><a title="Продам новое" class="article-sections-icons" href="/ua/products"></a></li><li><a title="Продам Б/У" class="article-sections-icons ads" href="/ua/ads"></a></li><li><a title="Акции" class="article-sections-icons stocks" href="/ua/products/filter-stocks"></a></li><li><a title="Сервис" class="article-sections-icons services" href="/ua/services"></a></li><li><a title="Спрос" class="article-sections-icons demand" href="/ua/demand"></a></li><li><a title="Мероприятия" class="article-sections-icons activity" href="/ua/activity"></a></li><li><a title="Резюме" class="article-sections-icons work" href="/ua/work/resume"></a></li><li><a title="Вакансии" class="article-sections-icons vacancy" href="/work/vacancy"></a></li><li><a title="З/Т лаборатории" class="article-sections-icons labs" href="/ua/labs"></a></li><li><a title="Недвижимость" class="article-sections-icons realty" href="/ua/realty"></a></li><!-- li><a title="Диагностика" class="article-sections-icons diagnostic" href="/ua/diagnostic"></a></li--></ul>'
        }
    },
    init: function() {
        $(".datepicker").datepicker(),
        $(".month-picker").monthpicker(),
        $("[maxlength]").inputlimiter({
            limit: $(this).attr("maxlength"),
            remText: '%n <i class="a-icon-pencil"></i>',
            limitText: ""
        }),
        $("#ad-gallery").adGallery({
            width: 600,
            height: 530,
            effect: "fade",
            update_window_hash: !1
        }),
        $("#ad-gallery-700").adGallery({
            width: 700,
            height: 530,
            effect: "fade",
            update_window_hash: !1
        }),
        $("#producers-all-list").listnav(),
        $(".qaptcha").QapTcha({
            PHPfile: "/index.ajax.php?route=is_user"
        }),
        $(".datepicker-start").datepicker({
            dateFormat: "yy-mm-dd",
            onClose: function(t) {
                $(".datepicker-end").datepicker("option", "minDate", t)
            }
        }),
        $(".datepicker-end").datepicker({
            dateFormat: "yy-mm-dd",
            onClose: function(t) {
                $(".datepicker-start").datepicker("option", "maxDate", t)
            }
        }),
        $(".datetimepicker").datetimepicker({
            dateFormat: "yy-mm-dd",
            timeFormat: "HH:mm"
        }),
        $("input[type=radio], input[type=checkbox], input[type=file]").not(".qq-uploader input[type=file], .checkbox > input").uniform(),
        Main.uploader(),
        $(".chart").knob({
            fgColor: "#F39130",
            bgColor: "#f0cb96",
            inputColor: "#F39130",
            readOnly: !0
        }),
        $(".chart-gray").trigger("configure", {
            fgColor: "#c2c2c2",
            bgColor: "#e4e4e4",
            inputColor: "#c2c2c2"
        }),
        $(".tagsinput").remove(),
        $(".phones-input").tagsInput({
            width: "65%",
            height: "200",
            defaultText: "Добавить телефон",
            delimiter: ","
        }),
        $(".tags-input").tagsInput({
            width: "65%",
            height: "200",
            defaultText: "Добавить",
            delimiter: ";"
        }),
        $(".idTabs ul, .ad-tabs").idTabs(),
        $(".idTabs a").on("click", function() {
            Main.reloadBannerPosition()
        }
        ),
        $(document).on("mouseover", "a[data-user_id]", function(t) {
            $(this).qtip({
                prerender: !0,
                overwrite: !1,
                content: {
                    text: function(t, e) {
                        return _user_id = $(this).data("user_id"),
                        $.ajax({
                            url: "/get_user_info_ajax-" + _user_id
                        }).done(function(t) {
                            e.set("content.text", t)
                        }
                        ).fail(function(t, i, n) {
                            e.set("content.text", i + ": " + n)
                        }
                        ),
                        "Загрузка..."
                    }
                },
                position: {
                    my: "top left",
                    at: "bottom left",
                    adjust: {
                        y: 20
                    }
                },
                hide: {
                    fixed: !0,
                    delay: 600
                },
                style: "qtip-wiki"
            }, t)
        }
        ),
        $(".editor").redactor({
            lang: "ru",
            imageFloatMargin: "20px",
            linkAnchor: !0,
            convertImageLinks: !0,
            convertVideoLinks: !0,
            buttons: ["bold", "italic", "deleted", "|", "alignleft", "aligncenter", "alignright", "|", "unorderedlist", "orderedlist", "|", "link", "image", "video"]
        }),
        $(".admin-editor").redactor({
            lang: "ru",
            imageFloatMargin: "20px",
            linkAnchor: !0,
            buttons: ["bold", "italic", "deleted", "|", "alignleft", "aligncenter", "alignright", "|", "unorderedlist", "orderedlist", "outdent", "indent", "|", "image", "video", "file", "table", "link", "|", "fontcolor", "backcolor", "|", "horizontalrule", "|", "html"],
            imageUpload: "/admin/upload/upload_editor_image",
            convertImageLinks: !0,
            convertVideoLinks: !0
        }),
        $(".a-row > textarea, .autosize").not(".editor").autoResize(),
        $(".select-2").select2("destroy"),
        $(".select-2").select2(),
        $("input[type=file]").each(function() {
            _filename = $(this).attr("title"),
            void 0 != _filename && "" != _filename && (_ext = _filename.split(".").pop(),
            _content = "jpg" == _ext ? '<img src="/' + _filename + '" alt="/' + _filename + '" />' : '<a target="_blank" href="/uploads/docs/' + _filename + '">Просмотреть вложение</a>',
            $(this).next().text(_filename))
        }
        )
    },
    fineUploader: function(t) {
        t.fineUploader({
            request: {
                endpoint: "/index.ajax.php?route=" + _module + "/upload_image"
            },
            failedUploadTextDisplay: {
                maxChars: 40,
                responseProperty: "error",
                enableTooltip: !1
            },
            text: {
                uploadButton: '<i class="a-icon-plus a-icon-gray"></i>'
            },
            template: '<div class="qq-uploader"><pre class="qq-upload-drop-area span12"><span></span></pre><div class="qq-upload-button btn btn-success"><i class="a-icon-plus a-icon-gray"></i></div><span class="qq-drop-processing"><span></span><span class="qq-drop-processing-spinner"></span></span><ul class="qq-upload-list" style="margin-top: 10px; text-align: center; display:none"></ul></div>'
        }).on("upload", function() {
            $("#uploader > li").each(function() {
                return $(this).hasClass("image-added") ? void 0 : ($(this).find("i").attr("class", "load"),
                !1)
            }
            )
        }
        ).on("complete", function(t, e, i, n) {
            n.success && $("#uploader > li").each(function() {
                return $(this).hasClass("image-added") ? void 0 : ($(this).find(".qq-uploader").hide(),
                _html = '<input id="iamge_' + n.image_id + '" type="hidden" name="images[]" value="' + n.image_id + '" /><img src="' + n.uploadName + '" alt="' + n.id_image + '"><div class="options"><a class="add-description" title="Добавить описание" href="' + n.image_id + '"><i class="a-icon-pencil a-icon-white"></i></a><a class="delete-image" title="Удалить" href="' + n.image_id + '"><i class="a-icon-trash a-icon-white"></i></a></div>',
                $(this).append(_html).addClass("image-added"),
                !1)
            }
            )
        }
        )
    },
    uploader: function() {
        $(".uploader").sortable({
            items: " > li.image-added"
        }),
        _module = window.location.href.replace("http://navistom.com", "").split("/"),
        _module = "ua" == _module[1] || "ru" == _module[1] || "by" == _module[1] ? _module[2] : _module[1],
        _module = void 0 == _module ? "demand" : _module,
        $(".uploader li.image-added").each(function() {
            _id = $(this).find("img").attr("alt"),
            _html = '<div class="options"><a class="add-description" title="Добавить описание" href="' + _id + '"><i class="a-icon-pencil a-icon-white"></i></a><a class="delete-image" title="Удалить" href="' + _id + '"><i class="a-icon-trash a-icon-white"></i></a></div>',
            $(this).append(_html)
        }
        ),
        $(".delete-image").die("click").live("click", function() {
            return _image_id = $(this).attr("href"),
            _parent = $(this).parent().parent(),
            _image_id > 0 && $.ajax({
                type: "GET",
                url: "/index.ajax.php",
                data: {
                    route: _module + "/delete_image-" + _image_id
                },
                dataType: "json",
                cache: !1,
                success: function(t) {
                    t.success && (_parent.removeClass("image-added").find("img, input[type=hidden], .options").remove(),
                    _parent.find(".qq-uploader").length > 0 ? (_parent.find(".qq-uploader").show(),
                    _parent.find("i").attr("class", "a-icon-plus a-icon-gray")) : Main.fineUploader(_parent))
                }
            }),
            !1
        }
        ),
        Main.fineUploader($(".uploader li").not(".image-added"))
    },
    sendPermissionRequest: function(t) {
        $.ajax({
            type: "GET",
            url: "/index.ajax.php",
            data: {
                route: "access-request",
                type: t || 0,
                url: window.location.href
            },
            dataType: "json",
            cache: !1
        }).success(function(t) {
            $(".a-mess-orange").after('<div class="a-mess-green">' + t.message + "</div>").remove()
        }
        )
    },
    toggleMenu: function() {
        var t = $(document)
          , e = t.find("#offers-menu")
          , i = t.find("#offers-link");
        i.on("click", function(i) {
            i.preventDefault(),
            e.toggleClass("show"),
            e.hasClass("show") && t.on("click.menu", function(i) {
                var n = $(i.target);
                n.hasClass("fixed-menu") || n.parents(".fixed-menu").length || "offers-link" == n[0].id || (e.removeClass("show"),
                t.unbind("click.menu"))
            }
            )
        }
        )
    },
    toggleExchange: function() {
        var t = $("#exchange_default")
          , e = $("#exchange_default_1")
          , i = $(".currency-input");
        return i.attr("disabled", t.prop("checked")),
        t.on("change", function() {
            i.attr("disabled", !0)
        }
        ),
        e.on("change", function() {
            i.attr("disabled", !1)
        }
        ),
        !1
    },
    site: function() {
        $(".navi-search, #global-search").submit(function() {
            return _action = $(this).attr("action"),
            _val = $("input[type=text]").val(),
            _val.length > 1 && (window.location = _action + "-" + _val),
            !1
        }
        ),
        $("#passw-recovery").live("click", function(t) {
            t.preventDefault(),
            _parent = $(this).parent().parent().parent().parent(),
            _parent.children().remove(),
            _parent.append(Main.templates.passw_recovery())
        }
        ),
        $(".select-as-link").on("change", function() {
            _val = $(this).val(),
            0 != _val && (window.location = _val)
        }
        ),
        $("#categ_id").on("change", function() {
            _val = $(this).val(),
            _val > 0 && $.ajax({
                type: "GET",
                url: "/index.ajax.php",
                data: {
                    route: "product/get_sub_categs-" + _val
                },
                dataType: "json",
                cache: !1,
                success: function(t) {
                    _html = "",
                    $.each(t, function(t, e) {
                        _html += '<option value="' + t + '">' + e + "</option>"
                    }
                    ),
                    $("#sub_categ_id").html(_html).select2("val", "All")
                }
            })
        }
        ),
        $("#producer_id").live("change", function() {
            _val = $(this).val(),
            _val > 0 && $.ajax({
                type: "GET",
                url: "/index.ajax.php",
                data: {
                    route: "product/get_products-" + _val
                },
                dataType: "json",
                cache: !1,
                success: function(t) {
                    _html = "",
                    $.each(t, function(t, e) {
                        _html += '<option value="' + t + '">' + e + "</option>"
                    }
                    ),
                    $("#product_id").html(_html).select2("val", "All")
                }
            })
        }
        ),
        $("#new-producer-add").toggle(function() {
            _html = '<div class="a-row"><label><font class="a-red">*</font> Название нового производителя</label><input class="validate[groupRequired[producer], ajax[ajaxProducerSearch]]" type="text" name="new_producer_name" id="new_producer_name" /></div>',
            $(this).text("Отмена").parent().after(_html)
        }
        , function() {
            $(this).text("Не нашли нужного производителя?"),
            $("#new_producer_name").parent().remove()
        }
        ),
        $("#new-product-add").toggle(function() {
            return $("#producer_id").val() > 0 || void 0 != $("#new_producer_name").val() && "" != $("#new_producer_name").val() ? (_ajaxValidation = $("#producer_id").val() ? ", ajax[ajaxProductSearch]" : "",
            _html = '<div class="a-row"><label><font class="a-red">*</font> Название нового товара</label><input class="validate[groupRequired[product]' + _ajaxValidation + ']" type="text" name="new_product_name" id="new_product_name" /></div><div class="a-row"><label><font class="a-red">*</font> Назначение товара<span class="a-form-descr">Пример: "Установка стоматологическая", "Масса керамическая"</span></label><input type="text" class="validate[required]" name="new_product_description" id="new_product_description" /></div>',
            $(this).text("Отмена").parent().after(_html)) : (alert("Сначала выберите производителя"),
            $(this).click()),
            !1
        }
        , function() {
            return $(this).text("Не нашли нужный товар?"),
            $("#new_product_name, #new_product_description").parent().remove(),
            !1
        }
        ),
        $("#n-comment-add").on("submit", function() {
            return $(this).ajaxSubmit({
                resetForm: !0,
                success: function(t) {
                    $("#comment-list").append(t).find(".n-comment").last().slideDown(200)
                }
            }),
            !1
        }
        ),
        $("#article-vote-add input[type=radio]").on("change", function() {
            $("#article-vote-add").ajaxSubmit({
                success: function(t) {
                    $("#article-vote-add").slideUp(200, function() {
                        $("#article-votes-list").html(t).find(".n-interview-result").delay(100).slideDown(200)
                    }
                    )
                }
            })
        }
        ),
        $(".n-add-form, .n-edit-form").validationEngine("attach", {
            promptPosition: "topRight",
            prettySelect: !0,
            usePrefix: "s2id_",
            autoPositionUpdate: !0,
            onValidationComplete: function(t, e) {
                return Main.options.validationStatus = e,
                e
            }
        }),
        $("#registration-form").on("submit", function() {
            return Main.options.validationStatus && (_submit = $(this).find("input[type=submit]"),
            $(".form-loader").fadeIn(200),
            _submit.attr("disabled", "disabled"),
            $(this).ajaxSubmit({
                success: function(t) {
                    $(".form-loader").fadeOut(200),
                    _submit.removeAttr("disabled"),
                    t = jQuery.parseJSON(t),
                    t.success ? (_parent = $("#registration-form").parent(),
                    $("#registration-form").remove(),
                    _html = '<div class="a-mess-green">' + t.message + "</div>",
                    _parent.append(_html),
                    $(".a-modal-closer").height($(".a-modal").height())) : ($("#registration-form").remove(),
                    _html = '<div class="a-mess-red">' + t.message + "</div>",
                    _parent.append(_html),
                    $(".a-modal-closer").height($(".a-modal").height()))
                }
            })),
            !1
        }
        ),
        $(".n-add-form").not("#registration-form").on("submit", function() {
		      if(Main.options.validationStatus ){
			  _submit = $(this).find("[type=submit]");
			  _submit.attr("disabled", "disabled");
			  }
         return Main.options.validationStatus && (_submit = $(this).find("[type=submit]"),
            _submit.attr("disabled", "disabled"),
            $(this).ajaxSubmit({
                data: {
                    submit: Main.options.submitName,
                    vipStatus: Main.options.vipStatus
                },
                success: function(t) {
					
					
					    try{
						
					     t = jQuery.parseJSON(t);
					  
					   
						   
						  /*  console.log(t);
						   console.log(t.portmone);
						   console.log(ddd.shop_order_number); */
						/*  send_liqpay(t.send_data.data , t.send_data.signature, t.portmone);  */
						  if(t.success==false){
						      _submit.removeAttr("disabled");
						  }
						 redirect_success(t);
						
						 
					   }catch(e){
						    
							   if(location.pathname.search('add') > 0){
								      success_edit(t);
							    }else{
									/* success_edit(t); */
							
							   t.success ? (_parent = $(".n-add-form").parent(),
								$(".n-add-form").remove(),
								_html = '<div style="width:100%;" class="a-mess-green">' + t.message + "</div><div><div class='button_succ' onclick='raceta()'>Рекламировать это объявление</div></div>",
								
								$(".a-modal-content").length ? ($(".a-modal-content").append(_html),
								$(".a-modal-closer").height($(".a-modal").height())) : _parent.append(_html)) : ($("#article-add-form").remove(),
								_html = '<div style="width:700px;"  class="a-mess-red">' + t.message + "</div>",
								$(".a-modal-content").append(_html),
								$(".a-modal-closer").height($(".a-modal").height())) 
								$('#product-add-form input[type="text"]').val('');
						  }
					   }
					 
					 
					$('#article-add-form').remove();

				
				}})),
            !1 
        }
        ),
        $(".input-submit").on("click", function() {
			
            return Main.options.submitName = $(this).attr("name"),
            Main.options.vipStatus = $(this).val(),
            $(".n-add-form").submit(),
            !1
        }
        ),
        $(".n-dialog-no-view").click(function() {
            $(this).removeClass("n-dialog-no-view")
        }
        ),
        $(".send-user-mess").submit(function() {
            return _textarea = $(this).find("textarea"),
            "" != _textarea.val() && $(this).ajaxSubmit({
                success: function(t) {
                    t = $.parseJSON(t),
                    t.success && ($("#n-dialog-mess-list").append(t.message).find(".n-dialog-full").last().slideDown(200),
                    _textarea.val(""))
                }
            }),
            !1
        }
        ),
        $(".navi-search-btn").click(function() {
            return $(this).parent().submit(),
            !1
        }
        ),
        $("#send-user-mess").on("submit", function(t) {
            return t.preventDefault(),
            _submit = $(this).find("input[type=submit]"),
            _form = $(this),
            _parent = _form.parent(),
            $(".form-loader").fadeIn(200),
            _submit.attr("disabled", !0),
            $(this).ajaxSubmit({
                resetForm: !0,
                success: function(t) {
                    t = JSON.parse(t),
                    t.success ? (_form.remove(),
                    _parent.prepend('<div class="a-mess-green">' + t.message + "</div>")) : _form.prepend('<div class="a-mess-red">' + t.message + "</div>"),
                    $(".form-loader").fadeOut(200)
                }
            }),
            !1
        }
        ),
        $(document).on("change", ".is_working", function() {}
        ),
        $("#n-aut-form").on("submit", function() {
            return $(".form-loader").fadeIn(200),
            $(this).ajaxSubmit({
                resetForm: !0,
                success: function(t) {
                    t = JSON.parse(t),
                    t.success ? window.location = Main.options.addresPrevValue || "/cabinet" : $("#ajax-response").html(t.error).slideDown(200),
                    $(".form-loader").fadeOut(200)
                }
            }),
            !1
        }
        ),
        $("#n-recovery-form").die("submit").live("submit", function() {
            return $(this).ajaxSubmit({
                resetForm: !0,
                success: function(t) {
                    t = JSON.parse(t),
                    t.success ? $("#n-recovery-form").html('<div class="a-mess-yellow">' + t.message + "</div>") : $("#ajax-response").html(t.message).slideDown(200)
                }
            }),
            !1
        }
        ),
        $(".a-modal-parent").scroll(function() {
            $(".datepicker-start, .datepicker-end").datepicker("hide"),
            $(".limiterBox").hide(),
            $(".month-picker").length > 0 && $(".month-picker").monthpicker("hide")
        }
        ),
        "checked" == $("#flag_agreed").attr("checked") && $("#start_date_range, #end_date_range").attr("disabled", "disabled"),
        $("#flag_agreed").on("change", function() {
            "checked" == $(this).attr("checked") ? $("#date_start, #date_end").val("").attr("disabled", "disabled") : $("#date_start, #date_end").removeAttr("disabled")
        }
        ),
        _lectors = $(".lectors-add > div").size() - 1,
        $("#add-lector").on("click", function() {
            return _lectors++,
            _html = '<div style="display:none;" class="lectors-added-list" id="lector-' + _lectors + '"><a href="javascript:void(0)" class="delete-lector">Удалить лектора</a><div class="a-row"><label><font class="a-red">*</font> Ф.И.О. лектора</label><input type="text" name="lector_name[' + _lectors + ']" id="lector_name_' + _lectors + '" /></div><div class="a-row"><label><font class="a-red">*</font> Фото лектора</label><input type="file" name="lector_image[' + _lectors + ']" id="lector_image_' + _lectors + '" /></div><div class="a-row"><label><font class="a-red">*</font> О лекторе</label><textarea name="lector_description[' + _lectors + ']" id="lector_description_' + _lectors + '"></textarea></div><hr /></div>',
            $(".lectors-add").append(_html),
            $("#lector-" + _lectors).slideDown(200),
            $("#lector-" + _lectors + " input[type=file]").uniform(),
            $("#lector-" + _lectors + " .a-row > textarea").autoResize(),
            !1
        }
        ),
        $(".delete-lector").live("click", function() {
            return $(this).parent().slideUp(200, function() {
                $(this).remove()
            }
            ),
            !1
        }
        ),
        $("#user_region, #region_id").on("change", function() {
            _val = $(this).val(),
            _val > 0 && $.ajax({
                type: "GET",
                url: "/index.ajax.php",
                data: {
                    route: "get_cities-" + _val
                },
                dataType: "json",
                cache: !1,
                success: function(t) {
                    _html = "",
                    $.each(t, function(t, e) {
                        _html += '<option value="' + t + '">' + e + "</option>"
                    }
                    ),
                    $("#city_id").index() > -1 && $("#city_id").html(_html).select2("val", "All"),
                    $("#user_city").html(_html).select2("val", "All")
                }
            })
        }
        ),
        $("#resume-add-work").on("click", function(t) {
            t.preventDefault(),
            _i = $(".resume-add-work-parent").length,
            _html = Main.templates.resume_add_work(_i),
            _btn = Main.templates.resume_add_button("Добавить место работы", "resume-add-work-next"),
            $("#resume-work").find(".a-form-mess").hide(),
            $("#resume-work").append(_html).after(_btn),
            $(".month-picker").monthpicker()
        }
        ),
        $("#resume-add-work-next").die("click").live("click", function(t) {
            t.preventDefault(),
            _i = $(".resume-add-work-parent").length,
            _html = Main.templates.resume_add_work(_i),
            $("#resume-work").append(_html),
            $(".month-picker").monthpicker()
        }
        ),
        $(".delete-resume-added").die("click").live("click", function(t) {
            t.preventDefault(),
            _parent = $(this).parent().parent(),
            $(this).parent().remove(),
            0 == _parent.children().not(".a-form-mess").length && (_parent.next().remove(),
            _parent.find(".a-form-mess").show())
        }
        ),
        $("#resume-add-experience").on("click", function(t) {
            t.preventDefault(),
            _i = $(".resume-add-experience-parent").length,
            _html = Main.templates.resume_add_experience(_i),
            _btn = Main.templates.resume_add_button("Добавить место учебы", "resume-add-experience-next"),
            $("#resume-experience").find(".a-form-mess").hide(),
            $("#resume-experience").append(_html).after(_btn),
            $(".month-picker").monthpicker()
        }
        ),
        $("#resume-add-experience-next").die("click").live("click", function(t) {
            t.preventDefault(),
            _i = $(".resume-add-experience-parent").length,
            _html = Main.templates.resume_add_experience(_i),
            $("#resume-experience").append(_html),
            $(".month-picker").monthpicker()
        }
        ),
        $("#resume-add-traning").on("click", function(t) {
            t.preventDefault(),
            _i = $(".resume-add-traning-parent").length,
            _html = Main.templates.resume_add_traning(_i),
            _btn = Main.templates.resume_add_button("Добавить курс или тренинг", "resume-add-traning-next"),
            $("#resume-traning").find(".a-form-mess").hide(),
            $("#resume-traning").append(_html).after(_btn),
            $(".month-picker").monthpicker()
        }
        ),
        $("#resume-add-traning-next").die("click").live("click", function(t) {
            t.preventDefault(),
            _i = $(".resume-add-traning-parent").length,
            _html = Main.templates.resume_add_traning(_i),
            $("#resume-traning").append(_html),
            $(".month-picker").monthpicker()
        }
        ),
        $("#resume-add-lang").on("click", function(t) {
            t.preventDefault(),
            _i = $(".resume-add-lang-parent").length,
            _html = Main.templates.resume_add_lang(_i),
            _btn = Main.templates.resume_add_button("Добавить язык", "resume-add-lang-next"),
            $("#resume-langs").find(".a-form-mess").hide(),
            $("#resume-langs").append(_html).after(_btn),
            $(".month-picker").monthpicker()
        }
        ),
        $("#resume-add-lang-next").die("click").live("click", function(t) {
            t.preventDefault(),
            _i = $(".resume-add-lang-parent").length,
            _html = Main.templates.resume_add_lang(_i),
            $("#resume-langs").append(_html),
            $(".month-picker").monthpicker()
        }
        ),
        $("#vacancy-company-info-edit").on("click", function(t) {
            t.preventDefault()
        }
        ),
        $("#activity_categ_id").index() >= 0 && (_val = $("#activity_categ_id").val(),
        0 == $.inArray("19", _val) && (elem = $(".lectors-add"),
        elem.prev().hide(),
        elem.next().hide(),
        elem.hide()))
    },
    reloadBannerPosition: function() {
        var t = $("#fixed-banner");
        t.length && (Main.topBannerPosition = t.position().top - parseFloat(t.css("marginTop").replace(/auto/, 0)) - 30)
    },
    address: function() {
        $("a.ajax-link").live("click", function() {
if( screen.width <900 ){
	return'0';
}			
            var t = window.location.origin || window.location.protocol + "//" + window.location.hostname;
            return window.history && window.history.pushState ? (Main.options.addressHash = window.location.hash,
            Main.options.addressValue = window.location,
            Main.options.addresPrevValue = window.location.href.replace(t, ""),
            Main.options.addressElem = $(this),
            $.address.value($(this).attr("href")),
            !1) : void 0
        }
        ),
        $("#left").on("click", ".a-pagination a", function(t) {
            window.history && window.history.pushState && (t.preventDefault(),
            $.address.state(""),
            $.address.value($(this).attr("href")))
        }
        ),
        $.address.init(function() {}
        ).change(function(t) {
            return "/" != t.path && "/ua" != t.path && "/ua/" != t.path && window.history && window.history.pushState ? Main.options.addressNoLoad || -1 === t.value.indexOf("/page-") ? (regExp = /page\/(\d+)/gi,
            void (Main.options.addressNoLoad || null  != t.path.match(regExp) || "/404" == t.path || ($.address.state(""),
            "/" != t.path && ($("body").prepend('<div class="a-modal-bg"></div><div id="ajax-loader">Загрузка...</div>'),
            $.ajax({
                type: "GET",
                url: "/index.ajax.php",
                data: {
                    route: t.path,
                    query: t.parameters
                },
                dataType: "html",
                cache: !1,
                success: function(t) {
		
                    $(".a-modal-bg, #ajax-loader").remove(),
					
                    $("body").prepend(t),
                    $("body").css("overflow", "hidden"),
                    Main.init(),
                    Main.site(),
                    $("#global-search-input").val() && "" != $("#global-search-input").val() && $(".a-modal-content").highlight($("#global-search-input").val().split(" "), {
                        element: "span",
                        className: "high"
                    }),
                    window.addthis && (window.addthis = null ,
                    window._adr = null ,
                    window._atc = null ,
                    window._atd = null ,
                    window._ate = null ,
                    window._atr = null ,
                    window._atw = null ),
                    "ontouchstart" in window || $(".a-modal-closer").height($(".a-modal").height())
                },
                error: function() {
                    $(".a-modal-bg, #ajax-loader").remove()
                }
            }))))) : ($.ajax({
                method: "GET",
                dataType: "html",
                url: t.value
            }).success(function(t) {
                var e = $(t);
                $("#pagination-container").html(e.find("#pagination-container").html()),
                $(".a-pagination").html(e.find(".a-pagination").html()),
                $(document).scrollTop(0),
                $.address.state(window.location.href)
            }
            ).error(function() {
                $(".a-modal-bg, #ajax-loader").remove()
            }
            ),
            !1) : !1
        }
        ),	

        $(".a-modal-closer, .a-modal-close").unbind("click").live("click", function() {
/* ---------------- */
			  jQuery('link[href*="all_new.min.css"]').attr('href','/templates/complete/all.min.css');
			  
            return $(".a-modal-bg").last().fadeOut(200, function() {
                $(".a-modal-bg").last().remove()
            }
            ),
            $(".a-modal-parent").last().fadeOut(100, function() {
                $(".a-modal-parent").last().remove(),
                $("body").css("overflow", "scroll")
            }
            ),
            Main.options.addressNoLoad = !0,
            Main.options.is_open_modal || (window.history && window.history.pushState ? window.history.pushState("", "", window.location.pathname) : window.location.href = window.location.href.replace(/#.*$/, "#") + Main.options.addressHash,
            $.address.value("" != Main.options.addressHash ? Main.options.addressHash.replace("#", "") : Main.options.addresPrevValue)),
            Main.options.addressNoLoad = !1,
            Main.options.is_open_modal = !1,
            !1
        }
        )
    }
};
$(Main.address),
$(document).ready(function() {
    Main.init(),
    Main.site(),
    $(document).on("keyup", document, function(t) {
        27 == t.keyCode && $(".a-modal-closer").click()
    }
    ),
    "#404" == window.location.hash && $("#left").prepend('<div id="mess-404">Предложение удалено</div>');
    var t = $("#navi-filter");
    $("body").on("click", "#filter-right > a", function(t) {
        t.preventDefault(),
        _parent = $(this),
        _elem = $(this).next(),
        _elem.slideToggle(300, function() {
            Main.reloadBannerPosition()
        }
        ),
        _parent.toggleClass("active")
    }
    ),
    $("#search a").on("click", function(t) {
        t.preventDefault(),
        $("#search").submit()
    }
    ),
    $("#search").on("submit", function(t) {
        t.preventDefault(),
        _action = $(this).attr("action"),
        _val = $(this).find("input").val(),
        _val.length > 3 && (window.location = _action + "-" + _val)
    }
    ),
    $(window).scroll(function() {
        $(this).scrollTop() > 100 && t.hasClass("default") ? t.removeClass("default").addClass("fixed") : $(this).scrollTop() <= 100 && t.hasClass("fixed") && t.removeClass("fixed").addClass("default")
    }
    ),
    $("#main-scroller").scrollable({
        items: "#main-scroller .scroller-items",
        speed: 200
    });
    var e = "ua"
      , i = window.location.pathname.split("/")[1];
    $(document).on("click", "#send-error-mess-link", function(t) {
        t.preventDefault(),
        Main.options.is_open_modal || (_url = window.location.href,
        Main.options.is_open_modal = !0,
        $.ajax({
            type: "GET",
            url: "/index.ajax.php",
            data: {
                route: "send_user_error",
                url: _url
            },
            dataType: "html",
            cache: !1,
            success: function(t) {
                $("body").append(t).css("overflow", "hidden"),
                $(".a-modal-bg").last().css("z-index", 999),
                _title = -1 != $("h1").index() ? $("h1").text() : $("title").text(),
                $("#page-title").text(_title),
                Main.init(),
                Main.site(),
                $(".a-modal-closer").height($(".a-modal").height())
            }
        }))
    }
    ),
    $(document).on("click", "#send-my-resume", function(t) {
        t.preventDefault(),
        Main.options.is_open_modal || (Main.options.is_open_modal = !0,
        $.ajax({
            type: "GET",
            url: "/index.ajax.php",
            data: {
                route: $(this).attr("href")
            },
            dataType: "html",
            cache: !1,
            success: function(t) {
                $("body").append(t).css("overflow", "hidden"),
                $(".a-modal-bg").last().css("z-index", 999),
                _title = -1 != $("h1").index() ? $("h1").text() : $("title").text(),
                Main.init(),
                Main.site(),
                $(".a-modal-closer").height($(".a-modal").height())
            }
        }))
    }
    ),
    $(document).on("click", "#add-atach", function(t) {
        t.preventDefault(),
        $("#attach-input").click()
    }
    ),
    $(document).on("change", "#attach-input", function() {
        _text = $(this).val().split("\\").pop(),
        "" != _text && $("#add-atach").text(_text)
    }
    ),
    $(document).on("click", "#selection-categs a", function(t) {
        t.preventDefault();
        var e = $(this).attr("href");
        if ($(this).parent().parent().find("a").removeClass("active"),
        $(this).addClass("active"),
        e > 0) {
            if ("ads" == i)
                var n = i + "/get_sub_categs-" + e + "-flag_min-1-flag_ads-1";
            else
                var n = i + "/get_sub_categs-" + e + "-flag_min-1";
            $.ajax({
                type: "GET",
                url: "/index.ajax.php",
                data: {
                    route: n
                },
                dataType: "json",
                cache: !1,
                success: function(t) {
                    _html = "",
                    $.each(t, function(t, e) {
                        _html += '<li><a href="' + t + '">' + e + "</a></li>"
                    }
                    ),
                    $("#selection-sub-categs").html(_html)
                }
            })
        }
    }
    ),
    $(document).on("click", "#selection-sub-categs a", function(t) {
        t.preventDefault(),
        _id = $(this).attr("href"),
        $(this).parent().parent().find("a").removeClass("active"),
        $(this).addClass("active"),
        _id > 0 && $.ajax({
            type: "GET",
            url: "/index.ajax.php",
            data: {
                route: i + "/get_producers-" + _id
            },
            dataType: "json",
            cache: !1,
            success: function(t) {
                _html = "",
                0 != t.length ? ($.each(t, function(t, e) {
                    _html += '<li><a href="' + e.producer_id + '">' + e.name + "</a></li>"
                }
                ),
                $("#selection-producers").html(_html)) : $("#selection-producers").html("<li>Ничего не найдено</li>")
            }
        })
    }
    ),
    $(document).on("click", "#selection-producers a", function(t) {
        t.preventDefault(),
        _id = $(this).attr("href"),
        _sub_categ = $("#selection-sub-categs a.active").attr("href"),
        window.location.href = "/" + e + "/" + i + "/sub_categ-" + _sub_categ + "/firm-" + _id + "-all"
    }
    ),
    $(document).on("click", "#new-tag-add", function(t) {
        switch (t.preventDefault(),
        _state = $(this).data("state")) {
        case 1:
        case void 0:
            $(this).text("Отмена").parent().parent().after('<div class="a-row"><label>Название меток через запятую</label><input type="text" name="new_tags" id="new_tags"></div>'),
            $("#new_tags").tagsInput({
                width: "65%",
                height: "200",
                defaultText: "Добавить метку",
                delimiter: ","
            }),
            $(this).data("state", 2);
            break;
        case 2:
            $(this).text("Добавить новые метки").parent().parent().next().remove(),
            $(this).data("state", 1)
        }
    }
    ),
    $(document).on("change", "#activity_categ_id", function() {
        0 == $.inArray("19", $(this).val()) ? (elem = $(".lectors-add"),
        elem.prev().hide(),
        elem.next().hide(),
        elem.hide()) : (elem = $(".lectors-add"),
        elem.prev().show(),
        elem.next().show(),
        elem.show())
    }
    ),
    $(document).on("hover", "div[title]", function(t) {
        _text = $(this).attr("title"),
        "" != _text && $(this).qtip({
            prerender: !0,
            overwrite: !1,
            content: {
                text: _text
            },
            position: {
                my: "top right",
                at: "bottom right",
                adjust: {
                    y: 20
                }
            },
            hide: {
                fixed: !0,
                delay: 600
            },
            style: "qtip"
        }, t)
    }
    ),
    $(document).on("click", "#mess-country-edit .a-close", function(t) {
        t.preventDefault()
    }
    ),
    $("#pagination-container-main").length && jQuery.ias({
        container: "#pagination-container-main",
        item: ".pagination-block",
        pagination: ".a-pagination li",
        next: "li.next-posts a",
        trigger: "Загрузить еще записи ",
        loader: '<div id="page-loader"></div>',
        beforePageChange: function() {
            Main.options.addressNoLoad = !0
        },
        onLoadItems: function() {
            Main.options.addressNoLoad = !1,
            $.ajax({
                type: "GET",
                url: "/index.ajax.php",
                data: {
                    route: "get-banner-ajax"
                },
                dataType: "json",
                cache: !1,
                success: function(t) {
					
                     var e = $("#fixed-banner");
                    e.find("img").attr("src", "/uploads/banners/" + t.image),
				   
					
                    e.find("a").attr({
                        href: t.link,
                        target: t.target
                    }), 
					
                    "" != $("#global-search-input").val() && $(".item").highlight($("#global-search-input").val().split(" "), {
                        element: "span",
                        className: "high"
                    });
					
					
					
                }
            })
        }
    }),
    Main.reloadBannerPosition(),
    $(window).scroll(function() {
        var t = $(this).scrollTop();
        t >= Main.topBannerPosition ? ($("#demand-add-btn").show(),
        $("#fixed-banner").addClass("fixed")) : ($("#demand-add-btn").hide(),
        $("#fixed-banner").removeClass("fixed"))
		
    }
    ),
    $(document).on("click", ".no-moder-view .options a.ajax-link", function() {
        $(this).parent().parent().parent().removeClass("no-moder-view")
    }
    ),
    $(document).on("click", "#remove-link", function(t) {
        t.preventDefault(),
        _route = $(this).attr("href"),
        _form = $(".n-add-form"),
        _parent = _form.parent(),
        "" != _route && $.ajax({
            type: "GET",
            url: "/index.ajax.php",
            data: {
                route: _route
            },
            dataType: "json",
            cache: !1,
            success: function(t) {
                t.success ? (_parent.prepend('<div class="a-mess-green">' + t.message + "</div>"),
                _form.remove()) : _form.prepend('<div class="a-mess-red">' + t.message + "</div>")
            }
        })
    }
    ),
    $(document).on("change", "#mess_tpls", function() {
        mess_id = $(this).val(),
        mess_id > 0 && $.ajax({
            type: "GET",
            url: "/index.ajax.php",
            data: {
                route: "get-mess-tpl-" + mess_id
            },
            dataType: "json",
            cache: !1,
            success: function(t) {
                $("#send-user-mess textarea").val(t.message).autoResize()
            }
        })
    }
    ),
    $(document).on("click", ".delete-link", function(t) {
        t.preventDefault(),
        _href = $(this).attr("href"),
        _title = $(this).parent().parent().parent().find("a.ajax-link:eq(0)").text(),
        $.confirm({
            title: "Удаление материала",
            message: _title + "<br /><br /> Вы действительно хотите удалить этот материал?",
            buttons: {
                "Удалить": {
                    "class": "a-btn-red",
                    action: function() {
                        window.location = _href
                    }
                },
                "Отмена": {
                    "class": "a-btn",
                    action: function() {}
                }
            }
        })
    }
    ),
    "print" == window.location.href.split("?")[1] && ($("body").addClass("print"),
    window.print()),
    $.scrollUp({
        scrollName: "scrollUp",
        topDistance: "300",
        topSpeed: 300,
        animation: "fade",
        animationInSpeed: 200,
        animationOutSpeed: 200,
        scrollText: '<i class="a-icon-arrow-up a-icon-white"></i>',
        activeOverlay: !1
    }),
    $(".a-modal-bg, .a-modal-closer").bind("touchstart", function(t) {
        t.preventDefault()
    }
    );
    var n = function() {
        setTimeout(function() {
            $("#subscribe-form").ajaxSubmit({
                resetForm: !1,
                url: "/index.ajax.php?route=subscribe/subscribe_save_ajax",
                success: function() {}
            })
        }
        , 1e3)
    }
    ;
    $("#subscribe-form").on("change", "#categs_3, #categs_2, #categs_4", function(t) {
        var e = $(this)
          , i = e.val()
          , n = []
          , s = e.parent().next().find("select");
        i ? $.ajax({
            type: "POST",
            url: "/index.ajax.php?route=get-sub-categs-subsribe",
            data: {
                categs: i
            },
            dataType: "json",
            cache: !1,
            success: function(e) {
                _html = "",
                $.each(e, function(t, e) {
                    _html += '<option value="' + t + '">' + e + "</option>",
                    n.push(t)
                }
                ),
                t.loadPageEvent ? (s.html(_html).select2("val", "All"),
                _values = s.data("values").toString(),
                void 0 != _values && _values.indexOf(",") && s.select2("val", _values.split(","))) : s.html(_html).select2("val", n)
            }
        }) : e.parent().next().find("select").html("").select2("val", "All")
    }
    ),
    $("#subscribe-form").on("change", ".select-2:not(#categs_3, #categs_2, #categs_4, .cities, .sub-categs)", function() {
        var t = $(this)
          , e = t.parent().parent().find("select.cities")
          , i = t.val();
        i && null  === e.val() ? e.select2("val", [-1]) : null  == i && e.select2("val", "")
    }
    ),
    $("#subscribe-form").on("change", ".cities, .one-cities, .regions", function(t) {
        var e = $(this).val();
        t.added && -1 != t.added.id ? (0 === e.indexOf("-1") && e.splice(0, 1),
        $(this).select2("val", e)) : t.added && $(this).select2("val", ["-1"])
    }
    ),
    $(".city-search").select2({
        minimumInputLength: 1,
        query: function(t) {
            var e, i, n, s = {
                results: []
            };
            for (e = 1; 5 > e; e++) {
                for (n = "",
                i = 0; e > i; i++)
                    n += t.term;
                s.results.push({
                    id: t.term + e,
                    text: n
                })
            }
            t.callback(s)
        }
    }),
    $("#subscribe-form").on("click", ".select-all", function(t) {
        t.preventDefault();
        var e = ($(this).data("isAll"),
        $(this).parent().parent())
          , i = e.find(".select-2").not(".cities, .one-cities")
          , s = (e.find('input[type="radio"]'),
        []);
        s = $.map(i.find("option"), function(t) {
            return t.value
        }
        ),
        i.select2("val", s).change(),
        !i.length && e.find(".one-cities").length && $(".one-cities").select2("val", ["-1"]),
        n()
    }
    ),
    $("#subscribe-form").on("click", ".subscribe-section-reset", function(t) {
        t.preventDefault(),
        $(this).parent().parent().find(".select-2").select2("val", []).change(),
        n()
    }
    ),
    $("#subscribe-form").length && $("#categs_3, #categs_2, #categs_4").trigger({
        type: "change",
        loadPageEvent: 1
    }),
    $("#subscribe-form").on("change", '.select-2, input[type="radio"]', function(t) {
        !t.loadPageEvent && (t.added || t.removed || t.bubbles) && n()
    }
    ),
    $("#global-search").on("click", "#search-category", function(t) {
        t.preventDefault(),
        $(this).find("i").toggleClass("a-icon-chevron-down"),
        $("#search-menu").slideToggle(200)
    }
    ),
    $(".a-pagination").clone().insertBefore("#pagination-container"),
    Main.toggleMenu(),
    Main.toggleExchange()
}
);
/* --------------------------------------------------------------------------------------------------------------------------------------- */
	function send_liqpay(d,s ,p){
		
		var form='';
		if($('.plat-radio').prop('checked')){
			form='<form action="https://www.portmone.com.ua/gateway/" method="post" id="liqpay2"  >'
			p =JSON.parse(p)
			
			for( var k in p ){
			form +='<input type="hidden" name="'+k+'" value="'+p[k]+'">'
			} 

		}else{
			form='<form method="POST" id="liqpay2" action="https://www.liqpay.com/api/checkout" accept-charset="utf-8" >';
			form +='<input type="hidden" name="signature" value="'+s+'">'
			form +='<input type="hidden" name="data" value="'+d+'">'
		}
		 
		form +='</form>';
		
		jQuery('body').append(form);
		jQuery('#liqpay2').submit();
		 
	}

	function sum(){
		var sum=  $( ".vip-radio:checked" ).parent().find('.vip-box-price span').text()
		sum = parseInt(sum);
		$('.supplement input:checked').map(function(){   
		  sum += parseInt( $(this).attr('sum'));
		})

		$('.all_sum').text(sum);
		 console.log(sum)
	}

	$('body').on('click','.add-form-vip-box input ', function(e){
		
		  var s= $(this).parents('.add-form-vip-box').find('.vip-box-price span').text();
		  /* $("input[name='show_competitor']").val(s); */
		  console.log(s)
		   
		 /*  $('.show_competitor').text(s); */
		   /*  if(s=='150'){
				$('.show_competitor').val(1);	
			}else if( s=='100'){
					$('.show_competitor').val(2);
			}else if( s=='50'){
				$('.show_competitor').val(3);
				
			} */
	})
	
	$('body').on('click','.add-form-vip-box', function(e){
		e.stopPropagation()
		$(this).find('label').click()
		sum();
		
	})

	$('body').on('click','.supplement', function(e){
	   sum();
	})

	$('body').on('click','label', function(e){
		e.stopPropagation()
	})


	$('body').on('click','.payments', function(e){
		e.stopPropagation()
		$('.payments').removeClass('active')
		$(this).addClass('active').find('label').click()
	})
	
	function sum_succecc(){
		func_click();
		var price=0;
		$(".menu_folding input[type='checkbox']:checked").map(function(){
			var curr= parseInt($(this).parents('li').find('.price').text());
			
			price+=parseInt(curr);
			 
			$('.suma_price').text(price);
			 
		 }) 
		 
		 
		 if(price>0){
				$('#show').show();
			}else{
				$('#show').hide()
			}
			
		 
		$('.suma_price').text(price);	
		
	}

	$('.menu_folding ').on('change','select',function(){
		var suma={1:150,2:100,3:50};
		var p= $(this).val();
		
		$(this).parents('li').find('input').val(p).attr('checked','checked');
		
		$(this).parents('li').find('.price').text(suma[p]);
		 sum_succecc();
	})	
	
	function func_click(){
			
		 $('.menu_folding').find('select').map(function(i, v){
				var p=$(v).val();
				$(v).parents('li').find('input').val(p);
			})	 
			
		} 
	func_click();
		
	 $('.menu_folding ').on('click','input',function(e){
		
		sum_succecc() ;
        		
	}) 
	
	 if( location.pathname.search('success') ){
		
		   sum_succecc() ;
	 
   		
	   }

      if(location.pathname=='/'){
		  $('footer').hide();
	  }
	
	$('#success_form').submit(function(e){
		e.preventDefault();
		$.post('/form_success', $("form#success_form").not('select').serialize(), function(d){
		  d = jQuery.parseJSON(d);
		  send_liqpay(d.send_data.data , d.send_data.signature, d.portmone); 
		  
		})
	})

	function success_edit(d){
		d= d||{};
	  
		 var sec =location.pathname.split('/');
		 
		 var  sections ={
				'product':3,
				'ads':4,
				'activity':5,
				'lab':7,
				'realty':8,
				'service':9,
				'diagnostic':10,
				'demand':11,
				'article':16,
				'vacancy':15,
				'resume':6
			 };
			 
		  if(sec.length>3){
			var test=[];
			test[0]=sec[0];
			test[1]= sec[2];
			test[2]=sec[3];
			sec=test;	
		 };	  
		if(location.pathname.search('edit')>0){
			var resurs_id=sec[2].split('-');
			sec=sections[sec[1]];
			var url='/success-'+resurs_id[1];
			url+='-'+sec+'-up';
		if(sec!=16)
			location.pathname=url;
			
		}else{
			
			if(d.product_id && sec[1]){
				sec=sections[sec[1]];	
				var url='/success-'+d.product_id;
				url+='-'+sec+'-add';
				location.pathname=url;	
			}	
				
		}
		
	
	}
	
	function raceta(){
		var  sections ={
				'product':3,
				'ads':4,
				'activity':5,
				'lab':7,
				'realty':8,
				'service':9,
				'diagnostic':10,
				'demand':11,
				'article':16,
				'vacancy':15,
				'resume':6
			 };
		var arr =location.pathname.split('/');
		
		var sec=sections[arr[1]];
			
			   if(arr[1]=='work'){
				   
				sec=sections[arr[2]]; 
					var resurs_id=arr[3].split('-');
			   }else{
					var resurs_id=arr[2].split('-');
				}
		
		
		
		
		
		if(location.pathname.search('edit')>0){
			
			var url='/success-'+resurs_id[1];
				url+='-'+sec+'-top';
				location.pathname=url;	
			
			
		}else{
			
			var url='/success-'+resurs_id[0];
				url+='-'+sec+'-top';
				location.pathname=url;	
		}
		
	}
	
	$('.add_oby').on('click',function(e){
		 e.stopPropagation();
		 $('.menu_top_right').show();
		$('#fixed').css('z-index','9');
	})
			
	$('.plus, .close').on('click' ,function(){
		$('.menu_top_right').hide();
	})
	 $('html').on('click',function(){
				$('.menu_top_right').hide();		
		 }) 
	
	function redirect_success( t ){
		 sum_succecc() ;
		  var tt=jQuery.parseJSON(t.portmone)
		  var ob=tt.shop_order_number.split('~');
		  
		var url='/success-'+(ob[0])+'-'+(+ob[1])+'-add'; 
		var form='<form method="POST" id="success2" action="'+url+'">';
		form+='<input type="hidden" name="description"  value="'+(tt.description )+'"  />';
		form+='<input type="hidden" name="shop_order_number"  value="'+(tt.shop_order_number )+'"  />';
		form+='</form>';
		jQuery('body').append(form);
		jQuery('#success2').submit();
   		
	}
	
   
/* -----------------menu new -------------------------------------------- */

	function nemu_new(){
		$(document).on('click', '.men1 #selection-categs a',function(e){
			e.preventDefault();
			$('#selection-producers-d').empty();
			 var bread= $(this).text();
			 var  cat=$(this).attr('href');
			 bread= '><a href="'+cat+'">'+bread.replace(/\d+/,'')+'</a>';
			 $('.bread.s1').empty().append(bread);
			 $('.bread.s2 a').parent().empty();
			 $('.bread.s3 a').parent().empty();
			 var sub='<li class="all_cat">'+'<span href="'+cat+'">Все рубрики</span></li>';
			 $.post('/menu',{'url':cat},function(d){
				 
					 d =JSON.parse(d);
						
					 $(d).map(function(i,v){
						 sub +='<li ><a href="'+v.url+'" '+((v.no==1)?'class="no"':'')+'>'+v.name+' <span class="count_cat">'+v.count+'</span></a><li>';
					 })
					  $('#selection-sub-categs').empty().append(sub);
			 })
		})
		
		
		$(document).on('click', '.men1 #selection-sub-categs a:not(.no)',function(e){
			e.preventDefault();
			
			 var bread= $(this).text();
			 var  cat=$(this).attr('href');
			 bread= '><a href="'+cat+'">'+bread.replace(/\d+/,'')+'</a>';
			 
			 $('.bread.s2').empty().append(bread);
			 $('.bread.s3 a').parent().empty();
			 
			 
					
					var text='Все города';
					if(/^(.*products.*)|(.*ads.*)$/.test(cat)){
						var text='Все подрубрики';
                        						
					} 
			 
			 
			 var sub='<li class="all_cat">'+'<a href="'+cat+'">'+text+'</li>';
			 $.post('/menu',{'url':cat},function(d){
					 
					try{
					var flag=1;		
					d =JSON.parse(d);
					 if(!d.length){
						/* location.pathname=cat; */
					 };
					}catch(e){
						flag=0;
						location.pathname=cat;
					} 
					 
					if(flag){
						 $(d).map(function(i,v){
							 sub +='<li '+((v.no)?'class="no"':'')+'><a href="'+v.url+'" target="_self">'+v.name+' <span class="count_sub">'+v.count+'</span></a><li>';
						 })
						   console.log(sub);
						  $('#selection-producers-d').empty().append(sub);
					}	  
			})
			
			
		})
		
		$(document).on('click', 'a.no',function(e){
				var url =$(this).attr('href');
				location.href=url;
			}) 
		
		$(document).on('click', '.men1 .all_cat span',function(e){
			
			var path=$(this).attr('href');
			location.href=path;

		}) 
		
		
	}
	nemu_new()	
	bred_init();
	 function bred_init(){
		
		if($('.s1 a').length){
			var url= $('.s1 a').attr('href');
			$('#selection-categs').find('a[href="'+url+'"]').addClass('active');
			 
			
			$.post('/menu',{'url':url},function(d){
				 
					 d =JSON.parse(d);
					 var sub='<li class="all_cat">'+'<span href="'+url+'">Все рубрики</span></li>';
					 
					 $(d).map(function(i,v){
						 sub +='<li ><a href="'+v.url+'" '+((v.no==1)?'class="no"':'')+'>'+v.name+' <span class="count_cat">'+v.count+'</span></a><li>';
					 })
					  $('#selection-sub-categs').empty().append(sub);
					  $('#selection-sub-categs').find('a[href="'+url+'"]').addClass('active');
					   
			 })
			
			
		}
		if($('.s2 a').length){
			var url= $('.s2 a').attr('href');
			var set= url;
			$.post('/menu',{'url':url},function(d){
				     
					d =JSON.parse(d);
					 
                     					 
					var re='/^(.products.)|(.ads.)\d$/';
					
					var text='Все города';
					if(/^(.*products.*)|(.*ads.*)$/.test(set)){
						var text='Все подрубрики';
                        						
					} 
					  console.log(text);
					 var sub='<li class="all_cat">'+'<a href="'+set+'">'+text+'</li>';
					 $(d).map(function(i,v){
						 sub +='<li><a href="'+v.url+'" '+((v.no==1)?'class="no"':'')+'>'+v.name+' <span class="count_cat">'+v.count+'</span></a><li>';
					 })
					 
					$('#selection-producers-d').empty().append(sub); 
					var url= $('.s3 a').attr('href');
					$('#selection-producers-d').find('a[href="'+url+'"]').addClass('active');
			 })
		} 	
			
	}
	
	$('.men1 #selection-categs a[href="/demand"]').click(function(){
			location.pathname='/demand';
		}) 
		var classHover='';
		/* 
		$('#selection-categs li a').hover(function(){
			 var cl=  $('.ic i',$(this)).attr('class');
			 classHover=cl;
			cl='hover-'+cl;
			$('.ic i',$(this)).attr('class',cl);
		}, function(){
			  $('.ic i', $(this)).attr('class',classHover);
		}) */
		$('#selection-categs li a.active i')
			var cl= $('#selection-categs li a.active i').attr('class');
			 cl='hover-'+cl;
		$('#selection-categs li a.active i').attr('class',cl);
		
		$('#selection-categs li a').click(function(){
			  $('#selection-categs li a i[class^=hover-min-navi-icon-]').map(function(i,v){
				 var n=  $(v).attr('class');
				  n=n.replace('hover-','');
				  $(v).attr('class',n);
			  })
			 var cl=  $('.ic i',$(this)).attr('class');
			
			 cl='hover-'+cl; 
		$('.ic i',$(this)).attr('class',cl);	
		})
			
/* -----------------menu new end -------------------------------------------- */



	if($(document).width()<800){
		$('*').removClass('.ajax-link');
	} 

}; 
